2019-01-17 00:41:47.831 +00:00 [WRN] No XML encryptor configured. Key "916cf00d-852b-47c9-a606-6043fd03920e" may be persisted to storage in unencrypted form.
2019-01-17 00:41:48.689 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-17 00:41:49.853 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-17 00:41:49.951 +00:00 [INF] Setting number of workers to 1
2019-01-17 00:41:49.981 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-17 00:41:49.985 +00:00 [INF] Bus Rebus 1 started
2019-01-17 00:41:50.050 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-17 00:41:50.168 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-17 00:41:50.183 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-17 00:41:50.183 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-17 00:41:50.184 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-17 00:41:50.185 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-17 00:41:50.185 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-17 00:41:50.233 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-17 00:52:29.906 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-17 00:52:30.266 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-17 00:52:30.267 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-17 00:52:30.278 +00:00 [DBG] Start discovery request
2019-01-17 00:52:30.427 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-17 00:52:30.429 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-17 00:52:30.429 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-17 00:52:30.441 +00:00 [DBG] Start key discovery request
2019-01-17 00:52:30.617 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 00:52:30.618 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 00:52:30.625 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-17 00:52:30.631 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-17 00:52:30.631 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-17 00:52:30.642 +00:00 [DBG] Start authorize request
2019-01-17 00:52:30.657 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 00:52:30.665 +00:00 [DBG] No user present in authorize request
2019-01-17 00:52:30.675 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 00:52:30.694 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:30.704 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 00:52:30.707 +00:00 [DBG] No PKCE used.
2019-01-17 00:52:30.763 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 00:52:30.784 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8ClfJbpMvFhKkmWPSdKzBKXkQh9-UhOni7avzjaKSAi7C5Pd5yymMI4mOuOlIPoBI9D7-qPDj4-B8MSkkVU5CbgdQ7tysto6JDjA3rRkn5NVXyQNHcZugpka57bBDNvFq9iNeHiCH5aWC-QxjIcm2O0wSq3NT9Rly3La7MOL7KfaEQHF0H7XTy4ecYBwTsdW0GD7XF5C5Ju2aChboCB7dz1yRt5F-gllj4dHMHk7McZ2BwuWJy2xWZ__Cpe9zWBwEBwx5-Vy757UeJl3mjvGL8lQ4s_TWlmsAz4Psel1cgEU4Y7T14w8G9wI0Cm8lLx6p3PI1Si8KFP0VJdXvSc2b6E",
  "Nonce": "636832831505311653.NTE0YjZjNjQtZjM2YS00NGIzLTk5ZDItNDJiOTEyYWZmMzlkMzk0MWIwMDAtMmVmYy00ZjkzLWE5ZGUtYjFiYjZiODhhMWZl",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636832831505311653.NTE0YjZjNjQtZjM2YS00NGIzLTk5ZDItNDJiOTEyYWZmMzlkMzk0MWIwMDAtMmVmYy00ZjkzLWE5ZGUtYjFiYjZiODhhMWZl",
    "state": "CfDJ8ClfJbpMvFhKkmWPSdKzBKXkQh9-UhOni7avzjaKSAi7C5Pd5yymMI4mOuOlIPoBI9D7-qPDj4-B8MSkkVU5CbgdQ7tysto6JDjA3rRkn5NVXyQNHcZugpka57bBDNvFq9iNeHiCH5aWC-QxjIcm2O0wSq3NT9Rly3La7MOL7KfaEQHF0H7XTy4ecYBwTsdW0GD7XF5C5Ju2aChboCB7dz1yRt5F-gllj4dHMHk7McZ2BwuWJy2xWZ__Cpe9zWBwEBwx5-Vy757UeJl3mjvGL8lQ4s_TWlmsAz4Psel1cgEU4Y7T14w8G9wI0Cm8lLx6p3PI1Si8KFP0VJdXvSc2b6E",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 00:52:30.816 +00:00 [INF] Showing login: User is not authenticated
2019-01-17 00:52:30.834 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 00:52:30.834 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 00:52:31.261 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 00:52:31.261 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 00:52:31.261 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:31.262 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 00:52:31.262 +00:00 [DBG] No PKCE used.
2019-01-17 00:52:31.263 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 00:52:31.269 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:33.919 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-17 00:52:33.921 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 00:52:33.921 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 00:52:35.086 +00:00 [DBG] Augmenting SignInContext
2019-01-17 00:52:35.090 +00:00 [DBG] Adding idp claim with value: local
2019-01-17 00:52:35.090 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-17 00:52:35.092 +00:00 [DBG] Adding auth_time claim with value: 1547686355
2019-01-17 00:52:35.097 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 00:52:35.110 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-17 00:52:35.153 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLJS2O79UBUS:00000004",
  "TimeStamp": "2019-01-17T00:52:35Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:52:35.193 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-17 00:52:35.195 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-17 00:52:35.195 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-17 00:52:35.206 +00:00 [DBG] Start authorize callback request
2019-01-17 00:52:35.215 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 00:52:35.215 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 00:52:35.215 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:35.215 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 00:52:35.215 +00:00 [DBG] No PKCE used.
2019-01-17 00:52:35.216 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 00:52:35.216 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8ClfJbpMvFhKkmWPSdKzBKXkQh9-UhOni7avzjaKSAi7C5Pd5yymMI4mOuOlIPoBI9D7-qPDj4-B8MSkkVU5CbgdQ7tysto6JDjA3rRkn5NVXyQNHcZugpka57bBDNvFq9iNeHiCH5aWC-QxjIcm2O0wSq3NT9Rly3La7MOL7KfaEQHF0H7XTy4ecYBwTsdW0GD7XF5C5Ju2aChboCB7dz1yRt5F-gllj4dHMHk7McZ2BwuWJy2xWZ__Cpe9zWBwEBwx5-Vy757UeJl3mjvGL8lQ4s_TWlmsAz4Psel1cgEU4Y7T14w8G9wI0Cm8lLx6p3PI1Si8KFP0VJdXvSc2b6E",
  "Nonce": "636832831505311653.NTE0YjZjNjQtZjM2YS00NGIzLTk5ZDItNDJiOTEyYWZmMzlkMzk0MWIwMDAtMmVmYy00ZjkzLWE5ZGUtYjFiYjZiODhhMWZl",
  "SessionId": "17e422dc761c7d09f7b0bf0260b3e153",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636832831505311653.NTE0YjZjNjQtZjM2YS00NGIzLTk5ZDItNDJiOTEyYWZmMzlkMzk0MWIwMDAtMmVmYy00ZjkzLWE5ZGUtYjFiYjZiODhhMWZl",
    "state": "CfDJ8ClfJbpMvFhKkmWPSdKzBKXkQh9-UhOni7avzjaKSAi7C5Pd5yymMI4mOuOlIPoBI9D7-qPDj4-B8MSkkVU5CbgdQ7tysto6JDjA3rRkn5NVXyQNHcZugpka57bBDNvFq9iNeHiCH5aWC-QxjIcm2O0wSq3NT9Rly3La7MOL7KfaEQHF0H7XTy4ecYBwTsdW0GD7XF5C5Ju2aChboCB7dz1yRt5F-gllj4dHMHk7McZ2BwuWJy2xWZ__Cpe9zWBwEBwx5-Vy757UeJl3mjvGL8lQ4s_TWlmsAz4Psel1cgEU4Y7T14w8G9wI0Cm8lLx6p3PI1Si8KFP0VJdXvSc2b6E",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 00:52:35.239 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-17 00:52:35.239 +00:00 [INF] Showing consent: User has not yet consented
2019-01-17 00:52:35.294 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 00:52:35.294 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:35.294 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 00:52:35.294 +00:00 [DBG] No PKCE used.
2019-01-17 00:52:35.295 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 00:52:35.295 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:37.454 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-17 00:52:37.495 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 00:52:37.495 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:37.495 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 00:52:37.495 +00:00 [DBG] No PKCE used.
2019-01-17 00:52:37.497 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 00:52:37.526 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-17 00:52:37.527 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-17 00:52:37.527 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-17 00:52:37.530 +00:00 [DBG] Start authorize callback request
2019-01-17 00:52:37.547 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 00:52:37.548 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 00:52:37.550 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:37.551 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 00:52:37.552 +00:00 [DBG] No PKCE used.
2019-01-17 00:52:37.554 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 00:52:37.555 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8ClfJbpMvFhKkmWPSdKzBKXkQh9-UhOni7avzjaKSAi7C5Pd5yymMI4mOuOlIPoBI9D7-qPDj4-B8MSkkVU5CbgdQ7tysto6JDjA3rRkn5NVXyQNHcZugpka57bBDNvFq9iNeHiCH5aWC-QxjIcm2O0wSq3NT9Rly3La7MOL7KfaEQHF0H7XTy4ecYBwTsdW0GD7XF5C5Ju2aChboCB7dz1yRt5F-gllj4dHMHk7McZ2BwuWJy2xWZ__Cpe9zWBwEBwx5-Vy757UeJl3mjvGL8lQ4s_TWlmsAz4Psel1cgEU4Y7T14w8G9wI0Cm8lLx6p3PI1Si8KFP0VJdXvSc2b6E",
  "Nonce": "636832831505311653.NTE0YjZjNjQtZjM2YS00NGIzLTk5ZDItNDJiOTEyYWZmMzlkMzk0MWIwMDAtMmVmYy00ZjkzLWE5ZGUtYjFiYjZiODhhMWZl",
  "SessionId": "17e422dc761c7d09f7b0bf0260b3e153",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636832831505311653.NTE0YjZjNjQtZjM2YS00NGIzLTk5ZDItNDJiOTEyYWZmMzlkMzk0MWIwMDAtMmVmYy00ZjkzLWE5ZGUtYjFiYjZiODhhMWZl",
    "state": "CfDJ8ClfJbpMvFhKkmWPSdKzBKXkQh9-UhOni7avzjaKSAi7C5Pd5yymMI4mOuOlIPoBI9D7-qPDj4-B8MSkkVU5CbgdQ7tysto6JDjA3rRkn5NVXyQNHcZugpka57bBDNvFq9iNeHiCH5aWC-QxjIcm2O0wSq3NT9Rly3La7MOL7KfaEQHF0H7XTy4ecYBwTsdW0GD7XF5C5Ju2aChboCB7dz1yRt5F-gllj4dHMHk7McZ2BwuWJy2xWZ__Cpe9zWBwEBwx5-Vy757UeJl3mjvGL8lQ4s_TWlmsAz4Psel1cgEU4Y7T14w8G9wI0Cm8lLx6p3PI1Si8KFP0VJdXvSc2b6E",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 00:52:37.564 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-17 00:52:37.583 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-17 00:52:37.594 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-17 00:52:37.600 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 00:52:37.619 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-17 00:52:37.648 +00:00 [DBG] Creating Implicit Flow response.
2019-01-17 00:52:37.663 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-17 00:52:37.821 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****4FsA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****78fc"
    }
  ],
  "ActivityId": "0HLJS2O79UBUS:00000008",
  "TimeStamp": "2019-01-17T00:52:37Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:52:37.836 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8ClfJbpMvFhKkmWPSdKzBKXkQh9-UhOni7avzjaKSAi7C5Pd5yymMI4mOuOlIPoBI9D7-qPDj4-B8MSkkVU5CbgdQ7tysto6JDjA3rRkn5NVXyQNHcZugpka57bBDNvFq9iNeHiCH5aWC-QxjIcm2O0wSq3NT9Rly3La7MOL7KfaEQHF0H7XTy4ecYBwTsdW0GD7XF5C5Ju2aChboCB7dz1yRt5F-gllj4dHMHk7McZ2BwuWJy2xWZ__Cpe9zWBwEBwx5-Vy757UeJl3mjvGL8lQ4s_TWlmsAz4Psel1cgEU4Y7T14w8G9wI0Cm8lLx6p3PI1Si8KFP0VJdXvSc2b6E",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-17 00:52:37.872 +00:00 [DBG] Augmenting SignInContext
2019-01-17 00:52:37.873 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-17 00:52:38.386 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 00:52:38.395 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 00:52:38.395 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 00:52:38.413 +00:00 [DBG] Start token request.
2019-01-17 00:52:38.426 +00:00 [DBG] Start client validation
2019-01-17 00:52:38.437 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 00:52:38.444 +00:00 [DBG] Start parsing for secret in post body
2019-01-17 00:52:38.450 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-17 00:52:38.451 +00:00 [DBG] Secret id found: MVC
2019-01-17 00:52:38.451 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:38.464 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 00:52:38.465 +00:00 [DBG] Client validation success
2019-01-17 00:52:38.473 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS2O79UBUR:00000003",
  "TimeStamp": "2019-01-17T00:52:38Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:52:38.488 +00:00 [DBG] Start token request validation
2019-01-17 00:52:38.502 +00:00 [DBG] Start validation of authorization code token request
2019-01-17 00:52:38.525 +00:00 [DBG] Validation of authorization code token request success
2019-01-17 00:52:38.531 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "9d3022e4a9458f0e72bf51e67832cc70a51afa45fb92bca8f6bfcc9a938b78fc",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "9d3022e4a9458f0e72bf51e67832cc70a51afa45fb92bca8f6bfcc9a938b78fc",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-17 00:52:38.560 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:38.575 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 00:52:38.575 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 00:52:38.597 +00:00 [DBG] Creating refresh token
2019-01-17 00:52:38.597 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-17 00:52:38.626 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:38.627 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-17 00:52:38.647 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****kKXg"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****736c"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****yl_Q"
    }
  ],
  "ActivityId": "0HLJS2O79UBUR:00000003",
  "TimeStamp": "2019-01-17T00:52:38Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:52:38.650 +00:00 [DBG] Token request success.
2019-01-17 00:52:38.695 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-17 00:52:38.697 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-17 00:52:38.697 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-17 00:52:38.712 +00:00 [DBG] Start userinfo request
2019-01-17 00:52:38.723 +00:00 [DBG] Bearer token found in header
2019-01-17 00:52:38.798 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:38.803 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:38.807 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-17 00:52:38.814 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1547686358,
    "exp": 1547689958,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547686355,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-17 00:52:38.836 +00:00 [DBG] Creating userinfo response
2019-01-17 00:52:38.848 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-17 00:52:38.854 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-17 00:52:38.859 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-17 00:52:38.859 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-17 00:52:38.875 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-17 00:52:38.875 +00:00 [DBG] End userinfo request
2019-01-17 00:52:39.527 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 00:52:39.528 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 00:52:39.528 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 00:52:39.528 +00:00 [DBG] Start token request.
2019-01-17 00:52:39.528 +00:00 [DBG] Start client validation
2019-01-17 00:52:39.529 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 00:52:39.539 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 00:52:39.540 +00:00 [DBG] Secret id found: MVC
2019-01-17 00:52:39.540 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:39.540 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 00:52:39.540 +00:00 [DBG] Client validation success
2019-01-17 00:52:39.541 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS2O79UBUV:00000001",
  "TimeStamp": "2019-01-17T00:52:39Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:52:39.565 +00:00 [DBG] Start token request validation
2019-01-17 00:52:39.610 +00:00 [DBG] Start client credentials token request validation
2019-01-17 00:52:39.638 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 00:52:39.640 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 00:52:39.655 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 00:52:39.668 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****qj0w"
    }
  ],
  "ActivityId": "0HLJS2O79UBUV:00000001",
  "TimeStamp": "2019-01-17T00:52:39Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:52:39.668 +00:00 [DBG] Token request success.
2019-01-17 00:52:40.222 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-17 00:52:40.223 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-17 00:52:40.224 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-17 00:52:40.225 +00:00 [DBG] Start discovery request
2019-01-17 00:52:40.317 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-17 00:52:40.319 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-17 00:52:40.319 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-17 00:52:40.323 +00:00 [DBG] Start key discovery request
2019-01-17 00:52:47.379 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 00:52:47.380 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 00:52:47.380 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 00:52:47.380 +00:00 [DBG] Start token request.
2019-01-17 00:52:47.380 +00:00 [DBG] Start client validation
2019-01-17 00:52:47.380 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 00:52:47.380 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 00:52:47.380 +00:00 [DBG] Secret id found: MVC
2019-01-17 00:52:47.380 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:47.380 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 00:52:47.380 +00:00 [DBG] Client validation success
2019-01-17 00:52:47.380 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS2O79UBV1:00000001",
  "TimeStamp": "2019-01-17T00:52:47Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:52:47.389 +00:00 [DBG] Start token request validation
2019-01-17 00:52:47.389 +00:00 [DBG] Start client credentials token request validation
2019-01-17 00:52:47.390 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 00:52:47.393 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 00:52:47.393 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 00:52:47.398 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****oylw"
    }
  ],
  "ActivityId": "0HLJS2O79UBV1:00000001",
  "TimeStamp": "2019-01-17T00:52:47Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:52:47.403 +00:00 [DBG] Token request success.
2019-01-17 00:52:49.220 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 00:52:49.220 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 00:52:49.220 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 00:52:49.220 +00:00 [DBG] Start token request.
2019-01-17 00:52:49.220 +00:00 [DBG] Start client validation
2019-01-17 00:52:49.220 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 00:52:49.220 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 00:52:49.220 +00:00 [DBG] Secret id found: MVC
2019-01-17 00:52:49.224 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:49.224 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 00:52:49.225 +00:00 [DBG] Client validation success
2019-01-17 00:52:49.225 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS2O79UBV2:00000001",
  "TimeStamp": "2019-01-17T00:52:49Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:52:49.230 +00:00 [DBG] Start token request validation
2019-01-17 00:52:49.230 +00:00 [DBG] Start client credentials token request validation
2019-01-17 00:52:49.231 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 00:52:49.231 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 00:52:49.231 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 00:52:49.254 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****MlYQ"
    }
  ],
  "ActivityId": "0HLJS2O79UBV2:00000001",
  "TimeStamp": "2019-01-17T00:52:49Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:52:49.254 +00:00 [DBG] Token request success.
2019-01-17 00:52:50.843 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 00:52:50.870 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 00:52:50.870 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 00:52:50.870 +00:00 [DBG] Start token request.
2019-01-17 00:52:50.870 +00:00 [DBG] Start client validation
2019-01-17 00:52:50.870 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 00:52:50.870 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 00:52:50.870 +00:00 [DBG] Secret id found: MVC
2019-01-17 00:52:50.870 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:52:50.870 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 00:52:50.870 +00:00 [DBG] Client validation success
2019-01-17 00:52:50.870 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS2O79UBV3:00000001",
  "TimeStamp": "2019-01-17T00:52:50Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:52:50.915 +00:00 [DBG] Start token request validation
2019-01-17 00:52:50.915 +00:00 [DBG] Start client credentials token request validation
2019-01-17 00:52:50.915 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 00:52:50.915 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 00:52:50.917 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 00:52:50.927 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Gg1w"
    }
  ],
  "ActivityId": "0HLJS2O79UBV3:00000001",
  "TimeStamp": "2019-01-17T00:52:50Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:52:50.929 +00:00 [DBG] Token request success.
2019-01-17 00:53:01.998 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 00:53:01.998 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 00:53:01.998 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 00:53:01.999 +00:00 [DBG] Start token request.
2019-01-17 00:53:01.999 +00:00 [DBG] Start client validation
2019-01-17 00:53:01.999 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 00:53:01.999 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 00:53:01.999 +00:00 [DBG] Secret id found: MVC
2019-01-17 00:53:01.999 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:53:01.999 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 00:53:01.999 +00:00 [DBG] Client validation success
2019-01-17 00:53:02.000 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS2O79UBV4:00000001",
  "TimeStamp": "2019-01-17T00:53:01Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:53:02.024 +00:00 [DBG] Start token request validation
2019-01-17 00:53:02.024 +00:00 [DBG] Start client credentials token request validation
2019-01-17 00:53:02.026 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 00:53:02.026 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 00:53:02.027 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 00:53:02.033 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****McpQ"
    }
  ],
  "ActivityId": "0HLJS2O79UBV4:00000001",
  "TimeStamp": "2019-01-17T00:53:02Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:53:02.034 +00:00 [DBG] Token request success.
2019-01-17 00:53:09.175 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 00:53:09.176 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 00:53:09.176 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 00:53:09.176 +00:00 [DBG] Start token request.
2019-01-17 00:53:09.176 +00:00 [DBG] Start client validation
2019-01-17 00:53:09.176 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 00:53:09.176 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 00:53:09.176 +00:00 [DBG] Secret id found: MVC
2019-01-17 00:53:09.176 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 00:53:09.176 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 00:53:09.176 +00:00 [DBG] Client validation success
2019-01-17 00:53:09.176 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS2O79UBV5:00000001",
  "TimeStamp": "2019-01-17T00:53:09Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:53:09.186 +00:00 [DBG] Start token request validation
2019-01-17 00:53:09.187 +00:00 [DBG] Start client credentials token request validation
2019-01-17 00:53:09.187 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 00:53:09.188 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 00:53:09.188 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 00:53:09.192 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****y3dA"
    }
  ],
  "ActivityId": "0HLJS2O79UBV5:00000001",
  "TimeStamp": "2019-01-17T00:53:09Z",
  "ProcessId": 21,
  "LocalIpAddress": "172.18.0.5:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 00:53:09.201 +00:00 [DBG] Token request success.
2019-01-17 00:53:09.792 +00:00 [INF] Message received:
2019-01-17 00:53:09.793 +00:00 [INF] ----------------------------------
2019-01-17 00:53:09.802 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"9f6bcee0-fa9b-4109-aedc-1c1c5cba8d3e","CreationDate":"2019-01-17T00:53:09.7033631Z"}
2019-01-17 00:53:09.804 +00:00 [INF] ----------------------------------
2019-01-17 00:53:11.133 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 025d699d-94b0-4bda-80e6-16c34cd020e5 to 1 handlers took 1348 ms
2019-01-17 01:45:00.211 +00:00 [WRN] No XML encryptor configured. Key "4ef2a586-e7b9-473b-b9f9-8665b3a67340" may be persisted to storage in unencrypted form.
2019-01-17 01:45:01.197 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-17 01:45:02.451 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-17 01:45:02.552 +00:00 [INF] Setting number of workers to 1
2019-01-17 01:45:02.608 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-17 01:45:02.658 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-17 01:45:02.664 +00:00 [INF] Bus Rebus 1 started
2019-01-17 01:45:02.916 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-17 01:45:02.938 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-17 01:45:02.998 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-17 01:45:03.013 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-17 01:45:03.014 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-17 01:45:03.016 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-17 01:45:03.016 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-17 01:45:50.696 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-17 01:45:50.965 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-17 01:45:50.967 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-17 01:45:50.975 +00:00 [DBG] Start discovery request
2019-01-17 01:45:51.172 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-17 01:45:51.174 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-17 01:45:51.174 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-17 01:45:51.184 +00:00 [DBG] Start key discovery request
2019-01-17 01:45:51.416 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 01:45:51.417 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 01:45:51.425 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-17 01:45:51.434 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-17 01:45:51.435 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-17 01:45:51.447 +00:00 [DBG] Start authorize request
2019-01-17 01:45:51.466 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 01:45:51.478 +00:00 [DBG] No user present in authorize request
2019-01-17 01:45:51.491 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 01:45:51.519 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:45:51.529 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 01:45:51.532 +00:00 [DBG] No PKCE used.
2019-01-17 01:45:51.584 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 01:45:51.600 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8OnWkxO-tKxPmSVXrFYYKqvk28uLjh0-bVoTPG3YQjOQzI9oSyBo1Ng0DVPBgOIUrU896rzI1Hp3h3Mb27fxixGt40owFApGfNObOLR13zwVd00HzhiQ1bAnBhsMo4PrnDDxqzK2nUxb6swaCQB-l1Dh9nPpc6LzbJpmuKddr5DVQosNzXbnyUw6YStlWmmZ2DjZNfe2zYl5Lxzr1wJmgzInpP8lHR-LlYUJmG4bwS1rQWZuO87QH7VT5Er6IU0yhhcjaPlDFiI4_i1jI6UYbiMi6J1gQmI6WrbdtWDsJGXTOC0YRw6CiXlScorEznQh2Cg97Oiu26JzGnfn9-TDHP4",
  "Nonce": "636832863513243147.YTJmN2YzOWUtZTcxZS00Y2MwLTg2YzktY2QyOTdmYjA4YzBjNTA1MmMxMzAtZDNlMy00NWY3LWFhMzktYTVkNWE0YTkzMWJk",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636832863513243147.YTJmN2YzOWUtZTcxZS00Y2MwLTg2YzktY2QyOTdmYjA4YzBjNTA1MmMxMzAtZDNlMy00NWY3LWFhMzktYTVkNWE0YTkzMWJk",
    "state": "CfDJ8OnWkxO-tKxPmSVXrFYYKqvk28uLjh0-bVoTPG3YQjOQzI9oSyBo1Ng0DVPBgOIUrU896rzI1Hp3h3Mb27fxixGt40owFApGfNObOLR13zwVd00HzhiQ1bAnBhsMo4PrnDDxqzK2nUxb6swaCQB-l1Dh9nPpc6LzbJpmuKddr5DVQosNzXbnyUw6YStlWmmZ2DjZNfe2zYl5Lxzr1wJmgzInpP8lHR-LlYUJmG4bwS1rQWZuO87QH7VT5Er6IU0yhhcjaPlDFiI4_i1jI6UYbiMi6J1gQmI6WrbdtWDsJGXTOC0YRw6CiXlScorEznQh2Cg97Oiu26JzGnfn9-TDHP4",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 01:45:51.617 +00:00 [INF] Showing login: User is not authenticated
2019-01-17 01:45:51.633 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 01:45:51.634 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 01:45:51.977 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 01:45:51.979 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 01:45:51.980 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:45:51.981 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 01:45:51.982 +00:00 [DBG] No PKCE used.
2019-01-17 01:45:51.983 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 01:45:51.988 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:45:55.023 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-17 01:45:55.024 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 01:45:55.024 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 01:45:56.367 +00:00 [DBG] Augmenting SignInContext
2019-01-17 01:45:56.373 +00:00 [DBG] Adding idp claim with value: local
2019-01-17 01:45:56.374 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-17 01:45:56.375 +00:00 [DBG] Adding auth_time claim with value: 1547689556
2019-01-17 01:45:56.382 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 01:45:56.399 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-17 01:45:56.428 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLJS3M171SV0:00000003",
  "TimeStamp": "2019-01-17T01:45:56Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 01:45:56.452 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-17 01:45:56.456 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-17 01:45:56.456 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-17 01:45:56.465 +00:00 [DBG] Start authorize callback request
2019-01-17 01:45:56.474 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 01:45:56.474 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 01:45:56.474 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:45:56.475 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 01:45:56.475 +00:00 [DBG] No PKCE used.
2019-01-17 01:45:56.477 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 01:45:56.477 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8OnWkxO-tKxPmSVXrFYYKqvk28uLjh0-bVoTPG3YQjOQzI9oSyBo1Ng0DVPBgOIUrU896rzI1Hp3h3Mb27fxixGt40owFApGfNObOLR13zwVd00HzhiQ1bAnBhsMo4PrnDDxqzK2nUxb6swaCQB-l1Dh9nPpc6LzbJpmuKddr5DVQosNzXbnyUw6YStlWmmZ2DjZNfe2zYl5Lxzr1wJmgzInpP8lHR-LlYUJmG4bwS1rQWZuO87QH7VT5Er6IU0yhhcjaPlDFiI4_i1jI6UYbiMi6J1gQmI6WrbdtWDsJGXTOC0YRw6CiXlScorEznQh2Cg97Oiu26JzGnfn9-TDHP4",
  "Nonce": "636832863513243147.YTJmN2YzOWUtZTcxZS00Y2MwLTg2YzktY2QyOTdmYjA4YzBjNTA1MmMxMzAtZDNlMy00NWY3LWFhMzktYTVkNWE0YTkzMWJk",
  "SessionId": "c9ddc506b69c0a0cca3775188ec8180e",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636832863513243147.YTJmN2YzOWUtZTcxZS00Y2MwLTg2YzktY2QyOTdmYjA4YzBjNTA1MmMxMzAtZDNlMy00NWY3LWFhMzktYTVkNWE0YTkzMWJk",
    "state": "CfDJ8OnWkxO-tKxPmSVXrFYYKqvk28uLjh0-bVoTPG3YQjOQzI9oSyBo1Ng0DVPBgOIUrU896rzI1Hp3h3Mb27fxixGt40owFApGfNObOLR13zwVd00HzhiQ1bAnBhsMo4PrnDDxqzK2nUxb6swaCQB-l1Dh9nPpc6LzbJpmuKddr5DVQosNzXbnyUw6YStlWmmZ2DjZNfe2zYl5Lxzr1wJmgzInpP8lHR-LlYUJmG4bwS1rQWZuO87QH7VT5Er6IU0yhhcjaPlDFiI4_i1jI6UYbiMi6J1gQmI6WrbdtWDsJGXTOC0YRw6CiXlScorEznQh2Cg97Oiu26JzGnfn9-TDHP4",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 01:45:56.502 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-17 01:45:56.502 +00:00 [INF] Showing consent: User has not yet consented
2019-01-17 01:45:56.576 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 01:45:56.576 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:45:56.576 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 01:45:56.577 +00:00 [DBG] No PKCE used.
2019-01-17 01:45:56.578 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 01:45:56.578 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:46:39.731 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-17 01:46:39.807 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 01:46:39.807 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:46:39.807 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 01:46:39.815 +00:00 [DBG] No PKCE used.
2019-01-17 01:46:39.815 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 01:46:39.848 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-17 01:46:39.848 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-17 01:46:39.849 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-17 01:46:39.849 +00:00 [DBG] Start authorize callback request
2019-01-17 01:46:39.863 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 01:46:39.864 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 01:46:39.864 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:46:39.864 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 01:46:39.864 +00:00 [DBG] No PKCE used.
2019-01-17 01:46:39.869 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 01:46:39.870 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8OnWkxO-tKxPmSVXrFYYKqvk28uLjh0-bVoTPG3YQjOQzI9oSyBo1Ng0DVPBgOIUrU896rzI1Hp3h3Mb27fxixGt40owFApGfNObOLR13zwVd00HzhiQ1bAnBhsMo4PrnDDxqzK2nUxb6swaCQB-l1Dh9nPpc6LzbJpmuKddr5DVQosNzXbnyUw6YStlWmmZ2DjZNfe2zYl5Lxzr1wJmgzInpP8lHR-LlYUJmG4bwS1rQWZuO87QH7VT5Er6IU0yhhcjaPlDFiI4_i1jI6UYbiMi6J1gQmI6WrbdtWDsJGXTOC0YRw6CiXlScorEznQh2Cg97Oiu26JzGnfn9-TDHP4",
  "Nonce": "636832863513243147.YTJmN2YzOWUtZTcxZS00Y2MwLTg2YzktY2QyOTdmYjA4YzBjNTA1MmMxMzAtZDNlMy00NWY3LWFhMzktYTVkNWE0YTkzMWJk",
  "SessionId": "c9ddc506b69c0a0cca3775188ec8180e",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636832863513243147.YTJmN2YzOWUtZTcxZS00Y2MwLTg2YzktY2QyOTdmYjA4YzBjNTA1MmMxMzAtZDNlMy00NWY3LWFhMzktYTVkNWE0YTkzMWJk",
    "state": "CfDJ8OnWkxO-tKxPmSVXrFYYKqvk28uLjh0-bVoTPG3YQjOQzI9oSyBo1Ng0DVPBgOIUrU896rzI1Hp3h3Mb27fxixGt40owFApGfNObOLR13zwVd00HzhiQ1bAnBhsMo4PrnDDxqzK2nUxb6swaCQB-l1Dh9nPpc6LzbJpmuKddr5DVQosNzXbnyUw6YStlWmmZ2DjZNfe2zYl5Lxzr1wJmgzInpP8lHR-LlYUJmG4bwS1rQWZuO87QH7VT5Er6IU0yhhcjaPlDFiI4_i1jI6UYbiMi6J1gQmI6WrbdtWDsJGXTOC0YRw6CiXlScorEznQh2Cg97Oiu26JzGnfn9-TDHP4",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 01:46:39.873 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-17 01:46:39.903 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-17 01:46:39.917 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-17 01:46:39.922 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 01:46:39.943 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-17 01:46:39.973 +00:00 [DBG] Creating Implicit Flow response.
2019-01-17 01:46:39.988 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-17 01:46:40.134 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****__Ig"
    },
    {
      "TokenType": "code",
      "TokenValue": "****59c7"
    }
  ],
  "ActivityId": "0HLJS3M171SV0:00000007",
  "TimeStamp": "2019-01-17T01:46:40Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 01:46:40.140 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8OnWkxO-tKxPmSVXrFYYKqvk28uLjh0-bVoTPG3YQjOQzI9oSyBo1Ng0DVPBgOIUrU896rzI1Hp3h3Mb27fxixGt40owFApGfNObOLR13zwVd00HzhiQ1bAnBhsMo4PrnDDxqzK2nUxb6swaCQB-l1Dh9nPpc6LzbJpmuKddr5DVQosNzXbnyUw6YStlWmmZ2DjZNfe2zYl5Lxzr1wJmgzInpP8lHR-LlYUJmG4bwS1rQWZuO87QH7VT5Er6IU0yhhcjaPlDFiI4_i1jI6UYbiMi6J1gQmI6WrbdtWDsJGXTOC0YRw6CiXlScorEznQh2Cg97Oiu26JzGnfn9-TDHP4",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-17 01:46:40.178 +00:00 [DBG] Augmenting SignInContext
2019-01-17 01:46:40.179 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-17 01:46:40.881 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 01:46:40.890 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 01:46:40.890 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 01:46:40.912 +00:00 [DBG] Start token request.
2019-01-17 01:46:40.930 +00:00 [DBG] Start client validation
2019-01-17 01:46:40.943 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 01:46:40.952 +00:00 [DBG] Start parsing for secret in post body
2019-01-17 01:46:40.958 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-17 01:46:40.959 +00:00 [DBG] Secret id found: MVC
2019-01-17 01:46:40.963 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:46:40.987 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 01:46:40.988 +00:00 [DBG] Client validation success
2019-01-17 01:46:41.004 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS3M171SUV:00000003",
  "TimeStamp": "2019-01-17T01:46:40Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 01:46:41.027 +00:00 [DBG] Start token request validation
2019-01-17 01:46:41.054 +00:00 [DBG] Start validation of authorization code token request
2019-01-17 01:46:41.084 +00:00 [DBG] Validation of authorization code token request success
2019-01-17 01:46:41.093 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "810e54100c442c2b49b92ff1262a026126d4824272a135f68d0a6fa6a3b559c7",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "810e54100c442c2b49b92ff1262a026126d4824272a135f68d0a6fa6a3b559c7",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-17 01:46:41.138 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:46:41.156 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 01:46:41.157 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 01:46:41.196 +00:00 [DBG] Creating refresh token
2019-01-17 01:46:41.197 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-17 01:46:41.234 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:46:41.235 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-17 01:46:41.257 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****DGnA"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****468f"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****7bGQ"
    }
  ],
  "ActivityId": "0HLJS3M171SUV:00000003",
  "TimeStamp": "2019-01-17T01:46:41Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 01:46:41.261 +00:00 [DBG] Token request success.
2019-01-17 01:46:41.336 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-17 01:46:41.341 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-17 01:46:41.342 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-17 01:46:41.356 +00:00 [DBG] Start userinfo request
2019-01-17 01:46:41.371 +00:00 [DBG] Bearer token found in header
2019-01-17 01:46:41.456 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:46:41.460 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:46:41.463 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-17 01:46:41.470 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1547689601,
    "exp": 1547693201,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547689556,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-17 01:46:41.487 +00:00 [DBG] Creating userinfo response
2019-01-17 01:46:41.495 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-17 01:46:41.501 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-17 01:46:41.511 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-17 01:46:41.513 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-17 01:46:41.525 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-17 01:46:41.526 +00:00 [DBG] End userinfo request
2019-01-17 01:46:42.148 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 01:46:42.150 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 01:46:42.151 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 01:46:42.152 +00:00 [DBG] Start token request.
2019-01-17 01:46:42.152 +00:00 [DBG] Start client validation
2019-01-17 01:46:42.152 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 01:46:42.154 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 01:46:42.154 +00:00 [DBG] Secret id found: MVC
2019-01-17 01:46:42.154 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:46:42.155 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 01:46:42.155 +00:00 [DBG] Client validation success
2019-01-17 01:46:42.155 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS3M171SV3:00000001",
  "TimeStamp": "2019-01-17T01:46:42Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 01:46:42.185 +00:00 [DBG] Start token request validation
2019-01-17 01:46:42.202 +00:00 [DBG] Start client credentials token request validation
2019-01-17 01:46:42.218 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 01:46:42.218 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 01:46:42.232 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 01:46:42.236 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****BqSQ"
    }
  ],
  "ActivityId": "0HLJS3M171SV3:00000001",
  "TimeStamp": "2019-01-17T01:46:42Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 01:46:42.236 +00:00 [DBG] Token request success.
2019-01-17 01:46:42.780 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-17 01:46:42.781 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-17 01:46:42.781 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-17 01:46:42.783 +00:00 [DBG] Start discovery request
2019-01-17 01:46:42.873 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-17 01:46:42.874 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-17 01:46:42.875 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-17 01:46:42.876 +00:00 [DBG] Start key discovery request
2019-01-17 01:46:56.886 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 01:46:56.887 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 01:46:56.887 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 01:46:56.887 +00:00 [DBG] Start token request.
2019-01-17 01:46:56.887 +00:00 [DBG] Start client validation
2019-01-17 01:46:56.887 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 01:46:56.887 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 01:46:56.887 +00:00 [DBG] Secret id found: MVC
2019-01-17 01:46:56.887 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:46:56.887 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 01:46:56.887 +00:00 [DBG] Client validation success
2019-01-17 01:46:56.888 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS3M171SV5:00000001",
  "TimeStamp": "2019-01-17T01:46:56Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 01:46:56.899 +00:00 [DBG] Start token request validation
2019-01-17 01:46:56.903 +00:00 [DBG] Start client credentials token request validation
2019-01-17 01:46:56.903 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 01:46:56.903 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 01:46:56.904 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 01:46:56.907 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****9BWw"
    }
  ],
  "ActivityId": "0HLJS3M171SV5:00000001",
  "TimeStamp": "2019-01-17T01:46:56Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 01:46:56.908 +00:00 [DBG] Token request success.
2019-01-17 01:47:00.470 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 01:47:00.471 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 01:47:00.472 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 01:47:00.472 +00:00 [DBG] Start token request.
2019-01-17 01:47:00.472 +00:00 [DBG] Start client validation
2019-01-17 01:47:00.472 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 01:47:00.472 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 01:47:00.472 +00:00 [DBG] Secret id found: MVC
2019-01-17 01:47:00.474 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:47:00.475 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 01:47:00.475 +00:00 [DBG] Client validation success
2019-01-17 01:47:00.477 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS3M171SV6:00000001",
  "TimeStamp": "2019-01-17T01:47:00Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 01:47:00.497 +00:00 [DBG] Start token request validation
2019-01-17 01:47:00.502 +00:00 [DBG] Start client credentials token request validation
2019-01-17 01:47:00.502 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 01:47:00.503 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 01:47:00.503 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 01:47:00.505 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****tLtw"
    }
  ],
  "ActivityId": "0HLJS3M171SV6:00000001",
  "TimeStamp": "2019-01-17T01:47:00Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 01:47:00.505 +00:00 [DBG] Token request success.
2019-01-17 01:47:49.455 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 01:47:49.456 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 01:47:49.457 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 01:47:49.457 +00:00 [DBG] Start token request.
2019-01-17 01:47:49.457 +00:00 [DBG] Start client validation
2019-01-17 01:47:49.457 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 01:47:49.458 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 01:47:49.458 +00:00 [DBG] Secret id found: MVC
2019-01-17 01:47:49.458 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 01:47:49.458 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 01:47:49.459 +00:00 [DBG] Client validation success
2019-01-17 01:47:49.459 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS3M171SV7:00000001",
  "TimeStamp": "2019-01-17T01:47:49Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 01:47:49.485 +00:00 [DBG] Start token request validation
2019-01-17 01:47:49.487 +00:00 [DBG] Start client credentials token request validation
2019-01-17 01:47:49.489 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 01:47:49.490 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 01:47:49.502 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 01:47:49.508 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****_DiQ"
    }
  ],
  "ActivityId": "0HLJS3M171SV7:00000001",
  "TimeStamp": "2019-01-17T01:47:49Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 01:47:49.534 +00:00 [DBG] Token request success.
2019-01-17 01:47:50.279 +00:00 [INF] Message received:
2019-01-17 01:47:50.279 +00:00 [INF] ----------------------------------
2019-01-17 01:47:50.291 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"48eb11da-acab-4a7b-81f4-dd7e44639d51","CreationDate":"2019-01-17T01:47:50.1764603Z"}
2019-01-17 01:47:50.293 +00:00 [INF] ----------------------------------
2019-01-17 01:47:51.715 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 1278a9b4-5c68-4d71-b1d5-3d399170179e to 1 handlers took 1442 ms
2019-01-17 04:02:40.537 +00:00 [WRN] No XML encryptor configured. Key "fb8b590a-3ccf-49b0-bcc6-d7d17650d90a" may be persisted to storage in unencrypted form.
2019-01-17 04:02:41.688 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-17 04:02:42.866 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-17 04:02:43.042 +00:00 [INF] Setting number of workers to 1
2019-01-17 04:02:43.074 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-17 04:02:43.093 +00:00 [INF] Bus Rebus 1 started
2019-01-17 04:02:43.204 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-17 04:02:43.455 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-17 04:02:43.490 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-17 04:02:43.539 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-17 04:02:43.540 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-17 04:02:43.543 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-17 04:02:43.547 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-17 04:02:43.549 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-17 04:04:33.232 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-17 04:04:33.585 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-17 04:04:33.586 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-17 04:04:33.593 +00:00 [DBG] Start discovery request
2019-01-17 04:04:33.854 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-17 04:04:33.856 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-17 04:04:33.857 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-17 04:04:33.891 +00:00 [DBG] Start key discovery request
2019-01-17 04:04:34.091 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:04:34.091 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:04:34.098 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-17 04:04:34.109 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-17 04:04:34.109 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-17 04:04:34.126 +00:00 [DBG] Start authorize request
2019-01-17 04:04:34.169 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:04:34.190 +00:00 [DBG] No user present in authorize request
2019-01-17 04:04:34.204 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:04:34.228 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:04:34.241 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:04:34.246 +00:00 [DBG] No PKCE used.
2019-01-17 04:04:34.308 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:04:34.329 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8O3-Gt_kLsRJo1_wGTojvFK7MpOThGcXIoFdfT6R3Pp5SZj-Dccv3mYkQ3QL7L0utH5ROACQSkof1V98wbbHPq_buTgISNgThNKyrpKBJsU8dxIakxydCKsuu_J057gNva1XQ5U8a5vDgBtCrq_E8jsHCc3JWoShxamDKqQ_JTUC2HNoPp-2AZgFktIQCgl4FyI_h8IboBd8CWAuY2jmi0yOd21JtW4WXYp6tZW9VPfyoWozItkDYVPwQYtZYWDAHhLrbvwsTjLU3e3GTi9kgGwyq5b13ifCvs2iDpl8S6eCwhjaC8HsZfeBZkxMXyguV0pTLChfOwyOfU9PN0kKFGg",
  "Nonce": "636832946739882152.OGM4ZWYwMzUtNDM2ZS00YjQxLWFhOTAtMzc1MjllYmUzYmI2OTgxNWQ3Y2UtZmU3Zi00ZDBjLWIyMDUtNjJjZGNlYjUyOWVm",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636832946739882152.OGM4ZWYwMzUtNDM2ZS00YjQxLWFhOTAtMzc1MjllYmUzYmI2OTgxNWQ3Y2UtZmU3Zi00ZDBjLWIyMDUtNjJjZGNlYjUyOWVm",
    "state": "CfDJ8O3-Gt_kLsRJo1_wGTojvFK7MpOThGcXIoFdfT6R3Pp5SZj-Dccv3mYkQ3QL7L0utH5ROACQSkof1V98wbbHPq_buTgISNgThNKyrpKBJsU8dxIakxydCKsuu_J057gNva1XQ5U8a5vDgBtCrq_E8jsHCc3JWoShxamDKqQ_JTUC2HNoPp-2AZgFktIQCgl4FyI_h8IboBd8CWAuY2jmi0yOd21JtW4WXYp6tZW9VPfyoWozItkDYVPwQYtZYWDAHhLrbvwsTjLU3e3GTi9kgGwyq5b13ifCvs2iDpl8S6eCwhjaC8HsZfeBZkxMXyguV0pTLChfOwyOfU9PN0kKFGg",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 04:04:34.358 +00:00 [INF] Showing login: User is not authenticated
2019-01-17 04:04:34.396 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:04:34.396 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:04:34.788 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:04:34.788 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:04:34.789 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:04:34.790 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:04:34.790 +00:00 [DBG] No PKCE used.
2019-01-17 04:04:34.790 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:04:34.796 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:04:38.784 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-17 04:04:38.786 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:04:38.786 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:04:40.471 +00:00 [DBG] Augmenting SignInContext
2019-01-17 04:04:40.477 +00:00 [DBG] Adding idp claim with value: local
2019-01-17 04:04:40.478 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-17 04:04:40.482 +00:00 [DBG] Adding auth_time claim with value: 1547697880
2019-01-17 04:04:40.488 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:04:40.503 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-17 04:04:40.535 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLJS63HGEB2C:00000003",
  "TimeStamp": "2019-01-17T04:04:40Z",
  "ProcessId": 20,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:04:40.562 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-17 04:04:40.565 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-17 04:04:40.565 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-17 04:04:40.579 +00:00 [DBG] Start authorize callback request
2019-01-17 04:04:40.588 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 04:04:40.588 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:04:40.588 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:04:40.588 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:04:40.590 +00:00 [DBG] No PKCE used.
2019-01-17 04:04:40.591 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:04:40.591 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8O3-Gt_kLsRJo1_wGTojvFK7MpOThGcXIoFdfT6R3Pp5SZj-Dccv3mYkQ3QL7L0utH5ROACQSkof1V98wbbHPq_buTgISNgThNKyrpKBJsU8dxIakxydCKsuu_J057gNva1XQ5U8a5vDgBtCrq_E8jsHCc3JWoShxamDKqQ_JTUC2HNoPp-2AZgFktIQCgl4FyI_h8IboBd8CWAuY2jmi0yOd21JtW4WXYp6tZW9VPfyoWozItkDYVPwQYtZYWDAHhLrbvwsTjLU3e3GTi9kgGwyq5b13ifCvs2iDpl8S6eCwhjaC8HsZfeBZkxMXyguV0pTLChfOwyOfU9PN0kKFGg",
  "Nonce": "636832946739882152.OGM4ZWYwMzUtNDM2ZS00YjQxLWFhOTAtMzc1MjllYmUzYmI2OTgxNWQ3Y2UtZmU3Zi00ZDBjLWIyMDUtNjJjZGNlYjUyOWVm",
  "SessionId": "6f895294f15942afcc56fa131caff54b",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636832946739882152.OGM4ZWYwMzUtNDM2ZS00YjQxLWFhOTAtMzc1MjllYmUzYmI2OTgxNWQ3Y2UtZmU3Zi00ZDBjLWIyMDUtNjJjZGNlYjUyOWVm",
    "state": "CfDJ8O3-Gt_kLsRJo1_wGTojvFK7MpOThGcXIoFdfT6R3Pp5SZj-Dccv3mYkQ3QL7L0utH5ROACQSkof1V98wbbHPq_buTgISNgThNKyrpKBJsU8dxIakxydCKsuu_J057gNva1XQ5U8a5vDgBtCrq_E8jsHCc3JWoShxamDKqQ_JTUC2HNoPp-2AZgFktIQCgl4FyI_h8IboBd8CWAuY2jmi0yOd21JtW4WXYp6tZW9VPfyoWozItkDYVPwQYtZYWDAHhLrbvwsTjLU3e3GTi9kgGwyq5b13ifCvs2iDpl8S6eCwhjaC8HsZfeBZkxMXyguV0pTLChfOwyOfU9PN0kKFGg",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 04:04:40.622 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-17 04:04:40.622 +00:00 [INF] Showing consent: User has not yet consented
2019-01-17 04:04:40.696 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:04:40.700 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:04:40.700 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:04:40.700 +00:00 [DBG] No PKCE used.
2019-01-17 04:04:40.703 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:04:40.705 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:04:51.109 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-17 04:04:51.270 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:04:51.270 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:04:51.271 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:04:51.272 +00:00 [DBG] No PKCE used.
2019-01-17 04:04:51.274 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:04:51.305 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-17 04:04:51.309 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-17 04:04:51.309 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-17 04:04:51.309 +00:00 [DBG] Start authorize callback request
2019-01-17 04:04:51.320 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 04:04:51.321 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:04:51.321 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:04:51.322 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:04:51.322 +00:00 [DBG] No PKCE used.
2019-01-17 04:04:51.327 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:04:51.331 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8O3-Gt_kLsRJo1_wGTojvFK7MpOThGcXIoFdfT6R3Pp5SZj-Dccv3mYkQ3QL7L0utH5ROACQSkof1V98wbbHPq_buTgISNgThNKyrpKBJsU8dxIakxydCKsuu_J057gNva1XQ5U8a5vDgBtCrq_E8jsHCc3JWoShxamDKqQ_JTUC2HNoPp-2AZgFktIQCgl4FyI_h8IboBd8CWAuY2jmi0yOd21JtW4WXYp6tZW9VPfyoWozItkDYVPwQYtZYWDAHhLrbvwsTjLU3e3GTi9kgGwyq5b13ifCvs2iDpl8S6eCwhjaC8HsZfeBZkxMXyguV0pTLChfOwyOfU9PN0kKFGg",
  "Nonce": "636832946739882152.OGM4ZWYwMzUtNDM2ZS00YjQxLWFhOTAtMzc1MjllYmUzYmI2OTgxNWQ3Y2UtZmU3Zi00ZDBjLWIyMDUtNjJjZGNlYjUyOWVm",
  "SessionId": "6f895294f15942afcc56fa131caff54b",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636832946739882152.OGM4ZWYwMzUtNDM2ZS00YjQxLWFhOTAtMzc1MjllYmUzYmI2OTgxNWQ3Y2UtZmU3Zi00ZDBjLWIyMDUtNjJjZGNlYjUyOWVm",
    "state": "CfDJ8O3-Gt_kLsRJo1_wGTojvFK7MpOThGcXIoFdfT6R3Pp5SZj-Dccv3mYkQ3QL7L0utH5ROACQSkof1V98wbbHPq_buTgISNgThNKyrpKBJsU8dxIakxydCKsuu_J057gNva1XQ5U8a5vDgBtCrq_E8jsHCc3JWoShxamDKqQ_JTUC2HNoPp-2AZgFktIQCgl4FyI_h8IboBd8CWAuY2jmi0yOd21JtW4WXYp6tZW9VPfyoWozItkDYVPwQYtZYWDAHhLrbvwsTjLU3e3GTi9kgGwyq5b13ifCvs2iDpl8S6eCwhjaC8HsZfeBZkxMXyguV0pTLChfOwyOfU9PN0kKFGg",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 04:04:51.334 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-17 04:04:51.363 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-17 04:04:51.380 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-17 04:04:51.386 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 04:04:51.411 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-17 04:04:51.455 +00:00 [DBG] Creating Implicit Flow response.
2019-01-17 04:04:51.474 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-17 04:04:51.708 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****uMEQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****2ff5"
    }
  ],
  "ActivityId": "0HLJS63HGEB2C:00000007",
  "TimeStamp": "2019-01-17T04:04:51Z",
  "ProcessId": 20,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:04:51.717 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8O3-Gt_kLsRJo1_wGTojvFK7MpOThGcXIoFdfT6R3Pp5SZj-Dccv3mYkQ3QL7L0utH5ROACQSkof1V98wbbHPq_buTgISNgThNKyrpKBJsU8dxIakxydCKsuu_J057gNva1XQ5U8a5vDgBtCrq_E8jsHCc3JWoShxamDKqQ_JTUC2HNoPp-2AZgFktIQCgl4FyI_h8IboBd8CWAuY2jmi0yOd21JtW4WXYp6tZW9VPfyoWozItkDYVPwQYtZYWDAHhLrbvwsTjLU3e3GTi9kgGwyq5b13ifCvs2iDpl8S6eCwhjaC8HsZfeBZkxMXyguV0pTLChfOwyOfU9PN0kKFGg",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-17 04:04:51.770 +00:00 [DBG] Augmenting SignInContext
2019-01-17 04:04:51.772 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-17 04:04:52.346 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 04:04:52.350 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 04:04:52.350 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 04:04:52.375 +00:00 [DBG] Start token request.
2019-01-17 04:04:52.393 +00:00 [DBG] Start client validation
2019-01-17 04:04:52.410 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 04:04:52.416 +00:00 [DBG] Start parsing for secret in post body
2019-01-17 04:04:52.425 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-17 04:04:52.425 +00:00 [DBG] Secret id found: MVC
2019-01-17 04:04:52.426 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:04:52.443 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 04:04:52.444 +00:00 [DBG] Client validation success
2019-01-17 04:04:52.451 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS63HGEB2B:00000003",
  "TimeStamp": "2019-01-17T04:04:52Z",
  "ProcessId": 20,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:04:52.466 +00:00 [DBG] Start token request validation
2019-01-17 04:04:52.484 +00:00 [DBG] Start validation of authorization code token request
2019-01-17 04:04:52.518 +00:00 [DBG] Validation of authorization code token request success
2019-01-17 04:04:52.533 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "974d57c19c267cb5c4b861f5f7cda2c350fa4b25c1b52b610a8e4be7a2ab2ff5",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "974d57c19c267cb5c4b861f5f7cda2c350fa4b25c1b52b610a8e4be7a2ab2ff5",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-17 04:04:52.567 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:04:52.586 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 04:04:52.587 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 04:04:52.615 +00:00 [DBG] Creating refresh token
2019-01-17 04:04:52.616 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-17 04:04:52.645 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:04:52.646 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-17 04:04:52.667 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****DfQg"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****5a62"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****uSFQ"
    }
  ],
  "ActivityId": "0HLJS63HGEB2B:00000003",
  "TimeStamp": "2019-01-17T04:04:52Z",
  "ProcessId": 20,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:04:52.671 +00:00 [DBG] Token request success.
2019-01-17 04:04:52.727 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-17 04:04:52.730 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-17 04:04:52.731 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-17 04:04:52.750 +00:00 [DBG] Start userinfo request
2019-01-17 04:04:52.760 +00:00 [DBG] Bearer token found in header
2019-01-17 04:04:52.853 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:04:52.861 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:04:52.864 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-17 04:04:52.869 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1547697892,
    "exp": 1547701492,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547697880,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-17 04:04:52.887 +00:00 [DBG] Creating userinfo response
2019-01-17 04:04:52.904 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-17 04:04:52.913 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-17 04:04:52.922 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-17 04:04:52.923 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-17 04:04:52.943 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-17 04:04:52.943 +00:00 [DBG] End userinfo request
2019-01-17 04:04:53.515 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 04:04:53.521 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 04:04:53.521 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 04:04:53.527 +00:00 [DBG] Start token request.
2019-01-17 04:04:53.527 +00:00 [DBG] Start client validation
2019-01-17 04:04:53.527 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 04:04:53.528 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 04:04:53.528 +00:00 [DBG] Secret id found: MVC
2019-01-17 04:04:53.528 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:04:53.528 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 04:04:53.528 +00:00 [DBG] Client validation success
2019-01-17 04:04:53.529 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS63HGEB2F:00000001",
  "TimeStamp": "2019-01-17T04:04:53Z",
  "ProcessId": 20,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:04:53.538 +00:00 [DBG] Start token request validation
2019-01-17 04:04:53.547 +00:00 [DBG] Start client credentials token request validation
2019-01-17 04:04:53.593 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 04:04:53.595 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 04:04:53.614 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 04:04:53.624 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****2RLg"
    }
  ],
  "ActivityId": "0HLJS63HGEB2F:00000001",
  "TimeStamp": "2019-01-17T04:04:53Z",
  "ProcessId": 20,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:04:53.624 +00:00 [DBG] Token request success.
2019-01-17 04:04:54.177 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-17 04:04:54.179 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-17 04:04:54.179 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-17 04:04:54.179 +00:00 [DBG] Start discovery request
2019-01-17 04:04:54.416 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-17 04:04:54.419 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-17 04:04:54.419 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-17 04:04:54.433 +00:00 [DBG] Start key discovery request
2019-01-17 04:05:43.554 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 04:05:43.555 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 04:05:43.555 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 04:05:43.555 +00:00 [DBG] Start token request.
2019-01-17 04:05:43.555 +00:00 [DBG] Start client validation
2019-01-17 04:05:43.556 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 04:05:43.556 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 04:05:43.556 +00:00 [DBG] Secret id found: MVC
2019-01-17 04:05:43.556 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:05:43.557 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 04:05:43.562 +00:00 [DBG] Client validation success
2019-01-17 04:05:43.565 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS63HGEB2H:00000001",
  "TimeStamp": "2019-01-17T04:05:43Z",
  "ProcessId": 20,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:05:43.577 +00:00 [DBG] Start token request validation
2019-01-17 04:05:43.577 +00:00 [DBG] Start client credentials token request validation
2019-01-17 04:05:43.578 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 04:05:43.578 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 04:05:43.578 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 04:05:43.605 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****EFug"
    }
  ],
  "ActivityId": "0HLJS63HGEB2H:00000001",
  "TimeStamp": "2019-01-17T04:05:43Z",
  "ProcessId": 20,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:05:43.605 +00:00 [DBG] Token request success.
2019-01-17 04:05:44.409 +00:00 [INF] Message received:
2019-01-17 04:05:44.412 +00:00 [INF] ----------------------------------
2019-01-17 04:05:44.421 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"9dd252c9-a92b-4122-851c-a246b509841a","CreationDate":"2019-01-17T04:05:44.3038577Z"}
2019-01-17 04:05:44.424 +00:00 [INF] ----------------------------------
2019-01-17 04:05:45.942 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 30e1dfb2-191e-4641-a479-1ab7ceb75e77 to 1 handlers took 1539 ms
2019-01-17 04:09:38.070 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-17 04:09:39.884 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-17 04:09:39.967 +00:00 [INF] Setting number of workers to 1
2019-01-17 04:09:40.025 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-17 04:09:40.084 +00:00 [INF] Bus Rebus 1 started
2019-01-17 04:09:40.135 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-17 04:09:40.420 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-17 04:09:40.487 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-17 04:09:40.541 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-17 04:09:40.558 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-17 04:09:40.559 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-17 04:09:40.561 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-17 04:09:40.563 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-17 04:10:30.994 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-17 04:10:31.384 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-17 04:10:31.386 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-17 04:10:31.394 +00:00 [DBG] Start discovery request
2019-01-17 04:10:31.634 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-17 04:10:31.656 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-17 04:10:31.663 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-17 04:10:31.714 +00:00 [DBG] Start key discovery request
2019-01-17 04:10:31.882 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-17 04:10:31.891 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-17 04:10:31.892 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-17 04:10:31.914 +00:00 [DBG] Processing signout request for 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 04:10:31.924 +00:00 [DBG] Start end session request validation
2019-01-17 04:10:31.937 +00:00 [DBG] Start identity token validation
2019-01-17 04:10:31.982 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:10:31.983 +00:00 [DBG] Client found: MVC / MVC
2019-01-17 04:10:32.073 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-17 04:10:32.082 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1547697892,
    "exp": 1547698192,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636832946739882152.OGM4ZWYwMzUtNDM2ZS00YjQxLWFhOTAtMzc1MjllYmUzYmI2OTgxNWQ3Y2UtZmU3Zi00ZDBjLWIyMDUtNjJjZGNlYjUyOWVm",
    "iat": 1547697892,
    "at_hash": "5pMj1ZkYMEaptuVy6nr4Qw",
    "sid": "6f895294f15942afcc56fa131caff54b",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547697880,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "amr": "pwd"
  }
}
2019-01-17 04:10:32.114 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8O3-Gt_kLsRJo1_wGTojvFLvfsXszei9c6E4FoltfZXo6fjItLvTcQTbLm1snM14tGOSYhuGmXKHbz9Vgo-6g-cCo8tcl7Mob2rTtD08EykZKffoy8D62zF6rQth7eXHjYFqt96n6YdkBDc7Q-ehBFMXgY-ufop8iZLrRcvx2dFw",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDc2OTc4OTIsImV4cCI6MTU0NzY5ODE5MiwiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4MzI5NDY3Mzk4ODIxNTIuT0dNNFpXWXdNelV0TkRNMlpTMDBZalF4TFdGaE9UQXRNemMxTWpsbFltVXpZbUkyT1RneE5XUTNZMlV0Wm1VM1ppMDBaREJqTFdJeU1EVXROakpqWkdObFlqVXlPV1ZtIiwiaWF0IjoxNTQ3Njk3ODkyLCJhdF9oYXNoIjoiNXBNajFaa1lNRWFwdHVWeTZucjRRdyIsInNpZCI6IjZmODk1Mjk0ZjE1OTQyYWZjYzU2ZmExMzFjYWZmNTRiIiwic3ViIjoiMTczZjk2NGYtMWViOS00M2NmLTkxYzctZGY3NTM3MTdjMTZjIiwiYXV0aF90aW1lIjoxNTQ3Njk3ODgwLCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImVtYWlsIjoiYWxpY2VAYXNwLm5ldCIsInBob25lIjoiMTIzNC01Njc4IiwiYWRkcmVzcyI6IlJ1YSBWZXJndWVpcm8sIDQ1NiIsImFkZHJlc3NfZGV0YWlscyI6IjggYW5kYXIgc2FsYSA4MDEiLCJuZWlnaGJvcmhvb2QiOiJWaWxhIE1hcmlhbmEiLCJjaXR5IjoiU8OjbyBQYXVsbyIsInN0YXRlIjoiU1AiLCJ6aXBfY29kZSI6IjY5MTE4IiwiYW1yIjpbInB3ZCJdfQ.UKvswJtHP5xDxOEfG1SYhbkJvYaAL6XY4yS1tLZv-POcOsXW7xHAdRLlokabYjUkqqgL5USMjeJ001FaLPQyS5Oc8SlsFkQZsAuaXQu-__ojlkS_gpFsho3pv7MNsallSt8-tGxCLEm50w2gNRQ71cxJq0gmEdR-0I8fd3iFB_V0Yi_7xj1mzS9BNM24BuHk4wf0XRaXu8AluRKE1zYgsAOLcb9ZrVE77-iV_ITJ9gGufNz7H9Lsurm44Nyi8T3X3gGoDSmDwBtF3Q48V4QxeEPFdPG6RVPrut9eO-84IdRbvmEcg1pELC5vGwj3UuTp3ajFmC-89twnbrSaBWDfQg",
    "state": "CfDJ8O3-Gt_kLsRJo1_wGTojvFLvfsXszei9c6E4FoltfZXo6fjItLvTcQTbLm1snM14tGOSYhuGmXKHbz9Vgo-6g-cCo8tcl7Mob2rTtD08EykZKffoy8D62zF6rQth7eXHjYFqt96n6YdkBDc7Q-ehBFMXgY-ufop8iZLrRcvx2dFw",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 04:10:32.115 +00:00 [DBG] Success validating end session request from MVC
2019-01-17 04:10:32.608 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-17 04:10:32.615 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-17 04:10:32.616 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-17 04:10:32.649 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLJS66S42OT1:00000002",
  "TimeStamp": "2019-01-17T04:10:32Z",
  "ProcessId": 209,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:10:34.411 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-17 04:10:34.415 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-17 04:10:34.416 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-17 04:10:34.420 +00:00 [DBG] Start authorize request
2019-01-17 04:10:34.431 +00:00 [DBG] No user present in authorize request
2019-01-17 04:10:34.440 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:10:34.447 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:10:34.455 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:10:34.458 +00:00 [DBG] No PKCE used.
2019-01-17 04:10:34.510 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:10:34.523 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8O3-Gt_kLsRJo1_wGTojvFIrfZd6uZ56S_3StgoTEuMhresfRc0Wv-XWBIM1IU3hS5mncS9vrbmiQsgJVB1PAhe8CG6lKphWxeDEmyMCINq3RGtTRlJb7pEBSEScwN8-_BZN4BKV1pKvv2vjyGtsEb80tMgplyEGrRnHT7WHIHGgSLBfYtRXVQo5CcwjOmNRZ82q6JF8VkMJ4wYHBTMAfavGcLhVbnMSBZnw-BuqjGyytzbCaYLOZLx5Bvo2sSyG8fIC3B142RNc5d5FUySpF5V8ybJhrgJcLsdjtAFTn7pw1nMMwEw3KW5xa50nJ5lTVdky_467zhKdK0Moj1qHIO0",
  "Nonce": "636832950343782635.MWU3MTIxNjUtN2Q1Yi00MmQ1LTlmZGItOTZlYTcwMWExNDliZDM5MzE3ZjItYzdiZS00ZjUxLWI2NTAtNzZkYmE0YTkyZjcy",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636832950343782635.MWU3MTIxNjUtN2Q1Yi00MmQ1LTlmZGItOTZlYTcwMWExNDliZDM5MzE3ZjItYzdiZS00ZjUxLWI2NTAtNzZkYmE0YTkyZjcy",
    "state": "CfDJ8O3-Gt_kLsRJo1_wGTojvFIrfZd6uZ56S_3StgoTEuMhresfRc0Wv-XWBIM1IU3hS5mncS9vrbmiQsgJVB1PAhe8CG6lKphWxeDEmyMCINq3RGtTRlJb7pEBSEScwN8-_BZN4BKV1pKvv2vjyGtsEb80tMgplyEGrRnHT7WHIHGgSLBfYtRXVQo5CcwjOmNRZ82q6JF8VkMJ4wYHBTMAfavGcLhVbnMSBZnw-BuqjGyytzbCaYLOZLx5Bvo2sSyG8fIC3B142RNc5d5FUySpF5V8ybJhrgJcLsdjtAFTn7pw1nMMwEw3KW5xa50nJ5lTVdky_467zhKdK0Moj1qHIO0",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 04:10:34.551 +00:00 [INF] Showing login: User is not authenticated
2019-01-17 04:10:34.620 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:10:34.620 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:10:34.621 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:10:34.626 +00:00 [DBG] No PKCE used.
2019-01-17 04:10:34.630 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:10:34.635 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:10:57.452 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-17 04:10:59.196 +00:00 [DBG] Augmenting SignInContext
2019-01-17 04:10:59.201 +00:00 [DBG] Adding idp claim with value: local
2019-01-17 04:10:59.202 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-17 04:10:59.202 +00:00 [DBG] Adding auth_time claim with value: 1547698259
2019-01-17 04:10:59.219 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-17 04:10:59.237 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLJS66S42OT1:00000005",
  "TimeStamp": "2019-01-17T04:10:59Z",
  "ProcessId": 209,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:10:59.257 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-17 04:10:59.259 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-17 04:10:59.260 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-17 04:10:59.272 +00:00 [DBG] Start authorize callback request
2019-01-17 04:10:59.283 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 04:10:59.283 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:10:59.283 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:10:59.283 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:10:59.283 +00:00 [DBG] No PKCE used.
2019-01-17 04:10:59.284 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:10:59.284 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8O3-Gt_kLsRJo1_wGTojvFIrfZd6uZ56S_3StgoTEuMhresfRc0Wv-XWBIM1IU3hS5mncS9vrbmiQsgJVB1PAhe8CG6lKphWxeDEmyMCINq3RGtTRlJb7pEBSEScwN8-_BZN4BKV1pKvv2vjyGtsEb80tMgplyEGrRnHT7WHIHGgSLBfYtRXVQo5CcwjOmNRZ82q6JF8VkMJ4wYHBTMAfavGcLhVbnMSBZnw-BuqjGyytzbCaYLOZLx5Bvo2sSyG8fIC3B142RNc5d5FUySpF5V8ybJhrgJcLsdjtAFTn7pw1nMMwEw3KW5xa50nJ5lTVdky_467zhKdK0Moj1qHIO0",
  "Nonce": "636832950343782635.MWU3MTIxNjUtN2Q1Yi00MmQ1LTlmZGItOTZlYTcwMWExNDliZDM5MzE3ZjItYzdiZS00ZjUxLWI2NTAtNzZkYmE0YTkyZjcy",
  "SessionId": "f36b4188cddeea818f991e4c98a20c38",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636832950343782635.MWU3MTIxNjUtN2Q1Yi00MmQ1LTlmZGItOTZlYTcwMWExNDliZDM5MzE3ZjItYzdiZS00ZjUxLWI2NTAtNzZkYmE0YTkyZjcy",
    "state": "CfDJ8O3-Gt_kLsRJo1_wGTojvFIrfZd6uZ56S_3StgoTEuMhresfRc0Wv-XWBIM1IU3hS5mncS9vrbmiQsgJVB1PAhe8CG6lKphWxeDEmyMCINq3RGtTRlJb7pEBSEScwN8-_BZN4BKV1pKvv2vjyGtsEb80tMgplyEGrRnHT7WHIHGgSLBfYtRXVQo5CcwjOmNRZ82q6JF8VkMJ4wYHBTMAfavGcLhVbnMSBZnw-BuqjGyytzbCaYLOZLx5Bvo2sSyG8fIC3B142RNc5d5FUySpF5V8ybJhrgJcLsdjtAFTn7pw1nMMwEw3KW5xa50nJ5lTVdky_467zhKdK0Moj1qHIO0",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 04:10:59.313 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-17 04:10:59.314 +00:00 [INF] Showing consent: User has not yet consented
2019-01-17 04:10:59.353 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:10:59.354 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:10:59.354 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:10:59.354 +00:00 [DBG] No PKCE used.
2019-01-17 04:10:59.354 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:10:59.354 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:11:05.149 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-17 04:11:05.185 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:11:05.185 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:11:05.185 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:11:05.186 +00:00 [DBG] No PKCE used.
2019-01-17 04:11:05.187 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:11:05.253 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-17 04:11:05.253 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-17 04:11:05.253 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-17 04:11:05.254 +00:00 [DBG] Start authorize callback request
2019-01-17 04:11:05.257 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 04:11:05.263 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:11:05.274 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:11:05.274 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:11:05.275 +00:00 [DBG] No PKCE used.
2019-01-17 04:11:05.275 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:11:05.276 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8O3-Gt_kLsRJo1_wGTojvFIrfZd6uZ56S_3StgoTEuMhresfRc0Wv-XWBIM1IU3hS5mncS9vrbmiQsgJVB1PAhe8CG6lKphWxeDEmyMCINq3RGtTRlJb7pEBSEScwN8-_BZN4BKV1pKvv2vjyGtsEb80tMgplyEGrRnHT7WHIHGgSLBfYtRXVQo5CcwjOmNRZ82q6JF8VkMJ4wYHBTMAfavGcLhVbnMSBZnw-BuqjGyytzbCaYLOZLx5Bvo2sSyG8fIC3B142RNc5d5FUySpF5V8ybJhrgJcLsdjtAFTn7pw1nMMwEw3KW5xa50nJ5lTVdky_467zhKdK0Moj1qHIO0",
  "Nonce": "636832950343782635.MWU3MTIxNjUtN2Q1Yi00MmQ1LTlmZGItOTZlYTcwMWExNDliZDM5MzE3ZjItYzdiZS00ZjUxLWI2NTAtNzZkYmE0YTkyZjcy",
  "SessionId": "f36b4188cddeea818f991e4c98a20c38",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636832950343782635.MWU3MTIxNjUtN2Q1Yi00MmQ1LTlmZGItOTZlYTcwMWExNDliZDM5MzE3ZjItYzdiZS00ZjUxLWI2NTAtNzZkYmE0YTkyZjcy",
    "state": "CfDJ8O3-Gt_kLsRJo1_wGTojvFIrfZd6uZ56S_3StgoTEuMhresfRc0Wv-XWBIM1IU3hS5mncS9vrbmiQsgJVB1PAhe8CG6lKphWxeDEmyMCINq3RGtTRlJb7pEBSEScwN8-_BZN4BKV1pKvv2vjyGtsEb80tMgplyEGrRnHT7WHIHGgSLBfYtRXVQo5CcwjOmNRZ82q6JF8VkMJ4wYHBTMAfavGcLhVbnMSBZnw-BuqjGyytzbCaYLOZLx5Bvo2sSyG8fIC3B142RNc5d5FUySpF5V8ybJhrgJcLsdjtAFTn7pw1nMMwEw3KW5xa50nJ5lTVdky_467zhKdK0Moj1qHIO0",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 04:11:05.276 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-17 04:11:05.328 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-17 04:11:05.359 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-17 04:11:05.376 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 04:11:05.409 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-17 04:11:05.450 +00:00 [DBG] Creating Implicit Flow response.
2019-01-17 04:11:05.470 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-17 04:11:05.678 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****sckw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****dd45"
    }
  ],
  "ActivityId": "0HLJS66S42OT1:00000009",
  "TimeStamp": "2019-01-17T04:11:05Z",
  "ProcessId": 209,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:11:05.702 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8O3-Gt_kLsRJo1_wGTojvFIrfZd6uZ56S_3StgoTEuMhresfRc0Wv-XWBIM1IU3hS5mncS9vrbmiQsgJVB1PAhe8CG6lKphWxeDEmyMCINq3RGtTRlJb7pEBSEScwN8-_BZN4BKV1pKvv2vjyGtsEb80tMgplyEGrRnHT7WHIHGgSLBfYtRXVQo5CcwjOmNRZ82q6JF8VkMJ4wYHBTMAfavGcLhVbnMSBZnw-BuqjGyytzbCaYLOZLx5Bvo2sSyG8fIC3B142RNc5d5FUySpF5V8ybJhrgJcLsdjtAFTn7pw1nMMwEw3KW5xa50nJ5lTVdky_467zhKdK0Moj1qHIO0",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-17 04:11:05.749 +00:00 [DBG] Augmenting SignInContext
2019-01-17 04:11:05.752 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-17 04:11:06.477 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 04:11:06.510 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 04:11:06.511 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 04:11:06.538 +00:00 [DBG] Start token request.
2019-01-17 04:11:06.570 +00:00 [DBG] Start client validation
2019-01-17 04:11:06.592 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 04:11:06.600 +00:00 [DBG] Start parsing for secret in post body
2019-01-17 04:11:06.614 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-17 04:11:06.614 +00:00 [DBG] Secret id found: MVC
2019-01-17 04:11:06.615 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:11:06.657 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 04:11:06.658 +00:00 [DBG] Client validation success
2019-01-17 04:11:06.679 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS66S42OT0:00000003",
  "TimeStamp": "2019-01-17T04:11:06Z",
  "ProcessId": 209,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:11:06.715 +00:00 [DBG] Start token request validation
2019-01-17 04:11:06.737 +00:00 [DBG] Start validation of authorization code token request
2019-01-17 04:11:06.772 +00:00 [DBG] Validation of authorization code token request success
2019-01-17 04:11:06.780 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "5f1ae15f889253db3d9b259b1f32df22ea624bda42204932e18251fe9949dd45",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "5f1ae15f889253db3d9b259b1f32df22ea624bda42204932e18251fe9949dd45",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-17 04:11:06.810 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:11:06.827 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 04:11:06.828 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 04:11:06.864 +00:00 [DBG] Creating refresh token
2019-01-17 04:11:06.865 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-17 04:11:06.889 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:11:06.890 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-17 04:11:06.910 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****lFqQ"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****8e7c"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****BYuA"
    }
  ],
  "ActivityId": "0HLJS66S42OT0:00000003",
  "TimeStamp": "2019-01-17T04:11:06Z",
  "ProcessId": 209,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:11:06.913 +00:00 [DBG] Token request success.
2019-01-17 04:11:06.966 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-17 04:11:06.971 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-17 04:11:06.972 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-17 04:11:06.990 +00:00 [DBG] Start userinfo request
2019-01-17 04:11:06.998 +00:00 [DBG] Bearer token found in header
2019-01-17 04:11:07.026 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:11:07.027 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:11:07.031 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-17 04:11:07.033 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1547698266,
    "exp": 1547701866,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547698259,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-17 04:11:07.059 +00:00 [DBG] Creating userinfo response
2019-01-17 04:11:07.073 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-17 04:11:07.079 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-17 04:11:07.090 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-17 04:11:07.091 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-17 04:11:07.107 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-17 04:11:07.108 +00:00 [DBG] End userinfo request
2019-01-17 04:11:07.698 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 04:11:07.698 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 04:11:07.698 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 04:11:07.698 +00:00 [DBG] Start token request.
2019-01-17 04:11:07.699 +00:00 [DBG] Start client validation
2019-01-17 04:11:07.699 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 04:11:07.699 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 04:11:07.699 +00:00 [DBG] Secret id found: MVC
2019-01-17 04:11:07.699 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:11:07.699 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 04:11:07.699 +00:00 [DBG] Client validation success
2019-01-17 04:11:07.699 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS66S42OT3:00000001",
  "TimeStamp": "2019-01-17T04:11:07Z",
  "ProcessId": 209,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:11:07.725 +00:00 [DBG] Start token request validation
2019-01-17 04:11:07.773 +00:00 [DBG] Start client credentials token request validation
2019-01-17 04:11:07.781 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 04:11:07.781 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 04:11:07.800 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 04:11:07.810 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****8_2A"
    }
  ],
  "ActivityId": "0HLJS66S42OT3:00000001",
  "TimeStamp": "2019-01-17T04:11:07Z",
  "ProcessId": 209,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:11:07.810 +00:00 [DBG] Token request success.
2019-01-17 04:11:08.380 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-17 04:11:08.381 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-17 04:11:08.381 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-17 04:11:08.381 +00:00 [DBG] Start discovery request
2019-01-17 04:11:08.664 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-17 04:11:08.664 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-17 04:11:08.665 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-17 04:11:08.665 +00:00 [DBG] Start key discovery request
2019-01-17 04:11:50.334 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 04:11:50.335 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 04:11:50.335 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 04:11:50.335 +00:00 [DBG] Start token request.
2019-01-17 04:11:50.335 +00:00 [DBG] Start client validation
2019-01-17 04:11:50.335 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 04:11:50.335 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 04:11:50.335 +00:00 [DBG] Secret id found: MVC
2019-01-17 04:11:50.335 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:11:50.335 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 04:11:50.335 +00:00 [DBG] Client validation success
2019-01-17 04:11:50.336 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS66S42OT5:00000001",
  "TimeStamp": "2019-01-17T04:11:50Z",
  "ProcessId": 209,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:11:50.377 +00:00 [DBG] Start token request validation
2019-01-17 04:11:50.393 +00:00 [DBG] Start client credentials token request validation
2019-01-17 04:11:50.394 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 04:11:50.394 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 04:11:50.394 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 04:11:50.396 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****k16A"
    }
  ],
  "ActivityId": "0HLJS66S42OT5:00000001",
  "TimeStamp": "2019-01-17T04:11:50Z",
  "ProcessId": 209,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:11:50.396 +00:00 [DBG] Token request success.
2019-01-17 04:11:55.680 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 04:11:55.681 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 04:11:55.681 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 04:11:55.681 +00:00 [DBG] Start token request.
2019-01-17 04:11:55.681 +00:00 [DBG] Start client validation
2019-01-17 04:11:55.681 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 04:11:55.682 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 04:11:55.682 +00:00 [DBG] Secret id found: MVC
2019-01-17 04:11:55.682 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:11:55.682 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 04:11:55.682 +00:00 [DBG] Client validation success
2019-01-17 04:11:55.682 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS66S42OT6:00000001",
  "TimeStamp": "2019-01-17T04:11:55Z",
  "ProcessId": 209,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:11:55.711 +00:00 [DBG] Start token request validation
2019-01-17 04:11:55.721 +00:00 [DBG] Start client credentials token request validation
2019-01-17 04:11:55.722 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 04:11:55.722 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 04:11:55.722 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 04:11:55.751 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****VqhA"
    }
  ],
  "ActivityId": "0HLJS66S42OT6:00000001",
  "TimeStamp": "2019-01-17T04:11:55Z",
  "ProcessId": 209,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:11:55.752 +00:00 [DBG] Token request success.
2019-01-17 04:11:56.578 +00:00 [INF] Message received:
2019-01-17 04:11:56.578 +00:00 [INF] ----------------------------------
2019-01-17 04:11:56.593 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"06545645-10b0-43c3-b479-8b27e32d3901","CreationDate":"2019-01-17T04:11:56.4804238Z"}
2019-01-17 04:11:56.594 +00:00 [INF] ----------------------------------
2019-01-17 04:11:57.825 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 448b695a-d1ca-4d64-870a-3135a521f73d to 1 handlers took 1257 ms
2019-01-17 04:23:52.104 +00:00 [WRN] No XML encryptor configured. Key "02f912d2-226d-4708-b87f-5a07bd40d58f" may be persisted to storage in unencrypted form.
2019-01-17 04:23:53.081 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-17 04:23:54.181 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-17 04:23:54.280 +00:00 [INF] Setting number of workers to 1
2019-01-17 04:23:54.324 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-17 04:23:54.417 +00:00 [INF] Bus Rebus 1 started
2019-01-17 04:23:54.440 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-17 04:23:54.584 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-17 04:23:54.659 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-17 04:23:54.688 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-17 04:23:54.688 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-17 04:23:54.688 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-17 04:23:54.689 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-17 04:23:54.689 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-17 04:25:04.740 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-17 04:25:04.988 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-17 04:25:04.990 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-17 04:25:04.998 +00:00 [DBG] Start discovery request
2019-01-17 04:25:05.179 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-17 04:25:05.207 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-17 04:25:05.207 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-17 04:25:05.260 +00:00 [DBG] Start key discovery request
2019-01-17 04:25:05.456 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:25:05.457 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:25:05.465 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-17 04:25:05.472 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-17 04:25:05.472 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-17 04:25:05.482 +00:00 [DBG] Start authorize request
2019-01-17 04:25:05.525 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:25:05.537 +00:00 [DBG] No user present in authorize request
2019-01-17 04:25:05.547 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:25:05.568 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:25:05.577 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:25:05.581 +00:00 [DBG] No PKCE used.
2019-01-17 04:25:05.629 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:25:05.651 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8MIEv6R9RzlLv0ZI5k_ke0O70W2IaqaNXYfV8XVzKKDMyl7jQoiq5qfcNMkCADxiu8WVLNdFJ0yvwPS5LAT7PXnYU0QLCr51c-98L6sGrEgkZspX_epGZICpqONxpZUU1T3p-DvHeNmPLEhaZAMycQyJYD9rmhWvlXdvw54qqlgrqLE1Zb4A7I-lidR43HS0RzcUHrf9GE8satD0EKpXHClVpBdIfN-IVQCSwEBUn9e-gUjzHGLphUVw2rRhS5skavyewuJWIixJSuen4IwX4J2vk3dCL5Muar_koKV9Asoi0THSD9cwa0XiHoGdynpCgIF-R449_NnpIdaHt3mSzHA",
  "Nonce": "636832959053577694.NDQ2OWRkZTMtMTNjYS00ZWUzLTgzNWItMjIzNjY3MzFhMWNmYzA3ZjU3MGUtNTYzOS00MjE0LTlkYjktNzY5NzYyM2IxYTI2",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636832959053577694.NDQ2OWRkZTMtMTNjYS00ZWUzLTgzNWItMjIzNjY3MzFhMWNmYzA3ZjU3MGUtNTYzOS00MjE0LTlkYjktNzY5NzYyM2IxYTI2",
    "state": "CfDJ8MIEv6R9RzlLv0ZI5k_ke0O70W2IaqaNXYfV8XVzKKDMyl7jQoiq5qfcNMkCADxiu8WVLNdFJ0yvwPS5LAT7PXnYU0QLCr51c-98L6sGrEgkZspX_epGZICpqONxpZUU1T3p-DvHeNmPLEhaZAMycQyJYD9rmhWvlXdvw54qqlgrqLE1Zb4A7I-lidR43HS0RzcUHrf9GE8satD0EKpXHClVpBdIfN-IVQCSwEBUn9e-gUjzHGLphUVw2rRhS5skavyewuJWIixJSuen4IwX4J2vk3dCL5Muar_koKV9Asoi0THSD9cwa0XiHoGdynpCgIF-R449_NnpIdaHt3mSzHA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 04:25:05.679 +00:00 [INF] Showing login: User is not authenticated
2019-01-17 04:25:05.695 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:25:05.695 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:25:06.041 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:25:06.042 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:25:06.042 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:25:06.047 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:25:06.048 +00:00 [DBG] No PKCE used.
2019-01-17 04:25:06.051 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:25:06.059 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:25:12.651 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-17 04:25:12.653 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:25:12.653 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:25:13.852 +00:00 [DBG] Augmenting SignInContext
2019-01-17 04:25:13.859 +00:00 [DBG] Adding idp claim with value: local
2019-01-17 04:25:13.859 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-17 04:25:13.863 +00:00 [DBG] Adding auth_time claim with value: 1547699113
2019-01-17 04:25:13.869 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-17 04:25:13.882 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-17 04:25:13.912 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLJS6F0HG799:00000003",
  "TimeStamp": "2019-01-17T04:25:13Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:25:13.937 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-17 04:25:13.939 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-17 04:25:13.939 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-17 04:25:13.948 +00:00 [DBG] Start authorize callback request
2019-01-17 04:25:13.955 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 04:25:13.955 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:25:13.956 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:25:13.956 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:25:13.956 +00:00 [DBG] No PKCE used.
2019-01-17 04:25:13.957 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:25:13.957 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8MIEv6R9RzlLv0ZI5k_ke0O70W2IaqaNXYfV8XVzKKDMyl7jQoiq5qfcNMkCADxiu8WVLNdFJ0yvwPS5LAT7PXnYU0QLCr51c-98L6sGrEgkZspX_epGZICpqONxpZUU1T3p-DvHeNmPLEhaZAMycQyJYD9rmhWvlXdvw54qqlgrqLE1Zb4A7I-lidR43HS0RzcUHrf9GE8satD0EKpXHClVpBdIfN-IVQCSwEBUn9e-gUjzHGLphUVw2rRhS5skavyewuJWIixJSuen4IwX4J2vk3dCL5Muar_koKV9Asoi0THSD9cwa0XiHoGdynpCgIF-R449_NnpIdaHt3mSzHA",
  "Nonce": "636832959053577694.NDQ2OWRkZTMtMTNjYS00ZWUzLTgzNWItMjIzNjY3MzFhMWNmYzA3ZjU3MGUtNTYzOS00MjE0LTlkYjktNzY5NzYyM2IxYTI2",
  "SessionId": "8d03f8c553d3e45c89fdde5dda09ce6d",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636832959053577694.NDQ2OWRkZTMtMTNjYS00ZWUzLTgzNWItMjIzNjY3MzFhMWNmYzA3ZjU3MGUtNTYzOS00MjE0LTlkYjktNzY5NzYyM2IxYTI2",
    "state": "CfDJ8MIEv6R9RzlLv0ZI5k_ke0O70W2IaqaNXYfV8XVzKKDMyl7jQoiq5qfcNMkCADxiu8WVLNdFJ0yvwPS5LAT7PXnYU0QLCr51c-98L6sGrEgkZspX_epGZICpqONxpZUU1T3p-DvHeNmPLEhaZAMycQyJYD9rmhWvlXdvw54qqlgrqLE1Zb4A7I-lidR43HS0RzcUHrf9GE8satD0EKpXHClVpBdIfN-IVQCSwEBUn9e-gUjzHGLphUVw2rRhS5skavyewuJWIixJSuen4IwX4J2vk3dCL5Muar_koKV9Asoi0THSD9cwa0XiHoGdynpCgIF-R449_NnpIdaHt3mSzHA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 04:25:13.981 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-17 04:25:13.982 +00:00 [INF] Showing consent: User has not yet consented
2019-01-17 04:25:14.047 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:25:14.048 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:25:14.048 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:25:14.048 +00:00 [DBG] No PKCE used.
2019-01-17 04:25:14.049 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:25:14.050 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:25:17.919 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-17 04:25:17.959 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:25:17.959 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:25:17.961 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:25:17.962 +00:00 [DBG] No PKCE used.
2019-01-17 04:25:17.965 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:25:18.001 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-17 04:25:18.010 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-17 04:25:18.010 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-17 04:25:18.010 +00:00 [DBG] Start authorize callback request
2019-01-17 04:25:18.020 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 04:25:18.020 +00:00 [DBG] Start authorize request protocol validation
2019-01-17 04:25:18.020 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:25:18.020 +00:00 [DBG] Checking for PKCE parameters
2019-01-17 04:25:18.020 +00:00 [DBG] No PKCE used.
2019-01-17 04:25:18.021 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-17 04:25:18.022 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8MIEv6R9RzlLv0ZI5k_ke0O70W2IaqaNXYfV8XVzKKDMyl7jQoiq5qfcNMkCADxiu8WVLNdFJ0yvwPS5LAT7PXnYU0QLCr51c-98L6sGrEgkZspX_epGZICpqONxpZUU1T3p-DvHeNmPLEhaZAMycQyJYD9rmhWvlXdvw54qqlgrqLE1Zb4A7I-lidR43HS0RzcUHrf9GE8satD0EKpXHClVpBdIfN-IVQCSwEBUn9e-gUjzHGLphUVw2rRhS5skavyewuJWIixJSuen4IwX4J2vk3dCL5Muar_koKV9Asoi0THSD9cwa0XiHoGdynpCgIF-R449_NnpIdaHt3mSzHA",
  "Nonce": "636832959053577694.NDQ2OWRkZTMtMTNjYS00ZWUzLTgzNWItMjIzNjY3MzFhMWNmYzA3ZjU3MGUtNTYzOS00MjE0LTlkYjktNzY5NzYyM2IxYTI2",
  "SessionId": "8d03f8c553d3e45c89fdde5dda09ce6d",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636832959053577694.NDQ2OWRkZTMtMTNjYS00ZWUzLTgzNWItMjIzNjY3MzFhMWNmYzA3ZjU3MGUtNTYzOS00MjE0LTlkYjktNzY5NzYyM2IxYTI2",
    "state": "CfDJ8MIEv6R9RzlLv0ZI5k_ke0O70W2IaqaNXYfV8XVzKKDMyl7jQoiq5qfcNMkCADxiu8WVLNdFJ0yvwPS5LAT7PXnYU0QLCr51c-98L6sGrEgkZspX_epGZICpqONxpZUU1T3p-DvHeNmPLEhaZAMycQyJYD9rmhWvlXdvw54qqlgrqLE1Zb4A7I-lidR43HS0RzcUHrf9GE8satD0EKpXHClVpBdIfN-IVQCSwEBUn9e-gUjzHGLphUVw2rRhS5skavyewuJWIixJSuen4IwX4J2vk3dCL5Muar_koKV9Asoi0THSD9cwa0XiHoGdynpCgIF-R449_NnpIdaHt3mSzHA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-17 04:25:18.023 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-17 04:25:18.041 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-17 04:25:18.056 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-17 04:25:18.065 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 04:25:18.085 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-17 04:25:18.112 +00:00 [DBG] Creating Implicit Flow response.
2019-01-17 04:25:18.128 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-17 04:25:18.281 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****4Wzg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****40b0"
    }
  ],
  "ActivityId": "0HLJS6F0HG799:00000007",
  "TimeStamp": "2019-01-17T04:25:18Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:25:18.290 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8MIEv6R9RzlLv0ZI5k_ke0O70W2IaqaNXYfV8XVzKKDMyl7jQoiq5qfcNMkCADxiu8WVLNdFJ0yvwPS5LAT7PXnYU0QLCr51c-98L6sGrEgkZspX_epGZICpqONxpZUU1T3p-DvHeNmPLEhaZAMycQyJYD9rmhWvlXdvw54qqlgrqLE1Zb4A7I-lidR43HS0RzcUHrf9GE8satD0EKpXHClVpBdIfN-IVQCSwEBUn9e-gUjzHGLphUVw2rRhS5skavyewuJWIixJSuen4IwX4J2vk3dCL5Muar_koKV9Asoi0THSD9cwa0XiHoGdynpCgIF-R449_NnpIdaHt3mSzHA",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-17 04:25:18.334 +00:00 [DBG] Augmenting SignInContext
2019-01-17 04:25:18.338 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-17 04:25:18.803 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 04:25:18.809 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 04:25:18.809 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 04:25:18.824 +00:00 [DBG] Start token request.
2019-01-17 04:25:18.838 +00:00 [DBG] Start client validation
2019-01-17 04:25:18.847 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 04:25:18.855 +00:00 [DBG] Start parsing for secret in post body
2019-01-17 04:25:18.862 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-17 04:25:18.862 +00:00 [DBG] Secret id found: MVC
2019-01-17 04:25:18.862 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:25:18.878 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 04:25:18.878 +00:00 [DBG] Client validation success
2019-01-17 04:25:18.886 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS6F0HG798:00000003",
  "TimeStamp": "2019-01-17T04:25:18Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:25:18.903 +00:00 [DBG] Start token request validation
2019-01-17 04:25:18.920 +00:00 [DBG] Start validation of authorization code token request
2019-01-17 04:25:18.951 +00:00 [DBG] Validation of authorization code token request success
2019-01-17 04:25:18.959 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "ddcf08df47b34b5df63fe3e9b7339857fe086e62d0ae32ad97f164a9d42740b0",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "ddcf08df47b34b5df63fe3e9b7339857fe086e62d0ae32ad97f164a9d42740b0",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-17 04:25:18.982 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:25:19.002 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 04:25:19.003 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-17 04:25:19.030 +00:00 [DBG] Creating refresh token
2019-01-17 04:25:19.031 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-17 04:25:19.063 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:25:19.064 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-17 04:25:19.092 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****fH_g"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****c7b7"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****3HhQ"
    }
  ],
  "ActivityId": "0HLJS6F0HG798:00000003",
  "TimeStamp": "2019-01-17T04:25:19Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:25:19.095 +00:00 [DBG] Token request success.
2019-01-17 04:25:19.162 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-17 04:25:19.163 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-17 04:25:19.163 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-17 04:25:19.173 +00:00 [DBG] Start userinfo request
2019-01-17 04:25:19.218 +00:00 [DBG] Bearer token found in header
2019-01-17 04:25:19.319 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:25:19.327 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:25:19.329 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-17 04:25:19.340 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1547699119,
    "exp": 1547702719,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547699113,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-17 04:25:19.361 +00:00 [DBG] Creating userinfo response
2019-01-17 04:25:19.376 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-17 04:25:19.383 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-17 04:25:19.398 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-17 04:25:19.398 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-17 04:25:19.415 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-17 04:25:19.415 +00:00 [DBG] End userinfo request
2019-01-17 04:25:20.032 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 04:25:20.033 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 04:25:20.033 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 04:25:20.033 +00:00 [DBG] Start token request.
2019-01-17 04:25:20.033 +00:00 [DBG] Start client validation
2019-01-17 04:25:20.033 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 04:25:20.033 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 04:25:20.033 +00:00 [DBG] Secret id found: MVC
2019-01-17 04:25:20.033 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:25:20.033 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 04:25:20.033 +00:00 [DBG] Client validation success
2019-01-17 04:25:20.034 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS6F0HG79B:00000001",
  "TimeStamp": "2019-01-17T04:25:20Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:25:20.068 +00:00 [DBG] Start token request validation
2019-01-17 04:25:20.105 +00:00 [DBG] Start client credentials token request validation
2019-01-17 04:25:20.117 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 04:25:20.118 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 04:25:20.141 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 04:25:20.145 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****ubuQ"
    }
  ],
  "ActivityId": "0HLJS6F0HG79B:00000001",
  "TimeStamp": "2019-01-17T04:25:20Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:25:20.145 +00:00 [DBG] Token request success.
2019-01-17 04:25:20.677 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-17 04:25:20.678 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-17 04:25:20.678 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-17 04:25:20.678 +00:00 [DBG] Start discovery request
2019-01-17 04:25:20.943 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-17 04:25:20.944 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-17 04:25:20.945 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-17 04:25:20.945 +00:00 [DBG] Start key discovery request
2019-01-17 04:25:27.928 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-17 04:25:27.931 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-17 04:25:27.931 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-17 04:25:27.931 +00:00 [DBG] Start token request.
2019-01-17 04:25:27.931 +00:00 [DBG] Start client validation
2019-01-17 04:25:27.931 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-17 04:25:27.931 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-17 04:25:27.932 +00:00 [DBG] Secret id found: MVC
2019-01-17 04:25:27.932 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-17 04:25:27.932 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-17 04:25:27.932 +00:00 [DBG] Client validation success
2019-01-17 04:25:27.932 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJS6F0HG79D:00000001",
  "TimeStamp": "2019-01-17T04:25:27Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:25:27.954 +00:00 [DBG] Start token request validation
2019-01-17 04:25:27.954 +00:00 [DBG] Start client credentials token request validation
2019-01-17 04:25:27.954 +00:00 [DBG] MVC credentials token request validation success
2019-01-17 04:25:27.954 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-17 04:25:27.954 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-17 04:25:27.975 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****4DlQ"
    }
  ],
  "ActivityId": "0HLJS6F0HG79D:00000001",
  "TimeStamp": "2019-01-17T04:25:27Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-17 04:25:27.975 +00:00 [DBG] Token request success.
2019-01-17 04:25:28.582 +00:00 [INF] Message received:
2019-01-17 04:25:28.582 +00:00 [INF] ----------------------------------
2019-01-17 04:25:28.588 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"7b747e3d-4f2e-4c99-ab4a-b45735f2a016","CreationDate":"2019-01-17T04:25:28.4907612Z"}
2019-01-17 04:25:28.589 +00:00 [INF] ----------------------------------
2019-01-17 04:25:29.816 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 8d63388b-5541-45e5-9ded-c8bc100c9233 to 1 handlers took 1246 ms
2019-01-18 00:33:15.971 +00:00 [WRN] No XML encryptor configured. Key "e5a3f975-1149-4154-b4da-fdc200ef4e4a" may be persisted to storage in unencrypted form.
2019-01-18 00:33:17.424 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-18 00:33:18.736 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-18 00:33:18.819 +00:00 [INF] Setting number of workers to 1
2019-01-18 00:33:18.847 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-18 00:33:18.856 +00:00 [INF] Bus Rebus 1 started
2019-01-18 00:33:18.939 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-18 00:33:19.105 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-18 00:33:19.275 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-18 00:33:19.330 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-18 00:33:19.338 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-18 00:33:19.345 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-18 00:33:19.352 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-18 00:33:19.363 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-18 00:38:17.143 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 00:38:17.428 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 00:38:17.429 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 00:38:17.437 +00:00 [DBG] Start discovery request
2019-01-18 00:38:17.651 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 00:38:17.681 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 00:38:17.684 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 00:38:17.692 +00:00 [DBG] Start key discovery request
2019-01-18 00:38:17.904 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 00:38:17.905 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 00:38:17.912 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-18 00:38:17.920 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-18 00:38:17.920 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-18 00:38:17.930 +00:00 [DBG] Start authorize request
2019-01-18 00:38:17.956 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 00:38:17.966 +00:00 [DBG] No user present in authorize request
2019-01-18 00:38:17.974 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 00:38:17.997 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 00:38:18.005 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 00:38:18.010 +00:00 [DBG] No PKCE used.
2019-01-18 00:38:18.064 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 00:38:18.081 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8P5RAY6ypAZCuaU8vyeRnOWk-g4s9tf1pGc257W713JZ-RLOmUcpxXY_PT6GZJ1jw627UHyDcexApisc69YCyazD4egVLQBZj0K72Utg95e_n0i6VDB6lCl874WGIfba326ki9HXzULaP4AKNHmQfpd79PPZMBG4gAX9HincQZgyDX7GLWBnuYD0r933PrYj13K2JIrd46vtbK8wr3lTW4aAbk1M57RKEhZeX7jEQJOgPqJGOMcNUxwupUlItky_BYWpWk54ChhekWq1tfofVnwf9hra-UR2uh12xkK0svPyOa1gVgLt_xYOA6u00I9yLiY7xWd9nQyYKNs5zHfXJm0",
  "Nonce": "636833686978108713.MDAyM2I1NWYtMjQxMi00YjM2LTgyODUtM2FjMDQyM2M4NzQxY2Q3MzVlMDktN2JjNi00ZmYwLTg2ODgtZDE3ZTNhYTE2ZWEz",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833686978108713.MDAyM2I1NWYtMjQxMi00YjM2LTgyODUtM2FjMDQyM2M4NzQxY2Q3MzVlMDktN2JjNi00ZmYwLTg2ODgtZDE3ZTNhYTE2ZWEz",
    "state": "CfDJ8P5RAY6ypAZCuaU8vyeRnOWk-g4s9tf1pGc257W713JZ-RLOmUcpxXY_PT6GZJ1jw627UHyDcexApisc69YCyazD4egVLQBZj0K72Utg95e_n0i6VDB6lCl874WGIfba326ki9HXzULaP4AKNHmQfpd79PPZMBG4gAX9HincQZgyDX7GLWBnuYD0r933PrYj13K2JIrd46vtbK8wr3lTW4aAbk1M57RKEhZeX7jEQJOgPqJGOMcNUxwupUlItky_BYWpWk54ChhekWq1tfofVnwf9hra-UR2uh12xkK0svPyOa1gVgLt_xYOA6u00I9yLiY7xWd9nQyYKNs5zHfXJm0",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 00:38:18.109 +00:00 [INF] Showing login: User is not authenticated
2019-01-18 00:38:18.125 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 00:38:18.126 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 00:38:18.523 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 00:38:18.524 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 00:38:18.524 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 00:38:18.524 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 00:38:18.524 +00:00 [DBG] No PKCE used.
2019-01-18 00:38:18.525 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 00:38:18.549 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 00:38:39.225 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 00:38:39.229 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 00:38:39.229 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 00:38:40.551 +00:00 [DBG] Augmenting SignInContext
2019-01-18 00:38:40.557 +00:00 [DBG] Adding idp claim with value: local
2019-01-18 00:38:40.557 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-18 00:38:40.560 +00:00 [DBG] Adding auth_time claim with value: 1547771920
2019-01-18 00:38:40.568 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 00:38:40.581 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 00:38:40.611 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLJSRKUB3N4V:00000003",
  "TimeStamp": "2019-01-18T00:38:40Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 00:38:40.640 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 00:38:40.641 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 00:38:40.644 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 00:38:40.660 +00:00 [DBG] Start authorize callback request
2019-01-18 00:38:40.673 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 00:38:40.673 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 00:38:40.673 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 00:38:40.673 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 00:38:40.673 +00:00 [DBG] No PKCE used.
2019-01-18 00:38:40.673 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 00:38:40.674 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8P5RAY6ypAZCuaU8vyeRnOWk-g4s9tf1pGc257W713JZ-RLOmUcpxXY_PT6GZJ1jw627UHyDcexApisc69YCyazD4egVLQBZj0K72Utg95e_n0i6VDB6lCl874WGIfba326ki9HXzULaP4AKNHmQfpd79PPZMBG4gAX9HincQZgyDX7GLWBnuYD0r933PrYj13K2JIrd46vtbK8wr3lTW4aAbk1M57RKEhZeX7jEQJOgPqJGOMcNUxwupUlItky_BYWpWk54ChhekWq1tfofVnwf9hra-UR2uh12xkK0svPyOa1gVgLt_xYOA6u00I9yLiY7xWd9nQyYKNs5zHfXJm0",
  "Nonce": "636833686978108713.MDAyM2I1NWYtMjQxMi00YjM2LTgyODUtM2FjMDQyM2M4NzQxY2Q3MzVlMDktN2JjNi00ZmYwLTg2ODgtZDE3ZTNhYTE2ZWEz",
  "SessionId": "45c3a2c660acad253181a07661a295ac",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833686978108713.MDAyM2I1NWYtMjQxMi00YjM2LTgyODUtM2FjMDQyM2M4NzQxY2Q3MzVlMDktN2JjNi00ZmYwLTg2ODgtZDE3ZTNhYTE2ZWEz",
    "state": "CfDJ8P5RAY6ypAZCuaU8vyeRnOWk-g4s9tf1pGc257W713JZ-RLOmUcpxXY_PT6GZJ1jw627UHyDcexApisc69YCyazD4egVLQBZj0K72Utg95e_n0i6VDB6lCl874WGIfba326ki9HXzULaP4AKNHmQfpd79PPZMBG4gAX9HincQZgyDX7GLWBnuYD0r933PrYj13K2JIrd46vtbK8wr3lTW4aAbk1M57RKEhZeX7jEQJOgPqJGOMcNUxwupUlItky_BYWpWk54ChhekWq1tfofVnwf9hra-UR2uh12xkK0svPyOa1gVgLt_xYOA6u00I9yLiY7xWd9nQyYKNs5zHfXJm0",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 00:38:40.707 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 00:38:40.707 +00:00 [INF] Showing consent: User has not yet consented
2019-01-18 00:38:40.763 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 00:38:40.764 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 00:38:40.764 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 00:38:40.764 +00:00 [DBG] No PKCE used.
2019-01-18 00:38:40.765 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 00:38:40.765 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 00:38:43.128 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 00:38:43.199 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 00:38:43.199 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 00:38:43.199 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 00:38:43.200 +00:00 [DBG] No PKCE used.
2019-01-18 00:38:43.202 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 00:38:43.276 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 00:38:43.276 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 00:38:43.276 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 00:38:43.277 +00:00 [DBG] Start authorize callback request
2019-01-18 00:38:43.294 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 00:38:43.294 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 00:38:43.294 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 00:38:43.294 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 00:38:43.294 +00:00 [DBG] No PKCE used.
2019-01-18 00:38:43.295 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 00:38:43.295 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8P5RAY6ypAZCuaU8vyeRnOWk-g4s9tf1pGc257W713JZ-RLOmUcpxXY_PT6GZJ1jw627UHyDcexApisc69YCyazD4egVLQBZj0K72Utg95e_n0i6VDB6lCl874WGIfba326ki9HXzULaP4AKNHmQfpd79PPZMBG4gAX9HincQZgyDX7GLWBnuYD0r933PrYj13K2JIrd46vtbK8wr3lTW4aAbk1M57RKEhZeX7jEQJOgPqJGOMcNUxwupUlItky_BYWpWk54ChhekWq1tfofVnwf9hra-UR2uh12xkK0svPyOa1gVgLt_xYOA6u00I9yLiY7xWd9nQyYKNs5zHfXJm0",
  "Nonce": "636833686978108713.MDAyM2I1NWYtMjQxMi00YjM2LTgyODUtM2FjMDQyM2M4NzQxY2Q3MzVlMDktN2JjNi00ZmYwLTg2ODgtZDE3ZTNhYTE2ZWEz",
  "SessionId": "45c3a2c660acad253181a07661a295ac",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833686978108713.MDAyM2I1NWYtMjQxMi00YjM2LTgyODUtM2FjMDQyM2M4NzQxY2Q3MzVlMDktN2JjNi00ZmYwLTg2ODgtZDE3ZTNhYTE2ZWEz",
    "state": "CfDJ8P5RAY6ypAZCuaU8vyeRnOWk-g4s9tf1pGc257W713JZ-RLOmUcpxXY_PT6GZJ1jw627UHyDcexApisc69YCyazD4egVLQBZj0K72Utg95e_n0i6VDB6lCl874WGIfba326ki9HXzULaP4AKNHmQfpd79PPZMBG4gAX9HincQZgyDX7GLWBnuYD0r933PrYj13K2JIrd46vtbK8wr3lTW4aAbk1M57RKEhZeX7jEQJOgPqJGOMcNUxwupUlItky_BYWpWk54ChhekWq1tfofVnwf9hra-UR2uh12xkK0svPyOa1gVgLt_xYOA6u00I9yLiY7xWd9nQyYKNs5zHfXJm0",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 00:38:43.295 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 00:38:43.352 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-18 00:38:43.370 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-18 00:38:43.386 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 00:38:43.412 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-18 00:38:43.471 +00:00 [DBG] Creating Implicit Flow response.
2019-01-18 00:38:43.497 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 00:38:43.671 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****OUKQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****83a8"
    }
  ],
  "ActivityId": "0HLJSRKUB3N4V:00000007",
  "TimeStamp": "2019-01-18T00:38:43Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 00:38:43.687 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8P5RAY6ypAZCuaU8vyeRnOWk-g4s9tf1pGc257W713JZ-RLOmUcpxXY_PT6GZJ1jw627UHyDcexApisc69YCyazD4egVLQBZj0K72Utg95e_n0i6VDB6lCl874WGIfba326ki9HXzULaP4AKNHmQfpd79PPZMBG4gAX9HincQZgyDX7GLWBnuYD0r933PrYj13K2JIrd46vtbK8wr3lTW4aAbk1M57RKEhZeX7jEQJOgPqJGOMcNUxwupUlItky_BYWpWk54ChhekWq1tfofVnwf9hra-UR2uh12xkK0svPyOa1gVgLt_xYOA6u00I9yLiY7xWd9nQyYKNs5zHfXJm0",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-18 00:38:43.734 +00:00 [DBG] Augmenting SignInContext
2019-01-18 00:38:43.735 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 00:38:44.484 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 00:38:44.489 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 00:38:44.489 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 00:38:44.513 +00:00 [DBG] Start token request.
2019-01-18 00:38:44.533 +00:00 [DBG] Start client validation
2019-01-18 00:38:44.554 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 00:38:44.572 +00:00 [DBG] Start parsing for secret in post body
2019-01-18 00:38:44.588 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-18 00:38:44.599 +00:00 [DBG] Secret id found: MVC
2019-01-18 00:38:44.600 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 00:38:44.639 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 00:38:44.639 +00:00 [DBG] Client validation success
2019-01-18 00:38:44.662 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSRKUB3N4U:00000003",
  "TimeStamp": "2019-01-18T00:38:44Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 00:38:44.690 +00:00 [DBG] Start token request validation
2019-01-18 00:38:44.720 +00:00 [DBG] Start validation of authorization code token request
2019-01-18 00:38:44.749 +00:00 [DBG] Validation of authorization code token request success
2019-01-18 00:38:44.761 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "faf01bf985b96f6c489abbb25554c3ebceb437bce4062d853178325efb6183a8",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "faf01bf985b96f6c489abbb25554c3ebceb437bce4062d853178325efb6183a8",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-18 00:38:44.786 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 00:38:44.803 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 00:38:44.803 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 00:38:44.834 +00:00 [DBG] Creating refresh token
2019-01-18 00:38:44.834 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-18 00:38:44.863 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 00:38:44.863 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 00:38:44.884 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****t9xA"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****b01a"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****o_ZQ"
    }
  ],
  "ActivityId": "0HLJSRKUB3N4U:00000003",
  "TimeStamp": "2019-01-18T00:38:44Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 00:38:44.887 +00:00 [DBG] Token request success.
2019-01-18 00:38:44.947 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-18 00:38:44.948 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-18 00:38:44.949 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-18 00:38:44.971 +00:00 [DBG] Start userinfo request
2019-01-18 00:38:44.997 +00:00 [DBG] Bearer token found in header
2019-01-18 00:38:45.085 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 00:38:45.091 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 00:38:45.093 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-18 00:38:45.101 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1547771924,
    "exp": 1547775524,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547771920,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-18 00:38:45.127 +00:00 [DBG] Creating userinfo response
2019-01-18 00:38:45.137 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 00:38:45.144 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 00:38:45.151 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-18 00:38:45.151 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 00:38:45.173 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-18 00:38:45.174 +00:00 [DBG] End userinfo request
2019-01-18 00:38:45.942 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 00:38:45.943 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 00:38:45.943 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 00:38:45.944 +00:00 [DBG] Start token request.
2019-01-18 00:38:45.944 +00:00 [DBG] Start client validation
2019-01-18 00:38:45.944 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 00:38:45.944 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 00:38:45.957 +00:00 [DBG] Secret id found: MVC
2019-01-18 00:38:45.957 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 00:38:45.958 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 00:38:45.958 +00:00 [DBG] Client validation success
2019-01-18 00:38:45.959 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSRKUB3N51:00000001",
  "TimeStamp": "2019-01-18T00:38:45Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 00:38:45.980 +00:00 [DBG] Start token request validation
2019-01-18 00:38:45.998 +00:00 [DBG] Start client credentials token request validation
2019-01-18 00:38:46.018 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 00:38:46.030 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 00:38:46.048 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 00:38:46.055 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****RY6w"
    }
  ],
  "ActivityId": "0HLJSRKUB3N51:00000001",
  "TimeStamp": "2019-01-18T00:38:46Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 00:38:46.067 +00:00 [DBG] Token request success.
2019-01-18 00:38:46.611 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 00:38:46.633 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 00:38:46.633 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 00:38:46.633 +00:00 [DBG] Start discovery request
2019-01-18 00:38:46.868 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 00:38:46.868 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 00:38:46.868 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 00:38:46.869 +00:00 [DBG] Start key discovery request
2019-01-18 00:39:55.445 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 00:39:55.445 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 00:39:55.445 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 00:39:55.445 +00:00 [DBG] Start token request.
2019-01-18 00:39:55.445 +00:00 [DBG] Start client validation
2019-01-18 00:39:55.445 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 00:39:55.445 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 00:39:55.445 +00:00 [DBG] Secret id found: MVC
2019-01-18 00:39:55.445 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 00:39:55.446 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 00:39:55.446 +00:00 [DBG] Client validation success
2019-01-18 00:39:55.446 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSRKUB3N53:00000001",
  "TimeStamp": "2019-01-18T00:39:55Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 00:39:55.477 +00:00 [DBG] Start token request validation
2019-01-18 00:39:55.477 +00:00 [DBG] Start client credentials token request validation
2019-01-18 00:39:55.478 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 00:39:55.478 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 00:39:55.479 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 00:39:55.482 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****2gIg"
    }
  ],
  "ActivityId": "0HLJSRKUB3N53:00000001",
  "TimeStamp": "2019-01-18T00:39:55Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 00:39:55.484 +00:00 [DBG] Token request success.
2019-01-18 00:39:56.428 +00:00 [INF] Message received:
2019-01-18 00:39:56.432 +00:00 [INF] ----------------------------------
2019-01-18 00:39:56.441 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"88e8bba1-4cf6-48dd-87e4-db52ce6fec4a","CreationDate":"2019-01-18T00:39:56.2879393Z"}
2019-01-18 00:39:56.455 +00:00 [INF] ----------------------------------
2019-01-18 00:39:57.910 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens fed686c8-5569-451f-be22-e6d9fb312e22 to 1 handlers took 1493 ms
2019-01-18 01:50:19.707 +00:00 [WRN] No XML encryptor configured. Key "272ba9e6-c512-44ea-bbca-83a7e0bef956" may be persisted to storage in unencrypted form.
2019-01-18 01:50:21.323 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-18 01:50:23.041 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-18 01:50:23.158 +00:00 [INF] Setting number of workers to 1
2019-01-18 01:50:23.192 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-18 01:50:23.202 +00:00 [INF] Bus Rebus 1 started
2019-01-18 01:50:23.269 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-18 01:50:23.381 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-18 01:50:23.415 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-18 01:50:23.416 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-18 01:50:23.418 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-18 01:50:23.421 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-18 01:50:23.422 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-18 01:50:23.432 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-18 01:58:38.947 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 01:58:39.223 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 01:58:39.225 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 01:58:39.232 +00:00 [DBG] Start discovery request
2019-01-18 01:58:39.425 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 01:58:39.454 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 01:58:39.467 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 01:58:39.477 +00:00 [DBG] Start key discovery request
2019-01-18 01:58:39.633 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 01:58:39.634 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 01:58:39.641 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-18 01:58:39.652 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-18 01:58:39.653 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-18 01:58:39.660 +00:00 [DBG] Start authorize request
2019-01-18 01:58:39.689 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 01:58:39.697 +00:00 [DBG] No user present in authorize request
2019-01-18 01:58:39.707 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 01:58:39.726 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 01:58:39.735 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 01:58:39.738 +00:00 [DBG] No PKCE used.
2019-01-18 01:58:39.796 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 01:58:39.813 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8MLVB0KthzlPmPhXUtEZyGoTMZRZFQtp5GzVrJybo7rW1axWea4kECYIOh55ni8nwTwFbobz6aS5XjXQGoeG1GmkxvksaRRpW6clX1IaC0CrAL1AWUgvFh_RTMwXjJrk488u8SCuxf0-DfmNXi36OWiNYoNCzRpysQNkoDE919GZVMamWL0NAJR1zfKTaVIZPVUoTIAjbiDSTm1viaRKzeXemZeS0n3AqGkVPFF48MpxtfD7LsR8zrrIXSCaTYC6J54Rl4SbPsvz3JFRMJo_BM4KuHqvfGN5IA2bS-N_40TrJ9H8LS_MAtmOvTngMAQPt0eHgru1_6VsxmLmHG6OwuQ",
  "Nonce": "636833735195504205.M2IyZWViODUtOTVlOC00NTA5LTgwMDUtYzNmNmZlMzdlYWE4YjE5NThiNGMtMDZiZC00NGI4LTg5M2QtNzdmNDRkN2QzZmZk",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833735195504205.M2IyZWViODUtOTVlOC00NTA5LTgwMDUtYzNmNmZlMzdlYWE4YjE5NThiNGMtMDZiZC00NGI4LTg5M2QtNzdmNDRkN2QzZmZk",
    "state": "CfDJ8MLVB0KthzlPmPhXUtEZyGoTMZRZFQtp5GzVrJybo7rW1axWea4kECYIOh55ni8nwTwFbobz6aS5XjXQGoeG1GmkxvksaRRpW6clX1IaC0CrAL1AWUgvFh_RTMwXjJrk488u8SCuxf0-DfmNXi36OWiNYoNCzRpysQNkoDE919GZVMamWL0NAJR1zfKTaVIZPVUoTIAjbiDSTm1viaRKzeXemZeS0n3AqGkVPFF48MpxtfD7LsR8zrrIXSCaTYC6J54Rl4SbPsvz3JFRMJo_BM4KuHqvfGN5IA2bS-N_40TrJ9H8LS_MAtmOvTngMAQPt0eHgru1_6VsxmLmHG6OwuQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 01:58:39.839 +00:00 [INF] Showing login: User is not authenticated
2019-01-18 01:58:39.855 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 01:58:39.855 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 01:58:40.234 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 01:58:40.235 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 01:58:40.235 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 01:58:40.236 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 01:58:40.237 +00:00 [DBG] No PKCE used.
2019-01-18 01:58:40.242 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 01:58:40.251 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 01:58:42.798 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 01:58:42.800 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 01:58:42.800 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 01:58:44.096 +00:00 [DBG] Augmenting SignInContext
2019-01-18 01:58:44.102 +00:00 [DBG] Adding idp claim with value: local
2019-01-18 01:58:44.102 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-18 01:58:44.105 +00:00 [DBG] Adding auth_time claim with value: 1547776724
2019-01-18 01:58:44.112 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 01:58:44.135 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 01:58:44.178 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLJST1RBPFIQ:00000003",
  "TimeStamp": "2019-01-18T01:58:44Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 01:58:44.233 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 01:58:44.235 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 01:58:44.235 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 01:58:44.250 +00:00 [DBG] Start authorize callback request
2019-01-18 01:58:44.259 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 01:58:44.260 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 01:58:44.260 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 01:58:44.261 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 01:58:44.261 +00:00 [DBG] No PKCE used.
2019-01-18 01:58:44.266 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 01:58:44.267 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8MLVB0KthzlPmPhXUtEZyGoTMZRZFQtp5GzVrJybo7rW1axWea4kECYIOh55ni8nwTwFbobz6aS5XjXQGoeG1GmkxvksaRRpW6clX1IaC0CrAL1AWUgvFh_RTMwXjJrk488u8SCuxf0-DfmNXi36OWiNYoNCzRpysQNkoDE919GZVMamWL0NAJR1zfKTaVIZPVUoTIAjbiDSTm1viaRKzeXemZeS0n3AqGkVPFF48MpxtfD7LsR8zrrIXSCaTYC6J54Rl4SbPsvz3JFRMJo_BM4KuHqvfGN5IA2bS-N_40TrJ9H8LS_MAtmOvTngMAQPt0eHgru1_6VsxmLmHG6OwuQ",
  "Nonce": "636833735195504205.M2IyZWViODUtOTVlOC00NTA5LTgwMDUtYzNmNmZlMzdlYWE4YjE5NThiNGMtMDZiZC00NGI4LTg5M2QtNzdmNDRkN2QzZmZk",
  "SessionId": "51acbdd4389aa8ed340c71fdb9c25f00",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833735195504205.M2IyZWViODUtOTVlOC00NTA5LTgwMDUtYzNmNmZlMzdlYWE4YjE5NThiNGMtMDZiZC00NGI4LTg5M2QtNzdmNDRkN2QzZmZk",
    "state": "CfDJ8MLVB0KthzlPmPhXUtEZyGoTMZRZFQtp5GzVrJybo7rW1axWea4kECYIOh55ni8nwTwFbobz6aS5XjXQGoeG1GmkxvksaRRpW6clX1IaC0CrAL1AWUgvFh_RTMwXjJrk488u8SCuxf0-DfmNXi36OWiNYoNCzRpysQNkoDE919GZVMamWL0NAJR1zfKTaVIZPVUoTIAjbiDSTm1viaRKzeXemZeS0n3AqGkVPFF48MpxtfD7LsR8zrrIXSCaTYC6J54Rl4SbPsvz3JFRMJo_BM4KuHqvfGN5IA2bS-N_40TrJ9H8LS_MAtmOvTngMAQPt0eHgru1_6VsxmLmHG6OwuQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 01:58:44.298 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 01:58:44.299 +00:00 [INF] Showing consent: User has not yet consented
2019-01-18 01:58:44.359 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 01:58:44.360 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 01:58:44.360 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 01:58:44.361 +00:00 [DBG] No PKCE used.
2019-01-18 01:58:44.361 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 01:58:44.362 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 01:58:46.334 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 01:58:46.393 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 01:58:46.393 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 01:58:46.394 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 01:58:46.394 +00:00 [DBG] No PKCE used.
2019-01-18 01:58:46.396 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 01:58:46.426 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 01:58:46.426 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 01:58:46.427 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 01:58:46.427 +00:00 [DBG] Start authorize callback request
2019-01-18 01:58:46.441 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 01:58:46.448 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 01:58:46.448 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 01:58:46.449 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 01:58:46.449 +00:00 [DBG] No PKCE used.
2019-01-18 01:58:46.450 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 01:58:46.451 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8MLVB0KthzlPmPhXUtEZyGoTMZRZFQtp5GzVrJybo7rW1axWea4kECYIOh55ni8nwTwFbobz6aS5XjXQGoeG1GmkxvksaRRpW6clX1IaC0CrAL1AWUgvFh_RTMwXjJrk488u8SCuxf0-DfmNXi36OWiNYoNCzRpysQNkoDE919GZVMamWL0NAJR1zfKTaVIZPVUoTIAjbiDSTm1viaRKzeXemZeS0n3AqGkVPFF48MpxtfD7LsR8zrrIXSCaTYC6J54Rl4SbPsvz3JFRMJo_BM4KuHqvfGN5IA2bS-N_40TrJ9H8LS_MAtmOvTngMAQPt0eHgru1_6VsxmLmHG6OwuQ",
  "Nonce": "636833735195504205.M2IyZWViODUtOTVlOC00NTA5LTgwMDUtYzNmNmZlMzdlYWE4YjE5NThiNGMtMDZiZC00NGI4LTg5M2QtNzdmNDRkN2QzZmZk",
  "SessionId": "51acbdd4389aa8ed340c71fdb9c25f00",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833735195504205.M2IyZWViODUtOTVlOC00NTA5LTgwMDUtYzNmNmZlMzdlYWE4YjE5NThiNGMtMDZiZC00NGI4LTg5M2QtNzdmNDRkN2QzZmZk",
    "state": "CfDJ8MLVB0KthzlPmPhXUtEZyGoTMZRZFQtp5GzVrJybo7rW1axWea4kECYIOh55ni8nwTwFbobz6aS5XjXQGoeG1GmkxvksaRRpW6clX1IaC0CrAL1AWUgvFh_RTMwXjJrk488u8SCuxf0-DfmNXi36OWiNYoNCzRpysQNkoDE919GZVMamWL0NAJR1zfKTaVIZPVUoTIAjbiDSTm1viaRKzeXemZeS0n3AqGkVPFF48MpxtfD7LsR8zrrIXSCaTYC6J54Rl4SbPsvz3JFRMJo_BM4KuHqvfGN5IA2bS-N_40TrJ9H8LS_MAtmOvTngMAQPt0eHgru1_6VsxmLmHG6OwuQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 01:58:46.453 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 01:58:46.474 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-18 01:58:46.490 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-18 01:58:46.496 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 01:58:46.518 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-18 01:58:46.550 +00:00 [DBG] Creating Implicit Flow response.
2019-01-18 01:58:46.566 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 01:58:46.765 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****1rRg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****bc55"
    }
  ],
  "ActivityId": "0HLJST1RBPFIQ:00000007",
  "TimeStamp": "2019-01-18T01:58:46Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 01:58:46.780 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8MLVB0KthzlPmPhXUtEZyGoTMZRZFQtp5GzVrJybo7rW1axWea4kECYIOh55ni8nwTwFbobz6aS5XjXQGoeG1GmkxvksaRRpW6clX1IaC0CrAL1AWUgvFh_RTMwXjJrk488u8SCuxf0-DfmNXi36OWiNYoNCzRpysQNkoDE919GZVMamWL0NAJR1zfKTaVIZPVUoTIAjbiDSTm1viaRKzeXemZeS0n3AqGkVPFF48MpxtfD7LsR8zrrIXSCaTYC6J54Rl4SbPsvz3JFRMJo_BM4KuHqvfGN5IA2bS-N_40TrJ9H8LS_MAtmOvTngMAQPt0eHgru1_6VsxmLmHG6OwuQ",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-18 01:58:46.816 +00:00 [DBG] Augmenting SignInContext
2019-01-18 01:58:46.817 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 01:58:47.299 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 01:58:47.303 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 01:58:47.304 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 01:58:47.321 +00:00 [DBG] Start token request.
2019-01-18 01:58:47.335 +00:00 [DBG] Start client validation
2019-01-18 01:58:47.348 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 01:58:47.359 +00:00 [DBG] Start parsing for secret in post body
2019-01-18 01:58:47.380 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-18 01:58:47.380 +00:00 [DBG] Secret id found: MVC
2019-01-18 01:58:47.381 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 01:58:47.402 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 01:58:47.403 +00:00 [DBG] Client validation success
2019-01-18 01:58:47.409 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJST1RBPFIP:00000003",
  "TimeStamp": "2019-01-18T01:58:47Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 01:58:47.425 +00:00 [DBG] Start token request validation
2019-01-18 01:58:47.454 +00:00 [DBG] Start validation of authorization code token request
2019-01-18 01:58:47.483 +00:00 [DBG] Validation of authorization code token request success
2019-01-18 01:58:47.491 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "f236df9175f1c152c795ff74895d2558e96975e46df0ccf7c2abaef731e3bc55",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "f236df9175f1c152c795ff74895d2558e96975e46df0ccf7c2abaef731e3bc55",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-18 01:58:47.520 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 01:58:47.539 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 01:58:47.540 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 01:58:47.565 +00:00 [DBG] Creating refresh token
2019-01-18 01:58:47.565 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-18 01:58:47.587 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 01:58:47.588 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 01:58:47.603 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****XGBw"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****5a74"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****29dw"
    }
  ],
  "ActivityId": "0HLJST1RBPFIP:00000003",
  "TimeStamp": "2019-01-18T01:58:47Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 01:58:47.608 +00:00 [DBG] Token request success.
2019-01-18 01:58:47.653 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-18 01:58:47.654 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-18 01:58:47.654 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-18 01:58:47.667 +00:00 [DBG] Start userinfo request
2019-01-18 01:58:47.681 +00:00 [DBG] Bearer token found in header
2019-01-18 01:58:47.800 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 01:58:47.805 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 01:58:47.808 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-18 01:58:47.817 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1547776727,
    "exp": 1547780327,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547776724,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-18 01:58:47.840 +00:00 [DBG] Creating userinfo response
2019-01-18 01:58:47.848 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 01:58:47.856 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 01:58:47.863 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-18 01:58:47.864 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 01:58:47.879 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-18 01:58:47.880 +00:00 [DBG] End userinfo request
2019-01-18 01:58:48.402 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 01:58:48.402 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 01:58:48.402 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 01:58:48.403 +00:00 [DBG] Start token request.
2019-01-18 01:58:48.403 +00:00 [DBG] Start client validation
2019-01-18 01:58:48.403 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 01:58:48.404 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 01:58:48.404 +00:00 [DBG] Secret id found: MVC
2019-01-18 01:58:48.405 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 01:58:48.406 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 01:58:48.407 +00:00 [DBG] Client validation success
2019-01-18 01:58:48.407 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJST1RBPFIT:00000001",
  "TimeStamp": "2019-01-18T01:58:48Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 01:58:48.430 +00:00 [DBG] Start token request validation
2019-01-18 01:58:48.446 +00:00 [DBG] Start client credentials token request validation
2019-01-18 01:58:48.462 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 01:58:48.463 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 01:58:48.483 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 01:58:48.487 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****CC8A"
    }
  ],
  "ActivityId": "0HLJST1RBPFIT:00000001",
  "TimeStamp": "2019-01-18T01:58:48Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 01:58:48.487 +00:00 [DBG] Token request success.
2019-01-18 01:58:48.975 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 01:58:48.976 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 01:58:48.978 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 01:58:48.979 +00:00 [DBG] Start discovery request
2019-01-18 01:58:49.110 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 01:58:49.111 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 01:58:49.111 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 01:58:49.112 +00:00 [DBG] Start key discovery request
2019-01-18 01:58:56.164 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 01:58:56.165 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 01:58:56.165 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 01:58:56.165 +00:00 [DBG] Start token request.
2019-01-18 01:58:56.165 +00:00 [DBG] Start client validation
2019-01-18 01:58:56.165 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 01:58:56.165 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 01:58:56.165 +00:00 [DBG] Secret id found: MVC
2019-01-18 01:58:56.165 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 01:58:56.165 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 01:58:56.165 +00:00 [DBG] Client validation success
2019-01-18 01:58:56.166 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJST1RBPFIV:00000001",
  "TimeStamp": "2019-01-18T01:58:56Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 01:58:56.182 +00:00 [DBG] Start token request validation
2019-01-18 01:58:56.183 +00:00 [DBG] Start client credentials token request validation
2019-01-18 01:58:56.183 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 01:58:56.183 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 01:58:56.183 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 01:58:56.186 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****a5YA"
    }
  ],
  "ActivityId": "0HLJST1RBPFIV:00000001",
  "TimeStamp": "2019-01-18T01:58:56Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 01:58:56.186 +00:00 [DBG] Token request success.
2019-01-18 01:58:56.845 +00:00 [INF] Message received:
2019-01-18 01:58:56.846 +00:00 [INF] ----------------------------------
2019-01-18 01:58:56.852 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"1cea1274-0f7f-43d5-8c5d-4bb6ce2de252","CreationDate":"2019-01-18T01:58:56.7289115Z"}
2019-01-18 01:58:56.853 +00:00 [INF] ----------------------------------
2019-01-18 01:58:57.989 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens f34c1374-0b94-43f0-b6c7-b7c43120700c to 1 handlers took 1159 ms
2019-01-18 02:02:22.280 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-18 02:02:23.937 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-18 02:02:24.040 +00:00 [INF] Setting number of workers to 1
2019-01-18 02:02:24.136 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-18 02:02:24.201 +00:00 [INF] Bus Rebus 1 started
2019-01-18 02:02:24.203 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-18 02:02:24.503 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-18 02:02:24.556 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-18 02:02:24.594 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-18 02:02:24.601 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-18 02:02:24.614 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-18 02:02:24.616 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-18 02:02:24.627 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-18 02:05:41.454 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 02:05:41.745 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 02:05:41.747 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 02:05:41.758 +00:00 [DBG] Start discovery request
2019-01-18 02:05:41.908 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 02:05:41.914 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 02:05:41.916 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 02:05:41.925 +00:00 [DBG] Start key discovery request
2019-01-18 02:05:42.292 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-18 02:05:42.299 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-18 02:05:42.299 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-18 02:05:42.339 +00:00 [DBG] Processing signout request for 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 02:05:42.358 +00:00 [DBG] Start end session request validation
2019-01-18 02:05:42.376 +00:00 [DBG] Start identity token validation
2019-01-18 02:05:42.406 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:05:42.406 +00:00 [DBG] Client found: MVC / MVC
2019-01-18 02:05:42.494 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-18 02:05:42.502 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1547776727,
    "exp": 1547777027,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636833735195504205.M2IyZWViODUtOTVlOC00NTA5LTgwMDUtYzNmNmZlMzdlYWE4YjE5NThiNGMtMDZiZC00NGI4LTg5M2QtNzdmNDRkN2QzZmZk",
    "iat": 1547776727,
    "at_hash": "qDKhIfMFmz3j97A0wKkG1Q",
    "sid": "51acbdd4389aa8ed340c71fdb9c25f00",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547776724,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "amr": "pwd"
  }
}
2019-01-18 02:05:42.537 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8MLVB0KthzlPmPhXUtEZyGqMQif_5pmmn6PrmJKzFPhdys1zVKtvPuxbwYH-HR3QpUVAa4fHGlevAlZq_EBk8adOjfJb_gsFxTRDXVomHQibefJdNIa5lzDTCTBrexQm0H1B6G1nGTqO0s4Ji0YXkg_w-vCMMY_2Cs2CKb0dx76z",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDc3NzY3MjcsImV4cCI6MTU0Nzc3NzAyNywiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4MzM3MzUxOTU1MDQyMDUuTTJJeVpXVmlPRFV0T1RWbE9DMDBOVEE1TFRnd01EVXRZek5tTm1abE16ZGxZV0U0WWpFNU5UaGlOR010TURaaVpDMDBOR0k0TFRnNU0yUXROemRtTkRSa04yUXpabVprIiwiaWF0IjoxNTQ3Nzc2NzI3LCJhdF9oYXNoIjoicURLaElmTUZtejNqOTdBMHdLa0cxUSIsInNpZCI6IjUxYWNiZGQ0Mzg5YWE4ZWQzNDBjNzFmZGI5YzI1ZjAwIiwic3ViIjoiMTczZjk2NGYtMWViOS00M2NmLTkxYzctZGY3NTM3MTdjMTZjIiwiYXV0aF90aW1lIjoxNTQ3Nzc2NzI0LCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImVtYWlsIjoiYWxpY2VAYXNwLm5ldCIsInBob25lIjoiMTIzNC01Njc4IiwiYWRkcmVzcyI6IlJ1YSBWZXJndWVpcm8sIDQ1NiIsImFkZHJlc3NfZGV0YWlscyI6IjggYW5kYXIgc2FsYSA4MDEiLCJuZWlnaGJvcmhvb2QiOiJWaWxhIE1hcmlhbmEiLCJjaXR5IjoiU8OjbyBQYXVsbyIsInN0YXRlIjoiU1AiLCJ6aXBfY29kZSI6IjY5MTE4IiwiYW1yIjpbInB3ZCJdfQ.vO_Is2KjObyXAav1FjyfrvpRC5jm9R3Ljo4uEunbDHJ0QAz1Kc6L2lB0g8lzLlMbl0zNdNzMmK9mDQpmLPLHmrC4_RcGiDtMjnp-uBHk_pQtBVfW3D-L36oEIjnGO4bO0Sr7e6kPIxs3_mHcOM9k43xVV4n2oVqQWRqz7sVL28TxOb7wVz6GOeYdLLUuKsmsy4fGiiVgszF_cfsnVvE0QJ6Tuvf0kpDCRlE8kMAIBIkB7i0ztjqpMhDXm_EiR-aV7ef4tmuTTkxFu8v_DAohr0rWrzfI1Nl-b8lKC56oMFYjgAop4ItjHaP2B_CD_I9hZEC82XrA6IFib5jX5iXGBw",
    "state": "CfDJ8MLVB0KthzlPmPhXUtEZyGqMQif_5pmmn6PrmJKzFPhdys1zVKtvPuxbwYH-HR3QpUVAa4fHGlevAlZq_EBk8adOjfJb_gsFxTRDXVomHQibefJdNIa5lzDTCTBrexQm0H1B6G1nGTqO0s4Ji0YXkg_w-vCMMY_2Cs2CKb0dx76z",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 02:05:42.538 +00:00 [DBG] Success validating end session request from MVC
2019-01-18 02:05:43.020 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-18 02:05:43.022 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-18 02:05:43.023 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-18 02:05:43.099 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLJST5P7KA9V:00000002",
  "TimeStamp": "2019-01-18T02:05:43Z",
  "ProcessId": 400,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:05:45.727 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-18 02:05:45.730 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-18 02:05:45.730 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-18 02:05:45.739 +00:00 [DBG] Start authorize request
2019-01-18 02:05:45.747 +00:00 [DBG] No user present in authorize request
2019-01-18 02:05:45.755 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:05:45.763 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:05:45.771 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:05:45.773 +00:00 [DBG] No PKCE used.
2019-01-18 02:05:45.821 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:05:45.857 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8MLVB0KthzlPmPhXUtEZyGqXw_2FDzNDsFWlv5EFPpI_ZXElDCZIIEe9jNxmbC8BbxsdOne8JM7KUZnZD2yTwPIgEgrcwVbmLIAt20YVOEVj3Jbr5S3UFc3bNynMbbR13jZkOwe6waREDfjHQti5xTs9wSNXnW-IrMB0h2Bv9P-noKudVCn3aZXiKjYVX-F2Del53EfKhUhT6FM2GH7UiqvQ2EXA-g8lgZ8h30_LMG1ghQ24SDLOxI8RqWdbNCTTQqSVjwPsK0WrfTQ2pMkLe1k2ij0N8uYhIyJu0FoaodI7DN-hSaZnSmRWki9kip_qlYLZncCq7Y2u7pmXEPvuQ6g",
  "Nonce": "636833739457166254.NDM3MDcxYzgtNTc3Yi00MWJlLTg0ZTEtZTQ1MWFhZTVjMWIyMzBlNDU0OWUtMjMyYy00N2M4LWE1YjEtN2Q4MTk5Y2U0ODFi",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833739457166254.NDM3MDcxYzgtNTc3Yi00MWJlLTg0ZTEtZTQ1MWFhZTVjMWIyMzBlNDU0OWUtMjMyYy00N2M4LWE1YjEtN2Q4MTk5Y2U0ODFi",
    "state": "CfDJ8MLVB0KthzlPmPhXUtEZyGqXw_2FDzNDsFWlv5EFPpI_ZXElDCZIIEe9jNxmbC8BbxsdOne8JM7KUZnZD2yTwPIgEgrcwVbmLIAt20YVOEVj3Jbr5S3UFc3bNynMbbR13jZkOwe6waREDfjHQti5xTs9wSNXnW-IrMB0h2Bv9P-noKudVCn3aZXiKjYVX-F2Del53EfKhUhT6FM2GH7UiqvQ2EXA-g8lgZ8h30_LMG1ghQ24SDLOxI8RqWdbNCTTQqSVjwPsK0WrfTQ2pMkLe1k2ij0N8uYhIyJu0FoaodI7DN-hSaZnSmRWki9kip_qlYLZncCq7Y2u7pmXEPvuQ6g",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 02:05:45.876 +00:00 [INF] Showing login: User is not authenticated
2019-01-18 02:05:45.938 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:05:45.938 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:05:45.938 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:05:45.938 +00:00 [DBG] No PKCE used.
2019-01-18 02:05:45.940 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:05:45.944 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:05:48.423 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 02:05:49.450 +00:00 [DBG] Augmenting SignInContext
2019-01-18 02:05:49.454 +00:00 [DBG] Adding idp claim with value: local
2019-01-18 02:05:49.454 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-18 02:05:49.455 +00:00 [DBG] Adding auth_time claim with value: 1547777149
2019-01-18 02:05:49.469 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 02:05:49.486 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLJST5P7KA9V:00000005",
  "TimeStamp": "2019-01-18T02:05:49Z",
  "ProcessId": 400,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:05:49.500 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 02:05:49.501 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 02:05:49.502 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 02:05:49.516 +00:00 [DBG] Start authorize callback request
2019-01-18 02:05:49.522 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 02:05:49.522 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:05:49.522 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:05:49.522 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:05:49.523 +00:00 [DBG] No PKCE used.
2019-01-18 02:05:49.523 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:05:49.523 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8MLVB0KthzlPmPhXUtEZyGqXw_2FDzNDsFWlv5EFPpI_ZXElDCZIIEe9jNxmbC8BbxsdOne8JM7KUZnZD2yTwPIgEgrcwVbmLIAt20YVOEVj3Jbr5S3UFc3bNynMbbR13jZkOwe6waREDfjHQti5xTs9wSNXnW-IrMB0h2Bv9P-noKudVCn3aZXiKjYVX-F2Del53EfKhUhT6FM2GH7UiqvQ2EXA-g8lgZ8h30_LMG1ghQ24SDLOxI8RqWdbNCTTQqSVjwPsK0WrfTQ2pMkLe1k2ij0N8uYhIyJu0FoaodI7DN-hSaZnSmRWki9kip_qlYLZncCq7Y2u7pmXEPvuQ6g",
  "Nonce": "636833739457166254.NDM3MDcxYzgtNTc3Yi00MWJlLTg0ZTEtZTQ1MWFhZTVjMWIyMzBlNDU0OWUtMjMyYy00N2M4LWE1YjEtN2Q4MTk5Y2U0ODFi",
  "SessionId": "0ebed9c6bf102d66efba4113cb6022e2",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833739457166254.NDM3MDcxYzgtNTc3Yi00MWJlLTg0ZTEtZTQ1MWFhZTVjMWIyMzBlNDU0OWUtMjMyYy00N2M4LWE1YjEtN2Q4MTk5Y2U0ODFi",
    "state": "CfDJ8MLVB0KthzlPmPhXUtEZyGqXw_2FDzNDsFWlv5EFPpI_ZXElDCZIIEe9jNxmbC8BbxsdOne8JM7KUZnZD2yTwPIgEgrcwVbmLIAt20YVOEVj3Jbr5S3UFc3bNynMbbR13jZkOwe6waREDfjHQti5xTs9wSNXnW-IrMB0h2Bv9P-noKudVCn3aZXiKjYVX-F2Del53EfKhUhT6FM2GH7UiqvQ2EXA-g8lgZ8h30_LMG1ghQ24SDLOxI8RqWdbNCTTQqSVjwPsK0WrfTQ2pMkLe1k2ij0N8uYhIyJu0FoaodI7DN-hSaZnSmRWki9kip_qlYLZncCq7Y2u7pmXEPvuQ6g",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 02:05:49.554 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 02:05:49.554 +00:00 [INF] Showing consent: User has not yet consented
2019-01-18 02:05:49.587 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:05:49.588 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:05:49.588 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:05:49.588 +00:00 [DBG] No PKCE used.
2019-01-18 02:05:49.590 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:05:49.590 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:05:54.326 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 02:05:54.407 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:05:54.407 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:05:54.408 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:05:54.408 +00:00 [DBG] No PKCE used.
2019-01-18 02:05:54.410 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:05:54.438 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 02:05:54.439 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 02:05:54.439 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 02:05:54.439 +00:00 [DBG] Start authorize callback request
2019-01-18 02:05:54.443 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 02:05:54.444 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:05:54.445 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:05:54.446 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:05:54.447 +00:00 [DBG] No PKCE used.
2019-01-18 02:05:54.448 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:05:54.449 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8MLVB0KthzlPmPhXUtEZyGqXw_2FDzNDsFWlv5EFPpI_ZXElDCZIIEe9jNxmbC8BbxsdOne8JM7KUZnZD2yTwPIgEgrcwVbmLIAt20YVOEVj3Jbr5S3UFc3bNynMbbR13jZkOwe6waREDfjHQti5xTs9wSNXnW-IrMB0h2Bv9P-noKudVCn3aZXiKjYVX-F2Del53EfKhUhT6FM2GH7UiqvQ2EXA-g8lgZ8h30_LMG1ghQ24SDLOxI8RqWdbNCTTQqSVjwPsK0WrfTQ2pMkLe1k2ij0N8uYhIyJu0FoaodI7DN-hSaZnSmRWki9kip_qlYLZncCq7Y2u7pmXEPvuQ6g",
  "Nonce": "636833739457166254.NDM3MDcxYzgtNTc3Yi00MWJlLTg0ZTEtZTQ1MWFhZTVjMWIyMzBlNDU0OWUtMjMyYy00N2M4LWE1YjEtN2Q4MTk5Y2U0ODFi",
  "SessionId": "0ebed9c6bf102d66efba4113cb6022e2",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833739457166254.NDM3MDcxYzgtNTc3Yi00MWJlLTg0ZTEtZTQ1MWFhZTVjMWIyMzBlNDU0OWUtMjMyYy00N2M4LWE1YjEtN2Q4MTk5Y2U0ODFi",
    "state": "CfDJ8MLVB0KthzlPmPhXUtEZyGqXw_2FDzNDsFWlv5EFPpI_ZXElDCZIIEe9jNxmbC8BbxsdOne8JM7KUZnZD2yTwPIgEgrcwVbmLIAt20YVOEVj3Jbr5S3UFc3bNynMbbR13jZkOwe6waREDfjHQti5xTs9wSNXnW-IrMB0h2Bv9P-noKudVCn3aZXiKjYVX-F2Del53EfKhUhT6FM2GH7UiqvQ2EXA-g8lgZ8h30_LMG1ghQ24SDLOxI8RqWdbNCTTQqSVjwPsK0WrfTQ2pMkLe1k2ij0N8uYhIyJu0FoaodI7DN-hSaZnSmRWki9kip_qlYLZncCq7Y2u7pmXEPvuQ6g",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 02:05:54.450 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 02:05:54.492 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-18 02:05:54.508 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-18 02:05:54.516 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 02:05:54.535 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-18 02:05:54.565 +00:00 [DBG] Creating Implicit Flow response.
2019-01-18 02:05:54.585 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 02:05:54.721 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****v5Mw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****2c5a"
    }
  ],
  "ActivityId": "0HLJST5P7KA9V:00000009",
  "TimeStamp": "2019-01-18T02:05:54Z",
  "ProcessId": 400,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:05:54.732 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8MLVB0KthzlPmPhXUtEZyGqXw_2FDzNDsFWlv5EFPpI_ZXElDCZIIEe9jNxmbC8BbxsdOne8JM7KUZnZD2yTwPIgEgrcwVbmLIAt20YVOEVj3Jbr5S3UFc3bNynMbbR13jZkOwe6waREDfjHQti5xTs9wSNXnW-IrMB0h2Bv9P-noKudVCn3aZXiKjYVX-F2Del53EfKhUhT6FM2GH7UiqvQ2EXA-g8lgZ8h30_LMG1ghQ24SDLOxI8RqWdbNCTTQqSVjwPsK0WrfTQ2pMkLe1k2ij0N8uYhIyJu0FoaodI7DN-hSaZnSmRWki9kip_qlYLZncCq7Y2u7pmXEPvuQ6g",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-18 02:05:54.757 +00:00 [DBG] Augmenting SignInContext
2019-01-18 02:05:54.759 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 02:05:55.287 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 02:05:55.292 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 02:05:55.292 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 02:05:55.307 +00:00 [DBG] Start token request.
2019-01-18 02:05:55.321 +00:00 [DBG] Start client validation
2019-01-18 02:05:55.330 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 02:05:55.338 +00:00 [DBG] Start parsing for secret in post body
2019-01-18 02:05:55.347 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-18 02:05:55.348 +00:00 [DBG] Secret id found: MVC
2019-01-18 02:05:55.348 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:05:55.366 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 02:05:55.366 +00:00 [DBG] Client validation success
2019-01-18 02:05:55.376 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJST5P7KA9U:00000003",
  "TimeStamp": "2019-01-18T02:05:55Z",
  "ProcessId": 400,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:05:55.388 +00:00 [DBG] Start token request validation
2019-01-18 02:05:55.405 +00:00 [DBG] Start validation of authorization code token request
2019-01-18 02:05:55.428 +00:00 [DBG] Validation of authorization code token request success
2019-01-18 02:05:55.435 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "4e8283e8f0b5e03259525e7232994dd690abb8b8c57481ce31d12218e6bb2c5a",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "4e8283e8f0b5e03259525e7232994dd690abb8b8c57481ce31d12218e6bb2c5a",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-18 02:05:55.455 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:05:55.468 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 02:05:55.469 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 02:05:55.492 +00:00 [DBG] Creating refresh token
2019-01-18 02:05:55.492 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-18 02:05:55.509 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:05:55.509 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 02:05:55.528 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****0GxA"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****4a3a"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****yZog"
    }
  ],
  "ActivityId": "0HLJST5P7KA9U:00000003",
  "TimeStamp": "2019-01-18T02:05:55Z",
  "ProcessId": 400,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:05:55.531 +00:00 [DBG] Token request success.
2019-01-18 02:05:55.584 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-18 02:05:55.593 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-18 02:05:55.597 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-18 02:05:55.613 +00:00 [DBG] Start userinfo request
2019-01-18 02:05:55.620 +00:00 [DBG] Bearer token found in header
2019-01-18 02:05:55.650 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:05:55.650 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:05:55.652 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-18 02:05:55.653 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1547777155,
    "exp": 1547780755,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547777149,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-18 02:05:55.674 +00:00 [DBG] Creating userinfo response
2019-01-18 02:05:55.681 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 02:05:55.691 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 02:05:55.698 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-18 02:05:55.699 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 02:05:55.712 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-18 02:05:55.713 +00:00 [DBG] End userinfo request
2019-01-18 02:05:56.264 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 02:05:56.265 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 02:05:56.265 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 02:05:56.266 +00:00 [DBG] Start token request.
2019-01-18 02:05:56.268 +00:00 [DBG] Start client validation
2019-01-18 02:05:56.268 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 02:05:56.269 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 02:05:56.270 +00:00 [DBG] Secret id found: MVC
2019-01-18 02:05:56.270 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:05:56.271 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 02:05:56.271 +00:00 [DBG] Client validation success
2019-01-18 02:05:56.272 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJST5P7KAA2:00000001",
  "TimeStamp": "2019-01-18T02:05:56Z",
  "ProcessId": 400,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:05:56.293 +00:00 [DBG] Start token request validation
2019-01-18 02:05:56.311 +00:00 [DBG] Start client credentials token request validation
2019-01-18 02:05:56.323 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 02:05:56.326 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 02:05:56.355 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 02:05:56.360 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****UmUw"
    }
  ],
  "ActivityId": "0HLJST5P7KAA2:00000001",
  "TimeStamp": "2019-01-18T02:05:56Z",
  "ProcessId": 400,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:05:56.361 +00:00 [DBG] Token request success.
2019-01-18 02:05:56.872 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 02:05:56.872 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 02:05:56.872 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 02:05:56.872 +00:00 [DBG] Start discovery request
2019-01-18 02:05:57.036 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 02:05:57.037 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 02:05:57.037 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 02:05:57.037 +00:00 [DBG] Start key discovery request
2019-01-18 02:06:21.245 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 02:06:21.246 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 02:06:21.246 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 02:06:21.246 +00:00 [DBG] Start token request.
2019-01-18 02:06:21.246 +00:00 [DBG] Start client validation
2019-01-18 02:06:21.246 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 02:06:21.246 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 02:06:21.246 +00:00 [DBG] Secret id found: MVC
2019-01-18 02:06:21.246 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:06:21.246 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 02:06:21.246 +00:00 [DBG] Client validation success
2019-01-18 02:06:21.247 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJST5P7KAA4:00000001",
  "TimeStamp": "2019-01-18T02:06:21Z",
  "ProcessId": 400,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:06:21.252 +00:00 [DBG] Start token request validation
2019-01-18 02:06:21.252 +00:00 [DBG] Start client credentials token request validation
2019-01-18 02:06:21.253 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 02:06:21.254 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 02:06:21.262 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 02:06:21.266 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Acfg"
    }
  ],
  "ActivityId": "0HLJST5P7KAA4:00000001",
  "TimeStamp": "2019-01-18T02:06:21Z",
  "ProcessId": 400,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:06:21.266 +00:00 [DBG] Token request success.
2019-01-18 02:06:27.245 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 02:06:27.246 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 02:06:27.246 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 02:06:27.246 +00:00 [DBG] Start token request.
2019-01-18 02:06:27.247 +00:00 [DBG] Start client validation
2019-01-18 02:06:27.248 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 02:06:27.248 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 02:06:27.249 +00:00 [DBG] Secret id found: MVC
2019-01-18 02:06:27.271 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:06:27.271 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 02:06:27.272 +00:00 [DBG] Client validation success
2019-01-18 02:06:27.272 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJST5P7KAA5:00000001",
  "TimeStamp": "2019-01-18T02:06:27Z",
  "ProcessId": 400,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:06:27.297 +00:00 [DBG] Start token request validation
2019-01-18 02:06:27.298 +00:00 [DBG] Start client credentials token request validation
2019-01-18 02:06:27.298 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 02:06:27.298 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 02:06:27.298 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 02:06:27.317 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****iEqA"
    }
  ],
  "ActivityId": "0HLJST5P7KAA5:00000001",
  "TimeStamp": "2019-01-18T02:06:27Z",
  "ProcessId": 400,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:06:27.319 +00:00 [DBG] Token request success.
2019-01-18 02:06:27.931 +00:00 [INF] Message received:
2019-01-18 02:06:27.931 +00:00 [INF] ----------------------------------
2019-01-18 02:06:27.944 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"86313ad4-244e-4d14-88cf-ec78416e698a","CreationDate":"2019-01-18T02:06:27.8378309Z"}
2019-01-18 02:06:27.944 +00:00 [INF] ----------------------------------
2019-01-18 02:06:28.949 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens e33b86e8-bc43-418c-a8ce-00a8b11c4aac to 1 handlers took 1027 ms
2019-01-18 02:11:30.533 +00:00 [WRN] No XML encryptor configured. Key "b7e9e571-4741-4d75-aa61-dd836c6e4c80" may be persisted to storage in unencrypted form.
2019-01-18 02:11:31.652 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-18 02:11:32.961 +00:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-18 02:11:33.504 +00:00 [INF] Bus Rebus 1 stopped
2019-01-18 02:24:50.447 +00:00 [WRN] No XML encryptor configured. Key "ac82b3b6-be66-4cee-990a-628f2d7a6f1c" may be persisted to storage in unencrypted form.
2019-01-18 02:24:51.618 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-18 02:24:52.854 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-18 02:24:52.947 +00:00 [INF] Setting number of workers to 1
2019-01-18 02:24:52.984 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-18 02:24:53.003 +00:00 [INF] Bus Rebus 1 started
2019-01-18 02:24:53.086 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-18 02:24:53.221 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-18 02:24:53.290 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-18 02:24:53.334 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-18 02:24:53.335 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-18 02:24:53.339 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-18 02:24:53.357 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-18 02:24:53.359 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-18 02:27:49.765 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 02:27:50.076 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 02:27:50.077 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 02:27:50.086 +00:00 [DBG] Start discovery request
2019-01-18 02:27:50.234 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 02:27:50.237 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 02:27:50.238 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 02:27:50.346 +00:00 [DBG] Start key discovery request
2019-01-18 02:27:50.529 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 02:27:50.530 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 02:27:50.536 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-18 02:27:50.544 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-18 02:27:50.545 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-18 02:27:50.556 +00:00 [DBG] Start authorize request
2019-01-18 02:27:50.577 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 02:27:50.589 +00:00 [DBG] No user present in authorize request
2019-01-18 02:27:50.597 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:27:50.619 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:27:50.645 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:27:50.651 +00:00 [DBG] No PKCE used.
2019-01-18 02:27:50.735 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:27:50.757 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8F5KEMaVEohNgipmBGYcKJ4MPcvJ7yNm59Xuv_IQKkRqjAusY-6m8LtNvTbivDpy9kHqF9qC26av9mEzajNt0mcU0cD054XMDsw3ZUt_vEaP45DOoRo3Gt0lIiZBhckUtUBNXW5ky8uTvkQ8SiiQ29p-AGCtOAmJMe4PDN2_8UNGleeYnUv2Ww8x22IvvZB_D-4Zu_wIb5JTf9erX37s-6zzD2hFGS_l-5GMRg4wN-XsntjJWSY-wfkPbbR93yxHLhd3KPWBnafwPD-9zoPItKB3aIbeyZvxTKhcqkeqkWAGAyaHomYoLvgWzgL-6tlfzRk7vI--nhen5fsTWWmK4pw",
  "Nonce": "636833752704349492.NmRlYjRiODktYjBlNy00OThjLTk0MWUtYmM5ODMxNGI5MjFlN2ExMWU0MjAtYWVhMS00MjYxLWE0ZGUtNzk1MzM1Zjc4OTRi",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833752704349492.NmRlYjRiODktYjBlNy00OThjLTk0MWUtYmM5ODMxNGI5MjFlN2ExMWU0MjAtYWVhMS00MjYxLWE0ZGUtNzk1MzM1Zjc4OTRi",
    "state": "CfDJ8F5KEMaVEohNgipmBGYcKJ4MPcvJ7yNm59Xuv_IQKkRqjAusY-6m8LtNvTbivDpy9kHqF9qC26av9mEzajNt0mcU0cD054XMDsw3ZUt_vEaP45DOoRo3Gt0lIiZBhckUtUBNXW5ky8uTvkQ8SiiQ29p-AGCtOAmJMe4PDN2_8UNGleeYnUv2Ww8x22IvvZB_D-4Zu_wIb5JTf9erX37s-6zzD2hFGS_l-5GMRg4wN-XsntjJWSY-wfkPbbR93yxHLhd3KPWBnafwPD-9zoPItKB3aIbeyZvxTKhcqkeqkWAGAyaHomYoLvgWzgL-6tlfzRk7vI--nhen5fsTWWmK4pw",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 02:27:50.781 +00:00 [INF] Showing login: User is not authenticated
2019-01-18 02:27:50.797 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 02:27:50.797 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 02:27:51.164 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 02:27:51.165 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:27:51.165 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:27:51.165 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:27:51.165 +00:00 [DBG] No PKCE used.
2019-01-18 02:27:51.173 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:27:51.180 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:28:13.479 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 02:28:13.483 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 02:28:13.483 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 02:28:15.236 +00:00 [DBG] Augmenting SignInContext
2019-01-18 02:28:15.244 +00:00 [DBG] Adding idp claim with value: local
2019-01-18 02:28:15.244 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-18 02:28:15.252 +00:00 [DBG] Adding auth_time claim with value: 1547778495
2019-01-18 02:28:15.262 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 02:28:15.276 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 02:28:15.304 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLJSTI54OVMA:00000003",
  "TimeStamp": "2019-01-18T02:28:15Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:28:15.331 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 02:28:15.333 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 02:28:15.334 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 02:28:15.345 +00:00 [DBG] Start authorize callback request
2019-01-18 02:28:15.356 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 02:28:15.356 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:28:15.356 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:28:15.357 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:28:15.357 +00:00 [DBG] No PKCE used.
2019-01-18 02:28:15.357 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:28:15.358 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8F5KEMaVEohNgipmBGYcKJ4MPcvJ7yNm59Xuv_IQKkRqjAusY-6m8LtNvTbivDpy9kHqF9qC26av9mEzajNt0mcU0cD054XMDsw3ZUt_vEaP45DOoRo3Gt0lIiZBhckUtUBNXW5ky8uTvkQ8SiiQ29p-AGCtOAmJMe4PDN2_8UNGleeYnUv2Ww8x22IvvZB_D-4Zu_wIb5JTf9erX37s-6zzD2hFGS_l-5GMRg4wN-XsntjJWSY-wfkPbbR93yxHLhd3KPWBnafwPD-9zoPItKB3aIbeyZvxTKhcqkeqkWAGAyaHomYoLvgWzgL-6tlfzRk7vI--nhen5fsTWWmK4pw",
  "Nonce": "636833752704349492.NmRlYjRiODktYjBlNy00OThjLTk0MWUtYmM5ODMxNGI5MjFlN2ExMWU0MjAtYWVhMS00MjYxLWE0ZGUtNzk1MzM1Zjc4OTRi",
  "SessionId": "8bd624c3235f3f093b0f9c7aa02b7bf0",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833752704349492.NmRlYjRiODktYjBlNy00OThjLTk0MWUtYmM5ODMxNGI5MjFlN2ExMWU0MjAtYWVhMS00MjYxLWE0ZGUtNzk1MzM1Zjc4OTRi",
    "state": "CfDJ8F5KEMaVEohNgipmBGYcKJ4MPcvJ7yNm59Xuv_IQKkRqjAusY-6m8LtNvTbivDpy9kHqF9qC26av9mEzajNt0mcU0cD054XMDsw3ZUt_vEaP45DOoRo3Gt0lIiZBhckUtUBNXW5ky8uTvkQ8SiiQ29p-AGCtOAmJMe4PDN2_8UNGleeYnUv2Ww8x22IvvZB_D-4Zu_wIb5JTf9erX37s-6zzD2hFGS_l-5GMRg4wN-XsntjJWSY-wfkPbbR93yxHLhd3KPWBnafwPD-9zoPItKB3aIbeyZvxTKhcqkeqkWAGAyaHomYoLvgWzgL-6tlfzRk7vI--nhen5fsTWWmK4pw",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 02:28:15.387 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 02:28:15.387 +00:00 [INF] Showing consent: User has not yet consented
2019-01-18 02:28:15.445 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:28:15.447 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:28:15.448 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:28:15.449 +00:00 [DBG] No PKCE used.
2019-01-18 02:28:15.451 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:28:15.452 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:29:03.060 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 02:29:03.150 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:29:03.155 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:29:03.155 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:29:03.155 +00:00 [DBG] No PKCE used.
2019-01-18 02:29:03.155 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:29:03.202 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 02:29:03.202 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 02:29:03.203 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 02:29:03.203 +00:00 [DBG] Start authorize callback request
2019-01-18 02:29:03.222 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 02:29:03.222 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:29:03.223 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:29:03.224 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:29:03.226 +00:00 [DBG] No PKCE used.
2019-01-18 02:29:03.227 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:29:03.229 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8F5KEMaVEohNgipmBGYcKJ4MPcvJ7yNm59Xuv_IQKkRqjAusY-6m8LtNvTbivDpy9kHqF9qC26av9mEzajNt0mcU0cD054XMDsw3ZUt_vEaP45DOoRo3Gt0lIiZBhckUtUBNXW5ky8uTvkQ8SiiQ29p-AGCtOAmJMe4PDN2_8UNGleeYnUv2Ww8x22IvvZB_D-4Zu_wIb5JTf9erX37s-6zzD2hFGS_l-5GMRg4wN-XsntjJWSY-wfkPbbR93yxHLhd3KPWBnafwPD-9zoPItKB3aIbeyZvxTKhcqkeqkWAGAyaHomYoLvgWzgL-6tlfzRk7vI--nhen5fsTWWmK4pw",
  "Nonce": "636833752704349492.NmRlYjRiODktYjBlNy00OThjLTk0MWUtYmM5ODMxNGI5MjFlN2ExMWU0MjAtYWVhMS00MjYxLWE0ZGUtNzk1MzM1Zjc4OTRi",
  "SessionId": "8bd624c3235f3f093b0f9c7aa02b7bf0",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833752704349492.NmRlYjRiODktYjBlNy00OThjLTk0MWUtYmM5ODMxNGI5MjFlN2ExMWU0MjAtYWVhMS00MjYxLWE0ZGUtNzk1MzM1Zjc4OTRi",
    "state": "CfDJ8F5KEMaVEohNgipmBGYcKJ4MPcvJ7yNm59Xuv_IQKkRqjAusY-6m8LtNvTbivDpy9kHqF9qC26av9mEzajNt0mcU0cD054XMDsw3ZUt_vEaP45DOoRo3Gt0lIiZBhckUtUBNXW5ky8uTvkQ8SiiQ29p-AGCtOAmJMe4PDN2_8UNGleeYnUv2Ww8x22IvvZB_D-4Zu_wIb5JTf9erX37s-6zzD2hFGS_l-5GMRg4wN-XsntjJWSY-wfkPbbR93yxHLhd3KPWBnafwPD-9zoPItKB3aIbeyZvxTKhcqkeqkWAGAyaHomYoLvgWzgL-6tlfzRk7vI--nhen5fsTWWmK4pw",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 02:29:03.245 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 02:29:03.283 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-18 02:29:03.296 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-18 02:29:03.303 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 02:29:03.327 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-18 02:29:03.367 +00:00 [DBG] Creating Implicit Flow response.
2019-01-18 02:29:03.391 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 02:29:03.695 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****4p3g"
    },
    {
      "TokenType": "code",
      "TokenValue": "****8a4e"
    }
  ],
  "ActivityId": "0HLJSTI54OVMA:00000007",
  "TimeStamp": "2019-01-18T02:29:03Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:29:03.726 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8F5KEMaVEohNgipmBGYcKJ4MPcvJ7yNm59Xuv_IQKkRqjAusY-6m8LtNvTbivDpy9kHqF9qC26av9mEzajNt0mcU0cD054XMDsw3ZUt_vEaP45DOoRo3Gt0lIiZBhckUtUBNXW5ky8uTvkQ8SiiQ29p-AGCtOAmJMe4PDN2_8UNGleeYnUv2Ww8x22IvvZB_D-4Zu_wIb5JTf9erX37s-6zzD2hFGS_l-5GMRg4wN-XsntjJWSY-wfkPbbR93yxHLhd3KPWBnafwPD-9zoPItKB3aIbeyZvxTKhcqkeqkWAGAyaHomYoLvgWzgL-6tlfzRk7vI--nhen5fsTWWmK4pw",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-18 02:29:03.772 +00:00 [DBG] Augmenting SignInContext
2019-01-18 02:29:03.775 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 02:29:04.343 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 02:29:04.355 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 02:29:04.355 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 02:29:04.373 +00:00 [DBG] Start token request.
2019-01-18 02:29:04.385 +00:00 [DBG] Start client validation
2019-01-18 02:29:04.397 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 02:29:04.404 +00:00 [DBG] Start parsing for secret in post body
2019-01-18 02:29:04.409 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-18 02:29:04.409 +00:00 [DBG] Secret id found: MVC
2019-01-18 02:29:04.414 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:29:04.431 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 02:29:04.431 +00:00 [DBG] Client validation success
2019-01-18 02:29:04.439 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSTI54OVM9:00000003",
  "TimeStamp": "2019-01-18T02:29:04Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:29:04.454 +00:00 [DBG] Start token request validation
2019-01-18 02:29:04.469 +00:00 [DBG] Start validation of authorization code token request
2019-01-18 02:29:04.497 +00:00 [DBG] Validation of authorization code token request success
2019-01-18 02:29:04.506 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "5d4e805e981532cc85496e5dafa10f041927b45df8321219ed1993ec66b68a4e",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "5d4e805e981532cc85496e5dafa10f041927b45df8321219ed1993ec66b68a4e",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-18 02:29:04.536 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:29:04.555 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 02:29:04.555 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 02:29:04.589 +00:00 [DBG] Creating refresh token
2019-01-18 02:29:04.589 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-18 02:29:04.612 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:29:04.613 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 02:29:04.631 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****XPTw"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****9d02"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Qa6A"
    }
  ],
  "ActivityId": "0HLJSTI54OVM9:00000003",
  "TimeStamp": "2019-01-18T02:29:04Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:29:04.634 +00:00 [DBG] Token request success.
2019-01-18 02:29:04.690 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-18 02:29:04.703 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-18 02:29:04.703 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-18 02:29:04.717 +00:00 [DBG] Start userinfo request
2019-01-18 02:29:04.729 +00:00 [DBG] Bearer token found in header
2019-01-18 02:29:04.813 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:29:04.818 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:29:04.819 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-18 02:29:04.826 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1547778544,
    "exp": 1547782144,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547778495,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-18 02:29:04.850 +00:00 [DBG] Creating userinfo response
2019-01-18 02:29:04.858 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 02:29:04.865 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 02:29:04.871 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-18 02:29:04.872 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 02:29:04.887 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-18 02:29:04.888 +00:00 [DBG] End userinfo request
2019-01-18 02:29:05.453 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 02:29:05.453 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 02:29:05.453 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 02:29:05.454 +00:00 [DBG] Start token request.
2019-01-18 02:29:05.454 +00:00 [DBG] Start client validation
2019-01-18 02:29:05.454 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 02:29:05.454 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 02:29:05.454 +00:00 [DBG] Secret id found: MVC
2019-01-18 02:29:05.454 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:29:05.455 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 02:29:05.455 +00:00 [DBG] Client validation success
2019-01-18 02:29:05.455 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSTI54OVMD:00000001",
  "TimeStamp": "2019-01-18T02:29:05Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:29:05.482 +00:00 [DBG] Start token request validation
2019-01-18 02:29:05.514 +00:00 [DBG] Start client credentials token request validation
2019-01-18 02:29:05.528 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 02:29:05.529 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 02:29:05.540 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 02:29:05.551 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****yW2w"
    }
  ],
  "ActivityId": "0HLJSTI54OVMD:00000001",
  "TimeStamp": "2019-01-18T02:29:05Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:29:05.552 +00:00 [DBG] Token request success.
2019-01-18 02:29:06.016 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 02:29:06.016 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 02:29:06.016 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 02:29:06.016 +00:00 [DBG] Start discovery request
2019-01-18 02:29:06.326 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 02:29:06.327 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 02:29:06.327 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 02:29:06.327 +00:00 [DBG] Start key discovery request
2019-01-18 02:29:12.068 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 02:29:12.072 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 02:29:12.072 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 02:29:12.073 +00:00 [DBG] Start token request.
2019-01-18 02:29:12.073 +00:00 [DBG] Start client validation
2019-01-18 02:29:12.073 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 02:29:12.073 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 02:29:12.073 +00:00 [DBG] Secret id found: MVC
2019-01-18 02:29:12.073 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:29:12.074 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 02:29:12.074 +00:00 [DBG] Client validation success
2019-01-18 02:29:12.074 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSTI54OVMF:00000001",
  "TimeStamp": "2019-01-18T02:29:12Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:29:12.087 +00:00 [DBG] Start token request validation
2019-01-18 02:29:12.088 +00:00 [DBG] Start client credentials token request validation
2019-01-18 02:29:12.090 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 02:29:12.090 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 02:29:12.091 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 02:29:12.106 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****ikAg"
    }
  ],
  "ActivityId": "0HLJSTI54OVMF:00000001",
  "TimeStamp": "2019-01-18T02:29:12Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:29:12.106 +00:00 [DBG] Token request success.
2019-01-18 02:29:13.416 +00:00 [INF] Message received:
2019-01-18 02:29:13.416 +00:00 [INF] ----------------------------------
2019-01-18 02:29:13.443 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"63eb0165-7fb7-47f5-b742-b184c6085dfa","CreationDate":"2019-01-18T02:29:12.8757515Z"}
2019-01-18 02:29:13.455 +00:00 [INF] ----------------------------------
2019-01-18 02:29:15.087 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens df8f3445-c504-4fe9-b495-f5445dfb033d to 1 handlers took 1708 ms
2019-01-18 02:43:46.224 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-18 02:43:47.662 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-18 02:43:47.867 +00:00 [INF] Setting number of workers to 1
2019-01-18 02:43:47.895 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-18 02:43:47.916 +00:00 [INF] Bus Rebus 1 started
2019-01-18 02:43:47.935 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-18 02:43:48.088 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-18 02:43:48.189 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-18 02:43:48.230 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-18 02:43:48.232 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-18 02:43:48.248 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-18 02:43:48.267 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-18 02:43:48.272 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-18 02:45:36.956 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 02:45:37.251 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 02:45:37.252 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 02:45:37.260 +00:00 [DBG] Start discovery request
2019-01-18 02:45:37.488 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 02:45:37.491 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 02:45:37.492 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 02:45:37.517 +00:00 [DBG] Start key discovery request
2019-01-18 02:45:37.826 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-18 02:45:37.836 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-18 02:45:37.839 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-18 02:45:37.885 +00:00 [DBG] Processing signout request for 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 02:45:37.904 +00:00 [DBG] Start end session request validation
2019-01-18 02:45:37.935 +00:00 [DBG] Start identity token validation
2019-01-18 02:45:37.997 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:37.997 +00:00 [DBG] Client found: MVC / MVC
2019-01-18 02:45:38.110 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-18 02:45:38.118 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1547778544,
    "exp": 1547778844,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636833752704349492.NmRlYjRiODktYjBlNy00OThjLTk0MWUtYmM5ODMxNGI5MjFlN2ExMWU0MjAtYWVhMS00MjYxLWE0ZGUtNzk1MzM1Zjc4OTRi",
    "iat": 1547778544,
    "at_hash": "qF2oeLV5D1mWidPbhfyq5g",
    "sid": "8bd624c3235f3f093b0f9c7aa02b7bf0",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547778495,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "amr": "pwd"
  }
}
2019-01-18 02:45:38.152 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8F5KEMaVEohNgipmBGYcKJ58hFIU_b2ObHRewADNDj_oKbMhecg0NJXdBVgjxJ7lTkL-KkNBvE4rS4WT4tNcmZjvPkz4S7eflLUBJPiOJKDJiDTnBLkJ1j8hnD6hQ9nq_3ClEJbsUX8bdN_T9UO3Gm8-3WLk3YfvBXPHjljlD8hi",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDc3Nzg1NDQsImV4cCI6MTU0Nzc3ODg0NCwiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4MzM3NTI3MDQzNDk0OTIuTm1SbFlqUmlPRGt0WWpCbE55MDBPVGhqTFRrME1XVXRZbU01T0RNeE5HSTVNakZsTjJFeE1XVTBNakF0WVdWaE1TMDBNall4TFdFMFpHVXROemsxTXpNMVpqYzRPVFJpIiwiaWF0IjoxNTQ3Nzc4NTQ0LCJhdF9oYXNoIjoicUYyb2VMVjVEMW1XaWRQYmhmeXE1ZyIsInNpZCI6IjhiZDYyNGMzMjM1ZjNmMDkzYjBmOWM3YWEwMmI3YmYwIiwic3ViIjoiMTczZjk2NGYtMWViOS00M2NmLTkxYzctZGY3NTM3MTdjMTZjIiwiYXV0aF90aW1lIjoxNTQ3Nzc4NDk1LCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImVtYWlsIjoiYWxpY2VAYXNwLm5ldCIsInBob25lIjoiMTIzNC01Njc4IiwiYWRkcmVzcyI6IlJ1YSBWZXJndWVpcm8sIDQ1NiIsImFkZHJlc3NfZGV0YWlscyI6IjggYW5kYXIgc2FsYSA4MDEiLCJuZWlnaGJvcmhvb2QiOiJWaWxhIE1hcmlhbmEiLCJjaXR5IjoiU8OjbyBQYXVsbyIsInN0YXRlIjoiU1AiLCJ6aXBfY29kZSI6IjY5MTE4IiwiYW1yIjpbInB3ZCJdfQ.CF2mOEwV8_WnmJaAa_UiID5a8TLIuALXfpcDI4e2W4FoECvM1tmFi8aDk2jcw6I4vHtYORaz6PjgfUuf9CQyR0X8vcu9SlJAhH0hvIJQYhOjazYeOvP9heKsm8cxpcm5rC9eBMBLceaC5jxWcDWKNaeQc8qaBj_8aBwRoIay0QwzEsZ2r2eClccN945bCoQJfSlyk257W44OzIKrusT4MQXu3SL9widNmtxyRpg37jPwDWrOMDYs_SXmGCqohwYYHovVGSfPEH8oIKAG35khWgQKv5h2xElu3y0qzTS_t9UMZfTzM_di9IkHXUeNtbA9lzt0-7Ysq66ZE0CtGMXPTw",
    "state": "CfDJ8F5KEMaVEohNgipmBGYcKJ58hFIU_b2ObHRewADNDj_oKbMhecg0NJXdBVgjxJ7lTkL-KkNBvE4rS4WT4tNcmZjvPkz4S7eflLUBJPiOJKDJiDTnBLkJ1j8hnD6hQ9nq_3ClEJbsUX8bdN_T9UO3Gm8-3WLk3YfvBXPHjljlD8hi",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 02:45:38.152 +00:00 [DBG] Success validating end session request from MVC
2019-01-18 02:45:38.619 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-18 02:45:38.624 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-18 02:45:38.625 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-18 02:45:38.653 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLJSTS36EQ8C:00000002",
  "TimeStamp": "2019-01-18T02:45:38Z",
  "ProcessId": 230,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:45:42.673 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-18 02:45:42.682 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-18 02:45:42.682 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-18 02:45:42.695 +00:00 [DBG] Start authorize request
2019-01-18 02:45:42.716 +00:00 [DBG] No user present in authorize request
2019-01-18 02:45:42.727 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:45:42.737 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:42.747 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:45:42.752 +00:00 [DBG] No PKCE used.
2019-01-18 02:45:42.802 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:45:42.816 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8F5KEMaVEohNgipmBGYcKJ4zqUJpLZ-4fiGl_n5uLLNwAOMxfbk7UX2Huq154xQaCEiPYnSBoolD_xLQRglu-i3iJpxJPx_7sitBaT5QFxwrXhVrk2cPzF8NT6cq5lmZmqaELQHH26IflDh365takKi4WunzjgsyuwPHO9NUVWXRoAJzTfP42m6HBPM_I5K_WdgV4GlgZ_gq1PnSKmV7eE1RTNMWcMsalpIPHbGIS6A1iJaQssDJ0dNynf2D4RvbYX3NL_HxVuPuEQ3_dvR8ErP9JcC7oTCgSp8mErjJKCdGPTdUTxzgAoRE0J-sYijQP061giFAwzMmrXmqpxObjnk",
  "Nonce": "636833763426620807.YzRkOTVlYWMtZTVjNS00MGMxLWE4MjItN2JjNjA4ZDdjYTQzZjRhNDE4N2YtN2I1OS00NzNhLTgxNzItOGUyODgzMjk3OTg4",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833763426620807.YzRkOTVlYWMtZTVjNS00MGMxLWE4MjItN2JjNjA4ZDdjYTQzZjRhNDE4N2YtN2I1OS00NzNhLTgxNzItOGUyODgzMjk3OTg4",
    "state": "CfDJ8F5KEMaVEohNgipmBGYcKJ4zqUJpLZ-4fiGl_n5uLLNwAOMxfbk7UX2Huq154xQaCEiPYnSBoolD_xLQRglu-i3iJpxJPx_7sitBaT5QFxwrXhVrk2cPzF8NT6cq5lmZmqaELQHH26IflDh365takKi4WunzjgsyuwPHO9NUVWXRoAJzTfP42m6HBPM_I5K_WdgV4GlgZ_gq1PnSKmV7eE1RTNMWcMsalpIPHbGIS6A1iJaQssDJ0dNynf2D4RvbYX3NL_HxVuPuEQ3_dvR8ErP9JcC7oTCgSp8mErjJKCdGPTdUTxzgAoRE0J-sYijQP061giFAwzMmrXmqpxObjnk",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 02:45:42.837 +00:00 [INF] Showing login: User is not authenticated
2019-01-18 02:45:42.969 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:45:42.971 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:42.972 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:45:42.979 +00:00 [DBG] No PKCE used.
2019-01-18 02:45:42.980 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:45:42.985 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:46.659 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 02:45:47.852 +00:00 [DBG] Augmenting SignInContext
2019-01-18 02:45:47.859 +00:00 [DBG] Adding idp claim with value: local
2019-01-18 02:45:47.859 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-18 02:45:47.860 +00:00 [DBG] Adding auth_time claim with value: 1547779547
2019-01-18 02:45:47.878 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 02:45:47.892 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLJSTS36EQ8D:00000003",
  "TimeStamp": "2019-01-18T02:45:47Z",
  "ProcessId": 230,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:45:47.913 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 02:45:47.914 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 02:45:47.914 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 02:45:47.931 +00:00 [DBG] Start authorize callback request
2019-01-18 02:45:47.939 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 02:45:47.940 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:45:47.940 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:47.940 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:45:47.941 +00:00 [DBG] No PKCE used.
2019-01-18 02:45:47.943 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:45:47.944 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8F5KEMaVEohNgipmBGYcKJ4zqUJpLZ-4fiGl_n5uLLNwAOMxfbk7UX2Huq154xQaCEiPYnSBoolD_xLQRglu-i3iJpxJPx_7sitBaT5QFxwrXhVrk2cPzF8NT6cq5lmZmqaELQHH26IflDh365takKi4WunzjgsyuwPHO9NUVWXRoAJzTfP42m6HBPM_I5K_WdgV4GlgZ_gq1PnSKmV7eE1RTNMWcMsalpIPHbGIS6A1iJaQssDJ0dNynf2D4RvbYX3NL_HxVuPuEQ3_dvR8ErP9JcC7oTCgSp8mErjJKCdGPTdUTxzgAoRE0J-sYijQP061giFAwzMmrXmqpxObjnk",
  "Nonce": "636833763426620807.YzRkOTVlYWMtZTVjNS00MGMxLWE4MjItN2JjNjA4ZDdjYTQzZjRhNDE4N2YtN2I1OS00NzNhLTgxNzItOGUyODgzMjk3OTg4",
  "SessionId": "e7b49a76553d34ad904b06afd6f17456",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833763426620807.YzRkOTVlYWMtZTVjNS00MGMxLWE4MjItN2JjNjA4ZDdjYTQzZjRhNDE4N2YtN2I1OS00NzNhLTgxNzItOGUyODgzMjk3OTg4",
    "state": "CfDJ8F5KEMaVEohNgipmBGYcKJ4zqUJpLZ-4fiGl_n5uLLNwAOMxfbk7UX2Huq154xQaCEiPYnSBoolD_xLQRglu-i3iJpxJPx_7sitBaT5QFxwrXhVrk2cPzF8NT6cq5lmZmqaELQHH26IflDh365takKi4WunzjgsyuwPHO9NUVWXRoAJzTfP42m6HBPM_I5K_WdgV4GlgZ_gq1PnSKmV7eE1RTNMWcMsalpIPHbGIS6A1iJaQssDJ0dNynf2D4RvbYX3NL_HxVuPuEQ3_dvR8ErP9JcC7oTCgSp8mErjJKCdGPTdUTxzgAoRE0J-sYijQP061giFAwzMmrXmqpxObjnk",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 02:45:47.973 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 02:45:47.974 +00:00 [INF] Showing consent: User has not yet consented
2019-01-18 02:45:48.021 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:45:48.021 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:48.026 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:45:48.026 +00:00 [DBG] No PKCE used.
2019-01-18 02:45:48.027 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:45:48.028 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:50.491 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 02:45:50.533 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:45:50.534 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:50.534 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:45:50.534 +00:00 [DBG] No PKCE used.
2019-01-18 02:45:50.534 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:45:50.590 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 02:45:50.600 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 02:45:50.600 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 02:45:50.601 +00:00 [DBG] Start authorize callback request
2019-01-18 02:45:50.611 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 02:45:50.612 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 02:45:50.612 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:50.612 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 02:45:50.612 +00:00 [DBG] No PKCE used.
2019-01-18 02:45:50.612 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 02:45:50.613 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8F5KEMaVEohNgipmBGYcKJ4zqUJpLZ-4fiGl_n5uLLNwAOMxfbk7UX2Huq154xQaCEiPYnSBoolD_xLQRglu-i3iJpxJPx_7sitBaT5QFxwrXhVrk2cPzF8NT6cq5lmZmqaELQHH26IflDh365takKi4WunzjgsyuwPHO9NUVWXRoAJzTfP42m6HBPM_I5K_WdgV4GlgZ_gq1PnSKmV7eE1RTNMWcMsalpIPHbGIS6A1iJaQssDJ0dNynf2D4RvbYX3NL_HxVuPuEQ3_dvR8ErP9JcC7oTCgSp8mErjJKCdGPTdUTxzgAoRE0J-sYijQP061giFAwzMmrXmqpxObjnk",
  "Nonce": "636833763426620807.YzRkOTVlYWMtZTVjNS00MGMxLWE4MjItN2JjNjA4ZDdjYTQzZjRhNDE4N2YtN2I1OS00NzNhLTgxNzItOGUyODgzMjk3OTg4",
  "SessionId": "e7b49a76553d34ad904b06afd6f17456",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833763426620807.YzRkOTVlYWMtZTVjNS00MGMxLWE4MjItN2JjNjA4ZDdjYTQzZjRhNDE4N2YtN2I1OS00NzNhLTgxNzItOGUyODgzMjk3OTg4",
    "state": "CfDJ8F5KEMaVEohNgipmBGYcKJ4zqUJpLZ-4fiGl_n5uLLNwAOMxfbk7UX2Huq154xQaCEiPYnSBoolD_xLQRglu-i3iJpxJPx_7sitBaT5QFxwrXhVrk2cPzF8NT6cq5lmZmqaELQHH26IflDh365takKi4WunzjgsyuwPHO9NUVWXRoAJzTfP42m6HBPM_I5K_WdgV4GlgZ_gq1PnSKmV7eE1RTNMWcMsalpIPHbGIS6A1iJaQssDJ0dNynf2D4RvbYX3NL_HxVuPuEQ3_dvR8ErP9JcC7oTCgSp8mErjJKCdGPTdUTxzgAoRE0J-sYijQP061giFAwzMmrXmqpxObjnk",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 02:45:50.613 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 02:45:50.631 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-18 02:45:50.651 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-18 02:45:50.657 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 02:45:50.679 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-18 02:45:50.711 +00:00 [DBG] Creating Implicit Flow response.
2019-01-18 02:45:50.727 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 02:45:50.859 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****LsTw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****5c4c"
    }
  ],
  "ActivityId": "0HLJSTS36EQ8D:00000007",
  "TimeStamp": "2019-01-18T02:45:50Z",
  "ProcessId": 230,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:45:50.874 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8F5KEMaVEohNgipmBGYcKJ4zqUJpLZ-4fiGl_n5uLLNwAOMxfbk7UX2Huq154xQaCEiPYnSBoolD_xLQRglu-i3iJpxJPx_7sitBaT5QFxwrXhVrk2cPzF8NT6cq5lmZmqaELQHH26IflDh365takKi4WunzjgsyuwPHO9NUVWXRoAJzTfP42m6HBPM_I5K_WdgV4GlgZ_gq1PnSKmV7eE1RTNMWcMsalpIPHbGIS6A1iJaQssDJ0dNynf2D4RvbYX3NL_HxVuPuEQ3_dvR8ErP9JcC7oTCgSp8mErjJKCdGPTdUTxzgAoRE0J-sYijQP061giFAwzMmrXmqpxObjnk",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-18 02:45:50.900 +00:00 [DBG] Augmenting SignInContext
2019-01-18 02:45:50.902 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 02:45:51.322 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 02:45:51.327 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 02:45:51.327 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 02:45:51.344 +00:00 [DBG] Start token request.
2019-01-18 02:45:51.357 +00:00 [DBG] Start client validation
2019-01-18 02:45:51.368 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 02:45:51.376 +00:00 [DBG] Start parsing for secret in post body
2019-01-18 02:45:51.381 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-18 02:45:51.381 +00:00 [DBG] Secret id found: MVC
2019-01-18 02:45:51.381 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:51.399 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 02:45:51.400 +00:00 [DBG] Client validation success
2019-01-18 02:45:51.407 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSTS36EQ8B:00000003",
  "TimeStamp": "2019-01-18T02:45:51Z",
  "ProcessId": 230,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:45:51.425 +00:00 [DBG] Start token request validation
2019-01-18 02:45:51.441 +00:00 [DBG] Start validation of authorization code token request
2019-01-18 02:45:51.466 +00:00 [DBG] Validation of authorization code token request success
2019-01-18 02:45:51.475 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "2744ab6e8d363dc386d8d7ef4bf6af96f35cabb873528d0bd4a44da48fad5c4c",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "2744ab6e8d363dc386d8d7ef4bf6af96f35cabb873528d0bd4a44da48fad5c4c",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-18 02:45:51.504 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:51.518 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 02:45:51.519 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 02:45:51.542 +00:00 [DBG] Creating refresh token
2019-01-18 02:45:51.543 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-18 02:45:51.565 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:51.566 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 02:45:51.594 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****XhnA"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****f368"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Gc0A"
    }
  ],
  "ActivityId": "0HLJSTS36EQ8B:00000003",
  "TimeStamp": "2019-01-18T02:45:51Z",
  "ProcessId": 230,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:45:51.600 +00:00 [DBG] Token request success.
2019-01-18 02:45:51.658 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-18 02:45:51.659 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-18 02:45:51.659 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-18 02:45:51.678 +00:00 [DBG] Start userinfo request
2019-01-18 02:45:51.690 +00:00 [DBG] Bearer token found in header
2019-01-18 02:45:51.715 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:51.716 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:51.717 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-18 02:45:51.719 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1547779551,
    "exp": 1547783151,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547779547,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-18 02:45:51.741 +00:00 [DBG] Creating userinfo response
2019-01-18 02:45:51.750 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 02:45:51.756 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 02:45:51.763 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-18 02:45:51.764 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 02:45:51.780 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-18 02:45:51.781 +00:00 [DBG] End userinfo request
2019-01-18 02:45:52.327 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 02:45:52.328 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 02:45:52.329 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 02:45:52.329 +00:00 [DBG] Start token request.
2019-01-18 02:45:52.330 +00:00 [DBG] Start client validation
2019-01-18 02:45:52.330 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 02:45:52.332 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 02:45:52.339 +00:00 [DBG] Secret id found: MVC
2019-01-18 02:45:52.339 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:52.340 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 02:45:52.340 +00:00 [DBG] Client validation success
2019-01-18 02:45:52.341 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSTS36EQ8F:00000001",
  "TimeStamp": "2019-01-18T02:45:52Z",
  "ProcessId": 230,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:45:52.362 +00:00 [DBG] Start token request validation
2019-01-18 02:45:52.378 +00:00 [DBG] Start client credentials token request validation
2019-01-18 02:45:52.393 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 02:45:52.395 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 02:45:52.411 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 02:45:52.417 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****4ZCQ"
    }
  ],
  "ActivityId": "0HLJSTS36EQ8F:00000001",
  "TimeStamp": "2019-01-18T02:45:52Z",
  "ProcessId": 230,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:45:52.422 +00:00 [DBG] Token request success.
2019-01-18 02:45:52.929 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 02:45:52.962 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 02:45:52.968 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 02:45:52.972 +00:00 [DBG] Start discovery request
2019-01-18 02:45:53.172 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 02:45:53.176 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 02:45:53.180 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 02:45:53.181 +00:00 [DBG] Start key discovery request
2019-01-18 02:45:59.499 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 02:45:59.500 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 02:45:59.500 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 02:45:59.500 +00:00 [DBG] Start token request.
2019-01-18 02:45:59.500 +00:00 [DBG] Start client validation
2019-01-18 02:45:59.500 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 02:45:59.500 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 02:45:59.500 +00:00 [DBG] Secret id found: MVC
2019-01-18 02:45:59.500 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:45:59.500 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 02:45:59.500 +00:00 [DBG] Client validation success
2019-01-18 02:45:59.500 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSTS36EQ8H:00000001",
  "TimeStamp": "2019-01-18T02:45:59Z",
  "ProcessId": 230,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:45:59.507 +00:00 [DBG] Start token request validation
2019-01-18 02:45:59.508 +00:00 [DBG] Start client credentials token request validation
2019-01-18 02:45:59.508 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 02:45:59.509 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 02:45:59.509 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 02:45:59.518 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****bmlw"
    }
  ],
  "ActivityId": "0HLJSTS36EQ8H:00000001",
  "TimeStamp": "2019-01-18T02:45:59Z",
  "ProcessId": 230,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:45:59.519 +00:00 [DBG] Token request success.
2019-01-18 02:46:00.072 +00:00 [INF] Message received:
2019-01-18 02:46:00.072 +00:00 [INF] ----------------------------------
2019-01-18 02:46:00.094 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"39ee64f7-9431-4c19-b2a0-b3d751dae451","CreationDate":"2019-01-18T02:45:59.99092Z"}
2019-01-18 02:46:00.094 +00:00 [INF] ----------------------------------
2019-01-18 02:46:01.278 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 815ddc25-c106-4a37-8ee8-efc056942293 to 1 handlers took 1214 ms
2019-01-18 02:48:10.507 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 02:48:10.508 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 02:48:10.509 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 02:48:10.509 +00:00 [DBG] Start token request.
2019-01-18 02:48:10.510 +00:00 [DBG] Start client validation
2019-01-18 02:48:10.510 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 02:48:10.510 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 02:48:10.511 +00:00 [DBG] Secret id found: MVC
2019-01-18 02:48:10.511 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:48:10.511 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 02:48:10.511 +00:00 [DBG] Client validation success
2019-01-18 02:48:10.512 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSTS36EQ8I:00000001",
  "TimeStamp": "2019-01-18T02:48:10Z",
  "ProcessId": 230,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:48:10.517 +00:00 [DBG] Start token request validation
2019-01-18 02:48:10.517 +00:00 [DBG] Start client credentials token request validation
2019-01-18 02:48:10.518 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 02:48:10.521 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 02:48:10.525 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 02:48:10.531 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****LTcg"
    }
  ],
  "ActivityId": "0HLJSTS36EQ8I:00000001",
  "TimeStamp": "2019-01-18T02:48:10Z",
  "ProcessId": 230,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:48:10.532 +00:00 [DBG] Token request success.
2019-01-18 02:48:13.615 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 02:48:13.616 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 02:48:13.616 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 02:48:13.616 +00:00 [DBG] Start token request.
2019-01-18 02:48:13.616 +00:00 [DBG] Start client validation
2019-01-18 02:48:13.617 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 02:48:13.617 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 02:48:13.617 +00:00 [DBG] Secret id found: MVC
2019-01-18 02:48:13.617 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 02:48:13.617 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 02:48:13.617 +00:00 [DBG] Client validation success
2019-01-18 02:48:13.617 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSTS36EQ8J:00000001",
  "TimeStamp": "2019-01-18T02:48:13Z",
  "ProcessId": 230,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:48:13.644 +00:00 [DBG] Start token request validation
2019-01-18 02:48:13.644 +00:00 [DBG] Start client credentials token request validation
2019-01-18 02:48:13.644 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 02:48:13.645 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 02:48:13.645 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 02:48:13.652 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****4bVA"
    }
  ],
  "ActivityId": "0HLJSTS36EQ8J:00000001",
  "TimeStamp": "2019-01-18T02:48:13Z",
  "ProcessId": 230,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 02:48:13.652 +00:00 [DBG] Token request success.
2019-01-18 02:48:13.907 +00:00 [INF] Message received:
2019-01-18 02:48:13.907 +00:00 [INF] ----------------------------------
2019-01-18 02:48:13.907 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"7185861e-3866-4f8c-b245-16d2cceaeeb4","CreationDate":"2019-01-18T02:48:13.9067563Z"}
2019-01-18 02:48:13.907 +00:00 [INF] ----------------------------------
2019-01-18 02:48:14.846 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 87b4d83a-d927-4789-a4d3-6cebb96af99b to 1 handlers took 939 ms
2019-01-18 03:05:30.800 +00:00 [WRN] No XML encryptor configured. Key "bc786c06-9ddb-404a-9345-d9792d32f6c7" may be persisted to storage in unencrypted form.
2019-01-18 03:05:32.081 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-18 03:05:33.377 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-18 03:05:33.490 +00:00 [INF] Setting number of workers to 1
2019-01-18 03:05:33.525 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-18 03:05:33.538 +00:00 [INF] Bus Rebus 1 started
2019-01-18 03:05:33.638 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-18 03:05:33.871 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-18 03:05:33.875 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-18 03:05:33.958 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-18 03:05:33.970 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-18 03:05:33.975 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-18 03:05:34.022 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-18 03:05:34.030 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-18 03:08:23.191 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 03:08:23.479 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 03:08:23.481 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 03:08:23.490 +00:00 [DBG] Start discovery request
2019-01-18 03:08:23.675 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 03:08:23.709 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 03:08:23.710 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 03:08:23.737 +00:00 [DBG] Start key discovery request
2019-01-18 03:08:23.926 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 03:08:23.928 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 03:08:23.936 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-18 03:08:23.943 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-18 03:08:23.944 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-18 03:08:23.953 +00:00 [DBG] Start authorize request
2019-01-18 03:08:23.968 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 03:08:23.978 +00:00 [DBG] No user present in authorize request
2019-01-18 03:08:23.986 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 03:08:24.005 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:08:24.014 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 03:08:24.018 +00:00 [DBG] No PKCE used.
2019-01-18 03:08:24.068 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 03:08:24.086 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BYyynlyPjdPqW96XUn1T3qMFJ-DoeR4VGcZxKpNJXiUsUbMnlJ99Yfc4wJ3vTV2OCwi1NPUo0U-Kuao7ca5Z174c0f2SSAcrgirvvrev8Yud8_QYC7UJ5FEN38u26yQQQCpb-_Dw3a7EZwltVN2MnAFd2jpkeCwqnWaWzO1bTAq3QXfsaL43flSS7bMv2P2aJlSSskKg_51OMTjaJuqWU7EGrVt6ZMJhNx30JFLGEl9dl6J-3palE2fQvBg3i3jd1Tpp_swkYiE0qfY8uA2qw-te5UWjR8mPj0fJ0-ngs39NOuJpC23APbUHsW1ceTtit9nqdIXQb3_vAgqoL6eZU4",
  "Nonce": "636833777038347121.NzU4ZWY3MTEtMGY1ZC00MmFlLWFiMDAtNGQ2NzEwMWViZjgxN2E2NmExYTMtODZlYy00YzNmLWE0MTctYWI1OGY2ODA5OWIx",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833777038347121.NzU4ZWY3MTEtMGY1ZC00MmFlLWFiMDAtNGQ2NzEwMWViZjgxN2E2NmExYTMtODZlYy00YzNmLWE0MTctYWI1OGY2ODA5OWIx",
    "state": "CfDJ8BYyynlyPjdPqW96XUn1T3qMFJ-DoeR4VGcZxKpNJXiUsUbMnlJ99Yfc4wJ3vTV2OCwi1NPUo0U-Kuao7ca5Z174c0f2SSAcrgirvvrev8Yud8_QYC7UJ5FEN38u26yQQQCpb-_Dw3a7EZwltVN2MnAFd2jpkeCwqnWaWzO1bTAq3QXfsaL43flSS7bMv2P2aJlSSskKg_51OMTjaJuqWU7EGrVt6ZMJhNx30JFLGEl9dl6J-3palE2fQvBg3i3jd1Tpp_swkYiE0qfY8uA2qw-te5UWjR8mPj0fJ0-ngs39NOuJpC23APbUHsW1ceTtit9nqdIXQb3_vAgqoL6eZU4",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 03:08:24.119 +00:00 [INF] Showing login: User is not authenticated
2019-01-18 03:08:24.136 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 03:08:24.136 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 03:08:24.529 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 03:08:24.530 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 03:08:24.531 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:08:24.531 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 03:08:24.532 +00:00 [DBG] No PKCE used.
2019-01-18 03:08:24.533 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 03:08:24.539 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:09:18.782 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 03:09:18.784 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 03:09:18.784 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 03:09:20.338 +00:00 [DBG] Augmenting SignInContext
2019-01-18 03:09:20.345 +00:00 [DBG] Adding idp claim with value: local
2019-01-18 03:09:20.345 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-18 03:09:20.346 +00:00 [DBG] Adding auth_time claim with value: 1547780960
2019-01-18 03:09:20.352 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-18 03:09:20.370 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 03:09:20.404 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLJSU8QCDOU1:00000003",
  "TimeStamp": "2019-01-18T03:09:20Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:09:20.431 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 03:09:20.433 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 03:09:20.433 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 03:09:20.449 +00:00 [DBG] Start authorize callback request
2019-01-18 03:09:20.456 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 03:09:20.456 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 03:09:20.457 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:09:20.457 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 03:09:20.457 +00:00 [DBG] No PKCE used.
2019-01-18 03:09:20.457 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 03:09:20.458 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BYyynlyPjdPqW96XUn1T3qMFJ-DoeR4VGcZxKpNJXiUsUbMnlJ99Yfc4wJ3vTV2OCwi1NPUo0U-Kuao7ca5Z174c0f2SSAcrgirvvrev8Yud8_QYC7UJ5FEN38u26yQQQCpb-_Dw3a7EZwltVN2MnAFd2jpkeCwqnWaWzO1bTAq3QXfsaL43flSS7bMv2P2aJlSSskKg_51OMTjaJuqWU7EGrVt6ZMJhNx30JFLGEl9dl6J-3palE2fQvBg3i3jd1Tpp_swkYiE0qfY8uA2qw-te5UWjR8mPj0fJ0-ngs39NOuJpC23APbUHsW1ceTtit9nqdIXQb3_vAgqoL6eZU4",
  "Nonce": "636833777038347121.NzU4ZWY3MTEtMGY1ZC00MmFlLWFiMDAtNGQ2NzEwMWViZjgxN2E2NmExYTMtODZlYy00YzNmLWE0MTctYWI1OGY2ODA5OWIx",
  "SessionId": "57afa7add0d1303035de7f78f4fcc7e6",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833777038347121.NzU4ZWY3MTEtMGY1ZC00MmFlLWFiMDAtNGQ2NzEwMWViZjgxN2E2NmExYTMtODZlYy00YzNmLWE0MTctYWI1OGY2ODA5OWIx",
    "state": "CfDJ8BYyynlyPjdPqW96XUn1T3qMFJ-DoeR4VGcZxKpNJXiUsUbMnlJ99Yfc4wJ3vTV2OCwi1NPUo0U-Kuao7ca5Z174c0f2SSAcrgirvvrev8Yud8_QYC7UJ5FEN38u26yQQQCpb-_Dw3a7EZwltVN2MnAFd2jpkeCwqnWaWzO1bTAq3QXfsaL43flSS7bMv2P2aJlSSskKg_51OMTjaJuqWU7EGrVt6ZMJhNx30JFLGEl9dl6J-3palE2fQvBg3i3jd1Tpp_swkYiE0qfY8uA2qw-te5UWjR8mPj0fJ0-ngs39NOuJpC23APbUHsW1ceTtit9nqdIXQb3_vAgqoL6eZU4",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 03:09:20.490 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 03:09:20.496 +00:00 [INF] Showing consent: User has not yet consented
2019-01-18 03:09:20.582 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 03:09:20.583 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:09:20.584 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 03:09:20.585 +00:00 [DBG] No PKCE used.
2019-01-18 03:09:20.586 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 03:09:20.587 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:09:39.765 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 03:09:39.820 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 03:09:39.821 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:09:39.821 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 03:09:39.822 +00:00 [DBG] No PKCE used.
2019-01-18 03:09:39.826 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 03:09:39.865 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 03:09:39.865 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 03:09:39.865 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 03:09:39.866 +00:00 [DBG] Start authorize callback request
2019-01-18 03:09:39.879 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 03:09:39.879 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 03:09:39.885 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:09:39.887 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 03:09:39.890 +00:00 [DBG] No PKCE used.
2019-01-18 03:09:39.900 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 03:09:39.902 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BYyynlyPjdPqW96XUn1T3qMFJ-DoeR4VGcZxKpNJXiUsUbMnlJ99Yfc4wJ3vTV2OCwi1NPUo0U-Kuao7ca5Z174c0f2SSAcrgirvvrev8Yud8_QYC7UJ5FEN38u26yQQQCpb-_Dw3a7EZwltVN2MnAFd2jpkeCwqnWaWzO1bTAq3QXfsaL43flSS7bMv2P2aJlSSskKg_51OMTjaJuqWU7EGrVt6ZMJhNx30JFLGEl9dl6J-3palE2fQvBg3i3jd1Tpp_swkYiE0qfY8uA2qw-te5UWjR8mPj0fJ0-ngs39NOuJpC23APbUHsW1ceTtit9nqdIXQb3_vAgqoL6eZU4",
  "Nonce": "636833777038347121.NzU4ZWY3MTEtMGY1ZC00MmFlLWFiMDAtNGQ2NzEwMWViZjgxN2E2NmExYTMtODZlYy00YzNmLWE0MTctYWI1OGY2ODA5OWIx",
  "SessionId": "57afa7add0d1303035de7f78f4fcc7e6",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833777038347121.NzU4ZWY3MTEtMGY1ZC00MmFlLWFiMDAtNGQ2NzEwMWViZjgxN2E2NmExYTMtODZlYy00YzNmLWE0MTctYWI1OGY2ODA5OWIx",
    "state": "CfDJ8BYyynlyPjdPqW96XUn1T3qMFJ-DoeR4VGcZxKpNJXiUsUbMnlJ99Yfc4wJ3vTV2OCwi1NPUo0U-Kuao7ca5Z174c0f2SSAcrgirvvrev8Yud8_QYC7UJ5FEN38u26yQQQCpb-_Dw3a7EZwltVN2MnAFd2jpkeCwqnWaWzO1bTAq3QXfsaL43flSS7bMv2P2aJlSSskKg_51OMTjaJuqWU7EGrVt6ZMJhNx30JFLGEl9dl6J-3palE2fQvBg3i3jd1Tpp_swkYiE0qfY8uA2qw-te5UWjR8mPj0fJ0-ngs39NOuJpC23APbUHsW1ceTtit9nqdIXQb3_vAgqoL6eZU4",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 03:09:39.904 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 03:09:39.935 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-18 03:09:39.958 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-18 03:09:39.965 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 03:09:39.992 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-18 03:09:40.038 +00:00 [DBG] Creating Implicit Flow response.
2019-01-18 03:09:40.060 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 03:09:40.237 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****MyRQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****db1f"
    }
  ],
  "ActivityId": "0HLJSU8QCDOU1:00000007",
  "TimeStamp": "2019-01-18T03:09:40Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:09:40.248 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8BYyynlyPjdPqW96XUn1T3qMFJ-DoeR4VGcZxKpNJXiUsUbMnlJ99Yfc4wJ3vTV2OCwi1NPUo0U-Kuao7ca5Z174c0f2SSAcrgirvvrev8Yud8_QYC7UJ5FEN38u26yQQQCpb-_Dw3a7EZwltVN2MnAFd2jpkeCwqnWaWzO1bTAq3QXfsaL43flSS7bMv2P2aJlSSskKg_51OMTjaJuqWU7EGrVt6ZMJhNx30JFLGEl9dl6J-3palE2fQvBg3i3jd1Tpp_swkYiE0qfY8uA2qw-te5UWjR8mPj0fJ0-ngs39NOuJpC23APbUHsW1ceTtit9nqdIXQb3_vAgqoL6eZU4",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-18 03:09:40.295 +00:00 [DBG] Augmenting SignInContext
2019-01-18 03:09:40.296 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 03:09:40.940 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:09:40.948 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:09:40.952 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:09:40.963 +00:00 [DBG] Start token request.
2019-01-18 03:09:40.981 +00:00 [DBG] Start client validation
2019-01-18 03:09:40.991 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:09:41.001 +00:00 [DBG] Start parsing for secret in post body
2019-01-18 03:09:41.006 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-18 03:09:41.006 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:09:41.006 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:09:41.028 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:09:41.029 +00:00 [DBG] Client validation success
2019-01-18 03:09:41.039 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSU8QCDOU0:00000003",
  "TimeStamp": "2019-01-18T03:09:41Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:09:41.059 +00:00 [DBG] Start token request validation
2019-01-18 03:09:41.076 +00:00 [DBG] Start validation of authorization code token request
2019-01-18 03:09:41.134 +00:00 [DBG] Validation of authorization code token request success
2019-01-18 03:09:41.141 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "3b98b0a5d6ebbfa77caa5bf3435354d3e1e1c82dd1d24dac0b5fe1361b1adb1f",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "3b98b0a5d6ebbfa77caa5bf3435354d3e1e1c82dd1d24dac0b5fe1361b1adb1f",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-18 03:09:41.164 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:09:41.190 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:09:41.191 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 03:09:41.242 +00:00 [DBG] Creating refresh token
2019-01-18 03:09:41.242 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-18 03:09:41.290 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:09:41.291 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 03:09:41.335 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****mEEw"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****dd2f"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****rGxg"
    }
  ],
  "ActivityId": "0HLJSU8QCDOU0:00000003",
  "TimeStamp": "2019-01-18T03:09:41Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:09:41.354 +00:00 [DBG] Token request success.
2019-01-18 03:09:41.459 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-18 03:09:41.462 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-18 03:09:41.462 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-18 03:09:41.487 +00:00 [DBG] Start userinfo request
2019-01-18 03:09:41.502 +00:00 [DBG] Bearer token found in header
2019-01-18 03:09:41.628 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:09:41.640 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:09:41.642 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-18 03:09:41.655 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1547780981,
    "exp": 1547784581,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547780960,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-18 03:09:41.693 +00:00 [DBG] Creating userinfo response
2019-01-18 03:09:41.713 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 03:09:41.731 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 03:09:41.738 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-18 03:09:41.739 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 03:09:41.773 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-18 03:09:41.774 +00:00 [DBG] End userinfo request
2019-01-18 03:09:42.915 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:09:42.915 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:09:42.916 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:09:42.916 +00:00 [DBG] Start token request.
2019-01-18 03:09:42.916 +00:00 [DBG] Start client validation
2019-01-18 03:09:42.916 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:09:42.917 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 03:09:42.917 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:09:42.917 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:09:42.917 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:09:42.917 +00:00 [DBG] Client validation success
2019-01-18 03:09:42.918 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSU8QCDOU4:00000001",
  "TimeStamp": "2019-01-18T03:09:42Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:09:43.022 +00:00 [DBG] Start token request validation
2019-01-18 03:09:43.040 +00:00 [DBG] Start client credentials token request validation
2019-01-18 03:09:43.063 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 03:09:43.069 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 03:09:43.090 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:09:43.099 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****WOJg"
    }
  ],
  "ActivityId": "0HLJSU8QCDOU4:00000001",
  "TimeStamp": "2019-01-18T03:09:43Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:09:43.100 +00:00 [DBG] Token request success.
2019-01-18 03:09:43.740 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 03:09:43.742 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 03:09:43.742 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 03:09:43.743 +00:00 [DBG] Start discovery request
2019-01-18 03:09:44.141 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 03:09:44.142 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 03:09:44.143 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 03:09:44.159 +00:00 [DBG] Start key discovery request
2019-01-18 03:10:18.710 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:10:18.732 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:10:18.732 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:10:18.732 +00:00 [DBG] Start token request.
2019-01-18 03:10:18.733 +00:00 [DBG] Start client validation
2019-01-18 03:10:18.733 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:10:18.733 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 03:10:18.733 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:10:18.733 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:10:18.733 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:10:18.733 +00:00 [DBG] Client validation success
2019-01-18 03:10:18.733 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSU8QCDOU6:00000001",
  "TimeStamp": "2019-01-18T03:10:18Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:10:18.750 +00:00 [DBG] Start token request validation
2019-01-18 03:10:18.750 +00:00 [DBG] Start client credentials token request validation
2019-01-18 03:10:18.751 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 03:10:18.751 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 03:10:18.751 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:10:18.756 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****SQsg"
    }
  ],
  "ActivityId": "0HLJSU8QCDOU6:00000001",
  "TimeStamp": "2019-01-18T03:10:18Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:10:18.757 +00:00 [DBG] Token request success.
2019-01-18 03:10:19.585 +00:00 [INF] Message received:
2019-01-18 03:10:19.585 +00:00 [INF] ----------------------------------
2019-01-18 03:10:19.594 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"2d44f236-309c-40ee-aea4-b056a177063e","CreationDate":"2019-01-18T03:10:19.5020165Z"}
2019-01-18 03:10:19.594 +00:00 [INF] ----------------------------------
2019-01-18 03:10:20.690 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 7ef1130e-15eb-4110-9682-f8f0f065af14 to 1 handlers took 1118 ms
2019-01-18 03:16:22.001 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:16:22.002 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:16:22.002 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:16:22.003 +00:00 [DBG] Start token request.
2019-01-18 03:16:22.004 +00:00 [DBG] Start client validation
2019-01-18 03:16:22.005 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:16:22.007 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 03:16:22.007 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:16:22.007 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:16:22.007 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:16:22.007 +00:00 [DBG] Client validation success
2019-01-18 03:16:22.008 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSU8QCDOU7:00000001",
  "TimeStamp": "2019-01-18T03:16:22Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:16:22.033 +00:00 [DBG] Start token request validation
2019-01-18 03:16:22.033 +00:00 [DBG] Start client credentials token request validation
2019-01-18 03:16:22.034 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 03:16:22.034 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 03:16:22.034 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:16:22.044 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****xvkA"
    }
  ],
  "ActivityId": "0HLJSU8QCDOU7:00000001",
  "TimeStamp": "2019-01-18T03:16:22Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:16:22.053 +00:00 [DBG] Token request success.
2019-01-18 03:16:25.796 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:16:25.838 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:16:25.839 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:16:25.839 +00:00 [DBG] Start token request.
2019-01-18 03:16:25.839 +00:00 [DBG] Start client validation
2019-01-18 03:16:25.839 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:16:25.839 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 03:16:25.839 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:16:25.839 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:16:25.839 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:16:25.839 +00:00 [DBG] Client validation success
2019-01-18 03:16:25.839 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSU8QCDOU8:00000001",
  "TimeStamp": "2019-01-18T03:16:25Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:16:25.845 +00:00 [DBG] Start token request validation
2019-01-18 03:16:25.846 +00:00 [DBG] Start client credentials token request validation
2019-01-18 03:16:25.846 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 03:16:25.846 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 03:16:25.846 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:16:25.851 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****lwJw"
    }
  ],
  "ActivityId": "0HLJSU8QCDOU8:00000001",
  "TimeStamp": "2019-01-18T03:16:25Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:16:25.862 +00:00 [DBG] Token request success.
2019-01-18 03:16:26.105 +00:00 [INF] Message received:
2019-01-18 03:16:26.105 +00:00 [INF] ----------------------------------
2019-01-18 03:16:26.105 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"cb52d813-24f1-420e-ad6d-b1b6eb5bd48b","CreationDate":"2019-01-18T03:16:26.1051472Z"}
2019-01-18 03:16:26.105 +00:00 [INF] ----------------------------------
2019-01-18 03:16:26.845 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 93121410-a5a8-4515-a619-56e686ec9123 to 1 handlers took 740 ms
2019-01-18 03:27:15.145 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-18 03:27:17.075 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-18 03:27:17.173 +00:00 [INF] Setting number of workers to 1
2019-01-18 03:27:17.194 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-18 03:27:17.231 +00:00 [INF] Bus Rebus 1 started
2019-01-18 03:27:17.261 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-18 03:27:17.388 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-18 03:27:17.410 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-18 03:27:17.486 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-18 03:27:17.497 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-18 03:27:17.499 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-18 03:27:17.513 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-18 03:27:17.517 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-18 03:28:42.997 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-18 03:28:44.270 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-18 03:28:44.343 +00:00 [INF] Setting number of workers to 1
2019-01-18 03:28:44.372 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-18 03:28:44.392 +00:00 [INF] Bus Rebus 1 started
2019-01-18 03:28:44.431 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-18 03:28:44.541 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-18 03:28:44.611 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-18 03:28:44.640 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-18 03:28:44.657 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-18 03:28:44.660 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-18 03:28:44.667 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-18 03:28:44.670 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-18 03:44:04.885 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 03:44:05.176 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 03:44:05.176 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 03:44:05.186 +00:00 [DBG] Start discovery request
2019-01-18 03:44:05.397 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 03:44:05.416 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 03:44:05.419 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 03:44:05.427 +00:00 [DBG] Start key discovery request
2019-01-18 03:44:06.756 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-18 03:44:06.762 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-18 03:44:06.762 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-18 03:44:06.805 +00:00 [DBG] Processing signout request for 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 03:44:06.816 +00:00 [DBG] Start end session request validation
2019-01-18 03:44:06.828 +00:00 [DBG] Start identity token validation
2019-01-18 03:44:06.870 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:06.870 +00:00 [DBG] Client found: MVC / MVC
2019-01-18 03:44:06.958 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-18 03:44:06.970 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1547780981,
    "exp": 1547781281,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636833777038347121.NzU4ZWY3MTEtMGY1ZC00MmFlLWFiMDAtNGQ2NzEwMWViZjgxN2E2NmExYTMtODZlYy00YzNmLWE0MTctYWI1OGY2ODA5OWIx",
    "iat": 1547780981,
    "at_hash": "UKKE6-E4QZNjLt5JPbjduA",
    "sid": "57afa7add0d1303035de7f78f4fcc7e6",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547780960,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "amr": "pwd"
  }
}
2019-01-18 03:44:06.997 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8BYyynlyPjdPqW96XUn1T3p_xH7ZUL_wqGpd4YqvKpBQwiiyiTkWJLmyT7quyzDd_F27O3sbdClgmWVqlTyRTA0SgV51s565GGsRbeSlMs3N-5Sn8ZnthXjkh-HVtmW6IHh6WZpQU_pB3szlqDClR8t54v9vkzf094MvzH7R9DTn",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDc3ODA5ODEsImV4cCI6MTU0Nzc4MTI4MSwiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4MzM3NzcwMzgzNDcxMjEuTnpVNFpXWTNNVEV0TUdZMVpDMDBNbUZsTFdGaU1EQXROR1EyTnpFd01XVmlaamd4TjJFMk5tRXhZVE10T0RabFl5MDBZek5tTFdFME1UY3RZV0kxT0dZMk9EQTVPV0l4IiwiaWF0IjoxNTQ3NzgwOTgxLCJhdF9oYXNoIjoiVUtLRTYtRTRRWk5qTHQ1SlBiamR1QSIsInNpZCI6IjU3YWZhN2FkZDBkMTMwMzAzNWRlN2Y3OGY0ZmNjN2U2Iiwic3ViIjoiMTczZjk2NGYtMWViOS00M2NmLTkxYzctZGY3NTM3MTdjMTZjIiwiYXV0aF90aW1lIjoxNTQ3NzgwOTYwLCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImVtYWlsIjoiYWxpY2VAYXNwLm5ldCIsInBob25lIjoiMTIzNC01Njc4IiwiYWRkcmVzcyI6IlJ1YSBWZXJndWVpcm8sIDQ1NiIsImFkZHJlc3NfZGV0YWlscyI6IjggYW5kYXIgc2FsYSA4MDEiLCJuZWlnaGJvcmhvb2QiOiJWaWxhIE1hcmlhbmEiLCJjaXR5IjoiU8OjbyBQYXVsbyIsInN0YXRlIjoiU1AiLCJ6aXBfY29kZSI6IjY5MTE4IiwiYW1yIjpbInB3ZCJdfQ.HUdfWFVQSNyXwyHpMNNmPbRnm_W59dHYAqbpbY3ps6o_o0IG5_oJ06yU2b85ooLjmIVuMmHUofbbz0jNM3dRE28MZzmTfmkdRZmwYCLjd5KNvmRwJjTg-LYnDtCRBbO7AsCB0pq-pVgMEz7Htoyva7-rRst6VnRNDdKr_QFwC4uCgK7pF_Bn1lUvm-7RQ9OLcDt-LnlRmSOnCzqfpN7c7EGMfCD3fccgg-UDBCtI3RfpHIdmeipCDisg-hHi09QZZuydxJOxWkME2uqDrsfzn8mPVvPKNcbhR3NRz3vVjfPCf0D97Ru-o0CnxlCQnH44ovw-X13jQSfIFoImIimEEw",
    "state": "CfDJ8BYyynlyPjdPqW96XUn1T3p_xH7ZUL_wqGpd4YqvKpBQwiiyiTkWJLmyT7quyzDd_F27O3sbdClgmWVqlTyRTA0SgV51s565GGsRbeSlMs3N-5Sn8ZnthXjkh-HVtmW6IHh6WZpQU_pB3szlqDClR8t54v9vkzf094MvzH7R9DTn",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 03:44:06.997 +00:00 [DBG] Success validating end session request from MVC
2019-01-18 03:44:07.469 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-18 03:44:07.472 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-18 03:44:07.474 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-18 03:44:07.497 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLJSUSOJS596:00000002",
  "TimeStamp": "2019-01-18T03:44:07Z",
  "ProcessId": 682,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:44:10.801 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-18 03:44:10.806 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-18 03:44:10.806 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-18 03:44:10.813 +00:00 [DBG] Start authorize request
2019-01-18 03:44:10.824 +00:00 [DBG] No user present in authorize request
2019-01-18 03:44:10.837 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 03:44:10.846 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:10.855 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 03:44:10.861 +00:00 [DBG] No PKCE used.
2019-01-18 03:44:10.915 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 03:44:10.929 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BYyynlyPjdPqW96XUn1T3phVi49E3YmQ9uxKR5hWmaT6jKxr6Q7t45fXS9IhbAHI9TlAu_rQLmwt1VACFoYEs6i2oiTtVs6l5XruQsn4RXtMU4Kjr9I-xBzxJy-Kj3laiwcw1ddKIBZo2KIrw2zzbiRYtMNtZ1RbK9sj5dQMXm_olZg8rsgi1QZE4wxPObTP1z4gJjdUBMGYn5lHp61CNTOtuCXLl6piWqfrq_2MYpHPli2bOrDJRmPVDR7WRhXBboWcPajFVXnS2Ui8DbvqY2URDm5BX6YtRUV2aHNi0cCLMaDyplM6Xa3_QxYZTiwZRY8ymGeceGZyJxlP1SJTaY",
  "Nonce": "636833798507876143.ZDcyNWE2NzMtYWI4ZS00Yzg3LTgzODQtMTRmMGE4ZjQzNjIwODA1NWZhYzQtNjM4Yi00ZDg0LWFkNWQtZGEyMmY3MzI1NGRl",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833798507876143.ZDcyNWE2NzMtYWI4ZS00Yzg3LTgzODQtMTRmMGE4ZjQzNjIwODA1NWZhYzQtNjM4Yi00ZDg0LWFkNWQtZGEyMmY3MzI1NGRl",
    "state": "CfDJ8BYyynlyPjdPqW96XUn1T3phVi49E3YmQ9uxKR5hWmaT6jKxr6Q7t45fXS9IhbAHI9TlAu_rQLmwt1VACFoYEs6i2oiTtVs6l5XruQsn4RXtMU4Kjr9I-xBzxJy-Kj3laiwcw1ddKIBZo2KIrw2zzbiRYtMNtZ1RbK9sj5dQMXm_olZg8rsgi1QZE4wxPObTP1z4gJjdUBMGYn5lHp61CNTOtuCXLl6piWqfrq_2MYpHPli2bOrDJRmPVDR7WRhXBboWcPajFVXnS2Ui8DbvqY2URDm5BX6YtRUV2aHNi0cCLMaDyplM6Xa3_QxYZTiwZRY8ymGeceGZyJxlP1SJTaY",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 03:44:10.956 +00:00 [INF] Showing login: User is not authenticated
2019-01-18 03:44:11.034 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 03:44:11.034 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:11.035 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 03:44:11.035 +00:00 [DBG] No PKCE used.
2019-01-18 03:44:11.035 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 03:44:11.040 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:13.752 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 03:44:14.033 +00:00 [DBG] Augmenting SignInContext
2019-01-18 03:44:14.039 +00:00 [DBG] Adding idp claim with value: local
2019-01-18 03:44:14.039 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-18 03:44:14.041 +00:00 [DBG] Adding auth_time claim with value: 1547783054
2019-01-18 03:44:14.065 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 03:44:14.098 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLJSUSOJS596:00000005",
  "TimeStamp": "2019-01-18T03:44:14Z",
  "ProcessId": 682,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:44:14.133 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 03:44:14.138 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 03:44:14.140 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 03:44:14.162 +00:00 [DBG] Start authorize callback request
2019-01-18 03:44:14.180 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 03:44:14.180 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 03:44:14.181 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:14.181 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 03:44:14.181 +00:00 [DBG] No PKCE used.
2019-01-18 03:44:14.182 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 03:44:14.182 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BYyynlyPjdPqW96XUn1T3phVi49E3YmQ9uxKR5hWmaT6jKxr6Q7t45fXS9IhbAHI9TlAu_rQLmwt1VACFoYEs6i2oiTtVs6l5XruQsn4RXtMU4Kjr9I-xBzxJy-Kj3laiwcw1ddKIBZo2KIrw2zzbiRYtMNtZ1RbK9sj5dQMXm_olZg8rsgi1QZE4wxPObTP1z4gJjdUBMGYn5lHp61CNTOtuCXLl6piWqfrq_2MYpHPli2bOrDJRmPVDR7WRhXBboWcPajFVXnS2Ui8DbvqY2URDm5BX6YtRUV2aHNi0cCLMaDyplM6Xa3_QxYZTiwZRY8ymGeceGZyJxlP1SJTaY",
  "Nonce": "636833798507876143.ZDcyNWE2NzMtYWI4ZS00Yzg3LTgzODQtMTRmMGE4ZjQzNjIwODA1NWZhYzQtNjM4Yi00ZDg0LWFkNWQtZGEyMmY3MzI1NGRl",
  "SessionId": "38f7d3b4153ab488dd94db451b6fc002",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833798507876143.ZDcyNWE2NzMtYWI4ZS00Yzg3LTgzODQtMTRmMGE4ZjQzNjIwODA1NWZhYzQtNjM4Yi00ZDg0LWFkNWQtZGEyMmY3MzI1NGRl",
    "state": "CfDJ8BYyynlyPjdPqW96XUn1T3phVi49E3YmQ9uxKR5hWmaT6jKxr6Q7t45fXS9IhbAHI9TlAu_rQLmwt1VACFoYEs6i2oiTtVs6l5XruQsn4RXtMU4Kjr9I-xBzxJy-Kj3laiwcw1ddKIBZo2KIrw2zzbiRYtMNtZ1RbK9sj5dQMXm_olZg8rsgi1QZE4wxPObTP1z4gJjdUBMGYn5lHp61CNTOtuCXLl6piWqfrq_2MYpHPli2bOrDJRmPVDR7WRhXBboWcPajFVXnS2Ui8DbvqY2URDm5BX6YtRUV2aHNi0cCLMaDyplM6Xa3_QxYZTiwZRY8ymGeceGZyJxlP1SJTaY",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 03:44:14.218 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 03:44:14.219 +00:00 [INF] Showing consent: User has not yet consented
2019-01-18 03:44:14.276 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 03:44:14.276 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:14.277 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 03:44:14.277 +00:00 [DBG] No PKCE used.
2019-01-18 03:44:14.279 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 03:44:14.279 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:18.117 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 03:44:18.229 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 03:44:18.229 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:18.229 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 03:44:18.229 +00:00 [DBG] No PKCE used.
2019-01-18 03:44:18.231 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 03:44:18.259 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 03:44:18.263 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 03:44:18.264 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 03:44:18.266 +00:00 [DBG] Start authorize callback request
2019-01-18 03:44:18.279 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 03:44:18.280 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 03:44:18.282 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:18.284 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 03:44:18.287 +00:00 [DBG] No PKCE used.
2019-01-18 03:44:18.289 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 03:44:18.292 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BYyynlyPjdPqW96XUn1T3phVi49E3YmQ9uxKR5hWmaT6jKxr6Q7t45fXS9IhbAHI9TlAu_rQLmwt1VACFoYEs6i2oiTtVs6l5XruQsn4RXtMU4Kjr9I-xBzxJy-Kj3laiwcw1ddKIBZo2KIrw2zzbiRYtMNtZ1RbK9sj5dQMXm_olZg8rsgi1QZE4wxPObTP1z4gJjdUBMGYn5lHp61CNTOtuCXLl6piWqfrq_2MYpHPli2bOrDJRmPVDR7WRhXBboWcPajFVXnS2Ui8DbvqY2URDm5BX6YtRUV2aHNi0cCLMaDyplM6Xa3_QxYZTiwZRY8ymGeceGZyJxlP1SJTaY",
  "Nonce": "636833798507876143.ZDcyNWE2NzMtYWI4ZS00Yzg3LTgzODQtMTRmMGE4ZjQzNjIwODA1NWZhYzQtNjM4Yi00ZDg0LWFkNWQtZGEyMmY3MzI1NGRl",
  "SessionId": "38f7d3b4153ab488dd94db451b6fc002",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636833798507876143.ZDcyNWE2NzMtYWI4ZS00Yzg3LTgzODQtMTRmMGE4ZjQzNjIwODA1NWZhYzQtNjM4Yi00ZDg0LWFkNWQtZGEyMmY3MzI1NGRl",
    "state": "CfDJ8BYyynlyPjdPqW96XUn1T3phVi49E3YmQ9uxKR5hWmaT6jKxr6Q7t45fXS9IhbAHI9TlAu_rQLmwt1VACFoYEs6i2oiTtVs6l5XruQsn4RXtMU4Kjr9I-xBzxJy-Kj3laiwcw1ddKIBZo2KIrw2zzbiRYtMNtZ1RbK9sj5dQMXm_olZg8rsgi1QZE4wxPObTP1z4gJjdUBMGYn5lHp61CNTOtuCXLl6piWqfrq_2MYpHPli2bOrDJRmPVDR7WRhXBboWcPajFVXnS2Ui8DbvqY2URDm5BX6YtRUV2aHNi0cCLMaDyplM6Xa3_QxYZTiwZRY8ymGeceGZyJxlP1SJTaY",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 03:44:18.301 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 03:44:18.321 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-18 03:44:18.336 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-18 03:44:18.343 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 03:44:18.363 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-18 03:44:18.392 +00:00 [DBG] Creating Implicit Flow response.
2019-01-18 03:44:18.406 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 03:44:18.484 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****DMGQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****816e"
    }
  ],
  "ActivityId": "0HLJSUSOJS598:00000002",
  "TimeStamp": "2019-01-18T03:44:18Z",
  "ProcessId": 682,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:44:18.494 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8BYyynlyPjdPqW96XUn1T3phVi49E3YmQ9uxKR5hWmaT6jKxr6Q7t45fXS9IhbAHI9TlAu_rQLmwt1VACFoYEs6i2oiTtVs6l5XruQsn4RXtMU4Kjr9I-xBzxJy-Kj3laiwcw1ddKIBZo2KIrw2zzbiRYtMNtZ1RbK9sj5dQMXm_olZg8rsgi1QZE4wxPObTP1z4gJjdUBMGYn5lHp61CNTOtuCXLl6piWqfrq_2MYpHPli2bOrDJRmPVDR7WRhXBboWcPajFVXnS2Ui8DbvqY2URDm5BX6YtRUV2aHNi0cCLMaDyplM6Xa3_QxYZTiwZRY8ymGeceGZyJxlP1SJTaY",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-18 03:44:18.534 +00:00 [DBG] Augmenting SignInContext
2019-01-18 03:44:18.535 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 03:44:18.942 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:44:18.959 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:44:18.959 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:44:18.979 +00:00 [DBG] Start token request.
2019-01-18 03:44:18.989 +00:00 [DBG] Start client validation
2019-01-18 03:44:19.002 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:44:19.015 +00:00 [DBG] Start parsing for secret in post body
2019-01-18 03:44:19.020 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-18 03:44:19.021 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:44:19.021 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:19.041 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:44:19.041 +00:00 [DBG] Client validation success
2019-01-18 03:44:19.049 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSUSOJS595:00000003",
  "TimeStamp": "2019-01-18T03:44:19Z",
  "ProcessId": 682,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:44:19.063 +00:00 [DBG] Start token request validation
2019-01-18 03:44:19.079 +00:00 [DBG] Start validation of authorization code token request
2019-01-18 03:44:19.103 +00:00 [DBG] Validation of authorization code token request success
2019-01-18 03:44:19.110 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "8e63e23c480ad56223ab454408974eaf4d0a9081364a1e98ec49818556b8816e",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "8e63e23c480ad56223ab454408974eaf4d0a9081364a1e98ec49818556b8816e",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-18 03:44:19.136 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:19.150 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:44:19.151 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 03:44:19.173 +00:00 [DBG] Creating refresh token
2019-01-18 03:44:19.173 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-18 03:44:19.191 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:19.192 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 03:44:19.209 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****w78A"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****c279"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****NzLA"
    }
  ],
  "ActivityId": "0HLJSUSOJS595:00000003",
  "TimeStamp": "2019-01-18T03:44:19Z",
  "ProcessId": 682,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:44:19.212 +00:00 [DBG] Token request success.
2019-01-18 03:44:19.266 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-18 03:44:19.270 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-18 03:44:19.270 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-18 03:44:19.289 +00:00 [DBG] Start userinfo request
2019-01-18 03:44:19.296 +00:00 [DBG] Bearer token found in header
2019-01-18 03:44:19.324 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:19.324 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:19.325 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-18 03:44:19.326 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1547783059,
    "exp": 1547786659,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547783054,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-18 03:44:19.338 +00:00 [DBG] Creating userinfo response
2019-01-18 03:44:19.350 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 03:44:19.359 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 03:44:19.369 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-18 03:44:19.370 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 03:44:19.391 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-18 03:44:19.391 +00:00 [DBG] End userinfo request
2019-01-18 03:44:20.534 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:44:20.536 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:44:20.536 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:44:20.536 +00:00 [DBG] Start token request.
2019-01-18 03:44:20.536 +00:00 [DBG] Start client validation
2019-01-18 03:44:20.536 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:44:20.537 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 03:44:20.537 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:44:20.537 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:20.537 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:44:20.537 +00:00 [DBG] Client validation success
2019-01-18 03:44:20.537 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSUSOJS59A:00000001",
  "TimeStamp": "2019-01-18T03:44:20Z",
  "ProcessId": 682,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:44:20.592 +00:00 [DBG] Start token request validation
2019-01-18 03:44:20.648 +00:00 [DBG] Start client credentials token request validation
2019-01-18 03:44:20.693 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 03:44:20.701 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 03:44:20.724 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:44:20.744 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****E6Fg"
    }
  ],
  "ActivityId": "0HLJSUSOJS59A:00000001",
  "TimeStamp": "2019-01-18T03:44:20Z",
  "ProcessId": 682,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:44:20.771 +00:00 [DBG] Token request success.
2019-01-18 03:44:21.660 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 03:44:21.664 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 03:44:21.664 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 03:44:21.666 +00:00 [DBG] Start discovery request
2019-01-18 03:44:21.957 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 03:44:21.958 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 03:44:21.958 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 03:44:21.961 +00:00 [DBG] Start key discovery request
2019-01-18 03:44:31.859 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:44:31.859 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:44:31.859 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:44:31.859 +00:00 [DBG] Start token request.
2019-01-18 03:44:31.859 +00:00 [DBG] Start client validation
2019-01-18 03:44:31.859 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:44:31.859 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 03:44:31.860 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:44:31.860 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:44:31.860 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:44:31.860 +00:00 [DBG] Client validation success
2019-01-18 03:44:31.860 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSUSOJS59C:00000001",
  "TimeStamp": "2019-01-18T03:44:31Z",
  "ProcessId": 682,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:44:31.874 +00:00 [DBG] Start token request validation
2019-01-18 03:44:31.874 +00:00 [DBG] Start client credentials token request validation
2019-01-18 03:44:31.874 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 03:44:31.874 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 03:44:31.875 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:44:31.884 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****zGew"
    }
  ],
  "ActivityId": "0HLJSUSOJS59C:00000001",
  "TimeStamp": "2019-01-18T03:44:31Z",
  "ProcessId": 682,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:44:31.885 +00:00 [DBG] Token request success.
2019-01-18 03:44:32.732 +00:00 [INF] Message received:
2019-01-18 03:44:32.735 +00:00 [INF] ----------------------------------
2019-01-18 03:44:32.743 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"03af8680-ead8-47cd-8f94-a7341220c16c","CreationDate":"2019-01-18T03:44:32.6283987Z"}
2019-01-18 03:44:32.749 +00:00 [INF] ----------------------------------
2019-01-18 03:44:34.275 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens ff8442a9-d471-483a-a3fc-e50617d10da2 to 1 handlers took 1552 ms
2019-01-18 03:49:55.339 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-18 03:49:56.683 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-18 03:49:56.768 +00:00 [INF] Setting number of workers to 1
2019-01-18 03:49:56.809 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-18 03:49:56.862 +00:00 [INF] Bus Rebus 1 started
2019-01-18 03:49:56.864 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-18 03:49:57.039 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-18 03:49:57.110 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-18 03:49:57.157 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-18 03:49:57.157 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-18 03:49:57.157 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-18 03:49:57.158 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-18 03:49:57.159 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-18 03:50:28.464 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:50:28.751 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:50:28.752 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:50:28.769 +00:00 [DBG] Start token request.
2019-01-18 03:50:28.779 +00:00 [DBG] Start client validation
2019-01-18 03:50:28.788 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:50:28.789 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 03:50:28.789 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:50:28.802 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:50:28.815 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:50:28.815 +00:00 [DBG] Client validation success
2019-01-18 03:50:28.845 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSV0AV2N9P:00000001",
  "TimeStamp": "2019-01-18T03:50:28Z",
  "ProcessId": 1246,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:50:28.918 +00:00 [DBG] Start token request validation
2019-01-18 03:50:28.933 +00:00 [DBG] Start client credentials token request validation
2019-01-18 03:50:28.985 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 03:50:28.998 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 03:50:29.037 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:50:29.115 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****syzg"
    }
  ],
  "ActivityId": "0HLJSV0AV2N9P:00000001",
  "TimeStamp": "2019-01-18T03:50:29Z",
  "ProcessId": 1246,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:50:29.122 +00:00 [DBG] Token request success.
2019-01-18 03:50:29.756 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 03:50:29.769 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 03:50:29.770 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 03:50:29.787 +00:00 [DBG] Start discovery request
2019-01-18 03:50:30.004 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 03:50:30.006 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 03:50:30.006 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 03:50:30.016 +00:00 [DBG] Start key discovery request
2019-01-18 03:50:51.310 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:50:51.316 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:50:51.316 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:50:51.316 +00:00 [DBG] Start token request.
2019-01-18 03:50:51.316 +00:00 [DBG] Start client validation
2019-01-18 03:50:51.317 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:50:51.318 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 03:50:51.318 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:50:51.318 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:50:51.318 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:50:51.318 +00:00 [DBG] Client validation success
2019-01-18 03:50:51.319 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSV0AV2N9R:00000001",
  "TimeStamp": "2019-01-18T03:50:51Z",
  "ProcessId": 1246,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:50:51.356 +00:00 [DBG] Start token request validation
2019-01-18 03:50:51.358 +00:00 [DBG] Start client credentials token request validation
2019-01-18 03:50:51.359 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 03:50:51.359 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 03:50:51.360 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:50:51.370 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****OQmg"
    }
  ],
  "ActivityId": "0HLJSV0AV2N9R:00000001",
  "TimeStamp": "2019-01-18T03:50:51Z",
  "ProcessId": 1246,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:50:51.370 +00:00 [DBG] Token request success.
2019-01-18 03:50:52.000 +00:00 [INF] Message received:
2019-01-18 03:50:52.001 +00:00 [INF] ----------------------------------
2019-01-18 03:50:52.018 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"70257294-e43c-45b4-b993-df337965b210","CreationDate":"2019-01-18T03:50:51.9059288Z"}
2019-01-18 03:50:52.019 +00:00 [INF] ----------------------------------
2019-01-18 03:50:54.438 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens b550db13-7ba5-4b3a-a516-991c626dedd8 to 1 handlers took 2445 ms
2019-01-18 03:51:59.849 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:51:59.852 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:51:59.852 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:51:59.852 +00:00 [DBG] Start token request.
2019-01-18 03:51:59.852 +00:00 [DBG] Start client validation
2019-01-18 03:51:59.852 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:51:59.852 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 03:51:59.852 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:51:59.870 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:51:59.871 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:51:59.872 +00:00 [DBG] Client validation success
2019-01-18 03:51:59.873 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSV0AV2N9S:00000001",
  "TimeStamp": "2019-01-18T03:51:59Z",
  "ProcessId": 1246,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:51:59.893 +00:00 [DBG] Start token request validation
2019-01-18 03:51:59.893 +00:00 [DBG] Start client credentials token request validation
2019-01-18 03:51:59.893 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 03:51:59.893 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 03:51:59.893 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:51:59.897 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****dXQg"
    }
  ],
  "ActivityId": "0HLJSV0AV2N9S:00000001",
  "TimeStamp": "2019-01-18T03:51:59Z",
  "ProcessId": 1246,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:51:59.943 +00:00 [DBG] Token request success.
2019-01-18 03:52:02.822 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:52:02.823 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:52:02.823 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:52:02.824 +00:00 [DBG] Start token request.
2019-01-18 03:52:02.824 +00:00 [DBG] Start client validation
2019-01-18 03:52:02.824 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:52:02.824 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 03:52:02.824 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:52:02.825 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:52:02.828 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:52:02.836 +00:00 [DBG] Client validation success
2019-01-18 03:52:02.837 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSV0AV2N9T:00000001",
  "TimeStamp": "2019-01-18T03:52:02Z",
  "ProcessId": 1246,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:52:02.842 +00:00 [DBG] Start token request validation
2019-01-18 03:52:02.842 +00:00 [DBG] Start client credentials token request validation
2019-01-18 03:52:02.842 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 03:52:02.842 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 03:52:02.842 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:52:02.845 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****eHVg"
    }
  ],
  "ActivityId": "0HLJSV0AV2N9T:00000001",
  "TimeStamp": "2019-01-18T03:52:02Z",
  "ProcessId": 1246,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:52:02.846 +00:00 [DBG] Token request success.
2019-01-18 03:52:03.139 +00:00 [INF] Message received:
2019-01-18 03:52:03.139 +00:00 [INF] ----------------------------------
2019-01-18 03:52:03.139 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"3a6f70fb-2eb5-4467-96d7-421c8c0dd103","CreationDate":"2019-01-18T03:52:03.1387848Z"}
2019-01-18 03:52:03.139 +00:00 [INF] ----------------------------------
2019-01-18 03:52:04.039 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens a6a3d591-4070-4f70-804b-6e03bec04cf1 to 1 handlers took 899 ms
2019-01-18 03:53:27.309 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-18 03:53:29.087 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-18 03:53:29.251 +00:00 [INF] Setting number of workers to 1
2019-01-18 03:53:29.272 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-18 03:53:29.290 +00:00 [INF] Bus Rebus 1 started
2019-01-18 03:53:29.318 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-18 03:53:29.471 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-18 03:53:29.488 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-18 03:53:29.607 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-18 03:53:29.608 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-18 03:53:29.609 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-18 03:53:29.613 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-18 03:53:29.620 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-18 03:54:54.354 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:54:54.606 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:54:54.608 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:54:54.624 +00:00 [DBG] Start token request.
2019-01-18 03:54:54.636 +00:00 [DBG] Start client validation
2019-01-18 03:54:54.646 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:54:54.648 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 03:54:54.649 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:54:54.662 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:54:54.675 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:54:54.675 +00:00 [DBG] Client validation success
2019-01-18 03:54:54.705 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSV2Q6S5Q3:00000001",
  "TimeStamp": "2019-01-18T03:54:54Z",
  "ProcessId": 1371,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:54:54.788 +00:00 [DBG] Start token request validation
2019-01-18 03:54:54.803 +00:00 [DBG] Start client credentials token request validation
2019-01-18 03:54:54.865 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 03:54:54.878 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 03:54:54.911 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:54:55.001 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****bGDA"
    }
  ],
  "ActivityId": "0HLJSV2Q6S5Q3:00000001",
  "TimeStamp": "2019-01-18T03:54:54Z",
  "ProcessId": 1371,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:54:55.003 +00:00 [DBG] Token request success.
2019-01-18 03:54:55.511 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 03:54:55.518 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 03:54:55.523 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 03:54:55.534 +00:00 [DBG] Start discovery request
2019-01-18 03:54:55.697 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 03:54:55.697 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 03:54:55.697 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 03:54:55.704 +00:00 [DBG] Start key discovery request
2019-01-18 03:55:02.488 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:55:02.489 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:55:02.489 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:55:02.489 +00:00 [DBG] Start token request.
2019-01-18 03:55:02.489 +00:00 [DBG] Start client validation
2019-01-18 03:55:02.489 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:55:02.489 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 03:55:02.489 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:55:02.489 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:55:02.489 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:55:02.489 +00:00 [DBG] Client validation success
2019-01-18 03:55:02.490 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSV2Q6S5Q5:00000001",
  "TimeStamp": "2019-01-18T03:55:02Z",
  "ProcessId": 1371,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:55:02.495 +00:00 [DBG] Start token request validation
2019-01-18 03:55:02.495 +00:00 [DBG] Start client credentials token request validation
2019-01-18 03:55:02.496 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 03:55:02.496 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 03:55:02.496 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:55:02.521 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****F2Yw"
    }
  ],
  "ActivityId": "0HLJSV2Q6S5Q5:00000001",
  "TimeStamp": "2019-01-18T03:55:02Z",
  "ProcessId": 1371,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:55:02.522 +00:00 [DBG] Token request success.
2019-01-18 03:55:03.215 +00:00 [INF] Message received:
2019-01-18 03:55:03.216 +00:00 [INF] ----------------------------------
2019-01-18 03:55:03.223 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"76dea023-8305-43e4-ab42-bdddeb01c566","CreationDate":"2019-01-18T03:55:03.0765855Z"}
2019-01-18 03:55:03.223 +00:00 [INF] ----------------------------------
2019-01-18 03:55:05.353 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 9b32e7cf-7a70-4158-95d4-02bafc64b2fc to 1 handlers took 2144 ms
2019-01-18 03:57:22.669 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-18 03:57:24.809 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-18 03:57:24.947 +00:00 [INF] Setting number of workers to 1
2019-01-18 03:57:25.097 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-18 03:57:25.114 +00:00 [INF] Bus Rebus 1 started
2019-01-18 03:57:25.209 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-18 03:57:25.414 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-18 03:57:25.463 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-18 03:57:25.535 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-18 03:57:25.539 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-18 03:57:25.543 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-18 03:57:25.547 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-18 03:57:25.560 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-18 03:57:44.992 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:57:45.279 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:57:45.281 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:57:45.295 +00:00 [DBG] Start token request.
2019-01-18 03:57:45.306 +00:00 [DBG] Start client validation
2019-01-18 03:57:45.316 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:57:45.318 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 03:57:45.319 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:57:45.334 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:57:45.349 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:57:45.350 +00:00 [DBG] Client validation success
2019-01-18 03:57:45.379 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSV4D285BP:00000001",
  "TimeStamp": "2019-01-18T03:57:45Z",
  "ProcessId": 1504,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:57:45.453 +00:00 [DBG] Start token request validation
2019-01-18 03:57:45.464 +00:00 [DBG] Start client credentials token request validation
2019-01-18 03:57:45.506 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 03:57:45.519 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 03:57:45.557 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:57:45.630 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Yglw"
    }
  ],
  "ActivityId": "0HLJSV4D285BP:00000001",
  "TimeStamp": "2019-01-18T03:57:45Z",
  "ProcessId": 1504,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:57:45.641 +00:00 [DBG] Token request success.
2019-01-18 03:57:46.159 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 03:57:46.174 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 03:57:46.176 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 03:57:46.200 +00:00 [DBG] Start discovery request
2019-01-18 03:57:46.364 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 03:57:46.365 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 03:57:46.365 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 03:57:46.371 +00:00 [DBG] Start key discovery request
2019-01-18 03:58:04.152 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 03:58:04.154 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 03:58:04.191 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 03:58:04.191 +00:00 [DBG] Start token request.
2019-01-18 03:58:04.191 +00:00 [DBG] Start client validation
2019-01-18 03:58:04.191 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 03:58:04.191 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 03:58:04.191 +00:00 [DBG] Secret id found: MVC
2019-01-18 03:58:04.191 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 03:58:04.191 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 03:58:04.191 +00:00 [DBG] Client validation success
2019-01-18 03:58:04.191 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSV4D285BR:00000001",
  "TimeStamp": "2019-01-18T03:58:04Z",
  "ProcessId": 1504,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:58:04.203 +00:00 [DBG] Start token request validation
2019-01-18 03:58:04.203 +00:00 [DBG] Start client credentials token request validation
2019-01-18 03:58:04.204 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 03:58:04.204 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 03:58:04.204 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 03:58:04.225 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****_qNg"
    }
  ],
  "ActivityId": "0HLJSV4D285BR:00000001",
  "TimeStamp": "2019-01-18T03:58:04Z",
  "ProcessId": 1504,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 03:58:04.237 +00:00 [DBG] Token request success.
2019-01-18 03:58:04.829 +00:00 [INF] Message received:
2019-01-18 03:58:04.835 +00:00 [INF] ----------------------------------
2019-01-18 03:58:04.844 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"e228e2e6-04f6-4dfa-aa20-d3df286dd694","CreationDate":"2019-01-18T03:58:04.7478471Z"}
2019-01-18 03:58:04.845 +00:00 [INF] ----------------------------------
2019-01-18 03:58:07.089 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 30ee1108-b2f4-48b7-8e7c-b612a9f1501e to 1 handlers took 2273 ms
2019-01-18 04:08:02.270 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 04:08:02.271 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 04:08:02.271 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 04:08:02.271 +00:00 [DBG] Start token request.
2019-01-18 04:08:02.271 +00:00 [DBG] Start client validation
2019-01-18 04:08:02.271 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 04:08:02.271 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 04:08:02.271 +00:00 [DBG] Secret id found: MVC
2019-01-18 04:08:02.272 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 04:08:02.272 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 04:08:02.272 +00:00 [DBG] Client validation success
2019-01-18 04:08:02.273 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSV4D285BS:00000001",
  "TimeStamp": "2019-01-18T04:08:02Z",
  "ProcessId": 1504,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 04:08:02.282 +00:00 [DBG] Start token request validation
2019-01-18 04:08:02.283 +00:00 [DBG] Start client credentials token request validation
2019-01-18 04:08:02.287 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 04:08:02.288 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 04:08:02.290 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 04:08:02.295 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****fmJQ"
    }
  ],
  "ActivityId": "0HLJSV4D285BS:00000001",
  "TimeStamp": "2019-01-18T04:08:02Z",
  "ProcessId": 1504,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 04:08:02.300 +00:00 [DBG] Token request success.
2019-01-18 04:08:06.441 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 04:08:06.442 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 04:08:06.442 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 04:08:06.442 +00:00 [DBG] Start token request.
2019-01-18 04:08:06.442 +00:00 [DBG] Start client validation
2019-01-18 04:08:06.442 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 04:08:06.442 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 04:08:06.442 +00:00 [DBG] Secret id found: MVC
2019-01-18 04:08:06.442 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 04:08:06.442 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 04:08:06.442 +00:00 [DBG] Client validation success
2019-01-18 04:08:06.442 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSV4D285BT:00000001",
  "TimeStamp": "2019-01-18T04:08:06Z",
  "ProcessId": 1504,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 04:08:06.458 +00:00 [DBG] Start token request validation
2019-01-18 04:08:06.458 +00:00 [DBG] Start client credentials token request validation
2019-01-18 04:08:06.458 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 04:08:06.463 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 04:08:06.463 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 04:08:06.493 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****T9Yw"
    }
  ],
  "ActivityId": "0HLJSV4D285BT:00000001",
  "TimeStamp": "2019-01-18T04:08:06Z",
  "ProcessId": 1504,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 04:08:06.493 +00:00 [DBG] Token request success.
2019-01-18 04:08:06.791 +00:00 [INF] Message received:
2019-01-18 04:08:06.812 +00:00 [INF] ----------------------------------
2019-01-18 04:08:06.813 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"67a8f154-bc36-4d92-8866-eccb6b754c93","CreationDate":"2019-01-18T04:08:06.7888143Z"}
2019-01-18 04:08:06.814 +00:00 [INF] ----------------------------------
2019-01-18 04:08:07.688 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 2a36a5e0-738a-4544-a4a3-adc2626b1150 to 1 handlers took 897 ms
2019-01-18 04:11:33.240 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-18 04:11:34.783 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-18 04:11:34.996 +00:00 [INF] Setting number of workers to 1
2019-01-18 04:11:35.030 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-18 04:11:35.068 +00:00 [INF] Bus Rebus 1 started
2019-01-18 04:11:35.127 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-18 04:11:35.369 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-18 04:11:35.452 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-18 04:11:35.485 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-18 04:11:35.488 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-18 04:11:35.490 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-18 04:11:35.493 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-18 04:11:35.496 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-18 04:13:19.524 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 04:13:19.775 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 04:13:19.776 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 04:13:19.792 +00:00 [DBG] Start token request.
2019-01-18 04:13:19.802 +00:00 [DBG] Start client validation
2019-01-18 04:13:19.810 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 04:13:19.812 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 04:13:19.812 +00:00 [DBG] Secret id found: MVC
2019-01-18 04:13:19.828 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 04:13:19.844 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 04:13:19.844 +00:00 [DBG] Client validation success
2019-01-18 04:13:19.872 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSVD3IQ1NS:00000001",
  "TimeStamp": "2019-01-18T04:13:19Z",
  "ProcessId": 1921,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 04:13:19.944 +00:00 [DBG] Start token request validation
2019-01-18 04:13:19.956 +00:00 [DBG] Start client credentials token request validation
2019-01-18 04:13:20.054 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 04:13:20.074 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 04:13:20.139 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 04:13:20.263 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****RuFg"
    }
  ],
  "ActivityId": "0HLJSVD3IQ1NS:00000001",
  "TimeStamp": "2019-01-18T04:13:20Z",
  "ProcessId": 1921,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 04:13:20.267 +00:00 [DBG] Token request success.
2019-01-18 04:13:20.746 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 04:13:20.793 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 04:13:20.793 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 04:13:20.841 +00:00 [DBG] Start discovery request
2019-01-18 04:13:21.006 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 04:13:21.008 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 04:13:21.008 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 04:13:21.020 +00:00 [DBG] Start key discovery request
2019-01-18 04:13:29.463 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 04:13:29.466 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 04:13:29.467 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 04:13:29.467 +00:00 [DBG] Start token request.
2019-01-18 04:13:29.467 +00:00 [DBG] Start client validation
2019-01-18 04:13:29.468 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 04:13:29.468 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 04:13:29.468 +00:00 [DBG] Secret id found: MVC
2019-01-18 04:13:29.468 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 04:13:29.468 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 04:13:29.468 +00:00 [DBG] Client validation success
2019-01-18 04:13:29.468 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJSVD3IQ1NU:00000001",
  "TimeStamp": "2019-01-18T04:13:29Z",
  "ProcessId": 1921,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 04:13:29.496 +00:00 [DBG] Start token request validation
2019-01-18 04:13:29.497 +00:00 [DBG] Start client credentials token request validation
2019-01-18 04:13:29.499 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 04:13:29.501 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 04:13:29.511 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 04:13:29.532 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****h6tA"
    }
  ],
  "ActivityId": "0HLJSVD3IQ1NU:00000001",
  "TimeStamp": "2019-01-18T04:13:29Z",
  "ProcessId": 1921,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 04:13:29.539 +00:00 [DBG] Token request success.
2019-01-18 04:13:30.171 +00:00 [INF] Message received:
2019-01-18 04:13:30.171 +00:00 [INF] ----------------------------------
2019-01-18 04:13:30.180 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"92e334de-dd7e-4fbf-95bf-329178569b24","CreationDate":"2019-01-18T04:13:30.0723729Z"}
2019-01-18 04:13:30.182 +00:00 [INF] ----------------------------------
2019-01-18 04:13:32.246 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 3cef825e-86c9-449e-9b64-7a4f16f4422c to 1 handlers took 2082 ms
2019-01-18 22:30:24.196 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-18 22:30:26.169 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-18 22:30:26.287 +00:00 [INF] Setting number of workers to 1
2019-01-18 22:30:26.321 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-18 22:30:26.381 +00:00 [INF] Bus Rebus 1 started
2019-01-18 22:30:26.383 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-18 22:30:26.926 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-18 22:30:26.927 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-18 22:30:27.021 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-18 22:30:27.021 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-18 22:30:27.026 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-18 22:30:27.027 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-18 22:30:27.028 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-18 22:33:24.041 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 22:33:24.313 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 22:33:24.314 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 22:33:24.323 +00:00 [DBG] Start discovery request
2019-01-18 22:33:24.499 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 22:33:24.509 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 22:33:24.537 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 22:33:24.573 +00:00 [DBG] Start key discovery request
2019-01-18 22:33:25.775 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-18 22:33:25.786 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-18 22:33:25.786 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-18 22:33:25.814 +00:00 [DBG] Processing signout request for 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 22:33:25.827 +00:00 [DBG] Start end session request validation
2019-01-18 22:33:25.839 +00:00 [DBG] Start identity token validation
2019-01-18 22:33:25.871 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:33:25.872 +00:00 [DBG] Client found: MVC / MVC
2019-01-18 22:33:26.033 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-18 22:33:26.043 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1547783059,
    "exp": 1547783359,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636833798507876143.ZDcyNWE2NzMtYWI4ZS00Yzg3LTgzODQtMTRmMGE4ZjQzNjIwODA1NWZhYzQtNjM4Yi00ZDg0LWFkNWQtZGEyMmY3MzI1NGRl",
    "iat": 1547783059,
    "at_hash": "MpqwOTZFiHzZGZHKUz1OCA",
    "sid": "38f7d3b4153ab488dd94db451b6fc002",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547783054,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "amr": "pwd"
  }
}
2019-01-18 22:33:26.082 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8BYyynlyPjdPqW96XUn1T3qkkly1m0TNnNVYGvW_n18xHA7pmu5f5lWLwUAI5zwt0P8v0qLdneP5jk2B15_jZ9u9O9Y51nt-CCmv3fNoKNXEece4-diVusBMOj_B4m-BQ7lSR0x3gaZRVe6KRPWmnpu_-JjzDaFqaR4wDv-elSx1",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDc3ODMwNTksImV4cCI6MTU0Nzc4MzM1OSwiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4MzM3OTg1MDc4NzYxNDMuWkRjeU5XRTJOek10WVdJNFpTMDBZemczTFRnek9EUXRNVFJtTUdFNFpqUXpOakl3T0RBMU5XWmhZelF0TmpNNFlpMDBaRGcwTFdGa05XUXRaR0V5TW1ZM016STFOR1JsIiwiaWF0IjoxNTQ3NzgzMDU5LCJhdF9oYXNoIjoiTXBxd09UWkZpSHpaR1pIS1V6MU9DQSIsInNpZCI6IjM4ZjdkM2I0MTUzYWI0ODhkZDk0ZGI0NTFiNmZjMDAyIiwic3ViIjoiMTczZjk2NGYtMWViOS00M2NmLTkxYzctZGY3NTM3MTdjMTZjIiwiYXV0aF90aW1lIjoxNTQ3NzgzMDU0LCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImVtYWlsIjoiYWxpY2VAYXNwLm5ldCIsInBob25lIjoiMTIzNC01Njc4IiwiYWRkcmVzcyI6IlJ1YSBWZXJndWVpcm8sIDQ1NiIsImFkZHJlc3NfZGV0YWlscyI6IjggYW5kYXIgc2FsYSA4MDEiLCJuZWlnaGJvcmhvb2QiOiJWaWxhIE1hcmlhbmEiLCJjaXR5IjoiU8OjbyBQYXVsbyIsInN0YXRlIjoiU1AiLCJ6aXBfY29kZSI6IjY5MTE4IiwiYW1yIjpbInB3ZCJdfQ.efd8XHAidj_r3Q6_JWYE_zshg0pPdxHyPBW-dEdpLJFoLtlJV-ly44t9m65Jxzer9PpoMmpmf1YSsKyknIsp5aOfuR7WRTA102orPvAXTpGKUtZFtXXavh8YEqaGFYTe67syl5BW8_Jw-jjtb1AF4jb0hmoM06TA6YMkgzlI_vltY9k01Mcalv0Qw93_G5eSBuvFG5L3LKpORFnJuSQsCDOlVqRQWrw2o2_Gh5-DcHKNW8rYYl98cgbZFvv9DeFBkVLnMNYwkB1t9EA34Wzq1GM8yf3TQQd39CbacQpwvU-K6yUmpyHTGP5O7soRpgeGNblYaUV_HWLMBrQvq4w78A",
    "state": "CfDJ8BYyynlyPjdPqW96XUn1T3qkkly1m0TNnNVYGvW_n18xHA7pmu5f5lWLwUAI5zwt0P8v0qLdneP5jk2B15_jZ9u9O9Y51nt-CCmv3fNoKNXEece4-diVusBMOj_B4m-BQ7lSR0x3gaZRVe6KRPWmnpu_-JjzDaFqaR4wDv-elSx1",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 22:33:26.082 +00:00 [DBG] Success validating end session request from MVC
2019-01-18 22:33:26.684 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-18 22:33:26.688 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-18 22:33:26.697 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-18 22:33:26.728 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLJTIJQE8FGF:00000002",
  "TimeStamp": "2019-01-18T22:33:26Z",
  "ProcessId": 2036,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 22:33:51.044 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-18 22:33:51.050 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-18 22:33:51.050 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-18 22:33:51.064 +00:00 [DBG] Start authorize request
2019-01-18 22:33:51.074 +00:00 [DBG] No user present in authorize request
2019-01-18 22:33:51.084 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 22:33:51.098 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:33:51.122 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 22:33:51.126 +00:00 [DBG] No PKCE used.
2019-01-18 22:33:51.228 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 22:33:51.245 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BYyynlyPjdPqW96XUn1T3qez4Z2xMJ4NDBGOUURi9Sxk6XlpttpbmI0BrqCqzzW2OTWu6iO7LdcL9duZdIoEI5w9Qq_b76dgWjPUsywBfQzZrGom_Dc73-RlZ6hL-KuK0mCvcZvcBgZ5LURuSYTBF1SP-9cxcaD-t5PE2GvQBWh8OJ7_YcCmATzpm6n2YcPsaGxiQtefBROpmBzxJ49XDjTC__cQOVX-udu7ibSAy5jrEykCj3O9wFBx2PChqkBezmPU4QYlTVB-e8MPzg3B2jhAlZdKR_YRbP3ibwKZ-frf_sslJrB-g90lm78efQjAF_WPXo-ICvfIWMjZM_Xswc",
  "Nonce": "636834476310227298.YjJlMDRhN2EtOTJlNy00ZmY0LTg5ZDItMjIwMmVlYWI0MTg3MTI4OGNmZWQtM2YxYi00NGIyLWI0YzQtZTJiZDhhZDE0ZWVj",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636834476310227298.YjJlMDRhN2EtOTJlNy00ZmY0LTg5ZDItMjIwMmVlYWI0MTg3MTI4OGNmZWQtM2YxYi00NGIyLWI0YzQtZTJiZDhhZDE0ZWVj",
    "state": "CfDJ8BYyynlyPjdPqW96XUn1T3qez4Z2xMJ4NDBGOUURi9Sxk6XlpttpbmI0BrqCqzzW2OTWu6iO7LdcL9duZdIoEI5w9Qq_b76dgWjPUsywBfQzZrGom_Dc73-RlZ6hL-KuK0mCvcZvcBgZ5LURuSYTBF1SP-9cxcaD-t5PE2GvQBWh8OJ7_YcCmATzpm6n2YcPsaGxiQtefBROpmBzxJ49XDjTC__cQOVX-udu7ibSAy5jrEykCj3O9wFBx2PChqkBezmPU4QYlTVB-e8MPzg3B2jhAlZdKR_YRbP3ibwKZ-frf_sslJrB-g90lm78efQjAF_WPXo-ICvfIWMjZM_Xswc",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 22:33:51.274 +00:00 [INF] Showing login: User is not authenticated
2019-01-18 22:33:51.347 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 22:33:51.347 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:33:51.348 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 22:33:51.349 +00:00 [DBG] No PKCE used.
2019-01-18 22:33:51.357 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 22:33:51.365 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:33:55.814 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 22:33:56.036 +00:00 [DBG] Augmenting SignInContext
2019-01-18 22:33:56.042 +00:00 [DBG] Adding idp claim with value: local
2019-01-18 22:33:56.043 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-18 22:33:56.044 +00:00 [DBG] Adding auth_time claim with value: 1547850836
2019-01-18 22:33:56.058 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 22:33:56.071 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLJTIJQE8FGF:00000005",
  "TimeStamp": "2019-01-18T22:33:56Z",
  "ProcessId": 2036,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 22:33:56.086 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 22:33:56.087 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 22:33:56.088 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 22:33:56.099 +00:00 [DBG] Start authorize callback request
2019-01-18 22:33:56.107 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 22:33:56.107 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 22:33:56.108 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:33:56.108 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 22:33:56.108 +00:00 [DBG] No PKCE used.
2019-01-18 22:33:56.108 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 22:33:56.113 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BYyynlyPjdPqW96XUn1T3qez4Z2xMJ4NDBGOUURi9Sxk6XlpttpbmI0BrqCqzzW2OTWu6iO7LdcL9duZdIoEI5w9Qq_b76dgWjPUsywBfQzZrGom_Dc73-RlZ6hL-KuK0mCvcZvcBgZ5LURuSYTBF1SP-9cxcaD-t5PE2GvQBWh8OJ7_YcCmATzpm6n2YcPsaGxiQtefBROpmBzxJ49XDjTC__cQOVX-udu7ibSAy5jrEykCj3O9wFBx2PChqkBezmPU4QYlTVB-e8MPzg3B2jhAlZdKR_YRbP3ibwKZ-frf_sslJrB-g90lm78efQjAF_WPXo-ICvfIWMjZM_Xswc",
  "Nonce": "636834476310227298.YjJlMDRhN2EtOTJlNy00ZmY0LTg5ZDItMjIwMmVlYWI0MTg3MTI4OGNmZWQtM2YxYi00NGIyLWI0YzQtZTJiZDhhZDE0ZWVj",
  "SessionId": "6761815e68818108f37927e0dfac33c5",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636834476310227298.YjJlMDRhN2EtOTJlNy00ZmY0LTg5ZDItMjIwMmVlYWI0MTg3MTI4OGNmZWQtM2YxYi00NGIyLWI0YzQtZTJiZDhhZDE0ZWVj",
    "state": "CfDJ8BYyynlyPjdPqW96XUn1T3qez4Z2xMJ4NDBGOUURi9Sxk6XlpttpbmI0BrqCqzzW2OTWu6iO7LdcL9duZdIoEI5w9Qq_b76dgWjPUsywBfQzZrGom_Dc73-RlZ6hL-KuK0mCvcZvcBgZ5LURuSYTBF1SP-9cxcaD-t5PE2GvQBWh8OJ7_YcCmATzpm6n2YcPsaGxiQtefBROpmBzxJ49XDjTC__cQOVX-udu7ibSAy5jrEykCj3O9wFBx2PChqkBezmPU4QYlTVB-e8MPzg3B2jhAlZdKR_YRbP3ibwKZ-frf_sslJrB-g90lm78efQjAF_WPXo-ICvfIWMjZM_Xswc",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 22:33:56.164 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 22:33:56.164 +00:00 [INF] Showing consent: User has not yet consented
2019-01-18 22:33:56.197 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 22:33:56.198 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:33:56.198 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 22:33:56.198 +00:00 [DBG] No PKCE used.
2019-01-18 22:33:56.199 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 22:33:56.199 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:34:01.441 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-18 22:34:01.480 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 22:34:01.480 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:34:01.480 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 22:34:01.481 +00:00 [DBG] No PKCE used.
2019-01-18 22:34:01.484 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 22:34:01.528 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-18 22:34:01.529 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-18 22:34:01.529 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-18 22:34:01.529 +00:00 [DBG] Start authorize callback request
2019-01-18 22:34:01.535 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 22:34:01.536 +00:00 [DBG] Start authorize request protocol validation
2019-01-18 22:34:01.541 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:34:01.541 +00:00 [DBG] Checking for PKCE parameters
2019-01-18 22:34:01.542 +00:00 [DBG] No PKCE used.
2019-01-18 22:34:01.546 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-18 22:34:01.547 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BYyynlyPjdPqW96XUn1T3qez4Z2xMJ4NDBGOUURi9Sxk6XlpttpbmI0BrqCqzzW2OTWu6iO7LdcL9duZdIoEI5w9Qq_b76dgWjPUsywBfQzZrGom_Dc73-RlZ6hL-KuK0mCvcZvcBgZ5LURuSYTBF1SP-9cxcaD-t5PE2GvQBWh8OJ7_YcCmATzpm6n2YcPsaGxiQtefBROpmBzxJ49XDjTC__cQOVX-udu7ibSAy5jrEykCj3O9wFBx2PChqkBezmPU4QYlTVB-e8MPzg3B2jhAlZdKR_YRbP3ibwKZ-frf_sslJrB-g90lm78efQjAF_WPXo-ICvfIWMjZM_Xswc",
  "Nonce": "636834476310227298.YjJlMDRhN2EtOTJlNy00ZmY0LTg5ZDItMjIwMmVlYWI0MTg3MTI4OGNmZWQtM2YxYi00NGIyLWI0YzQtZTJiZDhhZDE0ZWVj",
  "SessionId": "6761815e68818108f37927e0dfac33c5",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636834476310227298.YjJlMDRhN2EtOTJlNy00ZmY0LTg5ZDItMjIwMmVlYWI0MTg3MTI4OGNmZWQtM2YxYi00NGIyLWI0YzQtZTJiZDhhZDE0ZWVj",
    "state": "CfDJ8BYyynlyPjdPqW96XUn1T3qez4Z2xMJ4NDBGOUURi9Sxk6XlpttpbmI0BrqCqzzW2OTWu6iO7LdcL9duZdIoEI5w9Qq_b76dgWjPUsywBfQzZrGom_Dc73-RlZ6hL-KuK0mCvcZvcBgZ5LURuSYTBF1SP-9cxcaD-t5PE2GvQBWh8OJ7_YcCmATzpm6n2YcPsaGxiQtefBROpmBzxJ49XDjTC__cQOVX-udu7ibSAy5jrEykCj3O9wFBx2PChqkBezmPU4QYlTVB-e8MPzg3B2jhAlZdKR_YRbP3ibwKZ-frf_sslJrB-g90lm78efQjAF_WPXo-ICvfIWMjZM_Xswc",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-18 22:34:01.561 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-18 22:34:01.600 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-18 22:34:01.621 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-18 22:34:01.628 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 22:34:01.655 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-18 22:34:01.699 +00:00 [DBG] Creating Implicit Flow response.
2019-01-18 22:34:01.724 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 22:34:01.859 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****cHpA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****e128"
    }
  ],
  "ActivityId": "0HLJTIJQE8FGF:00000009",
  "TimeStamp": "2019-01-18T22:34:01Z",
  "ProcessId": 2036,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 22:34:01.884 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8BYyynlyPjdPqW96XUn1T3qez4Z2xMJ4NDBGOUURi9Sxk6XlpttpbmI0BrqCqzzW2OTWu6iO7LdcL9duZdIoEI5w9Qq_b76dgWjPUsywBfQzZrGom_Dc73-RlZ6hL-KuK0mCvcZvcBgZ5LURuSYTBF1SP-9cxcaD-t5PE2GvQBWh8OJ7_YcCmATzpm6n2YcPsaGxiQtefBROpmBzxJ49XDjTC__cQOVX-udu7ibSAy5jrEykCj3O9wFBx2PChqkBezmPU4QYlTVB-e8MPzg3B2jhAlZdKR_YRbP3ibwKZ-frf_sslJrB-g90lm78efQjAF_WPXo-ICvfIWMjZM_Xswc",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-18 22:34:01.935 +00:00 [DBG] Augmenting SignInContext
2019-01-18 22:34:01.939 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-18 22:34:02.713 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 22:34:02.721 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 22:34:02.722 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 22:34:02.752 +00:00 [DBG] Start token request.
2019-01-18 22:34:02.762 +00:00 [DBG] Start client validation
2019-01-18 22:34:02.784 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 22:34:02.793 +00:00 [DBG] Start parsing for secret in post body
2019-01-18 22:34:02.800 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-18 22:34:02.801 +00:00 [DBG] Secret id found: MVC
2019-01-18 22:34:02.801 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:34:02.824 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 22:34:02.825 +00:00 [DBG] Client validation success
2019-01-18 22:34:02.834 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJTIJQE8FGE:00000003",
  "TimeStamp": "2019-01-18T22:34:02Z",
  "ProcessId": 2036,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 22:34:02.848 +00:00 [DBG] Start token request validation
2019-01-18 22:34:02.870 +00:00 [DBG] Start validation of authorization code token request
2019-01-18 22:34:02.898 +00:00 [DBG] Validation of authorization code token request success
2019-01-18 22:34:02.905 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "d7efb280e2066ebb0527804a0053857b1c91e20dd1a9b7536dbe9da86820e128",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "d7efb280e2066ebb0527804a0053857b1c91e20dd1a9b7536dbe9da86820e128",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-18 22:34:02.930 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:34:02.957 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 22:34:02.958 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-18 22:34:02.985 +00:00 [DBG] Creating refresh token
2019-01-18 22:34:02.986 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-18 22:34:03.006 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:34:03.007 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-18 22:34:03.026 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****CxDA"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****1734"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****zq0Q"
    }
  ],
  "ActivityId": "0HLJTIJQE8FGE:00000003",
  "TimeStamp": "2019-01-18T22:34:03Z",
  "ProcessId": 2036,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 22:34:03.039 +00:00 [DBG] Token request success.
2019-01-18 22:34:03.087 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-18 22:34:03.091 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-18 22:34:03.091 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-18 22:34:03.106 +00:00 [DBG] Start userinfo request
2019-01-18 22:34:03.113 +00:00 [DBG] Bearer token found in header
2019-01-18 22:34:03.152 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:34:03.153 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:34:03.154 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-18 22:34:03.155 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1547850842,
    "exp": 1547854442,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547850836,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-18 22:34:03.195 +00:00 [DBG] Creating userinfo response
2019-01-18 22:34:03.237 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 22:34:03.247 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 22:34:03.263 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-18 22:34:03.263 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-18 22:34:03.310 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-18 22:34:03.312 +00:00 [DBG] End userinfo request
2019-01-18 22:34:04.139 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 22:34:04.140 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 22:34:04.140 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 22:34:04.140 +00:00 [DBG] Start token request.
2019-01-18 22:34:04.140 +00:00 [DBG] Start client validation
2019-01-18 22:34:04.140 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 22:34:04.140 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 22:34:04.140 +00:00 [DBG] Secret id found: MVC
2019-01-18 22:34:04.141 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:34:04.141 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 22:34:04.141 +00:00 [DBG] Client validation success
2019-01-18 22:34:04.141 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJTIJQE8FGH:00000001",
  "TimeStamp": "2019-01-18T22:34:04Z",
  "ProcessId": 2036,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 22:34:04.155 +00:00 [DBG] Start token request validation
2019-01-18 22:34:04.176 +00:00 [DBG] Start client credentials token request validation
2019-01-18 22:34:04.204 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 22:34:04.205 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 22:34:04.224 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 22:34:04.228 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****4KAQ"
    }
  ],
  "ActivityId": "0HLJTIJQE8FGH:00000001",
  "TimeStamp": "2019-01-18T22:34:04Z",
  "ProcessId": 2036,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 22:34:04.229 +00:00 [DBG] Token request success.
2019-01-18 22:34:04.794 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-18 22:34:04.794 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-18 22:34:04.794 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-18 22:34:04.794 +00:00 [DBG] Start discovery request
2019-01-18 22:34:04.880 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-18 22:34:04.884 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-18 22:34:04.887 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-18 22:34:04.898 +00:00 [DBG] Start key discovery request
2019-01-18 22:35:07.702 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-18 22:35:07.702 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-18 22:35:07.702 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-18 22:35:07.702 +00:00 [DBG] Start token request.
2019-01-18 22:35:07.702 +00:00 [DBG] Start client validation
2019-01-18 22:35:07.702 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-18 22:35:07.703 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-18 22:35:07.703 +00:00 [DBG] Secret id found: MVC
2019-01-18 22:35:07.703 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-18 22:35:07.703 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-18 22:35:07.703 +00:00 [DBG] Client validation success
2019-01-18 22:35:07.703 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJTIJQE8FGJ:00000001",
  "TimeStamp": "2019-01-18T22:35:07Z",
  "ProcessId": 2036,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 22:35:07.712 +00:00 [DBG] Start token request validation
2019-01-18 22:35:07.713 +00:00 [DBG] Start client credentials token request validation
2019-01-18 22:35:07.713 +00:00 [DBG] MVC credentials token request validation success
2019-01-18 22:35:07.713 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-18 22:35:07.714 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-18 22:35:07.731 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****ujwA"
    }
  ],
  "ActivityId": "0HLJTIJQE8FGJ:00000001",
  "TimeStamp": "2019-01-18T22:35:07Z",
  "ProcessId": 2036,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-18 22:35:07.732 +00:00 [DBG] Token request success.
2019-01-18 22:35:08.666 +00:00 [INF] Message received:
2019-01-18 22:35:08.672 +00:00 [INF] ----------------------------------
2019-01-18 22:35:08.685 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"9a1c971c-a01b-435d-ba6b-6737ae10deca","CreationDate":"2019-01-18T22:35:08.5589859Z"}
2019-01-18 22:35:08.690 +00:00 [INF] ----------------------------------
2019-01-18 22:35:10.184 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 6d610503-6fd2-4e65-938b-d79889f4e369 to 1 handlers took 1531 ms
2019-01-20 12:21:03.378 +00:00 [WRN] No XML encryptor configured. Key "587d693d-97a1-4c6e-81f9-ed01f55be86b" may be persisted to storage in unencrypted form.
2019-01-20 12:21:04.657 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-20 12:21:06.372 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-20 12:21:06.442 +00:00 [INF] Setting number of workers to 1
2019-01-20 12:21:06.467 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-20 12:21:06.562 +00:00 [INF] Bus Rebus 1 started
2019-01-20 12:21:06.565 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-20 12:21:06.773 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-20 12:21:07.084 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-20 12:21:07.255 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-20 12:21:07.293 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-20 12:21:07.324 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-20 12:21:07.341 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-20 12:21:07.357 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-20 12:21:57.515 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-20 12:21:57.954 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-20 12:21:57.955 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-20 12:21:57.969 +00:00 [DBG] Start discovery request
2019-01-20 12:21:58.155 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-20 12:21:58.158 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-20 12:21:58.159 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-20 12:21:58.213 +00:00 [DBG] Start key discovery request
2019-01-20 12:21:58.460 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-20 12:21:58.461 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-20 12:21:58.473 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-20 12:21:58.486 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-20 12:21:58.487 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-20 12:21:58.497 +00:00 [DBG] Start authorize request
2019-01-20 12:21:58.516 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-20 12:21:58.526 +00:00 [DBG] No user present in authorize request
2019-01-20 12:21:58.538 +00:00 [DBG] Start authorize request protocol validation
2019-01-20 12:21:58.559 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:21:58.572 +00:00 [DBG] Checking for PKCE parameters
2019-01-20 12:21:58.575 +00:00 [DBG] No PKCE used.
2019-01-20 12:21:58.645 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-20 12:21:58.668 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8H6Ha53_3e9Hu08DZsDieUYb0VlvP8_EsoonQk_MGLhLzPO1wzIX9AKrYmZBWosGSHD2HWtXuyA_OgVPrPjT4WF15aklpAK8ATfLQJzbFTgpSE9d6edvJvqe67QrpfbVrGLKEHNmf9m7THxFNQGyGp8MMk4fzWsS6dZmMANdoKlg6oZilBUm8w0btHLRnp582orHeeG8RTO8ROjb3IQDLiUIkjzomFh69SWCfFkj5ZK1Y4yIhYaKyULh_nVWKGwvGcxOHHFqRyh-fjRWfiFc6fC14xixNmKACBalrvWcSBGKxEv4pEa92e-sZRjqzyxif6VGTV4CTU8w6yBR22vOvuE",
  "Nonce": "636835837183555238.ZTkzNjY5ZDAtYmY5OS00NGE4LTkxODItOTgxYzlhZTAzZGQyYjU0Y2JhNWUtOGJhOC00OTk4LTg4MzMtMTZmYzExODY0ZTBj",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636835837183555238.ZTkzNjY5ZDAtYmY5OS00NGE4LTkxODItOTgxYzlhZTAzZGQyYjU0Y2JhNWUtOGJhOC00OTk4LTg4MzMtMTZmYzExODY0ZTBj",
    "state": "CfDJ8H6Ha53_3e9Hu08DZsDieUYb0VlvP8_EsoonQk_MGLhLzPO1wzIX9AKrYmZBWosGSHD2HWtXuyA_OgVPrPjT4WF15aklpAK8ATfLQJzbFTgpSE9d6edvJvqe67QrpfbVrGLKEHNmf9m7THxFNQGyGp8MMk4fzWsS6dZmMANdoKlg6oZilBUm8w0btHLRnp582orHeeG8RTO8ROjb3IQDLiUIkjzomFh69SWCfFkj5ZK1Y4yIhYaKyULh_nVWKGwvGcxOHHFqRyh-fjRWfiFc6fC14xixNmKACBalrvWcSBGKxEv4pEa92e-sZRjqzyxif6VGTV4CTU8w6yBR22vOvuE",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-20 12:21:58.679 +00:00 [INF] Showing login: User is not authenticated
2019-01-20 12:21:58.704 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-20 12:21:58.704 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-20 12:21:59.103 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-20 12:21:59.104 +00:00 [DBG] Start authorize request protocol validation
2019-01-20 12:21:59.105 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:21:59.105 +00:00 [DBG] Checking for PKCE parameters
2019-01-20 12:21:59.106 +00:00 [DBG] No PKCE used.
2019-01-20 12:21:59.107 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-20 12:21:59.111 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:22:15.184 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-20 12:22:15.186 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-20 12:22:15.202 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-20 12:22:16.447 +00:00 [DBG] Augmenting SignInContext
2019-01-20 12:22:16.452 +00:00 [DBG] Adding idp claim with value: local
2019-01-20 12:22:16.452 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-20 12:22:16.453 +00:00 [DBG] Adding auth_time claim with value: 1547986936
2019-01-20 12:22:16.460 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-20 12:22:16.473 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-20 12:22:16.504 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLJUQ7FD4JRT:00000001",
  "TimeStamp": "2019-01-20T12:22:16Z",
  "ProcessId": 26,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:22:16.529 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-20 12:22:16.530 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-20 12:22:16.530 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-20 12:22:16.546 +00:00 [DBG] Start authorize callback request
2019-01-20 12:22:16.563 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-20 12:22:16.563 +00:00 [DBG] Start authorize request protocol validation
2019-01-20 12:22:16.563 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:22:16.564 +00:00 [DBG] Checking for PKCE parameters
2019-01-20 12:22:16.564 +00:00 [DBG] No PKCE used.
2019-01-20 12:22:16.574 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-20 12:22:16.574 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8H6Ha53_3e9Hu08DZsDieUYb0VlvP8_EsoonQk_MGLhLzPO1wzIX9AKrYmZBWosGSHD2HWtXuyA_OgVPrPjT4WF15aklpAK8ATfLQJzbFTgpSE9d6edvJvqe67QrpfbVrGLKEHNmf9m7THxFNQGyGp8MMk4fzWsS6dZmMANdoKlg6oZilBUm8w0btHLRnp582orHeeG8RTO8ROjb3IQDLiUIkjzomFh69SWCfFkj5ZK1Y4yIhYaKyULh_nVWKGwvGcxOHHFqRyh-fjRWfiFc6fC14xixNmKACBalrvWcSBGKxEv4pEa92e-sZRjqzyxif6VGTV4CTU8w6yBR22vOvuE",
  "Nonce": "636835837183555238.ZTkzNjY5ZDAtYmY5OS00NGE4LTkxODItOTgxYzlhZTAzZGQyYjU0Y2JhNWUtOGJhOC00OTk4LTg4MzMtMTZmYzExODY0ZTBj",
  "SessionId": "c4ff18d340470102eb0e65d0670f902b",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636835837183555238.ZTkzNjY5ZDAtYmY5OS00NGE4LTkxODItOTgxYzlhZTAzZGQyYjU0Y2JhNWUtOGJhOC00OTk4LTg4MzMtMTZmYzExODY0ZTBj",
    "state": "CfDJ8H6Ha53_3e9Hu08DZsDieUYb0VlvP8_EsoonQk_MGLhLzPO1wzIX9AKrYmZBWosGSHD2HWtXuyA_OgVPrPjT4WF15aklpAK8ATfLQJzbFTgpSE9d6edvJvqe67QrpfbVrGLKEHNmf9m7THxFNQGyGp8MMk4fzWsS6dZmMANdoKlg6oZilBUm8w0btHLRnp582orHeeG8RTO8ROjb3IQDLiUIkjzomFh69SWCfFkj5ZK1Y4yIhYaKyULh_nVWKGwvGcxOHHFqRyh-fjRWfiFc6fC14xixNmKACBalrvWcSBGKxEv4pEa92e-sZRjqzyxif6VGTV4CTU8w6yBR22vOvuE",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-20 12:22:16.615 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-20 12:22:16.616 +00:00 [INF] Showing consent: User has not yet consented
2019-01-20 12:22:16.690 +00:00 [DBG] Start authorize request protocol validation
2019-01-20 12:22:16.690 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:22:16.693 +00:00 [DBG] Checking for PKCE parameters
2019-01-20 12:22:16.693 +00:00 [DBG] No PKCE used.
2019-01-20 12:22:16.694 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-20 12:22:16.694 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:22:18.467 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-20 12:22:18.505 +00:00 [DBG] Start authorize request protocol validation
2019-01-20 12:22:18.505 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:22:18.506 +00:00 [DBG] Checking for PKCE parameters
2019-01-20 12:22:18.506 +00:00 [DBG] No PKCE used.
2019-01-20 12:22:18.507 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-20 12:22:18.533 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-20 12:22:18.534 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-20 12:22:18.534 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-20 12:22:18.535 +00:00 [DBG] Start authorize callback request
2019-01-20 12:22:18.548 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-20 12:22:18.548 +00:00 [DBG] Start authorize request protocol validation
2019-01-20 12:22:18.549 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:22:18.549 +00:00 [DBG] Checking for PKCE parameters
2019-01-20 12:22:18.550 +00:00 [DBG] No PKCE used.
2019-01-20 12:22:18.551 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-20 12:22:18.551 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8H6Ha53_3e9Hu08DZsDieUYb0VlvP8_EsoonQk_MGLhLzPO1wzIX9AKrYmZBWosGSHD2HWtXuyA_OgVPrPjT4WF15aklpAK8ATfLQJzbFTgpSE9d6edvJvqe67QrpfbVrGLKEHNmf9m7THxFNQGyGp8MMk4fzWsS6dZmMANdoKlg6oZilBUm8w0btHLRnp582orHeeG8RTO8ROjb3IQDLiUIkjzomFh69SWCfFkj5ZK1Y4yIhYaKyULh_nVWKGwvGcxOHHFqRyh-fjRWfiFc6fC14xixNmKACBalrvWcSBGKxEv4pEa92e-sZRjqzyxif6VGTV4CTU8w6yBR22vOvuE",
  "Nonce": "636835837183555238.ZTkzNjY5ZDAtYmY5OS00NGE4LTkxODItOTgxYzlhZTAzZGQyYjU0Y2JhNWUtOGJhOC00OTk4LTg4MzMtMTZmYzExODY0ZTBj",
  "SessionId": "c4ff18d340470102eb0e65d0670f902b",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636835837183555238.ZTkzNjY5ZDAtYmY5OS00NGE4LTkxODItOTgxYzlhZTAzZGQyYjU0Y2JhNWUtOGJhOC00OTk4LTg4MzMtMTZmYzExODY0ZTBj",
    "state": "CfDJ8H6Ha53_3e9Hu08DZsDieUYb0VlvP8_EsoonQk_MGLhLzPO1wzIX9AKrYmZBWosGSHD2HWtXuyA_OgVPrPjT4WF15aklpAK8ATfLQJzbFTgpSE9d6edvJvqe67QrpfbVrGLKEHNmf9m7THxFNQGyGp8MMk4fzWsS6dZmMANdoKlg6oZilBUm8w0btHLRnp582orHeeG8RTO8ROjb3IQDLiUIkjzomFh69SWCfFkj5ZK1Y4yIhYaKyULh_nVWKGwvGcxOHHFqRyh-fjRWfiFc6fC14xixNmKACBalrvWcSBGKxEv4pEa92e-sZRjqzyxif6VGTV4CTU8w6yBR22vOvuE",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-20 12:22:18.555 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-20 12:22:18.595 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-20 12:22:18.608 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-20 12:22:18.614 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-20 12:22:18.635 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-20 12:22:18.663 +00:00 [DBG] Creating Implicit Flow response.
2019-01-20 12:22:18.680 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-20 12:22:18.864 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****lCVg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****a5a2"
    }
  ],
  "ActivityId": "0HLJUQ7FD4JRT:00000005",
  "TimeStamp": "2019-01-20T12:22:18Z",
  "ProcessId": 26,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:22:18.875 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8H6Ha53_3e9Hu08DZsDieUYb0VlvP8_EsoonQk_MGLhLzPO1wzIX9AKrYmZBWosGSHD2HWtXuyA_OgVPrPjT4WF15aklpAK8ATfLQJzbFTgpSE9d6edvJvqe67QrpfbVrGLKEHNmf9m7THxFNQGyGp8MMk4fzWsS6dZmMANdoKlg6oZilBUm8w0btHLRnp582orHeeG8RTO8ROjb3IQDLiUIkjzomFh69SWCfFkj5ZK1Y4yIhYaKyULh_nVWKGwvGcxOHHFqRyh-fjRWfiFc6fC14xixNmKACBalrvWcSBGKxEv4pEa92e-sZRjqzyxif6VGTV4CTU8w6yBR22vOvuE",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-20 12:22:18.942 +00:00 [DBG] Augmenting SignInContext
2019-01-20 12:22:18.948 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-20 12:22:19.667 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-20 12:22:19.681 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-20 12:22:19.683 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-20 12:22:19.723 +00:00 [DBG] Start token request.
2019-01-20 12:22:19.748 +00:00 [DBG] Start client validation
2019-01-20 12:22:19.781 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-20 12:22:19.798 +00:00 [DBG] Start parsing for secret in post body
2019-01-20 12:22:19.811 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-20 12:22:19.812 +00:00 [DBG] Secret id found: MVC
2019-01-20 12:22:19.813 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:22:19.861 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-20 12:22:19.862 +00:00 [DBG] Client validation success
2019-01-20 12:22:19.881 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJUQ7FD4JRR:00000003",
  "TimeStamp": "2019-01-20T12:22:19Z",
  "ProcessId": 26,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:22:19.905 +00:00 [DBG] Start token request validation
2019-01-20 12:22:19.949 +00:00 [DBG] Start validation of authorization code token request
2019-01-20 12:22:20.056 +00:00 [DBG] Validation of authorization code token request success
2019-01-20 12:22:20.081 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "183b491d7618b3854256845aac6d34aed9a5a10fe59e9a2bb621bb8e5ea0a5a2",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "183b491d7618b3854256845aac6d34aed9a5a10fe59e9a2bb621bb8e5ea0a5a2",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-20 12:22:20.175 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:22:20.229 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-20 12:22:20.230 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-20 12:22:20.288 +00:00 [DBG] Creating refresh token
2019-01-20 12:22:20.288 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-20 12:22:20.330 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:22:20.340 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-20 12:22:20.376 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Zk0w"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****152f"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****VJVg"
    }
  ],
  "ActivityId": "0HLJUQ7FD4JRR:00000003",
  "TimeStamp": "2019-01-20T12:22:20Z",
  "ProcessId": 26,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:22:20.383 +00:00 [DBG] Token request success.
2019-01-20 12:22:20.497 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-20 12:22:20.502 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-20 12:22:20.507 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-20 12:22:20.548 +00:00 [DBG] Start userinfo request
2019-01-20 12:22:20.560 +00:00 [DBG] Bearer token found in header
2019-01-20 12:22:20.717 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:22:20.738 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:22:20.742 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-20 12:22:20.756 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1547986940,
    "exp": 1547990540,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1547986936,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-20 12:22:20.791 +00:00 [DBG] Creating userinfo response
2019-01-20 12:22:20.810 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-20 12:22:20.819 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-20 12:22:20.825 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-20 12:22:20.825 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-20 12:22:20.848 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-20 12:22:20.849 +00:00 [DBG] End userinfo request
2019-01-20 12:22:21.926 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-20 12:22:21.926 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-20 12:22:21.926 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-20 12:22:21.927 +00:00 [DBG] Start token request.
2019-01-20 12:22:21.927 +00:00 [DBG] Start client validation
2019-01-20 12:22:21.927 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-20 12:22:21.927 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-20 12:22:21.927 +00:00 [DBG] Secret id found: MVC
2019-01-20 12:22:21.928 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:22:21.928 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-20 12:22:21.928 +00:00 [DBG] Client validation success
2019-01-20 12:22:21.928 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJUQ7FD4JRV:00000001",
  "TimeStamp": "2019-01-20T12:22:21Z",
  "ProcessId": 26,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:22:21.938 +00:00 [DBG] Start token request validation
2019-01-20 12:22:21.996 +00:00 [DBG] Start client credentials token request validation
2019-01-20 12:22:22.020 +00:00 [DBG] MVC credentials token request validation success
2019-01-20 12:22:22.021 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-20 12:22:22.031 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-20 12:22:22.043 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****vGAw"
    }
  ],
  "ActivityId": "0HLJUQ7FD4JRV:00000001",
  "TimeStamp": "2019-01-20T12:22:22Z",
  "ProcessId": 26,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:22:22.043 +00:00 [DBG] Token request success.
2019-01-20 12:22:22.582 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-20 12:22:22.583 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-20 12:22:22.583 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-20 12:22:22.584 +00:00 [DBG] Start discovery request
2019-01-20 12:22:22.676 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-20 12:22:22.677 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-20 12:22:22.677 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-20 12:22:22.677 +00:00 [DBG] Start key discovery request
2019-01-20 12:22:55.327 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-20 12:22:55.327 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-20 12:22:55.327 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-20 12:22:55.327 +00:00 [DBG] Start token request.
2019-01-20 12:22:55.327 +00:00 [DBG] Start client validation
2019-01-20 12:22:55.351 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-20 12:22:55.351 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-20 12:22:55.352 +00:00 [DBG] Secret id found: MVC
2019-01-20 12:22:55.352 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:22:55.352 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-20 12:22:55.352 +00:00 [DBG] Client validation success
2019-01-20 12:22:55.352 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJUQ7FD4JS1:00000001",
  "TimeStamp": "2019-01-20T12:22:55Z",
  "ProcessId": 26,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:22:55.389 +00:00 [DBG] Start token request validation
2019-01-20 12:22:55.392 +00:00 [DBG] Start client credentials token request validation
2019-01-20 12:22:55.392 +00:00 [DBG] MVC credentials token request validation success
2019-01-20 12:22:55.392 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-20 12:22:55.392 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-20 12:22:55.394 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****bXNA"
    }
  ],
  "ActivityId": "0HLJUQ7FD4JS1:00000001",
  "TimeStamp": "2019-01-20T12:22:55Z",
  "ProcessId": 26,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:22:55.394 +00:00 [DBG] Token request success.
2019-01-20 12:22:56.069 +00:00 [INF] Message received:
2019-01-20 12:22:56.069 +00:00 [INF] ----------------------------------
2019-01-20 12:22:56.079 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"f5649e66-c6fd-436a-ad00-433d15dafb74","CreationDate":"2019-01-20T12:22:55.9702474Z"}
2019-01-20 12:22:56.080 +00:00 [INF] ----------------------------------
2019-01-20 12:22:57.389 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 2ac18612-73a9-480a-b408-c91b7d3e07c3 to 1 handlers took 1329 ms
2019-01-20 12:24:50.406 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-20 12:24:51.839 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-20 12:24:51.979 +00:00 [INF] Setting number of workers to 1
2019-01-20 12:24:52.027 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-20 12:24:52.110 +00:00 [INF] Bus Rebus 1 started
2019-01-20 12:24:52.135 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-20 12:24:52.348 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-20 12:24:52.450 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-20 12:24:52.575 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-20 12:24:52.605 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-20 12:24:52.636 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-20 12:24:52.654 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-20 12:24:52.668 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-20 12:26:00.613 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-20 12:26:00.924 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-20 12:26:00.926 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-20 12:26:00.942 +00:00 [DBG] Start token request.
2019-01-20 12:26:00.952 +00:00 [DBG] Start client validation
2019-01-20 12:26:00.963 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-20 12:26:00.964 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-20 12:26:00.965 +00:00 [DBG] Secret id found: MVC
2019-01-20 12:26:00.981 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:26:00.996 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-20 12:26:00.996 +00:00 [DBG] Client validation success
2019-01-20 12:26:01.031 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJUQ9NS2QOP:00000001",
  "TimeStamp": "2019-01-20T12:26:01Z",
  "ProcessId": 157,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:26:01.104 +00:00 [DBG] Start token request validation
2019-01-20 12:26:01.119 +00:00 [DBG] Start client credentials token request validation
2019-01-20 12:26:01.174 +00:00 [DBG] MVC credentials token request validation success
2019-01-20 12:26:01.187 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-20 12:26:01.221 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-20 12:26:01.307 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****XubQ"
    }
  ],
  "ActivityId": "0HLJUQ9NS2QOP:00000001",
  "TimeStamp": "2019-01-20T12:26:01Z",
  "ProcessId": 157,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:26:01.310 +00:00 [DBG] Token request success.
2019-01-20 12:26:02.007 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-20 12:26:02.011 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-20 12:26:02.017 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-20 12:26:02.028 +00:00 [DBG] Start discovery request
2019-01-20 12:26:02.324 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-20 12:26:02.326 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-20 12:26:02.326 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-20 12:26:02.342 +00:00 [DBG] Start key discovery request
2019-01-20 12:26:11.914 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-20 12:26:11.914 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-20 12:26:11.914 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-20 12:26:11.914 +00:00 [DBG] Start token request.
2019-01-20 12:26:11.915 +00:00 [DBG] Start client validation
2019-01-20 12:26:11.915 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-20 12:26:11.915 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-20 12:26:11.915 +00:00 [DBG] Secret id found: MVC
2019-01-20 12:26:11.915 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:26:11.915 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-20 12:26:11.915 +00:00 [DBG] Client validation success
2019-01-20 12:26:11.919 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJUQ9NS2QOR:00000001",
  "TimeStamp": "2019-01-20T12:26:11Z",
  "ProcessId": 157,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:26:11.938 +00:00 [DBG] Start token request validation
2019-01-20 12:26:11.938 +00:00 [DBG] Start client credentials token request validation
2019-01-20 12:26:11.938 +00:00 [DBG] MVC credentials token request validation success
2019-01-20 12:26:11.939 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-20 12:26:11.939 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-20 12:26:11.946 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****OKTQ"
    }
  ],
  "ActivityId": "0HLJUQ9NS2QOR:00000001",
  "TimeStamp": "2019-01-20T12:26:11Z",
  "ProcessId": 157,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:26:11.947 +00:00 [DBG] Token request success.
2019-01-20 12:26:12.636 +00:00 [INF] Message received:
2019-01-20 12:26:12.636 +00:00 [INF] ----------------------------------
2019-01-20 12:26:12.643 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"69d51859-cc36-4035-823e-1501a4cca38f","CreationDate":"2019-01-20T12:26:12.5442336Z"}
2019-01-20 12:26:12.652 +00:00 [INF] ----------------------------------
2019-01-20 12:26:15.376 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens b4523285-0188-4ad2-992e-3c14679cf7a0 to 1 handlers took 2752 ms
2019-01-20 12:43:27.174 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-20 12:43:28.857 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-20 12:43:28.988 +00:00 [INF] Setting number of workers to 1
2019-01-20 12:43:29.039 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-20 12:43:29.121 +00:00 [INF] Bus Rebus 1 started
2019-01-20 12:43:29.164 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-20 12:43:29.427 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-20 12:43:29.461 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-20 12:43:29.540 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-20 12:43:29.556 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-20 12:43:29.559 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-20 12:43:29.567 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-20 12:43:29.575 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-20 12:50:30.561 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-20 12:50:30.865 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-20 12:50:30.867 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-20 12:50:30.885 +00:00 [DBG] Start token request.
2019-01-20 12:50:30.897 +00:00 [DBG] Start client validation
2019-01-20 12:50:30.908 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-20 12:50:30.910 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-20 12:50:30.911 +00:00 [DBG] Secret id found: MVC
2019-01-20 12:50:30.923 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:50:30.936 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-20 12:50:30.936 +00:00 [DBG] Client validation success
2019-01-20 12:50:30.966 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJUQNDUQO2V:00000001",
  "TimeStamp": "2019-01-20T12:50:30Z",
  "ProcessId": 691,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:50:31.045 +00:00 [DBG] Start token request validation
2019-01-20 12:50:31.057 +00:00 [DBG] Start client credentials token request validation
2019-01-20 12:50:31.101 +00:00 [DBG] MVC credentials token request validation success
2019-01-20 12:50:31.115 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-20 12:50:31.151 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-20 12:50:31.228 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****eddw"
    }
  ],
  "ActivityId": "0HLJUQNDUQO2V:00000001",
  "TimeStamp": "2019-01-20T12:50:31Z",
  "ProcessId": 691,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:50:31.231 +00:00 [DBG] Token request success.
2019-01-20 12:50:31.792 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-20 12:50:31.795 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-20 12:50:31.799 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-20 12:50:31.839 +00:00 [DBG] Start discovery request
2019-01-20 12:50:31.997 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-20 12:50:31.998 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-20 12:50:31.999 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-20 12:50:32.006 +00:00 [DBG] Start key discovery request
2019-01-20 12:50:43.439 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-20 12:50:43.440 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-20 12:50:43.440 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-20 12:50:43.440 +00:00 [DBG] Start token request.
2019-01-20 12:50:43.440 +00:00 [DBG] Start client validation
2019-01-20 12:50:43.440 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-20 12:50:43.440 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-20 12:50:43.440 +00:00 [DBG] Secret id found: MVC
2019-01-20 12:50:43.440 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:50:43.449 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-20 12:50:43.450 +00:00 [DBG] Client validation success
2019-01-20 12:50:43.450 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJUQNDUQO31:00000001",
  "TimeStamp": "2019-01-20T12:50:43Z",
  "ProcessId": 691,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:50:43.463 +00:00 [DBG] Start token request validation
2019-01-20 12:50:43.463 +00:00 [DBG] Start client credentials token request validation
2019-01-20 12:50:43.463 +00:00 [DBG] MVC credentials token request validation success
2019-01-20 12:50:43.464 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-20 12:50:43.464 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-20 12:50:43.470 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****X8Vw"
    }
  ],
  "ActivityId": "0HLJUQNDUQO31:00000001",
  "TimeStamp": "2019-01-20T12:50:43Z",
  "ProcessId": 691,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:50:43.474 +00:00 [DBG] Token request success.
2019-01-20 12:50:44.102 +00:00 [INF] Message received:
2019-01-20 12:50:44.102 +00:00 [INF] ----------------------------------
2019-01-20 12:50:44.111 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"c9f10307-39c8-42f0-9a6b-9debe76c4abd","CreationDate":"2019-01-20T12:50:44.0276454Z"}
2019-01-20 12:50:44.112 +00:00 [INF] ----------------------------------
2019-01-20 12:50:47.045 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 41dba986-6266-4a1e-a288-bad8512a1f5d to 1 handlers took 2947 ms
2019-01-20 12:54:53.716 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-20 12:54:57.317 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-20 12:54:57.566 +00:00 [INF] Setting number of workers to 1
2019-01-20 12:54:57.671 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-20 12:54:57.746 +00:00 [INF] Bus Rebus 1 started
2019-01-20 12:54:57.748 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-20 12:54:58.122 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-20 12:54:58.286 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-20 12:54:58.391 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-20 12:54:58.398 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-20 12:54:58.410 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-20 12:54:58.414 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-20 12:54:58.417 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-20 12:57:10.702 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-20 12:57:11.053 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-20 12:57:11.130 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-20 12:57:11.181 +00:00 [DBG] Start token request.
2019-01-20 12:57:11.216 +00:00 [DBG] Start client validation
2019-01-20 12:57:11.239 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-20 12:57:11.241 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-20 12:57:11.243 +00:00 [DBG] Secret id found: MVC
2019-01-20 12:57:11.271 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:57:11.299 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-20 12:57:11.299 +00:00 [DBG] Client validation success
2019-01-20 12:57:11.366 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJUQR55OVRI:00000001",
  "TimeStamp": "2019-01-20T12:57:11Z",
  "ProcessId": 992,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:57:11.479 +00:00 [DBG] Start token request validation
2019-01-20 12:57:11.492 +00:00 [DBG] Start client credentials token request validation
2019-01-20 12:57:11.544 +00:00 [DBG] MVC credentials token request validation success
2019-01-20 12:57:11.572 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-20 12:57:11.645 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-20 12:57:11.727 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****p-wA"
    }
  ],
  "ActivityId": "0HLJUQR55OVRI:00000001",
  "TimeStamp": "2019-01-20T12:57:11Z",
  "ProcessId": 992,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:57:11.730 +00:00 [DBG] Token request success.
2019-01-20 12:57:12.378 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-20 12:57:12.432 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-20 12:57:12.432 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-20 12:57:12.477 +00:00 [DBG] Start discovery request
2019-01-20 12:57:12.769 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-20 12:57:12.771 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-20 12:57:12.771 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-20 12:57:12.786 +00:00 [DBG] Start key discovery request
2019-01-20 12:57:27.338 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-20 12:57:27.341 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-20 12:57:27.341 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-20 12:57:27.342 +00:00 [DBG] Start token request.
2019-01-20 12:57:27.342 +00:00 [DBG] Start client validation
2019-01-20 12:57:27.342 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-20 12:57:27.342 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-20 12:57:27.342 +00:00 [DBG] Secret id found: MVC
2019-01-20 12:57:27.342 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 12:57:27.342 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-20 12:57:27.342 +00:00 [DBG] Client validation success
2019-01-20 12:57:27.394 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJUQR55OVRK:00000001",
  "TimeStamp": "2019-01-20T12:57:27Z",
  "ProcessId": 992,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:57:27.425 +00:00 [DBG] Start token request validation
2019-01-20 12:57:27.427 +00:00 [DBG] Start client credentials token request validation
2019-01-20 12:57:27.428 +00:00 [DBG] MVC credentials token request validation success
2019-01-20 12:57:27.429 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-20 12:57:27.429 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-20 12:57:27.454 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****K6tQ"
    }
  ],
  "ActivityId": "0HLJUQR55OVRK:00000001",
  "TimeStamp": "2019-01-20T12:57:27Z",
  "ProcessId": 992,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 12:57:27.455 +00:00 [DBG] Token request success.
2019-01-20 12:57:28.459 +00:00 [INF] Message received:
2019-01-20 12:57:28.460 +00:00 [INF] ----------------------------------
2019-01-20 12:57:28.473 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"d58ba601-24f6-492e-92f8-f7a70f6e150a","CreationDate":"2019-01-20T12:57:28.3383998Z"}
2019-01-20 12:57:28.473 +00:00 [INF] ----------------------------------
2019-01-20 12:57:31.939 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens a489de88-aee3-440c-9ff9-2af7b40f90c7 to 1 handlers took 3485 ms
2019-01-20 13:10:34.419 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-20 13:10:39.326 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-20 13:10:39.639 +00:00 [INF] Setting number of workers to 1
2019-01-20 13:10:39.721 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-20 13:10:39.802 +00:00 [INF] Bus Rebus 1 started
2019-01-20 13:10:39.856 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-20 13:10:40.163 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-20 13:10:40.341 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-20 13:10:40.414 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-20 13:10:40.418 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-20 13:10:40.455 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-20 13:10:40.468 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-20 13:10:40.473 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-20 13:12:10.377 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-20 13:12:10.837 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-20 13:12:10.838 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-20 13:12:10.859 +00:00 [DBG] Start token request.
2019-01-20 13:12:10.876 +00:00 [DBG] Start client validation
2019-01-20 13:12:10.892 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-20 13:12:10.894 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-20 13:12:10.896 +00:00 [DBG] Secret id found: MVC
2019-01-20 13:12:10.918 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 13:12:10.937 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-20 13:12:10.937 +00:00 [DBG] Client validation success
2019-01-20 13:12:10.976 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJUR3H99UV9:00000001",
  "TimeStamp": "2019-01-20T13:12:10Z",
  "ProcessId": 1356,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 13:12:11.087 +00:00 [DBG] Start token request validation
2019-01-20 13:12:11.104 +00:00 [DBG] Start client credentials token request validation
2019-01-20 13:12:11.173 +00:00 [DBG] MVC credentials token request validation success
2019-01-20 13:12:11.190 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-20 13:12:11.237 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-20 13:12:11.393 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****KGAQ"
    }
  ],
  "ActivityId": "0HLJUR3H99UV9:00000001",
  "TimeStamp": "2019-01-20T13:12:11Z",
  "ProcessId": 1356,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 13:12:11.397 +00:00 [DBG] Token request success.
2019-01-20 13:12:12.124 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-20 13:12:12.129 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-20 13:12:12.129 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-20 13:12:12.184 +00:00 [DBG] Start discovery request
2019-01-20 13:12:12.401 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-20 13:12:12.404 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-20 13:12:12.404 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-20 13:12:12.418 +00:00 [DBG] Start key discovery request
2019-01-20 13:12:36.221 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-20 13:12:36.222 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-20 13:12:36.223 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-20 13:12:36.223 +00:00 [DBG] Start token request.
2019-01-20 13:12:36.223 +00:00 [DBG] Start client validation
2019-01-20 13:12:36.223 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-20 13:12:36.223 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-20 13:12:36.223 +00:00 [DBG] Secret id found: MVC
2019-01-20 13:12:36.223 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 13:12:36.224 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-20 13:12:36.224 +00:00 [DBG] Client validation success
2019-01-20 13:12:36.224 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJUR3H99UVB:00000001",
  "TimeStamp": "2019-01-20T13:12:36Z",
  "ProcessId": 1356,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 13:12:36.242 +00:00 [DBG] Start token request validation
2019-01-20 13:12:36.242 +00:00 [DBG] Start client credentials token request validation
2019-01-20 13:12:36.243 +00:00 [DBG] MVC credentials token request validation success
2019-01-20 13:12:36.244 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-20 13:12:36.244 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-20 13:12:36.248 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****xhNw"
    }
  ],
  "ActivityId": "0HLJUR3H99UVB:00000001",
  "TimeStamp": "2019-01-20T13:12:36Z",
  "ProcessId": 1356,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 13:12:36.249 +00:00 [DBG] Token request success.
2019-01-20 13:12:36.949 +00:00 [INF] Message received:
2019-01-20 13:12:36.951 +00:00 [INF] ----------------------------------
2019-01-20 13:12:36.966 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"92fef2f2-cf42-49ed-98c7-338ecf237cf6","CreationDate":"2019-01-20T13:12:36.8018611Z"}
2019-01-20 13:12:36.968 +00:00 [INF] ----------------------------------
2019-01-20 13:12:39.575 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens df122470-13fe-4cde-a35d-26206704d566 to 1 handlers took 2635 ms
2019-01-20 13:34:44.570 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-20 13:34:46.189 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-20 13:34:46.335 +00:00 [INF] Setting number of workers to 1
2019-01-20 13:34:46.407 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-20 13:34:46.456 +00:00 [INF] Bus Rebus 1 started
2019-01-20 13:34:46.476 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-20 13:34:46.686 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-20 13:34:46.758 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-20 13:34:46.807 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-20 13:34:46.809 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-20 13:34:46.820 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-20 13:34:46.822 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-20 13:34:46.828 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-20 13:36:11.593 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-20 13:36:11.928 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-20 13:36:11.930 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-20 13:36:11.945 +00:00 [DBG] Start token request.
2019-01-20 13:36:11.957 +00:00 [DBG] Start client validation
2019-01-20 13:36:11.970 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-20 13:36:11.974 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-20 13:36:11.975 +00:00 [DBG] Secret id found: MVC
2019-01-20 13:36:12.001 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 13:36:12.037 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-20 13:36:12.037 +00:00 [DBG] Client validation success
2019-01-20 13:36:12.127 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJURGUQLSRI:00000001",
  "TimeStamp": "2019-01-20T13:36:12Z",
  "ProcessId": 1555,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 13:36:12.264 +00:00 [DBG] Start token request validation
2019-01-20 13:36:12.277 +00:00 [DBG] Start client credentials token request validation
2019-01-20 13:36:12.342 +00:00 [DBG] MVC credentials token request validation success
2019-01-20 13:36:12.362 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-20 13:36:12.410 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-20 13:36:12.515 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****2c-A"
    }
  ],
  "ActivityId": "0HLJURGUQLSRI:00000001",
  "TimeStamp": "2019-01-20T13:36:12Z",
  "ProcessId": 1555,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 13:36:12.527 +00:00 [DBG] Token request success.
2019-01-20 13:36:13.162 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-20 13:36:13.171 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-20 13:36:13.173 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-20 13:36:13.182 +00:00 [DBG] Start discovery request
2019-01-20 13:36:13.438 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-20 13:36:13.439 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-20 13:36:13.440 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-20 13:36:13.454 +00:00 [DBG] Start key discovery request
2019-01-20 13:36:36.195 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-20 13:36:36.197 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-20 13:36:36.197 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-20 13:36:36.198 +00:00 [DBG] Start token request.
2019-01-20 13:36:36.199 +00:00 [DBG] Start client validation
2019-01-20 13:36:36.205 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-20 13:36:36.209 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-20 13:36:36.210 +00:00 [DBG] Secret id found: MVC
2019-01-20 13:36:36.213 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-20 13:36:36.222 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-20 13:36:36.225 +00:00 [DBG] Client validation success
2019-01-20 13:36:36.226 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJURGUQLSRK:00000001",
  "TimeStamp": "2019-01-20T13:36:36Z",
  "ProcessId": 1555,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 13:36:36.267 +00:00 [DBG] Start token request validation
2019-01-20 13:36:36.269 +00:00 [DBG] Start client credentials token request validation
2019-01-20 13:36:36.270 +00:00 [DBG] MVC credentials token request validation success
2019-01-20 13:36:36.272 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-20 13:36:36.282 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-20 13:36:36.291 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****ADEQ"
    }
  ],
  "ActivityId": "0HLJURGUQLSRK:00000001",
  "TimeStamp": "2019-01-20T13:36:36Z",
  "ProcessId": 1555,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-20 13:36:36.295 +00:00 [DBG] Token request success.
2019-01-20 13:36:37.025 +00:00 [INF] Message received:
2019-01-20 13:36:37.028 +00:00 [INF] ----------------------------------
2019-01-20 13:36:37.042 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"9c9c98ad-f567-48da-a375-2d4ec4ec836e","CreationDate":"2019-01-20T13:36:36.8905753Z"}
2019-01-20 13:36:37.044 +00:00 [INF] ----------------------------------
2019-01-20 13:36:40.044 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens cf2e3b9f-501e-4608-969f-2b45460c6d3a to 1 handlers took 3034 ms
2019-01-21 01:29:02.285 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-21 01:29:04.096 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-21 01:29:04.356 +00:00 [INF] Setting number of workers to 1
2019-01-21 01:29:04.479 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-21 01:29:04.514 +00:00 [INF] Bus Rebus 1 started
2019-01-21 01:29:04.630 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-21 01:29:05.071 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-21 01:29:05.190 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-21 01:29:05.297 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-21 01:29:05.320 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-21 01:29:05.332 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-21 01:29:05.343 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-21 01:29:05.360 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-21 01:30:20.112 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-21 01:30:20.743 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-21 01:30:20.745 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-21 01:30:20.770 +00:00 [DBG] Start token request.
2019-01-21 01:30:20.788 +00:00 [DBG] Start client validation
2019-01-21 01:30:20.805 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-21 01:30:20.809 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-21 01:30:20.809 +00:00 [DBG] Secret id found: MVC
2019-01-21 01:30:20.841 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-21 01:30:20.872 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-21 01:30:20.873 +00:00 [DBG] Client validation success
2019-01-21 01:30:20.994 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJV800GFTKL:00000001",
  "TimeStamp": "2019-01-21T01:30:20Z",
  "ProcessId": 1667,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-21 01:30:21.179 +00:00 [DBG] Start token request validation
2019-01-21 01:30:21.212 +00:00 [DBG] Start client credentials token request validation
2019-01-21 01:30:21.343 +00:00 [DBG] MVC credentials token request validation success
2019-01-21 01:30:21.391 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-21 01:30:21.530 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-21 01:30:22.109 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Yqww"
    }
  ],
  "ActivityId": "0HLJV800GFTKL:00000001",
  "TimeStamp": "2019-01-21T01:30:22Z",
  "ProcessId": 1667,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-21 01:30:22.123 +00:00 [DBG] Token request success.
2019-01-21 01:30:23.497 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-21 01:30:23.579 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-21 01:30:23.579 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-21 01:30:23.731 +00:00 [DBG] Start discovery request
2019-01-21 01:30:24.127 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-21 01:30:24.131 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-21 01:30:24.132 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-21 01:30:24.160 +00:00 [DBG] Start key discovery request
2019-01-21 01:30:43.967 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-21 01:30:44.005 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-21 01:30:44.005 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-21 01:30:44.006 +00:00 [DBG] Start token request.
2019-01-21 01:30:44.006 +00:00 [DBG] Start client validation
2019-01-21 01:30:44.006 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-21 01:30:44.006 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-21 01:30:44.006 +00:00 [DBG] Secret id found: MVC
2019-01-21 01:30:44.006 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-21 01:30:44.006 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-21 01:30:44.006 +00:00 [DBG] Client validation success
2019-01-21 01:30:44.022 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJV800GFTKN:00000001",
  "TimeStamp": "2019-01-21T01:30:44Z",
  "ProcessId": 1667,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-21 01:30:44.065 +00:00 [DBG] Start token request validation
2019-01-21 01:30:44.065 +00:00 [DBG] Start client credentials token request validation
2019-01-21 01:30:44.066 +00:00 [DBG] MVC credentials token request validation success
2019-01-21 01:30:44.066 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-21 01:30:44.067 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-21 01:30:44.081 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****KXXg"
    }
  ],
  "ActivityId": "0HLJV800GFTKN:00000001",
  "TimeStamp": "2019-01-21T01:30:44Z",
  "ProcessId": 1667,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-21 01:30:44.081 +00:00 [DBG] Token request success.
2019-01-21 01:30:45.333 +00:00 [INF] Message received:
2019-01-21 01:30:45.334 +00:00 [INF] ----------------------------------
2019-01-21 01:30:45.362 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"416450d3-c925-4d17-aa82-0fba3e61c382","CreationDate":"2019-01-21T01:30:45.0336655Z"}
2019-01-21 01:30:45.366 +00:00 [INF] ----------------------------------
2019-01-21 01:30:50.254 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 79eb19c3-37da-4793-95e6-67c830a9566a to 1 handlers took 4936 ms
2019-01-21 03:28:16.121 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-21 03:28:18.634 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-21 03:28:18.764 +00:00 [INF] Setting number of workers to 1
2019-01-21 03:28:18.815 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-21 03:28:18.850 +00:00 [INF] Bus Rebus 1 started
2019-01-21 03:28:18.925 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-21 03:28:19.260 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-21 03:28:19.307 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-21 03:28:19.406 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-21 03:28:19.409 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-21 03:28:19.410 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-21 03:28:19.411 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-21 03:28:19.430 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-21 03:36:18.834 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-21 03:36:19.195 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-21 03:36:19.199 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-21 03:36:19.222 +00:00 [DBG] Start token request.
2019-01-21 03:36:19.237 +00:00 [DBG] Start client validation
2019-01-21 03:36:19.251 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-21 03:36:19.261 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-21 03:36:19.261 +00:00 [DBG] Secret id found: MVC
2019-01-21 03:36:19.284 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-21 03:36:19.301 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-21 03:36:19.302 +00:00 [DBG] Client validation success
2019-01-21 03:36:19.332 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJVA6DAGFKC:00000001",
  "TimeStamp": "2019-01-21T03:36:19Z",
  "ProcessId": 4824,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-21 03:36:19.450 +00:00 [DBG] Start token request validation
2019-01-21 03:36:19.470 +00:00 [DBG] Start client credentials token request validation
2019-01-21 03:36:19.531 +00:00 [DBG] MVC credentials token request validation success
2019-01-21 03:36:19.548 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-21 03:36:19.590 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-21 03:36:19.686 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****VJ8Q"
    }
  ],
  "ActivityId": "0HLJVA6DAGFKC:00000001",
  "TimeStamp": "2019-01-21T03:36:19Z",
  "ProcessId": 4824,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-21 03:36:19.690 +00:00 [DBG] Token request success.
2019-01-21 03:36:20.390 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-21 03:36:20.411 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-21 03:36:20.444 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-21 03:36:20.485 +00:00 [DBG] Start discovery request
2019-01-21 03:36:20.782 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-21 03:36:20.784 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-21 03:36:20.785 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-21 03:36:20.799 +00:00 [DBG] Start key discovery request
2019-01-21 03:36:29.014 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-21 03:36:29.015 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-21 03:36:29.015 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-21 03:36:29.016 +00:00 [DBG] Start token request.
2019-01-21 03:36:29.016 +00:00 [DBG] Start client validation
2019-01-21 03:36:29.016 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-21 03:36:29.016 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-21 03:36:29.016 +00:00 [DBG] Secret id found: MVC
2019-01-21 03:36:29.016 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-21 03:36:29.017 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-21 03:36:29.017 +00:00 [DBG] Client validation success
2019-01-21 03:36:29.017 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJVA6DAGFKE:00000001",
  "TimeStamp": "2019-01-21T03:36:29Z",
  "ProcessId": 4824,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-21 03:36:29.030 +00:00 [DBG] Start token request validation
2019-01-21 03:36:29.031 +00:00 [DBG] Start client credentials token request validation
2019-01-21 03:36:29.032 +00:00 [DBG] MVC credentials token request validation success
2019-01-21 03:36:29.032 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-21 03:36:29.033 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-21 03:36:29.038 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****f_jw"
    }
  ],
  "ActivityId": "0HLJVA6DAGFKE:00000001",
  "TimeStamp": "2019-01-21T03:36:29Z",
  "ProcessId": 4824,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-21 03:36:29.044 +00:00 [DBG] Token request success.
2019-01-21 03:36:30.251 +00:00 [INF] Message received:
2019-01-21 03:36:30.252 +00:00 [INF] ----------------------------------
2019-01-21 03:36:30.267 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"69ed5376-3900-4a11-9ae1-cb9bbeb37550","CreationDate":"2019-01-21T03:36:30.0442795Z"}
2019-01-21 03:36:30.268 +00:00 [INF] ----------------------------------
2019-01-21 03:36:33.539 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens c4b0aa3f-d4c6-4433-91fb-e42304835532 to 1 handlers took 3303 ms
2019-01-21 03:40:48.285 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-21 03:40:50.288 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-21 03:40:50.493 +00:00 [INF] Setting number of workers to 1
2019-01-21 03:40:50.539 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-21 03:40:50.561 +00:00 [INF] Bus Rebus 1 started
2019-01-21 03:40:50.643 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-21 03:40:50.987 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-21 03:40:51.043 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-21 03:40:51.166 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-21 03:40:51.185 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-21 03:40:51.200 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-21 03:40:51.216 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-21 03:40:51.233 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-21 03:42:20.469 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-21 03:42:20.802 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-21 03:42:20.804 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-21 03:42:20.834 +00:00 [DBG] Start token request.
2019-01-21 03:42:20.850 +00:00 [DBG] Start client validation
2019-01-21 03:42:20.861 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-21 03:42:20.863 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-21 03:42:20.863 +00:00 [DBG] Secret id found: MVC
2019-01-21 03:42:20.882 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-21 03:42:20.899 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-21 03:42:20.900 +00:00 [DBG] Client validation success
2019-01-21 03:42:20.935 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJVA9P4IRL6:00000001",
  "TimeStamp": "2019-01-21T03:42:20Z",
  "ProcessId": 5151,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-21 03:42:21.016 +00:00 [DBG] Start token request validation
2019-01-21 03:42:21.031 +00:00 [DBG] Start client credentials token request validation
2019-01-21 03:42:21.088 +00:00 [DBG] MVC credentials token request validation success
2019-01-21 03:42:21.101 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-21 03:42:21.157 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-21 03:42:21.256 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****IhlQ"
    }
  ],
  "ActivityId": "0HLJVA9P4IRL6:00000001",
  "TimeStamp": "2019-01-21T03:42:21Z",
  "ProcessId": 5151,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-21 03:42:21.263 +00:00 [DBG] Token request success.
2019-01-21 03:42:21.885 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-21 03:42:21.887 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-21 03:42:21.887 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-21 03:42:21.919 +00:00 [DBG] Start discovery request
2019-01-21 03:42:22.169 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-21 03:42:22.172 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-21 03:42:22.172 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-21 03:42:22.185 +00:00 [DBG] Start key discovery request
2019-01-21 03:42:31.595 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-21 03:42:31.596 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-21 03:42:31.596 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-21 03:42:31.596 +00:00 [DBG] Start token request.
2019-01-21 03:42:31.596 +00:00 [DBG] Start client validation
2019-01-21 03:42:31.596 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-21 03:42:31.596 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-21 03:42:31.596 +00:00 [DBG] Secret id found: MVC
2019-01-21 03:42:31.598 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-21 03:42:31.599 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-21 03:42:31.599 +00:00 [DBG] Client validation success
2019-01-21 03:42:31.601 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLJVA9P4IRL8:00000001",
  "TimeStamp": "2019-01-21T03:42:31Z",
  "ProcessId": 5151,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-21 03:42:31.628 +00:00 [DBG] Start token request validation
2019-01-21 03:42:31.629 +00:00 [DBG] Start client credentials token request validation
2019-01-21 03:42:31.630 +00:00 [DBG] MVC credentials token request validation success
2019-01-21 03:42:31.630 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-21 03:42:31.630 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-21 03:42:31.638 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****h9qA"
    }
  ],
  "ActivityId": "0HLJVA9P4IRL8:00000001",
  "TimeStamp": "2019-01-21T03:42:31Z",
  "ProcessId": 5151,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-21 03:42:31.638 +00:00 [DBG] Token request success.
2019-01-21 03:42:32.387 +00:00 [INF] Message received:
2019-01-21 03:42:32.389 +00:00 [INF] ----------------------------------
2019-01-21 03:42:32.406 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"7b341939-4534-4454-8c9f-dbeb5458f05d","CreationDate":"2019-01-21T03:42:32.2672026Z"}
2019-01-21 03:42:32.408 +00:00 [INF] ----------------------------------
2019-01-21 03:42:35.220 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens c8acf3a9-4fd4-42ec-9f77-2dc6b6178d13 to 1 handlers took 2842 ms
2019-01-22 02:51:48.540 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-22 02:51:49.791 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-22 02:51:49.983 +00:00 [INF] Setting number of workers to 1
2019-01-22 02:51:50.005 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-22 02:51:50.058 +00:00 [INF] Bus Rebus 1 started
2019-01-22 02:51:50.062 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-22 02:51:50.239 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-22 02:51:50.297 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-22 02:51:50.319 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-22 02:51:50.319 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-22 02:51:50.320 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-22 02:51:50.321 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-22 02:51:50.323 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-22 02:55:11.834 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-22 02:55:12.137 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-22 02:55:12.138 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-22 02:55:12.146 +00:00 [DBG] Start discovery request
2019-01-22 02:55:12.340 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-22 02:55:12.343 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-22 02:55:12.344 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-22 02:55:12.373 +00:00 [DBG] Start key discovery request
2019-01-22 02:55:12.580 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-22 02:55:12.590 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-22 02:55:12.591 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-22 02:55:12.600 +00:00 [DBG] Start authorize request
2019-01-22 02:55:12.718 +00:00 [DBG] No user present in authorize request
2019-01-22 02:55:12.740 +00:00 [DBG] Start authorize request protocol validation
2019-01-22 02:55:12.807 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 02:55:12.824 +00:00 [DBG] Checking for PKCE parameters
2019-01-22 02:55:12.828 +00:00 [DBG] No PKCE used.
2019-01-22 02:55:12.898 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-22 02:55:12.918 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8H6Ha53_3e9Hu08DZsDieUbaEqa1O6do5iODddci3yTe1NZCqTNYzeTy-2JnEytbWJFyUClfBKKhqz-nO5VLvxz5PvSffLEe7V_Meld9tkdZnDjIxSE3MTa4oekbMqfIxRmA2OWWKrjdRugUCKCpvmm904gY_BUZX35yA2iYIR-1cap9yMn8d2CqbH1iSp0uFAJAMj3RNCqHod2w7SG0T-GxlgZXPODsLmACAahVkaMXbiiDnmKecSXxuzp3Qi7BmfYuglTX0-8OMUBRXjdtGWeNxJJVAFKP9uDNuh7b6Y1saa5dtVtkMgnaYihj61wnwMzLvUcd-ikRJHFBAArZkgs",
  "Nonce": "636837225124741552.NGNkMjExOWEtZWRkNC00YmY0LTk2MWMtMDI1ZmFhYjcwMzAyYWU5NmMyZjgtODk1YS00MmIzLThmMGUtNGRkNDQ2MGFiODhl",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636837225124741552.NGNkMjExOWEtZWRkNC00YmY0LTk2MWMtMDI1ZmFhYjcwMzAyYWU5NmMyZjgtODk1YS00MmIzLThmMGUtNGRkNDQ2MGFiODhl",
    "state": "CfDJ8H6Ha53_3e9Hu08DZsDieUbaEqa1O6do5iODddci3yTe1NZCqTNYzeTy-2JnEytbWJFyUClfBKKhqz-nO5VLvxz5PvSffLEe7V_Meld9tkdZnDjIxSE3MTa4oekbMqfIxRmA2OWWKrjdRugUCKCpvmm904gY_BUZX35yA2iYIR-1cap9yMn8d2CqbH1iSp0uFAJAMj3RNCqHod2w7SG0T-GxlgZXPODsLmACAahVkaMXbiiDnmKecSXxuzp3Qi7BmfYuglTX0-8OMUBRXjdtGWeNxJJVAFKP9uDNuh7b6Y1saa5dtVtkMgnaYihj61wnwMzLvUcd-ikRJHFBAArZkgs",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-22 02:55:12.942 +00:00 [INF] Showing login: User is not authenticated
2019-01-22 02:55:13.398 +00:00 [DBG] Start authorize request protocol validation
2019-01-22 02:55:13.402 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 02:55:13.403 +00:00 [DBG] Checking for PKCE parameters
2019-01-22 02:55:13.403 +00:00 [DBG] No PKCE used.
2019-01-22 02:55:13.404 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-22 02:55:13.423 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 02:55:19.690 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-22 02:55:20.867 +00:00 [DBG] Augmenting SignInContext
2019-01-22 02:55:20.872 +00:00 [DBG] Adding idp claim with value: local
2019-01-22 02:55:20.872 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-22 02:55:20.873 +00:00 [DBG] Adding auth_time claim with value: 1548125720
2019-01-22 02:55:20.895 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-22 02:55:20.924 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK02K3BIMDE:00000006",
  "TimeStamp": "2019-01-22T02:55:20Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 02:55:20.970 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-22 02:55:20.972 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-22 02:55:20.972 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-22 02:55:20.984 +00:00 [DBG] Start authorize callback request
2019-01-22 02:55:20.992 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-22 02:55:20.992 +00:00 [DBG] Start authorize request protocol validation
2019-01-22 02:55:20.992 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 02:55:20.993 +00:00 [DBG] Checking for PKCE parameters
2019-01-22 02:55:20.993 +00:00 [DBG] No PKCE used.
2019-01-22 02:55:20.994 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-22 02:55:20.994 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8H6Ha53_3e9Hu08DZsDieUbaEqa1O6do5iODddci3yTe1NZCqTNYzeTy-2JnEytbWJFyUClfBKKhqz-nO5VLvxz5PvSffLEe7V_Meld9tkdZnDjIxSE3MTa4oekbMqfIxRmA2OWWKrjdRugUCKCpvmm904gY_BUZX35yA2iYIR-1cap9yMn8d2CqbH1iSp0uFAJAMj3RNCqHod2w7SG0T-GxlgZXPODsLmACAahVkaMXbiiDnmKecSXxuzp3Qi7BmfYuglTX0-8OMUBRXjdtGWeNxJJVAFKP9uDNuh7b6Y1saa5dtVtkMgnaYihj61wnwMzLvUcd-ikRJHFBAArZkgs",
  "Nonce": "636837225124741552.NGNkMjExOWEtZWRkNC00YmY0LTk2MWMtMDI1ZmFhYjcwMzAyYWU5NmMyZjgtODk1YS00MmIzLThmMGUtNGRkNDQ2MGFiODhl",
  "SessionId": "ef86aa21ead77fb5b983c6034d8f1313",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636837225124741552.NGNkMjExOWEtZWRkNC00YmY0LTk2MWMtMDI1ZmFhYjcwMzAyYWU5NmMyZjgtODk1YS00MmIzLThmMGUtNGRkNDQ2MGFiODhl",
    "state": "CfDJ8H6Ha53_3e9Hu08DZsDieUbaEqa1O6do5iODddci3yTe1NZCqTNYzeTy-2JnEytbWJFyUClfBKKhqz-nO5VLvxz5PvSffLEe7V_Meld9tkdZnDjIxSE3MTa4oekbMqfIxRmA2OWWKrjdRugUCKCpvmm904gY_BUZX35yA2iYIR-1cap9yMn8d2CqbH1iSp0uFAJAMj3RNCqHod2w7SG0T-GxlgZXPODsLmACAahVkaMXbiiDnmKecSXxuzp3Qi7BmfYuglTX0-8OMUBRXjdtGWeNxJJVAFKP9uDNuh7b6Y1saa5dtVtkMgnaYihj61wnwMzLvUcd-ikRJHFBAArZkgs",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-22 02:55:21.020 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-22 02:55:21.020 +00:00 [INF] Showing consent: User has not yet consented
2019-01-22 02:55:21.083 +00:00 [DBG] Start authorize request protocol validation
2019-01-22 02:55:21.084 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 02:55:21.084 +00:00 [DBG] Checking for PKCE parameters
2019-01-22 02:55:21.084 +00:00 [DBG] No PKCE used.
2019-01-22 02:55:21.086 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-22 02:55:21.087 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 02:55:23.044 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-22 02:55:23.074 +00:00 [DBG] Start authorize request protocol validation
2019-01-22 02:55:23.075 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 02:55:23.075 +00:00 [DBG] Checking for PKCE parameters
2019-01-22 02:55:23.075 +00:00 [DBG] No PKCE used.
2019-01-22 02:55:23.075 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-22 02:55:23.109 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-22 02:55:23.117 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-22 02:55:23.118 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-22 02:55:23.118 +00:00 [DBG] Start authorize callback request
2019-01-22 02:55:23.128 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-22 02:55:23.128 +00:00 [DBG] Start authorize request protocol validation
2019-01-22 02:55:23.129 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 02:55:23.130 +00:00 [DBG] Checking for PKCE parameters
2019-01-22 02:55:23.130 +00:00 [DBG] No PKCE used.
2019-01-22 02:55:23.131 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-22 02:55:23.132 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8H6Ha53_3e9Hu08DZsDieUbaEqa1O6do5iODddci3yTe1NZCqTNYzeTy-2JnEytbWJFyUClfBKKhqz-nO5VLvxz5PvSffLEe7V_Meld9tkdZnDjIxSE3MTa4oekbMqfIxRmA2OWWKrjdRugUCKCpvmm904gY_BUZX35yA2iYIR-1cap9yMn8d2CqbH1iSp0uFAJAMj3RNCqHod2w7SG0T-GxlgZXPODsLmACAahVkaMXbiiDnmKecSXxuzp3Qi7BmfYuglTX0-8OMUBRXjdtGWeNxJJVAFKP9uDNuh7b6Y1saa5dtVtkMgnaYihj61wnwMzLvUcd-ikRJHFBAArZkgs",
  "Nonce": "636837225124741552.NGNkMjExOWEtZWRkNC00YmY0LTk2MWMtMDI1ZmFhYjcwMzAyYWU5NmMyZjgtODk1YS00MmIzLThmMGUtNGRkNDQ2MGFiODhl",
  "SessionId": "ef86aa21ead77fb5b983c6034d8f1313",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636837225124741552.NGNkMjExOWEtZWRkNC00YmY0LTk2MWMtMDI1ZmFhYjcwMzAyYWU5NmMyZjgtODk1YS00MmIzLThmMGUtNGRkNDQ2MGFiODhl",
    "state": "CfDJ8H6Ha53_3e9Hu08DZsDieUbaEqa1O6do5iODddci3yTe1NZCqTNYzeTy-2JnEytbWJFyUClfBKKhqz-nO5VLvxz5PvSffLEe7V_Meld9tkdZnDjIxSE3MTa4oekbMqfIxRmA2OWWKrjdRugUCKCpvmm904gY_BUZX35yA2iYIR-1cap9yMn8d2CqbH1iSp0uFAJAMj3RNCqHod2w7SG0T-GxlgZXPODsLmACAahVkaMXbiiDnmKecSXxuzp3Qi7BmfYuglTX0-8OMUBRXjdtGWeNxJJVAFKP9uDNuh7b6Y1saa5dtVtkMgnaYihj61wnwMzLvUcd-ikRJHFBAArZkgs",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-22 02:55:23.134 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-22 02:55:23.152 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-22 02:55:23.173 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-22 02:55:23.180 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-22 02:55:23.200 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-22 02:55:23.236 +00:00 [DBG] Creating Implicit Flow response.
2019-01-22 02:55:23.251 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-22 02:55:23.386 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Wjmg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****7937"
    }
  ],
  "ActivityId": "0HLK02K3BIMDE:0000000B",
  "TimeStamp": "2019-01-22T02:55:23Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 02:55:23.396 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8H6Ha53_3e9Hu08DZsDieUbaEqa1O6do5iODddci3yTe1NZCqTNYzeTy-2JnEytbWJFyUClfBKKhqz-nO5VLvxz5PvSffLEe7V_Meld9tkdZnDjIxSE3MTa4oekbMqfIxRmA2OWWKrjdRugUCKCpvmm904gY_BUZX35yA2iYIR-1cap9yMn8d2CqbH1iSp0uFAJAMj3RNCqHod2w7SG0T-GxlgZXPODsLmACAahVkaMXbiiDnmKecSXxuzp3Qi7BmfYuglTX0-8OMUBRXjdtGWeNxJJVAFKP9uDNuh7b6Y1saa5dtVtkMgnaYihj61wnwMzLvUcd-ikRJHFBAArZkgs",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-22 02:55:23.440 +00:00 [DBG] Augmenting SignInContext
2019-01-22 02:55:23.441 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-22 02:55:23.949 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-22 02:55:23.956 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-22 02:55:23.957 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-22 02:55:23.974 +00:00 [DBG] Start token request.
2019-01-22 02:55:23.992 +00:00 [DBG] Start client validation
2019-01-22 02:55:24.014 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-22 02:55:24.021 +00:00 [DBG] Start parsing for secret in post body
2019-01-22 02:55:24.026 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-22 02:55:24.027 +00:00 [DBG] Secret id found: MVC
2019-01-22 02:55:24.027 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 02:55:24.043 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-22 02:55:24.044 +00:00 [DBG] Client validation success
2019-01-22 02:55:24.050 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK02K3BIMDD:00000003",
  "TimeStamp": "2019-01-22T02:55:24Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 02:55:24.063 +00:00 [DBG] Start token request validation
2019-01-22 02:55:24.079 +00:00 [DBG] Start validation of authorization code token request
2019-01-22 02:55:24.102 +00:00 [DBG] Validation of authorization code token request success
2019-01-22 02:55:24.110 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "9f27d63ef7707c1d411637123c1bfe18c35e4cc326c1b20a403fb0e0e80b7937",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "9f27d63ef7707c1d411637123c1bfe18c35e4cc326c1b20a403fb0e0e80b7937",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-22 02:55:24.143 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 02:55:24.158 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-22 02:55:24.159 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-22 02:55:24.183 +00:00 [DBG] Creating refresh token
2019-01-22 02:55:24.184 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-22 02:55:24.213 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 02:55:24.214 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-22 02:55:24.246 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****THbQ"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****20d7"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****3GlA"
    }
  ],
  "ActivityId": "0HLK02K3BIMDD:00000003",
  "TimeStamp": "2019-01-22T02:55:24Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 02:55:24.249 +00:00 [DBG] Token request success.
2019-01-22 02:55:24.303 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-22 02:55:24.304 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-22 02:55:24.305 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-22 02:55:24.323 +00:00 [DBG] Start userinfo request
2019-01-22 02:55:24.330 +00:00 [DBG] Bearer token found in header
2019-01-22 02:55:24.413 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 02:55:24.419 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 02:55:24.421 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-22 02:55:24.426 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548125724,
    "exp": 1548129324,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548125720,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-22 02:55:24.444 +00:00 [DBG] Creating userinfo response
2019-01-22 02:55:24.452 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-22 02:55:24.460 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-22 02:55:24.466 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-22 02:55:24.466 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-22 02:55:24.488 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-22 02:55:24.490 +00:00 [DBG] End userinfo request
2019-01-22 02:55:25.057 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-22 02:55:25.091 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-22 02:55:25.091 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-22 02:55:25.091 +00:00 [DBG] Start token request.
2019-01-22 02:55:25.092 +00:00 [DBG] Start client validation
2019-01-22 02:55:25.092 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-22 02:55:25.092 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-22 02:55:25.092 +00:00 [DBG] Secret id found: MVC
2019-01-22 02:55:25.092 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 02:55:25.092 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-22 02:55:25.092 +00:00 [DBG] Client validation success
2019-01-22 02:55:25.092 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK02K3BIMDH:00000001",
  "TimeStamp": "2019-01-22T02:55:25Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 02:55:25.113 +00:00 [DBG] Start token request validation
2019-01-22 02:55:25.129 +00:00 [DBG] Start client credentials token request validation
2019-01-22 02:55:25.141 +00:00 [DBG] MVC credentials token request validation success
2019-01-22 02:55:25.142 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-22 02:55:25.150 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-22 02:55:25.158 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****LHSQ"
    }
  ],
  "ActivityId": "0HLK02K3BIMDH:00000001",
  "TimeStamp": "2019-01-22T02:55:25Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 02:55:25.158 +00:00 [DBG] Token request success.
2019-01-22 02:55:25.648 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-22 02:55:25.649 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-22 02:55:25.654 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-22 02:55:25.656 +00:00 [DBG] Start discovery request
2019-01-22 02:55:25.799 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-22 02:55:25.801 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-22 02:55:25.809 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-22 02:55:25.810 +00:00 [DBG] Start key discovery request
2019-01-22 02:55:41.592 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-22 02:55:41.592 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-22 02:55:41.592 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-22 02:55:41.592 +00:00 [DBG] Start token request.
2019-01-22 02:55:41.592 +00:00 [DBG] Start client validation
2019-01-22 02:55:41.593 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-22 02:55:41.593 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-22 02:55:41.593 +00:00 [DBG] Secret id found: MVC
2019-01-22 02:55:41.593 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 02:55:41.593 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-22 02:55:41.593 +00:00 [DBG] Client validation success
2019-01-22 02:55:41.593 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK02K3BIMDJ:00000001",
  "TimeStamp": "2019-01-22T02:55:41Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 02:55:41.638 +00:00 [DBG] Start token request validation
2019-01-22 02:55:41.638 +00:00 [DBG] Start client credentials token request validation
2019-01-22 02:55:41.639 +00:00 [DBG] MVC credentials token request validation success
2019-01-22 02:55:41.639 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-22 02:55:41.639 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-22 02:55:41.643 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****x7ZQ"
    }
  ],
  "ActivityId": "0HLK02K3BIMDJ:00000001",
  "TimeStamp": "2019-01-22T02:55:41Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 02:55:41.644 +00:00 [DBG] Token request success.
2019-01-22 02:55:42.288 +00:00 [INF] Message received:
2019-01-22 02:55:42.289 +00:00 [INF] ----------------------------------
2019-01-22 02:55:42.306 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"209a41b5-93dc-4c83-838d-3f31dc6d6ab1","CreationDate":"2019-01-22T02:55:42.136579Z"}
2019-01-22 02:55:42.306 +00:00 [INF] ----------------------------------
2019-01-22 02:55:43.427 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens f82da681-572e-418f-9fc7-05f83eab6e42 to 1 handlers took 1153 ms
2019-01-22 03:15:40.330 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-22 03:15:42.192 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-22 03:15:42.384 +00:00 [INF] Setting number of workers to 1
2019-01-22 03:15:42.443 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-22 03:15:42.487 +00:00 [INF] Bus Rebus 1 started
2019-01-22 03:15:42.539 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-22 03:15:42.853 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-22 03:15:43.036 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-22 03:15:43.203 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-22 03:15:43.218 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-22 03:15:43.234 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-22 03:15:43.249 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-22 03:15:43.265 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-22 03:18:24.780 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-22 03:18:25.155 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-22 03:18:25.161 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-22 03:18:25.189 +00:00 [DBG] Start token request.
2019-01-22 03:18:25.205 +00:00 [DBG] Start client validation
2019-01-22 03:18:25.222 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-22 03:18:25.223 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-22 03:18:25.224 +00:00 [DBG] Secret id found: MVC
2019-01-22 03:18:25.248 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 03:18:25.268 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-22 03:18:25.269 +00:00 [DBG] Client validation success
2019-01-22 03:18:25.315 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK0312G0ALA:00000001",
  "TimeStamp": "2019-01-22T03:18:25Z",
  "ProcessId": 673,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 03:18:25.422 +00:00 [DBG] Start token request validation
2019-01-22 03:18:25.437 +00:00 [DBG] Start client credentials token request validation
2019-01-22 03:18:25.484 +00:00 [DBG] MVC credentials token request validation success
2019-01-22 03:18:25.498 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-22 03:18:25.539 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-22 03:18:25.615 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****XviQ"
    }
  ],
  "ActivityId": "0HLK0312G0ALA:00000001",
  "TimeStamp": "2019-01-22T03:18:25Z",
  "ProcessId": 673,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 03:18:25.626 +00:00 [DBG] Token request success.
2019-01-22 03:18:26.162 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-22 03:18:26.167 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-22 03:18:26.167 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-22 03:18:26.213 +00:00 [DBG] Start discovery request
2019-01-22 03:18:26.521 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-22 03:18:26.522 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-22 03:18:26.522 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-22 03:18:26.535 +00:00 [DBG] Start key discovery request
2019-01-22 03:20:57.971 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-22 03:20:57.972 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-22 03:20:57.973 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-22 03:20:57.976 +00:00 [DBG] Start token request.
2019-01-22 03:20:57.982 +00:00 [DBG] Start client validation
2019-01-22 03:20:57.983 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-22 03:20:57.983 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-22 03:20:57.984 +00:00 [DBG] Secret id found: MVC
2019-01-22 03:20:57.984 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 03:20:57.985 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-22 03:20:57.985 +00:00 [DBG] Client validation success
2019-01-22 03:20:57.985 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK0312G0ALC:00000001",
  "TimeStamp": "2019-01-22T03:20:57Z",
  "ProcessId": 673,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 03:20:57.999 +00:00 [DBG] Start token request validation
2019-01-22 03:20:58.000 +00:00 [DBG] Start client credentials token request validation
2019-01-22 03:20:58.002 +00:00 [DBG] MVC credentials token request validation success
2019-01-22 03:20:58.002 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-22 03:20:58.003 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-22 03:20:58.007 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****8nvQ"
    }
  ],
  "ActivityId": "0HLK0312G0ALC:00000001",
  "TimeStamp": "2019-01-22T03:20:58Z",
  "ProcessId": 673,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 03:20:58.007 +00:00 [DBG] Token request success.
2019-01-22 03:20:58.741 +00:00 [INF] Message received:
2019-01-22 03:20:58.741 +00:00 [INF] ----------------------------------
2019-01-22 03:20:58.750 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"d899887a-12d2-4593-ada0-6fca1c98b023","CreationDate":"2019-01-22T03:20:58.6661911Z"}
2019-01-22 03:20:58.750 +00:00 [INF] ----------------------------------
2019-01-22 03:21:01.192 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 7639bc35-9826-4132-bc7d-26d65f460505 to 1 handlers took 2460 ms
2019-01-22 03:38:08.589 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-22 03:38:11.167 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-22 03:38:11.405 +00:00 [INF] Setting number of workers to 1
2019-01-22 03:38:11.531 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-22 03:38:11.613 +00:00 [INF] Bus Rebus 1 started
2019-01-22 03:38:11.724 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-22 03:38:12.210 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-22 03:38:12.307 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-22 03:38:12.404 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-22 03:38:12.409 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-22 03:38:12.448 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-22 03:38:12.510 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-22 03:38:12.558 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-22 03:44:21.876 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-22 03:44:22.144 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-22 03:44:22.147 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-22 03:44:22.163 +00:00 [DBG] Start token request.
2019-01-22 03:44:22.176 +00:00 [DBG] Start client validation
2019-01-22 03:44:22.192 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-22 03:44:22.193 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-22 03:44:22.193 +00:00 [DBG] Secret id found: MVC
2019-01-22 03:44:22.212 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 03:44:22.230 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-22 03:44:22.231 +00:00 [DBG] Client validation success
2019-01-22 03:44:22.269 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK03FIH51QF:00000001",
  "TimeStamp": "2019-01-22T03:44:22Z",
  "ProcessId": 931,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 03:44:22.354 +00:00 [DBG] Start token request validation
2019-01-22 03:44:22.366 +00:00 [DBG] Start client credentials token request validation
2019-01-22 03:44:22.414 +00:00 [DBG] MVC credentials token request validation success
2019-01-22 03:44:22.428 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-22 03:44:22.467 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-22 03:44:22.549 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****aRVg"
    }
  ],
  "ActivityId": "0HLK03FIH51QF:00000001",
  "TimeStamp": "2019-01-22T03:44:22Z",
  "ProcessId": 931,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 03:44:22.560 +00:00 [DBG] Token request success.
2019-01-22 03:44:23.069 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-22 03:44:23.071 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-22 03:44:23.071 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-22 03:44:23.103 +00:00 [DBG] Start discovery request
2019-01-22 03:44:23.297 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-22 03:44:23.299 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-22 03:44:23.300 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-22 03:44:23.307 +00:00 [DBG] Start key discovery request
2019-01-22 03:44:28.627 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-22 03:44:28.628 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-22 03:44:28.628 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-22 03:44:28.628 +00:00 [DBG] Start token request.
2019-01-22 03:44:28.628 +00:00 [DBG] Start client validation
2019-01-22 03:44:28.629 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-22 03:44:28.630 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-22 03:44:28.630 +00:00 [DBG] Secret id found: MVC
2019-01-22 03:44:28.631 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 03:44:28.631 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-22 03:44:28.632 +00:00 [DBG] Client validation success
2019-01-22 03:44:28.634 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK03FIH51QH:00000001",
  "TimeStamp": "2019-01-22T03:44:28Z",
  "ProcessId": 931,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 03:44:28.656 +00:00 [DBG] Start token request validation
2019-01-22 03:44:28.658 +00:00 [DBG] Start client credentials token request validation
2019-01-22 03:44:28.659 +00:00 [DBG] MVC credentials token request validation success
2019-01-22 03:44:28.659 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-22 03:44:28.660 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-22 03:44:28.691 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****8lcQ"
    }
  ],
  "ActivityId": "0HLK03FIH51QH:00000001",
  "TimeStamp": "2019-01-22T03:44:28Z",
  "ProcessId": 931,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 03:44:28.692 +00:00 [DBG] Token request success.
2019-01-22 03:44:29.264 +00:00 [INF] Message received:
2019-01-22 03:44:29.269 +00:00 [INF] ----------------------------------
2019-01-22 03:44:29.277 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"34528b82-2d32-4e79-b1b7-1e95a890eb23","CreationDate":"2019-01-22T03:44:29.1739715Z"}
2019-01-22 03:44:29.280 +00:00 [INF] ----------------------------------
2019-01-22 03:44:31.602 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens d245109f-f185-4f55-adf2-3dbd6b532893 to 1 handlers took 2345 ms
2019-01-22 03:50:26.252 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-22 03:50:28.356 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-22 03:50:28.634 +00:00 [INF] Setting number of workers to 1
2019-01-22 03:50:28.659 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-22 03:50:28.705 +00:00 [INF] Bus Rebus 1 started
2019-01-22 03:50:28.765 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-22 03:50:28.999 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-22 03:50:29.067 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-22 03:50:29.097 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-22 03:50:29.099 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-22 03:50:29.104 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-22 03:50:29.120 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-22 03:50:29.132 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-22 03:54:17.725 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-22 03:54:17.972 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-22 03:54:17.973 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-22 03:54:17.988 +00:00 [DBG] Start token request.
2019-01-22 03:54:17.999 +00:00 [DBG] Start client validation
2019-01-22 03:54:18.010 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-22 03:54:18.012 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-22 03:54:18.012 +00:00 [DBG] Secret id found: MVC
2019-01-22 03:54:18.026 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 03:54:18.040 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-22 03:54:18.041 +00:00 [DBG] Client validation success
2019-01-22 03:54:18.079 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK03L43T52M:00000001",
  "TimeStamp": "2019-01-22T03:54:18Z",
  "ProcessId": 1172,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 03:54:18.173 +00:00 [DBG] Start token request validation
2019-01-22 03:54:18.188 +00:00 [DBG] Start client credentials token request validation
2019-01-22 03:54:18.233 +00:00 [DBG] MVC credentials token request validation success
2019-01-22 03:54:18.248 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-22 03:54:18.285 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-22 03:54:18.358 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****OiTQ"
    }
  ],
  "ActivityId": "0HLK03L43T52M:00000001",
  "TimeStamp": "2019-01-22T03:54:18Z",
  "ProcessId": 1172,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 03:54:18.361 +00:00 [DBG] Token request success.
2019-01-22 03:54:18.923 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-22 03:54:18.928 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-22 03:54:18.932 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-22 03:54:18.964 +00:00 [DBG] Start discovery request
2019-01-22 03:54:19.144 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-22 03:54:19.146 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-22 03:54:19.146 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-22 03:54:19.155 +00:00 [DBG] Start key discovery request
2019-01-22 03:54:25.462 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-22 03:54:25.463 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-22 03:54:25.464 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-22 03:54:25.464 +00:00 [DBG] Start token request.
2019-01-22 03:54:25.464 +00:00 [DBG] Start client validation
2019-01-22 03:54:25.464 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-22 03:54:25.464 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-22 03:54:25.464 +00:00 [DBG] Secret id found: MVC
2019-01-22 03:54:25.464 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-22 03:54:25.464 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-22 03:54:25.464 +00:00 [DBG] Client validation success
2019-01-22 03:54:25.465 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK03L43T52O:00000001",
  "TimeStamp": "2019-01-22T03:54:25Z",
  "ProcessId": 1172,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 03:54:25.490 +00:00 [DBG] Start token request validation
2019-01-22 03:54:25.490 +00:00 [DBG] Start client credentials token request validation
2019-01-22 03:54:25.516 +00:00 [DBG] MVC credentials token request validation success
2019-01-22 03:54:25.516 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-22 03:54:25.518 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-22 03:54:25.530 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****PWiw"
    }
  ],
  "ActivityId": "0HLK03L43T52O:00000001",
  "TimeStamp": "2019-01-22T03:54:25Z",
  "ProcessId": 1172,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-22 03:54:25.531 +00:00 [DBG] Token request success.
2019-01-22 03:54:26.200 +00:00 [INF] Message received:
2019-01-22 03:54:26.210 +00:00 [INF] ----------------------------------
2019-01-22 03:54:26.223 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"265f1ce0-3262-4466-8249-57e0545a994e","CreationDate":"2019-01-22T03:54:26.0395984Z"}
2019-01-22 03:54:26.226 +00:00 [INF] ----------------------------------
2019-01-22 03:54:28.339 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens c686625e-184e-4075-8217-d483b51d5e4d to 1 handlers took 2158 ms
2019-01-25 14:01:28.930 +00:00 [WRN] No XML encryptor configured. Key "1a38e3e1-132c-4d92-9d69-c64ad3520fa1" may be persisted to storage in unencrypted form.
2019-01-25 14:01:30.111 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 14:01:31.797 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 14:01:31.851 +00:00 [INF] Setting number of workers to 1
2019-01-25 14:01:31.918 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 14:01:31.935 +00:00 [INF] Bus Rebus 1 started
2019-01-25 14:01:32.029 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 14:01:32.251 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 14:01:32.293 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 14:01:32.314 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 14:01:32.318 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 14:01:32.320 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 14:01:32.322 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 14:01:32.325 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 14:05:19.662 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 14:05:20.702 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 14:05:20.833 +00:00 [INF] Setting number of workers to 1
2019-01-25 14:05:20.898 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 14:05:20.928 +00:00 [INF] Bus Rebus 1 started
2019-01-25 14:05:20.932 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 14:05:21.208 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 14:05:21.208 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 14:05:21.338 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 14:05:21.344 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 14:05:21.359 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 14:05:21.376 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 14:05:21.394 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 14:07:13.516 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 14:07:15.267 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 14:07:15.448 +00:00 [INF] Setting number of workers to 1
2019-01-25 14:07:15.514 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 14:07:15.551 +00:00 [INF] Bus Rebus 1 started
2019-01-25 14:07:15.553 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 14:07:15.781 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 14:07:15.829 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 14:07:15.863 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 14:07:15.864 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 14:07:15.875 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 14:07:15.877 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 14:07:15.882 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 14:07:43.863 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 14:07:44.241 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 14:07:44.243 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 14:07:44.252 +00:00 [DBG] Start discovery request
2019-01-25 14:07:57.684 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 14:07:57.746 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 14:07:57.791 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 14:07:57.807 +00:00 [DBG] Start key discovery request
2019-01-25 14:07:58.011 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-25 14:07:58.020 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-25 14:07:58.020 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-25 14:07:58.030 +00:00 [DBG] Start authorize request
2019-01-25 14:07:58.067 +00:00 [DBG] No user present in authorize request
2019-01-25 14:07:58.075 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 14:07:58.096 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:07:58.107 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 14:07:58.111 +00:00 [DBG] No PKCE used.
2019-01-25 14:07:58.168 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 14:07:58.184 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8P_6BtrOgf5GlgVFQZqCmMWaNnRjIpzuzUBqQoszurVvGqVq7v-F_1V-LTXxnmvaQb04PKCC8pP4VACTtu9gGWyOUhV5pIF8mbrqg9M9xNqcBHm9WBh1kTskrKXtMTy-l_ZZj-YBBYDZazT3iks8VOSwhvsXQ5zEGfLYtsKJTqnKEbJtD3aedadNkNxjzZXlLbrIOEq0sMiHGOmtW-KhnlktcqDhIM6YfN-K-eAUCl5H_oo0U8GyLM2YzyJdXRLmJB2Vr7EujmQXyqqO1aR4-VPR86NvYTEvJJdwVAnWRJuawPciUiX-WSHdvWfiv-B_WtpW1JZQSZcQqZ-hqCiQiG4",
  "Nonce": "636840220778942312.ZTMzNTk2M2YtZGFiNy00YjE4LWE0MDUtNDQ2YjRiY2M2MWYzZmY3MWFiYmEtMWI4MC00Njk4LWI3ZTYtOTIxMDY4ODFkOGY1",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840220778942312.ZTMzNTk2M2YtZGFiNy00YjE4LWE0MDUtNDQ2YjRiY2M2MWYzZmY3MWFiYmEtMWI4MC00Njk4LWI3ZTYtOTIxMDY4ODFkOGY1",
    "state": "CfDJ8P_6BtrOgf5GlgVFQZqCmMWaNnRjIpzuzUBqQoszurVvGqVq7v-F_1V-LTXxnmvaQb04PKCC8pP4VACTtu9gGWyOUhV5pIF8mbrqg9M9xNqcBHm9WBh1kTskrKXtMTy-l_ZZj-YBBYDZazT3iks8VOSwhvsXQ5zEGfLYtsKJTqnKEbJtD3aedadNkNxjzZXlLbrIOEq0sMiHGOmtW-KhnlktcqDhIM6YfN-K-eAUCl5H_oo0U8GyLM2YzyJdXRLmJB2Vr7EujmQXyqqO1aR4-VPR86NvYTEvJJdwVAnWRJuawPciUiX-WSHdvWfiv-B_WtpW1JZQSZcQqZ-hqCiQiG4",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 14:07:58.199 +00:00 [INF] Showing login: User is not authenticated
2019-01-25 14:07:58.884 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 14:07:58.885 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:07:58.886 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 14:07:58.886 +00:00 [DBG] No PKCE used.
2019-01-25 14:07:58.887 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 14:07:58.892 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:09:09.272 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-25 14:09:10.400 +00:00 [DBG] Augmenting SignInContext
2019-01-25 14:09:10.405 +00:00 [DBG] Adding idp claim with value: local
2019-01-25 14:09:10.406 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-25 14:09:10.406 +00:00 [DBG] Adding auth_time claim with value: 1548425350
2019-01-25 14:09:10.452 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 14:09:10.483 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK2PPSOJE35:00000001",
  "TimeStamp": "2019-01-25T14:09:10Z",
  "ProcessId": 214,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:09:10.516 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-25 14:09:10.517 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-25 14:09:10.520 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-25 14:09:10.532 +00:00 [DBG] Start authorize callback request
2019-01-25 14:09:10.545 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 14:09:10.548 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 14:09:10.550 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:09:10.551 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 14:09:10.554 +00:00 [DBG] No PKCE used.
2019-01-25 14:09:10.556 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 14:09:10.558 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8P_6BtrOgf5GlgVFQZqCmMWaNnRjIpzuzUBqQoszurVvGqVq7v-F_1V-LTXxnmvaQb04PKCC8pP4VACTtu9gGWyOUhV5pIF8mbrqg9M9xNqcBHm9WBh1kTskrKXtMTy-l_ZZj-YBBYDZazT3iks8VOSwhvsXQ5zEGfLYtsKJTqnKEbJtD3aedadNkNxjzZXlLbrIOEq0sMiHGOmtW-KhnlktcqDhIM6YfN-K-eAUCl5H_oo0U8GyLM2YzyJdXRLmJB2Vr7EujmQXyqqO1aR4-VPR86NvYTEvJJdwVAnWRJuawPciUiX-WSHdvWfiv-B_WtpW1JZQSZcQqZ-hqCiQiG4",
  "Nonce": "636840220778942312.ZTMzNTk2M2YtZGFiNy00YjE4LWE0MDUtNDQ2YjRiY2M2MWYzZmY3MWFiYmEtMWI4MC00Njk4LWI3ZTYtOTIxMDY4ODFkOGY1",
  "SessionId": "52fd3dff9a98ffcdee99fd2f52946ef9",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840220778942312.ZTMzNTk2M2YtZGFiNy00YjE4LWE0MDUtNDQ2YjRiY2M2MWYzZmY3MWFiYmEtMWI4MC00Njk4LWI3ZTYtOTIxMDY4ODFkOGY1",
    "state": "CfDJ8P_6BtrOgf5GlgVFQZqCmMWaNnRjIpzuzUBqQoszurVvGqVq7v-F_1V-LTXxnmvaQb04PKCC8pP4VACTtu9gGWyOUhV5pIF8mbrqg9M9xNqcBHm9WBh1kTskrKXtMTy-l_ZZj-YBBYDZazT3iks8VOSwhvsXQ5zEGfLYtsKJTqnKEbJtD3aedadNkNxjzZXlLbrIOEq0sMiHGOmtW-KhnlktcqDhIM6YfN-K-eAUCl5H_oo0U8GyLM2YzyJdXRLmJB2Vr7EujmQXyqqO1aR4-VPR86NvYTEvJJdwVAnWRJuawPciUiX-WSHdvWfiv-B_WtpW1JZQSZcQqZ-hqCiQiG4",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 14:09:10.614 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-25 14:09:10.616 +00:00 [INF] Showing consent: User has not yet consented
2019-01-25 14:09:10.703 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 14:09:10.704 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:09:10.705 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 14:09:10.706 +00:00 [DBG] No PKCE used.
2019-01-25 14:09:10.708 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 14:09:10.708 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:09:12.717 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-25 14:09:12.751 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 14:09:12.751 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:09:12.751 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 14:09:12.752 +00:00 [DBG] No PKCE used.
2019-01-25 14:09:12.754 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 14:09:12.798 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-25 14:09:12.799 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-25 14:09:12.799 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-25 14:09:12.800 +00:00 [DBG] Start authorize callback request
2019-01-25 14:09:12.815 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 14:09:12.815 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 14:09:12.817 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:09:12.819 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 14:09:12.820 +00:00 [DBG] No PKCE used.
2019-01-25 14:09:12.822 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 14:09:12.823 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8P_6BtrOgf5GlgVFQZqCmMWaNnRjIpzuzUBqQoszurVvGqVq7v-F_1V-LTXxnmvaQb04PKCC8pP4VACTtu9gGWyOUhV5pIF8mbrqg9M9xNqcBHm9WBh1kTskrKXtMTy-l_ZZj-YBBYDZazT3iks8VOSwhvsXQ5zEGfLYtsKJTqnKEbJtD3aedadNkNxjzZXlLbrIOEq0sMiHGOmtW-KhnlktcqDhIM6YfN-K-eAUCl5H_oo0U8GyLM2YzyJdXRLmJB2Vr7EujmQXyqqO1aR4-VPR86NvYTEvJJdwVAnWRJuawPciUiX-WSHdvWfiv-B_WtpW1JZQSZcQqZ-hqCiQiG4",
  "Nonce": "636840220778942312.ZTMzNTk2M2YtZGFiNy00YjE4LWE0MDUtNDQ2YjRiY2M2MWYzZmY3MWFiYmEtMWI4MC00Njk4LWI3ZTYtOTIxMDY4ODFkOGY1",
  "SessionId": "52fd3dff9a98ffcdee99fd2f52946ef9",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840220778942312.ZTMzNTk2M2YtZGFiNy00YjE4LWE0MDUtNDQ2YjRiY2M2MWYzZmY3MWFiYmEtMWI4MC00Njk4LWI3ZTYtOTIxMDY4ODFkOGY1",
    "state": "CfDJ8P_6BtrOgf5GlgVFQZqCmMWaNnRjIpzuzUBqQoszurVvGqVq7v-F_1V-LTXxnmvaQb04PKCC8pP4VACTtu9gGWyOUhV5pIF8mbrqg9M9xNqcBHm9WBh1kTskrKXtMTy-l_ZZj-YBBYDZazT3iks8VOSwhvsXQ5zEGfLYtsKJTqnKEbJtD3aedadNkNxjzZXlLbrIOEq0sMiHGOmtW-KhnlktcqDhIM6YfN-K-eAUCl5H_oo0U8GyLM2YzyJdXRLmJB2Vr7EujmQXyqqO1aR4-VPR86NvYTEvJJdwVAnWRJuawPciUiX-WSHdvWfiv-B_WtpW1JZQSZcQqZ-hqCiQiG4",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 14:09:12.824 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-25 14:09:12.844 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-25 14:09:12.864 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-25 14:09:12.873 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 14:09:12.893 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-25 14:09:12.922 +00:00 [DBG] Creating Implicit Flow response.
2019-01-25 14:09:12.938 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 14:09:13.109 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****qHpA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****49bd"
    }
  ],
  "ActivityId": "0HLK2PPSOJE35:00000006",
  "TimeStamp": "2019-01-25T14:09:13Z",
  "ProcessId": 214,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:09:13.124 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8P_6BtrOgf5GlgVFQZqCmMWaNnRjIpzuzUBqQoszurVvGqVq7v-F_1V-LTXxnmvaQb04PKCC8pP4VACTtu9gGWyOUhV5pIF8mbrqg9M9xNqcBHm9WBh1kTskrKXtMTy-l_ZZj-YBBYDZazT3iks8VOSwhvsXQ5zEGfLYtsKJTqnKEbJtD3aedadNkNxjzZXlLbrIOEq0sMiHGOmtW-KhnlktcqDhIM6YfN-K-eAUCl5H_oo0U8GyLM2YzyJdXRLmJB2Vr7EujmQXyqqO1aR4-VPR86NvYTEvJJdwVAnWRJuawPciUiX-WSHdvWfiv-B_WtpW1JZQSZcQqZ-hqCiQiG4",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-25 14:09:13.179 +00:00 [DBG] Augmenting SignInContext
2019-01-25 14:09:13.181 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 14:09:13.691 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 14:09:13.704 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 14:09:13.704 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 14:09:13.727 +00:00 [DBG] Start token request.
2019-01-25 14:09:13.758 +00:00 [DBG] Start client validation
2019-01-25 14:09:13.774 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 14:09:13.788 +00:00 [DBG] Start parsing for secret in post body
2019-01-25 14:09:13.798 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-25 14:09:13.800 +00:00 [DBG] Secret id found: MVC
2019-01-25 14:09:13.801 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:09:13.820 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 14:09:13.820 +00:00 [DBG] Client validation success
2019-01-25 14:09:13.828 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2PPSOJE31:00000003",
  "TimeStamp": "2019-01-25T14:09:13Z",
  "ProcessId": 214,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:09:13.838 +00:00 [DBG] Start token request validation
2019-01-25 14:09:13.860 +00:00 [DBG] Start validation of authorization code token request
2019-01-25 14:09:13.884 +00:00 [DBG] Validation of authorization code token request success
2019-01-25 14:09:13.891 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "feab0055d7417d354315e08a9eb56aa7a2e6642c9eb62c6ec65baa73fa5449bd",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "feab0055d7417d354315e08a9eb56aa7a2e6642c9eb62c6ec65baa73fa5449bd",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-25 14:09:13.915 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:09:13.934 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 14:09:13.935 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 14:09:13.961 +00:00 [DBG] Creating refresh token
2019-01-25 14:09:13.962 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-25 14:09:13.987 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:09:13.988 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 14:09:14.014 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****oN7w"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****4d4c"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****gm8Q"
    }
  ],
  "ActivityId": "0HLK2PPSOJE31:00000003",
  "TimeStamp": "2019-01-25T14:09:14Z",
  "ProcessId": 214,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:09:14.019 +00:00 [DBG] Token request success.
2019-01-25 14:09:14.087 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-25 14:09:14.091 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-25 14:09:14.092 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-25 14:09:14.112 +00:00 [DBG] Start userinfo request
2019-01-25 14:09:14.121 +00:00 [DBG] Bearer token found in header
2019-01-25 14:09:14.200 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:09:14.205 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:09:14.207 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 14:09:14.214 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548425353,
    "exp": 1548428953,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548425350,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-25 14:09:14.238 +00:00 [DBG] Creating userinfo response
2019-01-25 14:09:14.247 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 14:09:14.254 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 14:09:14.259 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-25 14:09:14.260 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 14:09:14.272 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-25 14:09:14.273 +00:00 [DBG] End userinfo request
2019-01-25 14:09:14.900 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 14:09:14.907 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 14:09:14.908 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 14:09:14.908 +00:00 [DBG] Start token request.
2019-01-25 14:09:14.908 +00:00 [DBG] Start client validation
2019-01-25 14:09:14.908 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 14:09:14.909 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 14:09:14.909 +00:00 [DBG] Secret id found: MVC
2019-01-25 14:09:14.910 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:09:14.914 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 14:09:14.914 +00:00 [DBG] Client validation success
2019-01-25 14:09:14.914 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2PPSOJE37:00000001",
  "TimeStamp": "2019-01-25T14:09:14Z",
  "ProcessId": 214,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:09:14.939 +00:00 [DBG] Start token request validation
2019-01-25 14:09:14.967 +00:00 [DBG] Start client credentials token request validation
2019-01-25 14:09:14.982 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 14:09:14.985 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 14:09:15.004 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 14:09:15.009 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****S6Mw"
    }
  ],
  "ActivityId": "0HLK2PPSOJE37:00000001",
  "TimeStamp": "2019-01-25T14:09:15Z",
  "ProcessId": 214,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:09:15.017 +00:00 [DBG] Token request success.
2019-01-25 14:09:15.556 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 14:09:15.557 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 14:09:15.567 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 14:09:15.567 +00:00 [DBG] Start discovery request
2019-01-25 14:09:15.729 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 14:09:15.730 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 14:09:15.730 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 14:09:15.731 +00:00 [DBG] Start key discovery request
2019-01-25 14:09:51.435 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 14:09:51.436 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 14:09:51.437 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 14:09:51.437 +00:00 [DBG] Start token request.
2019-01-25 14:09:51.437 +00:00 [DBG] Start client validation
2019-01-25 14:09:51.437 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 14:09:51.437 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 14:09:51.437 +00:00 [DBG] Secret id found: MVC
2019-01-25 14:09:51.438 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:09:51.438 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 14:09:51.438 +00:00 [DBG] Client validation success
2019-01-25 14:09:51.438 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2PPSOJE39:00000001",
  "TimeStamp": "2019-01-25T14:09:51Z",
  "ProcessId": 214,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:09:51.454 +00:00 [DBG] Start token request validation
2019-01-25 14:09:51.454 +00:00 [DBG] Start client credentials token request validation
2019-01-25 14:09:51.454 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 14:09:51.455 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 14:09:51.455 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 14:09:51.458 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****ICSA"
    }
  ],
  "ActivityId": "0HLK2PPSOJE39:00000001",
  "TimeStamp": "2019-01-25T14:09:51Z",
  "ProcessId": 214,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:09:51.458 +00:00 [DBG] Token request success.
2019-01-25 14:09:52.188 +00:00 [INF] Message received:
2019-01-25 14:09:52.188 +00:00 [INF] ----------------------------------
2019-01-25 14:09:52.204 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"c87a8ec2-70aa-415a-b8dc-11c85d1f7d8c","CreationDate":"2019-01-25T14:09:52.0756375Z"}
2019-01-25 14:09:52.204 +00:00 [INF] ----------------------------------
2019-01-25 14:09:53.565 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 137e924f-2e3a-438a-9c03-89a4436e9235 to 1 handlers took 1389 ms
2019-01-25 14:34:01.325 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 14:34:02.585 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 14:34:02.663 +00:00 [INF] Setting number of workers to 1
2019-01-25 14:34:02.690 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 14:34:02.699 +00:00 [INF] Bus Rebus 1 started
2019-01-25 14:34:02.717 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 14:34:02.849 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 14:34:02.893 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 14:34:02.921 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 14:34:02.928 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 14:34:02.930 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 14:34:02.941 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 14:34:02.943 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 14:37:19.356 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 14:37:19.629 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 14:37:19.630 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 14:37:19.643 +00:00 [DBG] Start token request.
2019-01-25 14:37:19.655 +00:00 [DBG] Start client validation
2019-01-25 14:37:19.662 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 14:37:19.664 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 14:37:19.664 +00:00 [DBG] Secret id found: MVC
2019-01-25 14:37:19.676 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:37:19.689 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 14:37:19.689 +00:00 [DBG] Client validation success
2019-01-25 14:37:19.720 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2QADV0UB6:00000001",
  "TimeStamp": "2019-01-25T14:37:19Z",
  "ProcessId": 960,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:37:19.795 +00:00 [DBG] Start token request validation
2019-01-25 14:37:19.806 +00:00 [DBG] Start client credentials token request validation
2019-01-25 14:37:19.847 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 14:37:19.858 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 14:37:19.888 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 14:37:19.957 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****VNVw"
    }
  ],
  "ActivityId": "0HLK2QADV0UB6:00000001",
  "TimeStamp": "2019-01-25T14:37:19Z",
  "ProcessId": 960,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:37:19.960 +00:00 [DBG] Token request success.
2019-01-25 14:37:20.490 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 14:37:20.506 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 14:37:20.506 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 14:37:20.587 +00:00 [DBG] Start discovery request
2019-01-25 14:37:20.722 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 14:37:20.724 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 14:37:20.724 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 14:37:20.740 +00:00 [DBG] Start key discovery request
2019-01-25 14:37:39.608 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 14:37:39.614 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 14:37:39.616 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 14:37:39.627 +00:00 [DBG] Start token request.
2019-01-25 14:37:39.627 +00:00 [DBG] Start client validation
2019-01-25 14:37:39.627 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 14:37:39.628 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 14:37:39.628 +00:00 [DBG] Secret id found: MVC
2019-01-25 14:37:39.628 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:37:39.628 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 14:37:39.628 +00:00 [DBG] Client validation success
2019-01-25 14:37:39.629 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2QADV0UB8:00000001",
  "TimeStamp": "2019-01-25T14:37:39Z",
  "ProcessId": 960,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:37:39.640 +00:00 [DBG] Start token request validation
2019-01-25 14:37:39.641 +00:00 [DBG] Start client credentials token request validation
2019-01-25 14:37:39.642 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 14:37:39.642 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 14:37:39.644 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 14:37:39.656 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****IdiA"
    }
  ],
  "ActivityId": "0HLK2QADV0UB8:00000001",
  "TimeStamp": "2019-01-25T14:37:39Z",
  "ProcessId": 960,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:37:39.660 +00:00 [DBG] Token request success.
2019-01-25 14:37:40.659 +00:00 [INF] Message received:
2019-01-25 14:37:40.659 +00:00 [INF] ----------------------------------
2019-01-25 14:37:40.798 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"d2396f70-6d81-4402-b471-1451f497a153","CreationDate":"2019-01-25T14:37:40.418204Z"}
2019-01-25 14:37:40.801 +00:00 [INF] ----------------------------------
2019-01-25 14:37:42.833 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 4647b95b-910d-48e6-8ab5-464204f5f004 to 1 handlers took 2272 ms
2019-01-25 14:47:05.761 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 14:47:07.093 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 14:47:07.173 +00:00 [INF] Setting number of workers to 1
2019-01-25 14:47:07.193 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 14:47:07.205 +00:00 [INF] Bus Rebus 1 started
2019-01-25 14:47:07.207 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 14:47:07.482 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 14:47:07.517 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 14:47:07.628 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 14:47:07.642 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 14:47:07.661 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 14:47:07.685 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 14:47:07.702 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 14:48:08.305 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 14:48:08.672 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 14:48:08.674 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 14:48:08.691 +00:00 [DBG] Start token request.
2019-01-25 14:48:08.703 +00:00 [DBG] Start client validation
2019-01-25 14:48:08.713 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 14:48:08.714 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 14:48:08.714 +00:00 [DBG] Secret id found: MVC
2019-01-25 14:48:08.729 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:48:08.747 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 14:48:08.748 +00:00 [DBG] Client validation success
2019-01-25 14:48:08.797 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2QGFBBBD7:00000001",
  "TimeStamp": "2019-01-25T14:48:08Z",
  "ProcessId": 1139,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:48:08.909 +00:00 [DBG] Start token request validation
2019-01-25 14:48:08.926 +00:00 [DBG] Start client credentials token request validation
2019-01-25 14:48:08.970 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 14:48:08.983 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 14:48:09.017 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 14:48:09.086 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****SGGA"
    }
  ],
  "ActivityId": "0HLK2QGFBBBD7:00000001",
  "TimeStamp": "2019-01-25T14:48:09Z",
  "ProcessId": 1139,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:48:09.089 +00:00 [DBG] Token request success.
2019-01-25 14:48:09.621 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 14:48:09.622 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 14:48:09.622 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 14:48:09.636 +00:00 [DBG] Start discovery request
2019-01-25 14:48:09.837 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 14:48:09.839 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 14:48:09.839 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 14:48:09.847 +00:00 [DBG] Start key discovery request
2019-01-25 14:50:46.402 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 14:50:46.402 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 14:50:46.402 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 14:50:46.402 +00:00 [DBG] Start token request.
2019-01-25 14:50:46.403 +00:00 [DBG] Start client validation
2019-01-25 14:50:46.403 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 14:50:46.403 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 14:50:46.403 +00:00 [DBG] Secret id found: MVC
2019-01-25 14:50:46.403 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 14:50:46.403 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 14:50:46.403 +00:00 [DBG] Client validation success
2019-01-25 14:50:46.403 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2QGFBBBD9:00000001",
  "TimeStamp": "2019-01-25T14:50:46Z",
  "ProcessId": 1139,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:50:46.418 +00:00 [DBG] Start token request validation
2019-01-25 14:50:46.418 +00:00 [DBG] Start client credentials token request validation
2019-01-25 14:50:46.418 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 14:50:46.419 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 14:50:46.419 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 14:50:46.438 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****jjbA"
    }
  ],
  "ActivityId": "0HLK2QGFBBBD9:00000001",
  "TimeStamp": "2019-01-25T14:50:46Z",
  "ProcessId": 1139,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 14:50:46.439 +00:00 [DBG] Token request success.
2019-01-25 14:50:47.018 +00:00 [INF] Message received:
2019-01-25 14:50:47.024 +00:00 [INF] ----------------------------------
2019-01-25 14:50:47.038 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"8504e80d-7dd8-47b8-8b44-cf604c31219b","CreationDate":"2019-01-25T14:50:46.9354946Z"}
2019-01-25 14:50:47.042 +00:00 [INF] ----------------------------------
2019-01-25 14:50:48.858 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 69729042-1fb1-4ef4-a428-fa136b14954d to 1 handlers took 1844 ms
2019-01-25 14:54:37.704 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 14:54:39.216 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 14:54:39.300 +00:00 [INF] Setting number of workers to 1
2019-01-25 14:54:39.343 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 14:54:39.360 +00:00 [INF] Bus Rebus 1 started
2019-01-25 14:54:39.441 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 14:54:39.577 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 14:54:39.647 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 14:54:39.718 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 14:54:39.720 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 14:54:39.723 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 14:54:39.725 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 14:54:39.729 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 15:14:27.984 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 15:14:28.251 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 15:14:28.253 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 15:14:28.268 +00:00 [DBG] Start token request.
2019-01-25 15:14:28.279 +00:00 [DBG] Start client validation
2019-01-25 15:14:28.287 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 15:14:28.288 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 15:14:28.289 +00:00 [DBG] Secret id found: MVC
2019-01-25 15:14:28.300 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:14:28.314 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 15:14:28.314 +00:00 [DBG] Client validation success
2019-01-25 15:14:28.339 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2QV655798:00000001",
  "TimeStamp": "2019-01-25T15:14:28Z",
  "ProcessId": 1364,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:14:28.408 +00:00 [DBG] Start token request validation
2019-01-25 15:14:28.420 +00:00 [DBG] Start client credentials token request validation
2019-01-25 15:14:28.478 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 15:14:28.498 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 15:14:28.547 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 15:14:28.613 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****knkA"
    }
  ],
  "ActivityId": "0HLK2QV655798:00000001",
  "TimeStamp": "2019-01-25T15:14:28Z",
  "ProcessId": 1364,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:14:28.616 +00:00 [DBG] Token request success.
2019-01-25 15:14:29.143 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 15:14:29.145 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 15:14:29.145 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 15:14:29.180 +00:00 [DBG] Start discovery request
2019-01-25 15:14:29.455 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 15:14:29.455 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 15:14:29.455 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 15:14:29.467 +00:00 [DBG] Start key discovery request
2019-01-25 15:26:44.491 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 15:26:44.492 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 15:26:44.492 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 15:26:44.493 +00:00 [DBG] Start token request.
2019-01-25 15:26:44.493 +00:00 [DBG] Start client validation
2019-01-25 15:26:44.493 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 15:26:44.493 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 15:26:44.495 +00:00 [DBG] Secret id found: MVC
2019-01-25 15:26:44.500 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:26:44.500 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 15:26:44.500 +00:00 [DBG] Client validation success
2019-01-25 15:26:44.500 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2QV65579A:00000001",
  "TimeStamp": "2019-01-25T15:26:44Z",
  "ProcessId": 1364,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:26:44.508 +00:00 [DBG] Start token request validation
2019-01-25 15:26:44.508 +00:00 [DBG] Start client credentials token request validation
2019-01-25 15:26:44.508 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 15:26:44.508 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 15:26:44.509 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 15:26:44.512 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****O6Mg"
    }
  ],
  "ActivityId": "0HLK2QV65579A:00000001",
  "TimeStamp": "2019-01-25T15:26:44Z",
  "ProcessId": 1364,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:26:44.512 +00:00 [DBG] Token request success.
2019-01-25 15:26:45.246 +00:00 [INF] Message received:
2019-01-25 15:26:45.246 +00:00 [INF] ----------------------------------
2019-01-25 15:26:45.254 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"309cde79-03ca-4cff-acc6-f45ff4782fe3","CreationDate":"2019-01-25T15:26:45.0750727Z"}
2019-01-25 15:26:45.255 +00:00 [INF] ----------------------------------
2019-01-25 15:26:47.131 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens ffb3b08c-2ace-472d-a13e-78c7292c21e4 to 1 handlers took 1900 ms
2019-01-25 15:31:57.139 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 15:31:59.217 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 15:31:59.418 +00:00 [INF] Setting number of workers to 1
2019-01-25 15:31:59.460 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 15:31:59.488 +00:00 [INF] Bus Rebus 1 started
2019-01-25 15:31:59.531 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 15:31:59.722 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 15:31:59.838 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 15:31:59.904 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 15:31:59.905 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 15:31:59.905 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 15:31:59.907 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 15:31:59.909 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 15:35:15.819 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 15:35:16.084 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 15:35:16.087 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 15:35:16.101 +00:00 [DBG] Start token request.
2019-01-25 15:35:16.110 +00:00 [DBG] Start client validation
2019-01-25 15:35:16.119 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 15:35:16.120 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 15:35:16.121 +00:00 [DBG] Secret id found: MVC
2019-01-25 15:35:16.136 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:35:16.149 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 15:35:16.149 +00:00 [DBG] Client validation success
2019-01-25 15:35:16.176 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2RAQ12HVD:00000001",
  "TimeStamp": "2019-01-25T15:35:16Z",
  "ProcessId": 2418,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:35:16.245 +00:00 [DBG] Start token request validation
2019-01-25 15:35:16.257 +00:00 [DBG] Start client credentials token request validation
2019-01-25 15:35:16.303 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 15:35:16.315 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 15:35:16.351 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 15:35:16.423 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****sDMA"
    }
  ],
  "ActivityId": "0HLK2RAQ12HVD:00000001",
  "TimeStamp": "2019-01-25T15:35:16Z",
  "ProcessId": 2418,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:35:16.427 +00:00 [DBG] Token request success.
2019-01-25 15:35:16.899 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 15:35:16.903 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 15:35:16.909 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 15:35:16.931 +00:00 [DBG] Start discovery request
2019-01-25 15:35:17.105 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 15:35:17.106 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 15:35:17.107 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 15:35:17.114 +00:00 [DBG] Start key discovery request
2019-01-25 15:39:39.767 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 15:39:39.767 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 15:39:39.768 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 15:39:39.768 +00:00 [DBG] Start token request.
2019-01-25 15:39:39.768 +00:00 [DBG] Start client validation
2019-01-25 15:39:39.770 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 15:39:39.770 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 15:39:39.771 +00:00 [DBG] Secret id found: MVC
2019-01-25 15:39:39.771 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:39:39.772 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 15:39:39.778 +00:00 [DBG] Client validation success
2019-01-25 15:39:39.779 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2RAQ12HVF:00000001",
  "TimeStamp": "2019-01-25T15:39:39Z",
  "ProcessId": 2418,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:39:39.807 +00:00 [DBG] Start token request validation
2019-01-25 15:39:39.807 +00:00 [DBG] Start client credentials token request validation
2019-01-25 15:39:39.808 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 15:39:39.808 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 15:39:39.808 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 15:39:39.840 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****eBPA"
    }
  ],
  "ActivityId": "0HLK2RAQ12HVF:00000001",
  "TimeStamp": "2019-01-25T15:39:39Z",
  "ProcessId": 2418,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:39:39.862 +00:00 [DBG] Token request success.
2019-01-25 15:39:40.477 +00:00 [INF] Message received:
2019-01-25 15:39:40.477 +00:00 [INF] ----------------------------------
2019-01-25 15:39:40.485 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"32b28774-df8a-4b53-a409-7802120979ca","CreationDate":"2019-01-25T15:39:40.3977077Z"}
2019-01-25 15:39:40.487 +00:00 [INF] ----------------------------------
2019-01-25 15:39:42.658 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens e9a400a7-9076-43f4-8c9c-0c9002187d21 to 1 handlers took 2189 ms
2019-01-25 15:40:08.283 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 15:40:08.283 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 15:40:08.283 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 15:40:08.284 +00:00 [DBG] Start token request.
2019-01-25 15:40:08.284 +00:00 [DBG] Start client validation
2019-01-25 15:40:08.286 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 15:40:08.287 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 15:40:08.287 +00:00 [DBG] Secret id found: MVC
2019-01-25 15:40:08.287 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:40:08.287 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 15:40:08.287 +00:00 [DBG] Client validation success
2019-01-25 15:40:08.287 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2RAQ12HVG:00000001",
  "TimeStamp": "2019-01-25T15:40:08Z",
  "ProcessId": 2418,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:40:08.297 +00:00 [DBG] Start token request validation
2019-01-25 15:40:08.297 +00:00 [DBG] Start client credentials token request validation
2019-01-25 15:40:08.304 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 15:40:08.305 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 15:40:08.305 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 15:40:08.310 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****ZMkw"
    }
  ],
  "ActivityId": "0HLK2RAQ12HVG:00000001",
  "TimeStamp": "2019-01-25T15:40:08Z",
  "ProcessId": 2418,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:40:08.311 +00:00 [DBG] Token request success.
2019-01-25 15:40:11.129 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 15:40:11.129 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 15:40:11.130 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 15:40:11.130 +00:00 [DBG] Start token request.
2019-01-25 15:40:11.130 +00:00 [DBG] Start client validation
2019-01-25 15:40:11.130 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 15:40:11.130 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 15:40:11.130 +00:00 [DBG] Secret id found: MVC
2019-01-25 15:40:11.130 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:40:11.130 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 15:40:11.130 +00:00 [DBG] Client validation success
2019-01-25 15:40:11.130 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2RAQ12HVH:00000001",
  "TimeStamp": "2019-01-25T15:40:11Z",
  "ProcessId": 2418,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:40:11.140 +00:00 [DBG] Start token request validation
2019-01-25 15:40:11.140 +00:00 [DBG] Start client credentials token request validation
2019-01-25 15:40:11.141 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 15:40:11.141 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 15:40:11.141 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 15:40:11.153 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****ao_w"
    }
  ],
  "ActivityId": "0HLK2RAQ12HVH:00000001",
  "TimeStamp": "2019-01-25T15:40:11Z",
  "ProcessId": 2418,
  "LocalIpAddress": "172.19.0.7:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:40:11.153 +00:00 [DBG] Token request success.
2019-01-25 15:40:11.447 +00:00 [INF] Message received:
2019-01-25 15:40:11.447 +00:00 [INF] ----------------------------------
2019-01-25 15:40:11.447 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"05438487-9ac5-49ed-b38b-55dab0884489","CreationDate":"2019-01-25T15:40:11.4453741Z"}
2019-01-25 15:40:11.447 +00:00 [INF] ----------------------------------
2019-01-25 15:40:12.239 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens c66a54e4-340c-46df-bea9-4a6ccd514c30 to 1 handlers took 792 ms
2019-01-25 15:43:36.353 +00:00 [WRN] No XML encryptor configured. Key "2808d6ca-b816-45a5-8536-f74d1a55633a" may be persisted to storage in unencrypted form.
2019-01-25 15:43:37.453 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 15:43:38.834 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 15:43:38.893 +00:00 [INF] Setting number of workers to 1
2019-01-25 15:43:38.923 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 15:43:38.936 +00:00 [INF] Bus Rebus 1 started
2019-01-25 15:43:38.971 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 15:43:39.111 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 15:43:39.210 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 15:43:39.240 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 15:43:39.241 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 15:43:39.245 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 15:43:39.249 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 15:43:39.253 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 15:44:40.807 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 15:44:41.278 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 15:44:41.280 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 15:44:41.290 +00:00 [DBG] Start discovery request
2019-01-25 15:44:41.576 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 15:44:41.586 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 15:44:41.593 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 15:44:41.653 +00:00 [DBG] Start key discovery request
2019-01-25 15:44:41.817 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 15:44:41.818 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 15:44:41.824 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-25 15:44:41.836 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-25 15:44:41.837 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-25 15:44:41.845 +00:00 [DBG] Start authorize request
2019-01-25 15:44:41.860 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 15:44:41.870 +00:00 [DBG] No user present in authorize request
2019-01-25 15:44:41.892 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 15:44:41.916 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:44:41.927 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 15:44:41.935 +00:00 [DBG] No PKCE used.
2019-01-25 15:44:42.006 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 15:44:42.026 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8AXwgMs7ZZNIrB9xh1q0l8eMUoW0mKyU0v7g53eDHCBmCSGgPSTRMTbQ3460g_RRAnN9JzbYV6dAJB1MU8I_1vqwelgW3yXV5nEIMZBhF_wRQai2KM0iQfp1j26KMichjkNyNnkigCaKk7HFdvz_NdK7glqEKMckZOeenU8H3jQTd6f9FsA9l8KuzwbovU4l_JYC20L_MVUJKLygLW63xpEWjvsYUHfQcXJVY-R6X8OqDp1BTXGW1eIxqhSlwEekLXHDHsR2_wt7KJP2-UtPqcJF30XXNv05dykCVyCEVR9t_7UdwnMw8zjJrAkKLZLb8TGklS_wOw8H6zBOHHDKH6M",
  "Nonce": "636840278817377339.ZWEyOTQyNDYtNjdmNS00ZTcyLWE2YmItMGFjMjIzMGE3YTI4NzRjZDMxYzItNGM2Zi00M2EwLWEzYWUtY2U5NzFhYTI0NjQ0",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840278817377339.ZWEyOTQyNDYtNjdmNS00ZTcyLWE2YmItMGFjMjIzMGE3YTI4NzRjZDMxYzItNGM2Zi00M2EwLWEzYWUtY2U5NzFhYTI0NjQ0",
    "state": "CfDJ8AXwgMs7ZZNIrB9xh1q0l8eMUoW0mKyU0v7g53eDHCBmCSGgPSTRMTbQ3460g_RRAnN9JzbYV6dAJB1MU8I_1vqwelgW3yXV5nEIMZBhF_wRQai2KM0iQfp1j26KMichjkNyNnkigCaKk7HFdvz_NdK7glqEKMckZOeenU8H3jQTd6f9FsA9l8KuzwbovU4l_JYC20L_MVUJKLygLW63xpEWjvsYUHfQcXJVY-R6X8OqDp1BTXGW1eIxqhSlwEekLXHDHsR2_wt7KJP2-UtPqcJF30XXNv05dykCVyCEVR9t_7UdwnMw8zjJrAkKLZLb8TGklS_wOw8H6zBOHHDKH6M",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 15:44:42.058 +00:00 [INF] Showing login: User is not authenticated
2019-01-25 15:44:42.077 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 15:44:42.078 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 15:44:42.474 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 15:44:42.476 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 15:44:42.476 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:44:42.477 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 15:44:42.477 +00:00 [DBG] No PKCE used.
2019-01-25 15:44:42.478 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 15:44:42.483 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:45:54.088 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-25 15:45:54.090 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 15:45:54.090 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 15:45:55.249 +00:00 [DBG] Augmenting SignInContext
2019-01-25 15:45:55.254 +00:00 [DBG] Adding idp claim with value: local
2019-01-25 15:45:55.254 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-25 15:45:55.256 +00:00 [DBG] Adding auth_time claim with value: 1548431155
2019-01-25 15:45:55.262 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 15:45:55.275 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 15:45:55.301 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK2RG2CIF22:00000003",
  "TimeStamp": "2019-01-25T15:45:55Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:45:55.324 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-25 15:45:55.325 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-25 15:45:55.326 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-25 15:45:55.337 +00:00 [DBG] Start authorize callback request
2019-01-25 15:45:55.343 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 15:45:55.343 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 15:45:55.343 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:45:55.344 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 15:45:55.344 +00:00 [DBG] No PKCE used.
2019-01-25 15:45:55.345 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 15:45:55.346 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8AXwgMs7ZZNIrB9xh1q0l8eMUoW0mKyU0v7g53eDHCBmCSGgPSTRMTbQ3460g_RRAnN9JzbYV6dAJB1MU8I_1vqwelgW3yXV5nEIMZBhF_wRQai2KM0iQfp1j26KMichjkNyNnkigCaKk7HFdvz_NdK7glqEKMckZOeenU8H3jQTd6f9FsA9l8KuzwbovU4l_JYC20L_MVUJKLygLW63xpEWjvsYUHfQcXJVY-R6X8OqDp1BTXGW1eIxqhSlwEekLXHDHsR2_wt7KJP2-UtPqcJF30XXNv05dykCVyCEVR9t_7UdwnMw8zjJrAkKLZLb8TGklS_wOw8H6zBOHHDKH6M",
  "Nonce": "636840278817377339.ZWEyOTQyNDYtNjdmNS00ZTcyLWE2YmItMGFjMjIzMGE3YTI4NzRjZDMxYzItNGM2Zi00M2EwLWEzYWUtY2U5NzFhYTI0NjQ0",
  "SessionId": "b46b4b34116ad1ca8eba015b191f1ff8",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840278817377339.ZWEyOTQyNDYtNjdmNS00ZTcyLWE2YmItMGFjMjIzMGE3YTI4NzRjZDMxYzItNGM2Zi00M2EwLWEzYWUtY2U5NzFhYTI0NjQ0",
    "state": "CfDJ8AXwgMs7ZZNIrB9xh1q0l8eMUoW0mKyU0v7g53eDHCBmCSGgPSTRMTbQ3460g_RRAnN9JzbYV6dAJB1MU8I_1vqwelgW3yXV5nEIMZBhF_wRQai2KM0iQfp1j26KMichjkNyNnkigCaKk7HFdvz_NdK7glqEKMckZOeenU8H3jQTd6f9FsA9l8KuzwbovU4l_JYC20L_MVUJKLygLW63xpEWjvsYUHfQcXJVY-R6X8OqDp1BTXGW1eIxqhSlwEekLXHDHsR2_wt7KJP2-UtPqcJF30XXNv05dykCVyCEVR9t_7UdwnMw8zjJrAkKLZLb8TGklS_wOw8H6zBOHHDKH6M",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 15:45:55.370 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-25 15:45:55.371 +00:00 [INF] Showing consent: User has not yet consented
2019-01-25 15:45:55.429 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 15:45:55.429 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:45:55.429 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 15:45:55.429 +00:00 [DBG] No PKCE used.
2019-01-25 15:45:55.430 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 15:45:55.430 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:45:57.108 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-25 15:45:57.143 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 15:45:57.144 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:45:57.144 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 15:45:57.146 +00:00 [DBG] No PKCE used.
2019-01-25 15:45:57.147 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 15:45:57.205 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-25 15:45:57.205 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-25 15:45:57.206 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-25 15:45:57.206 +00:00 [DBG] Start authorize callback request
2019-01-25 15:45:57.230 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 15:45:57.231 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 15:45:57.232 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:45:57.232 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 15:45:57.233 +00:00 [DBG] No PKCE used.
2019-01-25 15:45:57.234 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 15:45:57.235 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8AXwgMs7ZZNIrB9xh1q0l8eMUoW0mKyU0v7g53eDHCBmCSGgPSTRMTbQ3460g_RRAnN9JzbYV6dAJB1MU8I_1vqwelgW3yXV5nEIMZBhF_wRQai2KM0iQfp1j26KMichjkNyNnkigCaKk7HFdvz_NdK7glqEKMckZOeenU8H3jQTd6f9FsA9l8KuzwbovU4l_JYC20L_MVUJKLygLW63xpEWjvsYUHfQcXJVY-R6X8OqDp1BTXGW1eIxqhSlwEekLXHDHsR2_wt7KJP2-UtPqcJF30XXNv05dykCVyCEVR9t_7UdwnMw8zjJrAkKLZLb8TGklS_wOw8H6zBOHHDKH6M",
  "Nonce": "636840278817377339.ZWEyOTQyNDYtNjdmNS00ZTcyLWE2YmItMGFjMjIzMGE3YTI4NzRjZDMxYzItNGM2Zi00M2EwLWEzYWUtY2U5NzFhYTI0NjQ0",
  "SessionId": "b46b4b34116ad1ca8eba015b191f1ff8",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840278817377339.ZWEyOTQyNDYtNjdmNS00ZTcyLWE2YmItMGFjMjIzMGE3YTI4NzRjZDMxYzItNGM2Zi00M2EwLWEzYWUtY2U5NzFhYTI0NjQ0",
    "state": "CfDJ8AXwgMs7ZZNIrB9xh1q0l8eMUoW0mKyU0v7g53eDHCBmCSGgPSTRMTbQ3460g_RRAnN9JzbYV6dAJB1MU8I_1vqwelgW3yXV5nEIMZBhF_wRQai2KM0iQfp1j26KMichjkNyNnkigCaKk7HFdvz_NdK7glqEKMckZOeenU8H3jQTd6f9FsA9l8KuzwbovU4l_JYC20L_MVUJKLygLW63xpEWjvsYUHfQcXJVY-R6X8OqDp1BTXGW1eIxqhSlwEekLXHDHsR2_wt7KJP2-UtPqcJF30XXNv05dykCVyCEVR9t_7UdwnMw8zjJrAkKLZLb8TGklS_wOw8H6zBOHHDKH6M",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 15:45:57.237 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-25 15:45:57.255 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-25 15:45:57.270 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-25 15:45:57.278 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 15:45:57.306 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-25 15:45:57.334 +00:00 [DBG] Creating Implicit Flow response.
2019-01-25 15:45:57.351 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 15:45:57.483 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****cI2w"
    },
    {
      "TokenType": "code",
      "TokenValue": "****41a7"
    }
  ],
  "ActivityId": "0HLK2RG2CIF22:00000007",
  "TimeStamp": "2019-01-25T15:45:57Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:45:57.493 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8AXwgMs7ZZNIrB9xh1q0l8eMUoW0mKyU0v7g53eDHCBmCSGgPSTRMTbQ3460g_RRAnN9JzbYV6dAJB1MU8I_1vqwelgW3yXV5nEIMZBhF_wRQai2KM0iQfp1j26KMichjkNyNnkigCaKk7HFdvz_NdK7glqEKMckZOeenU8H3jQTd6f9FsA9l8KuzwbovU4l_JYC20L_MVUJKLygLW63xpEWjvsYUHfQcXJVY-R6X8OqDp1BTXGW1eIxqhSlwEekLXHDHsR2_wt7KJP2-UtPqcJF30XXNv05dykCVyCEVR9t_7UdwnMw8zjJrAkKLZLb8TGklS_wOw8H6zBOHHDKH6M",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-25 15:45:57.524 +00:00 [DBG] Augmenting SignInContext
2019-01-25 15:45:57.526 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 15:45:57.937 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 15:45:57.945 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 15:45:57.949 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 15:45:57.962 +00:00 [DBG] Start token request.
2019-01-25 15:45:57.984 +00:00 [DBG] Start client validation
2019-01-25 15:45:57.996 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 15:45:58.005 +00:00 [DBG] Start parsing for secret in post body
2019-01-25 15:45:58.010 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-25 15:45:58.011 +00:00 [DBG] Secret id found: MVC
2019-01-25 15:45:58.012 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:45:58.026 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 15:45:58.027 +00:00 [DBG] Client validation success
2019-01-25 15:45:58.036 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2RG2CIF21:00000003",
  "TimeStamp": "2019-01-25T15:45:58Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:45:58.057 +00:00 [DBG] Start token request validation
2019-01-25 15:45:58.078 +00:00 [DBG] Start validation of authorization code token request
2019-01-25 15:45:58.110 +00:00 [DBG] Validation of authorization code token request success
2019-01-25 15:45:58.120 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "59eb765a9b7dbc591ff32ea80ecd6e7d1984038c13079508c606f832f2a841a7",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "59eb765a9b7dbc591ff32ea80ecd6e7d1984038c13079508c606f832f2a841a7",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-25 15:45:58.150 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:45:58.168 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 15:45:58.168 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 15:45:58.198 +00:00 [DBG] Creating refresh token
2019-01-25 15:45:58.199 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-25 15:45:58.218 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:45:58.219 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 15:45:58.236 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****SCPw"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****2053"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Vfcg"
    }
  ],
  "ActivityId": "0HLK2RG2CIF21:00000003",
  "TimeStamp": "2019-01-25T15:45:58Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:45:58.239 +00:00 [DBG] Token request success.
2019-01-25 15:45:58.285 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-25 15:45:58.288 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-25 15:45:58.289 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-25 15:45:58.301 +00:00 [DBG] Start userinfo request
2019-01-25 15:45:58.309 +00:00 [DBG] Bearer token found in header
2019-01-25 15:45:58.382 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:45:58.388 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:45:58.391 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 15:45:58.398 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548431158,
    "exp": 1548434758,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548431155,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-25 15:45:58.420 +00:00 [DBG] Creating userinfo response
2019-01-25 15:45:58.426 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 15:45:58.431 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 15:45:58.441 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-25 15:45:58.441 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 15:45:58.454 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-25 15:45:58.455 +00:00 [DBG] End userinfo request
2019-01-25 15:45:59.045 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 15:45:59.049 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 15:45:59.050 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 15:45:59.057 +00:00 [DBG] Start token request.
2019-01-25 15:45:59.058 +00:00 [DBG] Start client validation
2019-01-25 15:45:59.058 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 15:45:59.059 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 15:45:59.059 +00:00 [DBG] Secret id found: MVC
2019-01-25 15:45:59.060 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:45:59.061 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 15:45:59.061 +00:00 [DBG] Client validation success
2019-01-25 15:45:59.062 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2RG2CIF24:00000001",
  "TimeStamp": "2019-01-25T15:45:59Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:45:59.093 +00:00 [DBG] Start token request validation
2019-01-25 15:45:59.128 +00:00 [DBG] Start client credentials token request validation
2019-01-25 15:45:59.144 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 15:45:59.159 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 15:45:59.171 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 15:45:59.184 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****1eTA"
    }
  ],
  "ActivityId": "0HLK2RG2CIF24:00000001",
  "TimeStamp": "2019-01-25T15:45:59Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:45:59.188 +00:00 [DBG] Token request success.
2019-01-25 15:45:59.640 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 15:45:59.641 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 15:45:59.641 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 15:45:59.641 +00:00 [DBG] Start discovery request
2019-01-25 15:45:59.846 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 15:45:59.846 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 15:45:59.847 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 15:45:59.847 +00:00 [DBG] Start key discovery request
2019-01-25 15:46:05.849 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 15:46:05.849 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 15:46:05.849 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 15:46:05.849 +00:00 [DBG] Start token request.
2019-01-25 15:46:05.849 +00:00 [DBG] Start client validation
2019-01-25 15:46:05.849 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 15:46:05.849 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 15:46:05.849 +00:00 [DBG] Secret id found: MVC
2019-01-25 15:46:05.849 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:46:05.849 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 15:46:05.849 +00:00 [DBG] Client validation success
2019-01-25 15:46:05.850 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2RG2CIF26:00000001",
  "TimeStamp": "2019-01-25T15:46:05Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:46:05.858 +00:00 [DBG] Start token request validation
2019-01-25 15:46:05.858 +00:00 [DBG] Start client credentials token request validation
2019-01-25 15:46:05.858 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 15:46:05.860 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 15:46:05.860 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 15:46:05.876 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****1dHg"
    }
  ],
  "ActivityId": "0HLK2RG2CIF26:00000001",
  "TimeStamp": "2019-01-25T15:46:05Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:46:05.876 +00:00 [DBG] Token request success.
2019-01-25 15:46:06.472 +00:00 [INF] Message received:
2019-01-25 15:46:06.472 +00:00 [INF] ----------------------------------
2019-01-25 15:46:06.482 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"e2a2fc58-0e70-44da-9e79-668990f24f59","CreationDate":"2019-01-25T15:46:06.3697953Z"}
2019-01-25 15:46:06.483 +00:00 [INF] ----------------------------------
2019-01-25 15:46:07.493 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 69a4303f-6d95-4843-9b5d-97acb171238b to 1 handlers took 1028 ms
2019-01-25 15:47:20.397 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 15:47:22.150 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 15:47:22.315 +00:00 [INF] Setting number of workers to 1
2019-01-25 15:47:22.340 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 15:47:22.503 +00:00 [INF] Bus Rebus 1 started
2019-01-25 15:47:22.504 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 15:47:22.805 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 15:47:22.873 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 15:47:22.913 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 15:47:22.925 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 15:47:22.928 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 15:47:22.931 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 15:47:22.933 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 15:48:40.067 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 15:48:40.335 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 15:48:40.337 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 15:48:40.352 +00:00 [DBG] Start token request.
2019-01-25 15:48:40.364 +00:00 [DBG] Start client validation
2019-01-25 15:48:40.373 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 15:48:40.374 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 15:48:40.375 +00:00 [DBG] Secret id found: MVC
2019-01-25 15:48:40.389 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:48:40.402 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 15:48:40.402 +00:00 [DBG] Client validation success
2019-01-25 15:48:40.431 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2RI9MVRV7:00000001",
  "TimeStamp": "2019-01-25T15:48:40Z",
  "ProcessId": 153,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:48:40.502 +00:00 [DBG] Start token request validation
2019-01-25 15:48:40.514 +00:00 [DBG] Start client credentials token request validation
2019-01-25 15:48:40.558 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 15:48:40.571 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 15:48:40.612 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 15:48:40.695 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****H2aw"
    }
  ],
  "ActivityId": "0HLK2RI9MVRV7:00000001",
  "TimeStamp": "2019-01-25T15:48:40Z",
  "ProcessId": 153,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:48:40.697 +00:00 [DBG] Token request success.
2019-01-25 15:48:41.261 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 15:48:41.263 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 15:48:41.263 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 15:48:41.288 +00:00 [DBG] Start discovery request
2019-01-25 15:48:41.490 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 15:48:41.492 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 15:48:41.492 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 15:48:41.502 +00:00 [DBG] Start key discovery request
2019-01-25 15:48:48.822 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 15:48:48.841 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 15:48:48.841 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 15:48:48.841 +00:00 [DBG] Start token request.
2019-01-25 15:48:48.841 +00:00 [DBG] Start client validation
2019-01-25 15:48:48.841 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 15:48:48.841 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 15:48:48.841 +00:00 [DBG] Secret id found: MVC
2019-01-25 15:48:48.841 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 15:48:48.841 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 15:48:48.841 +00:00 [DBG] Client validation success
2019-01-25 15:48:48.843 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2RI9MVRV9:00000001",
  "TimeStamp": "2019-01-25T15:48:48Z",
  "ProcessId": 153,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:48:48.866 +00:00 [DBG] Start token request validation
2019-01-25 15:48:48.867 +00:00 [DBG] Start client credentials token request validation
2019-01-25 15:48:48.867 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 15:48:48.873 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 15:48:48.876 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 15:48:48.882 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Pqzg"
    }
  ],
  "ActivityId": "0HLK2RI9MVRV9:00000001",
  "TimeStamp": "2019-01-25T15:48:48Z",
  "ProcessId": 153,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 15:48:48.883 +00:00 [DBG] Token request success.
2019-01-25 15:48:49.534 +00:00 [INF] Message received:
2019-01-25 15:48:49.536 +00:00 [INF] ----------------------------------
2019-01-25 15:48:49.544 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"6a103f81-013a-4ea6-a548-c606e85fea6c","CreationDate":"2019-01-25T15:48:49.4634289Z"}
2019-01-25 15:48:49.549 +00:00 [INF] ----------------------------------
2019-01-25 15:48:51.891 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 86bf8db2-4bb9-40ce-8544-19a6edf86dfb to 1 handlers took 2362 ms
2019-01-25 16:35:56.804 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 16:35:58.597 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 16:35:58.660 +00:00 [INF] Setting number of workers to 1
2019-01-25 16:35:58.698 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 16:35:58.786 +00:00 [INF] Bus Rebus 1 started
2019-01-25 16:35:58.866 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 16:35:59.071 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 16:35:59.099 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 16:35:59.148 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 16:35:59.154 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 16:35:59.156 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 16:35:59.179 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 16:35:59.182 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 16:37:13.611 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 16:37:13.896 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 16:37:13.900 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 16:37:13.912 +00:00 [DBG] Start token request.
2019-01-25 16:37:13.925 +00:00 [DBG] Start client validation
2019-01-25 16:37:13.933 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 16:37:13.934 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 16:37:13.935 +00:00 [DBG] Secret id found: MVC
2019-01-25 16:37:13.948 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:37:13.962 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 16:37:13.963 +00:00 [DBG] Client validation success
2019-01-25 16:37:13.989 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2SDE09S1J:00000001",
  "TimeStamp": "2019-01-25T16:37:13Z",
  "ProcessId": 288,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 16:37:14.059 +00:00 [DBG] Start token request validation
2019-01-25 16:37:14.070 +00:00 [DBG] Start client credentials token request validation
2019-01-25 16:37:14.111 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 16:37:14.122 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 16:37:14.153 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 16:37:14.279 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****0nBw"
    }
  ],
  "ActivityId": "0HLK2SDE09S1J:00000001",
  "TimeStamp": "2019-01-25T16:37:14Z",
  "ProcessId": 288,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 16:37:14.287 +00:00 [DBG] Token request success.
2019-01-25 16:37:14.814 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 16:37:14.836 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 16:37:14.836 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 16:37:14.976 +00:00 [DBG] Start discovery request
2019-01-25 16:37:15.112 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 16:37:15.115 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 16:37:15.116 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 16:37:15.127 +00:00 [DBG] Start key discovery request
2019-01-25 16:37:21.388 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 16:37:21.388 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 16:37:21.388 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 16:37:21.389 +00:00 [DBG] Start token request.
2019-01-25 16:37:21.389 +00:00 [DBG] Start client validation
2019-01-25 16:37:21.389 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 16:37:21.389 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 16:37:21.389 +00:00 [DBG] Secret id found: MVC
2019-01-25 16:37:21.389 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:37:21.389 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 16:37:21.389 +00:00 [DBG] Client validation success
2019-01-25 16:37:21.389 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2SDE09S1L:00000001",
  "TimeStamp": "2019-01-25T16:37:21Z",
  "ProcessId": 288,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 16:37:21.424 +00:00 [DBG] Start token request validation
2019-01-25 16:37:21.437 +00:00 [DBG] Start client credentials token request validation
2019-01-25 16:37:21.438 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 16:37:21.439 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 16:37:21.440 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 16:37:21.449 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****rkBg"
    }
  ],
  "ActivityId": "0HLK2SDE09S1L:00000001",
  "TimeStamp": "2019-01-25T16:37:21Z",
  "ProcessId": 288,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 16:37:21.453 +00:00 [DBG] Token request success.
2019-01-25 16:37:22.082 +00:00 [INF] Message received:
2019-01-25 16:37:22.082 +00:00 [INF] ----------------------------------
2019-01-25 16:37:22.102 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"e157ade8-b6ac-4084-96b4-775686c82782","CreationDate":"2019-01-25T16:37:21.9747521Z"}
2019-01-25 16:37:22.113 +00:00 [INF] ----------------------------------
2019-01-25 16:37:24.258 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 648fa134-882e-4470-ac70-848085ccdc72 to 1 handlers took 2200 ms
2019-01-25 16:41:26.123 +00:00 [WRN] No XML encryptor configured. Key "1d499a4f-2511-4b78-8556-3a0c934ac21f" may be persisted to storage in unencrypted form.
2019-01-25 16:41:27.223 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 16:41:28.408 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 16:41:28.468 +00:00 [INF] Setting number of workers to 1
2019-01-25 16:41:28.486 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 16:41:28.519 +00:00 [INF] Bus Rebus 1 started
2019-01-25 16:41:28.577 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 16:41:28.714 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 16:41:28.771 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 16:41:28.803 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 16:41:28.814 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 16:41:28.817 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 16:41:28.822 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 16:41:28.828 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 16:42:39.463 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 16:42:39.744 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 16:42:39.746 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 16:42:39.752 +00:00 [DBG] Start discovery request
2019-01-25 16:42:39.904 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 16:42:39.908 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 16:42:39.910 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 16:42:39.944 +00:00 [DBG] Start key discovery request
2019-01-25 16:42:40.138 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 16:42:40.139 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 16:42:40.143 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-25 16:42:40.149 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-25 16:42:40.149 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-25 16:42:40.157 +00:00 [DBG] Start authorize request
2019-01-25 16:42:40.171 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 16:42:40.183 +00:00 [DBG] No user present in authorize request
2019-01-25 16:42:40.192 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 16:42:40.214 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:42:40.224 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 16:42:40.227 +00:00 [DBG] No PKCE used.
2019-01-25 16:42:40.283 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 16:42:40.297 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYlkZ03BHbE7bAIxOCpgxVxT4JymmlPa5L3r2g7_KH9RDcd-66j31QdTwTVAaf28Pyxfx1hmxVdag9I_exy_sdK-wJBwoccE-h6zegfr6yVGbyJ604IhKRqPcdOlGRpaX3IXQ9ID679J5vWUpMq51twWD2u4QwKfBNxHuW_3POYqm8QFVoJnAeM28--ej5993hBLS_aVpaYgAdlVLV1q92FARVrG86e44mNxBMcXj1OFNSP4pW2oGt-hDyauQjZXE94_Zn1b69n5q78EalMyowTJwAOCk5VmxlXxHIKYvVax2Ldf3LeWZJWXgSaMhbW2c0",
  "Nonce": "636840313600580552.OGM3NTA5YmYtMjM1Zi00OGUzLWFhYWUtY2QyNmQ0YzMwNzQ5MThhOGFmNDYtMWI5Zi00ZTUwLWIzZWMtMmZiZGQ4ZjJiNWZi",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840313600580552.OGM3NTA5YmYtMjM1Zi00OGUzLWFhYWUtY2QyNmQ0YzMwNzQ5MThhOGFmNDYtMWI5Zi00ZTUwLWIzZWMtMmZiZGQ4ZjJiNWZi",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYlkZ03BHbE7bAIxOCpgxVxT4JymmlPa5L3r2g7_KH9RDcd-66j31QdTwTVAaf28Pyxfx1hmxVdag9I_exy_sdK-wJBwoccE-h6zegfr6yVGbyJ604IhKRqPcdOlGRpaX3IXQ9ID679J5vWUpMq51twWD2u4QwKfBNxHuW_3POYqm8QFVoJnAeM28--ej5993hBLS_aVpaYgAdlVLV1q92FARVrG86e44mNxBMcXj1OFNSP4pW2oGt-hDyauQjZXE94_Zn1b69n5q78EalMyowTJwAOCk5VmxlXxHIKYvVax2Ldf3LeWZJWXgSaMhbW2c0",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 16:42:40.313 +00:00 [INF] Showing login: User is not authenticated
2019-01-25 16:42:40.330 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 16:42:40.331 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 16:42:40.672 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 16:42:40.673 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 16:42:40.676 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:42:40.676 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 16:42:40.676 +00:00 [DBG] No PKCE used.
2019-01-25 16:42:40.677 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 16:42:40.684 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:47:24.280 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-25 16:47:24.282 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 16:47:24.283 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 16:47:25.423 +00:00 [DBG] Augmenting SignInContext
2019-01-25 16:47:25.428 +00:00 [DBG] Adding idp claim with value: local
2019-01-25 16:47:25.429 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-25 16:47:25.431 +00:00 [DBG] Adding auth_time claim with value: 1548434845
2019-01-25 16:47:25.437 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 16:47:25.450 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 16:47:25.478 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK2SGF3SJ38:00000001",
  "TimeStamp": "2019-01-25T16:47:25Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 16:47:25.502 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-25 16:47:25.508 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-25 16:47:25.509 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-25 16:47:25.518 +00:00 [DBG] Start authorize callback request
2019-01-25 16:47:25.528 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 16:47:25.529 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 16:47:25.530 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:47:25.531 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 16:47:25.532 +00:00 [DBG] No PKCE used.
2019-01-25 16:47:25.534 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 16:47:25.535 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYlkZ03BHbE7bAIxOCpgxVxT4JymmlPa5L3r2g7_KH9RDcd-66j31QdTwTVAaf28Pyxfx1hmxVdag9I_exy_sdK-wJBwoccE-h6zegfr6yVGbyJ604IhKRqPcdOlGRpaX3IXQ9ID679J5vWUpMq51twWD2u4QwKfBNxHuW_3POYqm8QFVoJnAeM28--ej5993hBLS_aVpaYgAdlVLV1q92FARVrG86e44mNxBMcXj1OFNSP4pW2oGt-hDyauQjZXE94_Zn1b69n5q78EalMyowTJwAOCk5VmxlXxHIKYvVax2Ldf3LeWZJWXgSaMhbW2c0",
  "Nonce": "636840313600580552.OGM3NTA5YmYtMjM1Zi00OGUzLWFhYWUtY2QyNmQ0YzMwNzQ5MThhOGFmNDYtMWI5Zi00ZTUwLWIzZWMtMmZiZGQ4ZjJiNWZi",
  "SessionId": "4af8f8c04488d15696277b90916a58e2",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840313600580552.OGM3NTA5YmYtMjM1Zi00OGUzLWFhYWUtY2QyNmQ0YzMwNzQ5MThhOGFmNDYtMWI5Zi00ZTUwLWIzZWMtMmZiZGQ4ZjJiNWZi",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYlkZ03BHbE7bAIxOCpgxVxT4JymmlPa5L3r2g7_KH9RDcd-66j31QdTwTVAaf28Pyxfx1hmxVdag9I_exy_sdK-wJBwoccE-h6zegfr6yVGbyJ604IhKRqPcdOlGRpaX3IXQ9ID679J5vWUpMq51twWD2u4QwKfBNxHuW_3POYqm8QFVoJnAeM28--ej5993hBLS_aVpaYgAdlVLV1q92FARVrG86e44mNxBMcXj1OFNSP4pW2oGt-hDyauQjZXE94_Zn1b69n5q78EalMyowTJwAOCk5VmxlXxHIKYvVax2Ldf3LeWZJWXgSaMhbW2c0",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 16:47:25.561 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-25 16:47:25.562 +00:00 [INF] Showing consent: User has not yet consented
2019-01-25 16:47:25.608 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 16:47:25.608 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:47:25.609 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 16:47:25.609 +00:00 [DBG] No PKCE used.
2019-01-25 16:47:25.610 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 16:47:25.610 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:47:29.707 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-25 16:47:29.739 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 16:47:29.739 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:47:29.739 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 16:47:29.739 +00:00 [DBG] No PKCE used.
2019-01-25 16:47:29.739 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 16:47:29.810 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-25 16:47:29.812 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-25 16:47:29.814 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-25 16:47:29.819 +00:00 [DBG] Start authorize callback request
2019-01-25 16:47:29.831 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 16:47:29.838 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 16:47:29.838 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:47:29.838 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 16:47:29.839 +00:00 [DBG] No PKCE used.
2019-01-25 16:47:29.840 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 16:47:29.841 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYlkZ03BHbE7bAIxOCpgxVxT4JymmlPa5L3r2g7_KH9RDcd-66j31QdTwTVAaf28Pyxfx1hmxVdag9I_exy_sdK-wJBwoccE-h6zegfr6yVGbyJ604IhKRqPcdOlGRpaX3IXQ9ID679J5vWUpMq51twWD2u4QwKfBNxHuW_3POYqm8QFVoJnAeM28--ej5993hBLS_aVpaYgAdlVLV1q92FARVrG86e44mNxBMcXj1OFNSP4pW2oGt-hDyauQjZXE94_Zn1b69n5q78EalMyowTJwAOCk5VmxlXxHIKYvVax2Ldf3LeWZJWXgSaMhbW2c0",
  "Nonce": "636840313600580552.OGM3NTA5YmYtMjM1Zi00OGUzLWFhYWUtY2QyNmQ0YzMwNzQ5MThhOGFmNDYtMWI5Zi00ZTUwLWIzZWMtMmZiZGQ4ZjJiNWZi",
  "SessionId": "4af8f8c04488d15696277b90916a58e2",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840313600580552.OGM3NTA5YmYtMjM1Zi00OGUzLWFhYWUtY2QyNmQ0YzMwNzQ5MThhOGFmNDYtMWI5Zi00ZTUwLWIzZWMtMmZiZGQ4ZjJiNWZi",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYlkZ03BHbE7bAIxOCpgxVxT4JymmlPa5L3r2g7_KH9RDcd-66j31QdTwTVAaf28Pyxfx1hmxVdag9I_exy_sdK-wJBwoccE-h6zegfr6yVGbyJ604IhKRqPcdOlGRpaX3IXQ9ID679J5vWUpMq51twWD2u4QwKfBNxHuW_3POYqm8QFVoJnAeM28--ej5993hBLS_aVpaYgAdlVLV1q92FARVrG86e44mNxBMcXj1OFNSP4pW2oGt-hDyauQjZXE94_Zn1b69n5q78EalMyowTJwAOCk5VmxlXxHIKYvVax2Ldf3LeWZJWXgSaMhbW2c0",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 16:47:29.842 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-25 16:47:29.857 +00:00 [INF] User consented to scopes: ["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"]
2019-01-25 16:47:29.878 +00:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","Basket.API","Ordering.API","CasaDoCodigo.API","offline_access"]
2019-01-25 16:47:29.884 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 16:47:29.904 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-25 16:47:29.931 +00:00 [DBG] Creating Implicit Flow response.
2019-01-25 16:47:29.945 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 16:47:30.087 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****a69A"
    },
    {
      "TokenType": "code",
      "TokenValue": "****2c80"
    }
  ],
  "ActivityId": "0HLK2SGF3SJ38:00000005",
  "TimeStamp": "2019-01-25T16:47:30Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 16:47:30.100 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYlkZ03BHbE7bAIxOCpgxVxT4JymmlPa5L3r2g7_KH9RDcd-66j31QdTwTVAaf28Pyxfx1hmxVdag9I_exy_sdK-wJBwoccE-h6zegfr6yVGbyJ604IhKRqPcdOlGRpaX3IXQ9ID679J5vWUpMq51twWD2u4QwKfBNxHuW_3POYqm8QFVoJnAeM28--ej5993hBLS_aVpaYgAdlVLV1q92FARVrG86e44mNxBMcXj1OFNSP4pW2oGt-hDyauQjZXE94_Zn1b69n5q78EalMyowTJwAOCk5VmxlXxHIKYvVax2Ldf3LeWZJWXgSaMhbW2c0",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-25 16:47:30.134 +00:00 [DBG] Augmenting SignInContext
2019-01-25 16:47:30.135 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 16:47:30.684 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 16:47:30.691 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 16:47:30.692 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 16:47:30.714 +00:00 [DBG] Start token request.
2019-01-25 16:47:30.726 +00:00 [DBG] Start client validation
2019-01-25 16:47:30.736 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 16:47:30.743 +00:00 [DBG] Start parsing for secret in post body
2019-01-25 16:47:30.748 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-25 16:47:30.748 +00:00 [DBG] Secret id found: MVC
2019-01-25 16:47:30.748 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:47:30.767 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 16:47:30.767 +00:00 [DBG] Client validation success
2019-01-25 16:47:30.777 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2SGF3SJ3A:00000001",
  "TimeStamp": "2019-01-25T16:47:30Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 16:47:30.798 +00:00 [DBG] Start token request validation
2019-01-25 16:47:30.815 +00:00 [DBG] Start validation of authorization code token request
2019-01-25 16:47:30.845 +00:00 [DBG] Validation of authorization code token request success
2019-01-25 16:47:30.853 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "6e0eea154c97b9ba607216f00742bca7e7cebaaeb140e95610e1528eb0742c80",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "6e0eea154c97b9ba607216f00742bca7e7cebaaeb140e95610e1528eb0742c80",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-25 16:47:30.878 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:47:30.893 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 16:47:30.893 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 16:47:30.915 +00:00 [DBG] Creating refresh token
2019-01-25 16:47:30.915 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-25 16:47:30.934 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:47:30.935 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 16:47:30.950 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****vulg"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****8962"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****yWvw"
    }
  ],
  "ActivityId": "0HLK2SGF3SJ3A:00000001",
  "TimeStamp": "2019-01-25T16:47:30Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 16:47:30.954 +00:00 [DBG] Token request success.
2019-01-25 16:47:31.004 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-25 16:47:31.007 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-25 16:47:31.007 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-25 16:47:31.031 +00:00 [DBG] Start userinfo request
2019-01-25 16:47:31.039 +00:00 [DBG] Bearer token found in header
2019-01-25 16:47:31.129 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:47:31.133 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:47:31.135 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 16:47:31.140 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548434850,
    "exp": 1548438450,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548434845,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-25 16:47:31.158 +00:00 [DBG] Creating userinfo response
2019-01-25 16:47:31.166 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 16:47:31.175 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 16:47:31.180 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-25 16:47:31.180 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 16:47:31.195 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-25 16:47:31.195 +00:00 [DBG] End userinfo request
2019-01-25 16:47:31.833 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 16:47:31.833 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 16:47:31.834 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 16:47:31.834 +00:00 [DBG] Start token request.
2019-01-25 16:47:31.834 +00:00 [DBG] Start client validation
2019-01-25 16:47:31.834 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 16:47:31.836 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 16:47:31.836 +00:00 [DBG] Secret id found: MVC
2019-01-25 16:47:31.836 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:47:31.837 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 16:47:31.838 +00:00 [DBG] Client validation success
2019-01-25 16:47:31.838 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2SGF3SJ3B:00000001",
  "TimeStamp": "2019-01-25T16:47:31Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 16:47:31.860 +00:00 [DBG] Start token request validation
2019-01-25 16:47:31.909 +00:00 [DBG] Start client credentials token request validation
2019-01-25 16:47:31.924 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 16:47:31.926 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 16:47:31.943 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 16:47:31.949 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****5lhw"
    }
  ],
  "ActivityId": "0HLK2SGF3SJ3B:00000001",
  "TimeStamp": "2019-01-25T16:47:31Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 16:47:31.959 +00:00 [DBG] Token request success.
2019-01-25 16:47:32.387 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 16:47:32.388 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 16:47:32.388 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 16:47:32.388 +00:00 [DBG] Start discovery request
2019-01-25 16:47:32.479 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 16:47:32.481 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 16:47:32.483 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 16:47:32.485 +00:00 [DBG] Start key discovery request
2019-01-25 16:47:38.997 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 16:47:38.998 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 16:47:38.998 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 16:47:38.998 +00:00 [DBG] Start token request.
2019-01-25 16:47:38.998 +00:00 [DBG] Start client validation
2019-01-25 16:47:38.998 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 16:47:38.998 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 16:47:38.999 +00:00 [DBG] Secret id found: MVC
2019-01-25 16:47:38.999 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 16:47:38.999 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 16:47:38.999 +00:00 [DBG] Client validation success
2019-01-25 16:47:38.999 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2SGF3SJ3D:00000001",
  "TimeStamp": "2019-01-25T16:47:38Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 16:47:39.022 +00:00 [DBG] Start token request validation
2019-01-25 16:47:39.022 +00:00 [DBG] Start client credentials token request validation
2019-01-25 16:47:39.034 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 16:47:39.035 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 16:47:39.037 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 16:47:39.056 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Kijw"
    }
  ],
  "ActivityId": "0HLK2SGF3SJ3D:00000001",
  "TimeStamp": "2019-01-25T16:47:39Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 16:47:39.072 +00:00 [DBG] Token request success.
2019-01-25 16:47:39.666 +00:00 [INF] Message received:
2019-01-25 16:47:39.666 +00:00 [INF] ----------------------------------
2019-01-25 16:47:39.682 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"60542506-1470-4203-afc0-e69f1997eade","CreationDate":"2019-01-25T16:47:39.5579068Z"}
2019-01-25 16:47:39.683 +00:00 [INF] ----------------------------------
2019-01-25 16:47:40.881 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens da5cb65b-a258-4b9d-acd7-22f9bdf7dcf7 to 1 handlers took 1229 ms
2019-01-25 17:30:13.801 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 17:30:15.374 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 17:30:15.498 +00:00 [INF] Setting number of workers to 1
2019-01-25 17:30:15.548 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 17:30:15.567 +00:00 [INF] Bus Rebus 1 started
2019-01-25 17:30:15.592 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 17:30:15.862 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 17:30:15.912 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 17:30:16.022 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 17:30:16.022 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 17:30:16.034 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 17:30:16.034 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 17:30:16.034 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 17:30:46.858 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:30:47.116 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:30:47.116 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:30:47.132 +00:00 [DBG] Start token request.
2019-01-25 17:30:47.143 +00:00 [DBG] Start client validation
2019-01-25 17:30:47.154 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:30:47.155 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:30:47.155 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:30:47.179 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:30:47.197 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:30:47.198 +00:00 [DBG] Client validation success
2019-01-25 17:30:47.238 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TBBJUQ30:00000001",
  "TimeStamp": "2019-01-25T17:30:47Z",
  "ProcessId": 282,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:30:47.361 +00:00 [DBG] Start token request validation
2019-01-25 17:30:47.375 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:30:47.425 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:30:47.439 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:30:47.476 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:30:47.547 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****zZdw"
    }
  ],
  "ActivityId": "0HLK2TBBJUQ30:00000001",
  "TimeStamp": "2019-01-25T17:30:47Z",
  "ProcessId": 282,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:30:47.549 +00:00 [DBG] Token request success.
2019-01-25 17:30:48.130 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 17:30:48.134 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 17:30:48.134 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 17:30:48.154 +00:00 [DBG] Start discovery request
2019-01-25 17:30:48.369 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 17:30:48.371 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 17:30:48.371 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 17:30:48.384 +00:00 [DBG] Start key discovery request
2019-01-25 17:30:52.712 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 17:30:52.713 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 17:30:52.713 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 17:30:52.713 +00:00 [DBG] Start discovery request
2019-01-25 17:30:52.905 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 17:30:52.906 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 17:30:52.906 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 17:30:52.906 +00:00 [DBG] Start key discovery request
2019-01-25 17:30:54.089 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-25 17:30:54.091 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-25 17:30:54.091 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-25 17:30:54.104 +00:00 [DBG] Processing signout request for 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 17:30:54.113 +00:00 [DBG] Start end session request validation
2019-01-25 17:30:54.122 +00:00 [DBG] Start identity token validation
2019-01-25 17:30:54.136 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:30:54.136 +00:00 [DBG] Client found: MVC / MVC
2019-01-25 17:30:54.201 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 17:30:54.207 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1548434850,
    "exp": 1548435150,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636840313600580552.OGM3NTA5YmYtMjM1Zi00OGUzLWFhYWUtY2QyNmQ0YzMwNzQ5MThhOGFmNDYtMWI5Zi00ZTUwLWIzZWMtMmZiZGQ4ZjJiNWZi",
    "iat": 1548434850,
    "at_hash": "bi5t4uw3hc0wHbasHLK7fQ",
    "sid": "4af8f8c04488d15696277b90916a58e2",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548434845,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "amr": "pwd"
  }
}
2019-01-25 17:30:54.233 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpZTAZCj3DV3B7An5Mf1aM1nfjm_JHkiE_0HjG3gHl5nRLq2bfjgkYEoVKXa_hSCZdNQYZfKVf4vLFQ7yFFk7bpZRQGDYFX1O7TIJdF8Uxk8P4eIz5am3fM5JzFGud2O9wev1V9IWh61vQ9zcWi2UmIr",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDg0MzQ4NTAsImV4cCI6MTU0ODQzNTE1MCwiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4NDAzMTM2MDA1ODA1NTIuT0dNM05UQTVZbVl0TWpNMVppMDBPR1V6TFdGaFlXVXRZMlF5Tm1RMFl6TXdOelE1TVRoaE9HRm1ORFl0TVdJNVppMDBaVFV3TFdJelpXTXRNbVppWkdRNFpqSmlOV1ppIiwiaWF0IjoxNTQ4NDM0ODUwLCJhdF9oYXNoIjoiYmk1dDR1dzNoYzB3SGJhc0hMSzdmUSIsInNpZCI6IjRhZjhmOGMwNDQ4OGQxNTY5NjI3N2I5MDkxNmE1OGUyIiwic3ViIjoiMTczZjk2NGYtMWViOS00M2NmLTkxYzctZGY3NTM3MTdjMTZjIiwiYXV0aF90aW1lIjoxNTQ4NDM0ODQ1LCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImVtYWlsIjoiYWxpY2VAYXNwLm5ldCIsInBob25lIjoiMTIzNC01Njc4IiwiYWRkcmVzcyI6IlJ1YSBWZXJndWVpcm8sIDQ1NiIsImFkZHJlc3NfZGV0YWlscyI6IjggYW5kYXIgc2FsYSA4MDEiLCJuZWlnaGJvcmhvb2QiOiJWaWxhIE1hcmlhbmEiLCJjaXR5IjoiU8OjbyBQYXVsbyIsInN0YXRlIjoiU1AiLCJ6aXBfY29kZSI6IjY5MTE4IiwiYW1yIjpbInB3ZCJdfQ.b62WV7i4iGtj5qfvbRSP91kbiBYVVIa5Z2Z6pbc_vZcXZj6VEFx8nxgAsP_WGm7h-qCBoLYOKJNwX9bQgfBp-PPRqB12csjMraOr40Vh8O3Cy6U1_-I3h632Mo5Ha8Ot0h8494ntQauoD4dPATPOwAt3R22O-J3_-P9btVbSbeeZbl9AKskTyKOhjnuoFFK_NAeRCBAxQnuZMHHkpV4qcWrmwNqwqiNFrIzstuJwCmPokOtMuRLkSub_uZ0v7etLzaQEvQHZIg6RnZJYSpkf_CxW_Sv5ftB4IDoBsmjSgc3XKkQ_fr6lWP2SVD8xbdWvlOFJ8IRF1dmdmZ9xg_vulg",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpZTAZCj3DV3B7An5Mf1aM1nfjm_JHkiE_0HjG3gHl5nRLq2bfjgkYEoVKXa_hSCZdNQYZfKVf4vLFQ7yFFk7bpZRQGDYFX1O7TIJdF8Uxk8P4eIz5am3fM5JzFGud2O9wev1V9IWh61vQ9zcWi2UmIr",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 17:30:54.234 +00:00 [DBG] Success validating end session request from MVC
2019-01-25 17:30:54.715 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-25 17:30:54.720 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-25 17:30:54.722 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-25 17:30:54.734 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLK2TBBJUQ33:00000002",
  "TimeStamp": "2019-01-25T17:30:54Z",
  "ProcessId": 282,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:30:57.075 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-25 17:30:57.079 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-25 17:30:57.079 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-25 17:30:57.088 +00:00 [DBG] Start authorize request
2019-01-25 17:30:57.097 +00:00 [DBG] No user present in authorize request
2019-01-25 17:30:57.106 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 17:30:57.115 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:30:57.122 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 17:30:57.125 +00:00 [DBG] No PKCE used.
2019-01-25 17:30:57.145 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 17:30:57.156 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbTApbEGrasGgEBCu_tUbwzVClroL36fXxKg1bPsBtCTrHKYqSGs2YgthTRU-Ds3Znt2NskSbDKZa302Hxfh3JE7-TewfUlTX82x2QdT_Vrcs0t-2kyaOXCx6oEfr3kzFYjeO074Bq_elBaaxNw34JnNbb5ZU_AuxWibtefQOwKt-8gKA3nuRh5hcUoPK7Ll2mkbm5MR7oE71T7azyjIJnoEvRXg1Jbs-3xQ-hETpWWLJ6yPMIpWyZTHshUklGgbSQkxCcmmPelcZ254l4_u1Bp6wPF2-w0V9lWUqEvwxwtpqHBwI9ARkpeL-SLCrhZlbo",
  "Nonce": "636840342570644890.NzU3N2MyZjAtNzNkYS00NmRjLWI4NmUtYzgyMGYzNmM4ZGQ0OTc5YTUzOWUtNzdhMC00YzlkLTlkZGMtNTI3OTRlZTY5ODlm",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840342570644890.NzU3N2MyZjAtNzNkYS00NmRjLWI4NmUtYzgyMGYzNmM4ZGQ0OTc5YTUzOWUtNzdhMC00YzlkLTlkZGMtNTI3OTRlZTY5ODlm",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbTApbEGrasGgEBCu_tUbwzVClroL36fXxKg1bPsBtCTrHKYqSGs2YgthTRU-Ds3Znt2NskSbDKZa302Hxfh3JE7-TewfUlTX82x2QdT_Vrcs0t-2kyaOXCx6oEfr3kzFYjeO074Bq_elBaaxNw34JnNbb5ZU_AuxWibtefQOwKt-8gKA3nuRh5hcUoPK7Ll2mkbm5MR7oE71T7azyjIJnoEvRXg1Jbs-3xQ-hETpWWLJ6yPMIpWyZTHshUklGgbSQkxCcmmPelcZ254l4_u1Bp6wPF2-w0V9lWUqEvwxwtpqHBwI9ARkpeL-SLCrhZlbo",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 17:30:57.180 +00:00 [INF] Showing login: User is not authenticated
2019-01-25 17:30:57.248 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 17:30:57.248 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:30:57.248 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 17:30:57.249 +00:00 [DBG] No PKCE used.
2019-01-25 17:30:57.251 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 17:30:57.255 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:31:01.392 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-25 17:31:01.573 +00:00 [DBG] Augmenting SignInContext
2019-01-25 17:31:01.577 +00:00 [DBG] Adding idp claim with value: local
2019-01-25 17:31:01.577 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-25 17:31:01.578 +00:00 [DBG] Adding auth_time claim with value: 1548437461
2019-01-25 17:31:01.590 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 17:31:01.601 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK2TBBJUQ34:00000001",
  "TimeStamp": "2019-01-25T17:31:01Z",
  "ProcessId": 282,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:31:01.614 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-25 17:31:01.619 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-25 17:31:01.620 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-25 17:31:01.630 +00:00 [DBG] Start authorize callback request
2019-01-25 17:31:01.634 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 17:31:01.635 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 17:31:01.635 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:31:01.635 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 17:31:01.635 +00:00 [DBG] No PKCE used.
2019-01-25 17:31:01.636 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 17:31:01.639 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbTApbEGrasGgEBCu_tUbwzVClroL36fXxKg1bPsBtCTrHKYqSGs2YgthTRU-Ds3Znt2NskSbDKZa302Hxfh3JE7-TewfUlTX82x2QdT_Vrcs0t-2kyaOXCx6oEfr3kzFYjeO074Bq_elBaaxNw34JnNbb5ZU_AuxWibtefQOwKt-8gKA3nuRh5hcUoPK7Ll2mkbm5MR7oE71T7azyjIJnoEvRXg1Jbs-3xQ-hETpWWLJ6yPMIpWyZTHshUklGgbSQkxCcmmPelcZ254l4_u1Bp6wPF2-w0V9lWUqEvwxwtpqHBwI9ARkpeL-SLCrhZlbo",
  "Nonce": "636840342570644890.NzU3N2MyZjAtNzNkYS00NmRjLWI4NmUtYzgyMGYzNmM4ZGQ0OTc5YTUzOWUtNzdhMC00YzlkLTlkZGMtNTI3OTRlZTY5ODlm",
  "SessionId": "56c0b606836ae2d3bda44ee641771ff4",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840342570644890.NzU3N2MyZjAtNzNkYS00NmRjLWI4NmUtYzgyMGYzNmM4ZGQ0OTc5YTUzOWUtNzdhMC00YzlkLTlkZGMtNTI3OTRlZTY5ODlm",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbTApbEGrasGgEBCu_tUbwzVClroL36fXxKg1bPsBtCTrHKYqSGs2YgthTRU-Ds3Znt2NskSbDKZa302Hxfh3JE7-TewfUlTX82x2QdT_Vrcs0t-2kyaOXCx6oEfr3kzFYjeO074Bq_elBaaxNw34JnNbb5ZU_AuxWibtefQOwKt-8gKA3nuRh5hcUoPK7Ll2mkbm5MR7oE71T7azyjIJnoEvRXg1Jbs-3xQ-hETpWWLJ6yPMIpWyZTHshUklGgbSQkxCcmmPelcZ254l4_u1Bp6wPF2-w0V9lWUqEvwxwtpqHBwI9ARkpeL-SLCrhZlbo",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 17:31:01.668 +00:00 [DBG] Scopes contains offline_access, consent is required
2019-01-25 17:31:01.668 +00:00 [INF] Showing consent: User has not yet consented
2019-01-25 17:31:01.707 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 17:31:01.708 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:31:01.708 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 17:31:01.708 +00:00 [DBG] No PKCE used.
2019-01-25 17:31:01.708 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 17:31:01.709 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:35:23.445 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 17:35:25.010 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 17:35:25.119 +00:00 [INF] Setting number of workers to 1
2019-01-25 17:35:25.156 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 17:35:25.200 +00:00 [INF] Bus Rebus 1 started
2019-01-25 17:35:25.224 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 17:35:25.383 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 17:35:25.422 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 17:35:25.468 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 17:35:25.470 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 17:35:25.474 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 17:35:25.478 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 17:35:25.482 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 17:39:03.372 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 17:39:03.649 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 17:39:03.650 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 17:39:03.657 +00:00 [DBG] Start discovery request
2019-01-25 17:39:03.825 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 17:39:03.847 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 17:39:03.849 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 17:39:03.884 +00:00 [DBG] Start key discovery request
2019-01-25 17:39:04.075 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-25 17:39:04.084 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-25 17:39:04.086 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-25 17:39:04.097 +00:00 [DBG] Start authorize request
2019-01-25 17:39:04.133 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 17:39:04.149 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 17:39:04.178 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:04.186 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 17:39:04.190 +00:00 [DBG] No PKCE used.
2019-01-25 17:39:04.247 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 17:39:04.264 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpaLhdjY4n2zLNZ4_hfxHgM15w1AfI_PHNlrFm0-m2UeLmhuntYW_3Pcof6wVpo8fPBjxebkZlpQkxprn9upODiRiXLEfQzrU5bYRc5gq3r6qkuIGjKhSam9JongkwBbV0zlSbW9igvXmxGGsVliQuRBnZEfOrtvuqUUt1VeM4uwBh-VeeX4VMnxvdJZ2I2imPNYzOel1WzcqZtkYKvp2xGbKcBHn0JlzUrqPmg3S3He0W_CT7QXIgelG0ajkI0ffNvsnPKL0zdZKCr0b38gvDTOTUGt58ioFRymQYckOGQt7j3JYf4AqeClQTkAJdC6I3I",
  "Nonce": "636840347439604482.ZWZhMWM2NzktMzlkYS00ZjU3LWEwMGItOGUyOTg0ZDUwMWUxZTA5ZWUyODUtYzk2YS00OGY4LWE2YjUtYTIzZjE5YjI3NTBl",
  "SessionId": "56c0b606836ae2d3bda44ee641771ff4",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840347439604482.ZWZhMWM2NzktMzlkYS00ZjU3LWEwMGItOGUyOTg0ZDUwMWUxZTA5ZWUyODUtYzk2YS00OGY4LWE2YjUtYTIzZjE5YjI3NTBl",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpaLhdjY4n2zLNZ4_hfxHgM15w1AfI_PHNlrFm0-m2UeLmhuntYW_3Pcof6wVpo8fPBjxebkZlpQkxprn9upODiRiXLEfQzrU5bYRc5gq3r6qkuIGjKhSam9JongkwBbV0zlSbW9igvXmxGGsVliQuRBnZEfOrtvuqUUt1VeM4uwBh-VeeX4VMnxvdJZ2I2imPNYzOel1WzcqZtkYKvp2xGbKcBHn0JlzUrqPmg3S3He0W_CT7QXIgelG0ajkI0ffNvsnPKL0zdZKCr0b38gvDTOTUGt58ioFRymQYckOGQt7j3JYf4AqeClQTkAJdC6I3I",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 17:39:04.299 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-25 17:39:04.309 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-25 17:39:04.354 +00:00 [DBG] Creating Implicit Flow response.
2019-01-25 17:39:04.369 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 17:39:05.457 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****uvrg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****1490"
    }
  ],
  "ActivityId": "0HLK2TFVJHG9R:00000001",
  "TimeStamp": "2019-01-25T17:39:05Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:39:05.471 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpaLhdjY4n2zLNZ4_hfxHgM15w1AfI_PHNlrFm0-m2UeLmhuntYW_3Pcof6wVpo8fPBjxebkZlpQkxprn9upODiRiXLEfQzrU5bYRc5gq3r6qkuIGjKhSam9JongkwBbV0zlSbW9igvXmxGGsVliQuRBnZEfOrtvuqUUt1VeM4uwBh-VeeX4VMnxvdJZ2I2imPNYzOel1WzcqZtkYKvp2xGbKcBHn0JlzUrqPmg3S3He0W_CT7QXIgelG0ajkI0ffNvsnPKL0zdZKCr0b38gvDTOTUGt58ioFRymQYckOGQt7j3JYf4AqeClQTkAJdC6I3I",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-25 17:39:05.533 +00:00 [DBG] Augmenting SignInContext
2019-01-25 17:39:05.558 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 17:39:06.221 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:39:06.229 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:39:06.229 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:39:06.254 +00:00 [DBG] Start token request.
2019-01-25 17:39:06.285 +00:00 [DBG] Start client validation
2019-01-25 17:39:06.311 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:39:06.318 +00:00 [DBG] Start parsing for secret in post body
2019-01-25 17:39:06.374 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-25 17:39:06.375 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:39:06.375 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:06.395 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:39:06.395 +00:00 [DBG] Client validation success
2019-01-25 17:39:06.404 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHG9Q:00000003",
  "TimeStamp": "2019-01-25T17:39:06Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:39:06.415 +00:00 [DBG] Start token request validation
2019-01-25 17:39:06.431 +00:00 [DBG] Start validation of authorization code token request
2019-01-25 17:39:06.455 +00:00 [DBG] Validation of authorization code token request success
2019-01-25 17:39:06.464 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "8136aa7f4bafdc917d5c2237693d6d3474dbdca94ec91ce7c22784b2d07b1490",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "8136aa7f4bafdc917d5c2237693d6d3474dbdca94ec91ce7c22784b2d07b1490",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-25 17:39:06.486 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:06.502 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:39:06.503 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 17:39:06.547 +00:00 [DBG] Creating refresh token
2019-01-25 17:39:06.548 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-25 17:39:06.582 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:06.582 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 17:39:06.600 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****kuWA"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****32a5"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****fW_Q"
    }
  ],
  "ActivityId": "0HLK2TFVJHG9Q:00000003",
  "TimeStamp": "2019-01-25T17:39:06Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:39:06.603 +00:00 [DBG] Token request success.
2019-01-25 17:39:06.650 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-25 17:39:06.654 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-25 17:39:06.655 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-25 17:39:06.670 +00:00 [DBG] Start userinfo request
2019-01-25 17:39:06.678 +00:00 [DBG] Bearer token found in header
2019-01-25 17:39:06.754 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:06.760 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:06.762 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 17:39:06.769 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548437946,
    "exp": 1548441546,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548437461,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-25 17:39:06.785 +00:00 [DBG] Creating userinfo response
2019-01-25 17:39:06.795 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 17:39:06.800 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 17:39:06.812 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-25 17:39:06.812 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 17:39:06.823 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-25 17:39:06.825 +00:00 [DBG] End userinfo request
2019-01-25 17:39:07.464 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:39:07.465 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:39:07.465 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:39:07.466 +00:00 [DBG] Start token request.
2019-01-25 17:39:07.466 +00:00 [DBG] Start client validation
2019-01-25 17:39:07.468 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:39:07.468 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:39:07.468 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:39:07.469 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:07.469 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:39:07.469 +00:00 [DBG] Client validation success
2019-01-25 17:39:07.469 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHG9S:00000001",
  "TimeStamp": "2019-01-25T17:39:07Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:39:07.496 +00:00 [DBG] Start token request validation
2019-01-25 17:39:07.512 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:39:07.523 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:39:07.527 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:39:07.542 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:39:07.546 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Dc3w"
    }
  ],
  "ActivityId": "0HLK2TFVJHG9S:00000001",
  "TimeStamp": "2019-01-25T17:39:07Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:39:07.547 +00:00 [DBG] Token request success.
2019-01-25 17:39:08.020 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 17:39:08.025 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 17:39:08.029 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 17:39:08.031 +00:00 [DBG] Start discovery request
2019-01-25 17:39:08.097 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 17:39:08.108 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 17:39:08.109 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 17:39:08.109 +00:00 [DBG] Start key discovery request
2019-01-25 17:39:15.527 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-25 17:39:15.538 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-25 17:39:15.538 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-25 17:39:15.548 +00:00 [DBG] Processing signout request for 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 17:39:15.574 +00:00 [DBG] Start end session request validation
2019-01-25 17:39:15.583 +00:00 [DBG] Start identity token validation
2019-01-25 17:39:15.587 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:15.587 +00:00 [DBG] Client found: MVC / MVC
2019-01-25 17:39:15.588 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 17:39:15.590 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1548437946,
    "exp": 1548438246,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636840347439604482.ZWZhMWM2NzktMzlkYS00ZjU3LWEwMGItOGUyOTg0ZDUwMWUxZTA5ZWUyODUtYzk2YS00OGY4LWE2YjUtYTIzZjE5YjI3NTBl",
    "iat": 1548437946,
    "at_hash": "pGktCB9gmI_W-owu9jgANQ",
    "sid": "56c0b606836ae2d3bda44ee641771ff4",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548437461,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "amr": "pwd"
  }
}
2019-01-25 17:39:15.609 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbFVOp8npgcCuQ0BbMUTatpd8ff_rT0XqdxGseMhB0BkdJpVpdLZGH0B6PjGd5k4Y-jJlUhqgkHz7n3yD2LuqoIXkMuUOlF_zBUL4k2bDHcfNLRO_D5Vn4fBKM-hGf-1ieLO3cNkdowLW_mJxdqxSsV",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDg0Mzc5NDYsImV4cCI6MTU0ODQzODI0NiwiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4NDAzNDc0Mzk2MDQ0ODIuWldaaE1XTTJOemt0TXpsa1lTMDBaalUzTFdFd01HSXRPR1V5T1RnMFpEVXdNV1V4WlRBNVpXVXlPRFV0WXprMllTMDBPR1k0TFdFMllqVXRZVEl6WmpFNVlqSTNOVEJsIiwiaWF0IjoxNTQ4NDM3OTQ2LCJhdF9oYXNoIjoicEdrdENCOWdtSV9XLW93dTlqZ0FOUSIsInNpZCI6IjU2YzBiNjA2ODM2YWUyZDNiZGE0NGVlNjQxNzcxZmY0Iiwic3ViIjoiMTczZjk2NGYtMWViOS00M2NmLTkxYzctZGY3NTM3MTdjMTZjIiwiYXV0aF90aW1lIjoxNTQ4NDM3NDYxLCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImVtYWlsIjoiYWxpY2VAYXNwLm5ldCIsInBob25lIjoiMTIzNC01Njc4IiwiYWRkcmVzcyI6IlJ1YSBWZXJndWVpcm8sIDQ1NiIsImFkZHJlc3NfZGV0YWlscyI6IjggYW5kYXIgc2FsYSA4MDEiLCJuZWlnaGJvcmhvb2QiOiJWaWxhIE1hcmlhbmEiLCJjaXR5IjoiU8OjbyBQYXVsbyIsInN0YXRlIjoiU1AiLCJ6aXBfY29kZSI6IjY5MTE4IiwiYW1yIjpbInB3ZCJdfQ.qxs2bUIzV8WXWmf0gQWisy6UfGeX6Syoi6LdWUemMH1BLb70Zl3udTWcj-cHfZezQpw6ypzKnSQunV2hTKzFMD8aGcHgBYL0JkzGOMXIM4swEtcEVeBUdkm_-YSmhbtZxpaBcIPUBrHjs7ndC7li2JUVl4QXSJbgrzVWEP1uHwNB2w9TTNtK5fovSZyy9e-2QdfS-HPpnJ0p3RBS2YuZOy8pJOPAoEMgDbwn-kc4mxq-sAuUqNKA3bLAA1XRX8PAKpqrsj2Uy26NcmqDMEdFH7aKmdBdIsKBmRtlyoY0AydlCd7hQ6mNmmYuk_72fZEegGJzpWP6AAOr7jMLgqkuWA",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbFVOp8npgcCuQ0BbMUTatpd8ff_rT0XqdxGseMhB0BkdJpVpdLZGH0B6PjGd5k4Y-jJlUhqgkHz7n3yD2LuqoIXkMuUOlF_zBUL4k2bDHcfNLRO_D5Vn4fBKM-hGf-1ieLO3cNkdowLW_mJxdqxSsV",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 17:39:15.610 +00:00 [DBG] Success validating end session request from MVC
2019-01-25 17:39:16.025 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-25 17:39:16.027 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-25 17:39:16.028 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-25 17:39:16.034 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLK2TFVJHG9R:00000003",
  "TimeStamp": "2019-01-25T17:39:16Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:39:17.780 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-25 17:39:17.780 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-25 17:39:17.780 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-25 17:39:17.780 +00:00 [DBG] Start authorize request
2019-01-25 17:39:17.781 +00:00 [DBG] No user present in authorize request
2019-01-25 17:39:17.781 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 17:39:17.782 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:17.782 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 17:39:17.783 +00:00 [DBG] No PKCE used.
2019-01-25 17:39:17.784 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 17:39:17.784 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYvv05ThzMEfJ81oAMuioVSbN486N2NshFgfqbaG6CW3PYJ_YdSXRJC5-j-wbFTRaZP9R9BGX8iXUKJiQQs7_RrsJQLVO6OIT7E0a76k71T6VZLZJn4iHvbNznzQumb0MoeeTvuZnbDYD6rkHe-MANwFRF1U0VKeI-UV3eTrCQEUVcv7LBWei3Z7fH8nFxmBPUrg4UVfUVU7Vj7Vh3hnJ8F-twzFiDTxzQLKdHSl4kHNeNSIe1feDsYd4JG8tfhcslXeqfI0bkKxGiaIum7unLgrjkznRNGOT92YtGXhVwaDW0vNZ_i-98PBOIXOJTHwOs",
  "Nonce": "636840347577715696.ZTM1ZGMwNDQtZmQzYS00YzVkLTg2YjAtYTEzMmE3OTE1MjJlMzkyZDk5YmUtYzliMS00NjUxLWJhYzQtNzVkZTI3ODRhNDg2",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840347577715696.ZTM1ZGMwNDQtZmQzYS00YzVkLTg2YjAtYTEzMmE3OTE1MjJlMzkyZDk5YmUtYzliMS00NjUxLWJhYzQtNzVkZTI3ODRhNDg2",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYvv05ThzMEfJ81oAMuioVSbN486N2NshFgfqbaG6CW3PYJ_YdSXRJC5-j-wbFTRaZP9R9BGX8iXUKJiQQs7_RrsJQLVO6OIT7E0a76k71T6VZLZJn4iHvbNznzQumb0MoeeTvuZnbDYD6rkHe-MANwFRF1U0VKeI-UV3eTrCQEUVcv7LBWei3Z7fH8nFxmBPUrg4UVfUVU7Vj7Vh3hnJ8F-twzFiDTxzQLKdHSl4kHNeNSIe1feDsYd4JG8tfhcslXeqfI0bkKxGiaIum7unLgrjkznRNGOT92YtGXhVwaDW0vNZ_i-98PBOIXOJTHwOs",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 17:39:17.785 +00:00 [INF] Showing login: User is not authenticated
2019-01-25 17:39:17.882 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 17:39:17.886 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:17.887 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 17:39:17.888 +00:00 [DBG] No PKCE used.
2019-01-25 17:39:17.889 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 17:39:17.901 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:20.476 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-25 17:39:20.680 +00:00 [DBG] Augmenting SignInContext
2019-01-25 17:39:20.681 +00:00 [DBG] Adding idp claim with value: local
2019-01-25 17:39:20.681 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-25 17:39:20.682 +00:00 [DBG] Adding auth_time claim with value: 1548437960
2019-01-25 17:39:20.685 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 17:39:20.698 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK2TFVJHG9R:00000006",
  "TimeStamp": "2019-01-25T17:39:20Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:39:20.714 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-25 17:39:20.714 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-25 17:39:20.715 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-25 17:39:20.727 +00:00 [DBG] Start authorize callback request
2019-01-25 17:39:20.733 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 17:39:20.734 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 17:39:20.734 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:20.734 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 17:39:20.735 +00:00 [DBG] No PKCE used.
2019-01-25 17:39:20.735 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 17:39:20.736 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYvv05ThzMEfJ81oAMuioVSbN486N2NshFgfqbaG6CW3PYJ_YdSXRJC5-j-wbFTRaZP9R9BGX8iXUKJiQQs7_RrsJQLVO6OIT7E0a76k71T6VZLZJn4iHvbNznzQumb0MoeeTvuZnbDYD6rkHe-MANwFRF1U0VKeI-UV3eTrCQEUVcv7LBWei3Z7fH8nFxmBPUrg4UVfUVU7Vj7Vh3hnJ8F-twzFiDTxzQLKdHSl4kHNeNSIe1feDsYd4JG8tfhcslXeqfI0bkKxGiaIum7unLgrjkznRNGOT92YtGXhVwaDW0vNZ_i-98PBOIXOJTHwOs",
  "Nonce": "636840347577715696.ZTM1ZGMwNDQtZmQzYS00YzVkLTg2YjAtYTEzMmE3OTE1MjJlMzkyZDk5YmUtYzliMS00NjUxLWJhYzQtNzVkZTI3ODRhNDg2",
  "SessionId": "987d921ff18c3eed7eb8d5f3ec2b3cac",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840347577715696.ZTM1ZGMwNDQtZmQzYS00YzVkLTg2YjAtYTEzMmE3OTE1MjJlMzkyZDk5YmUtYzliMS00NjUxLWJhYzQtNzVkZTI3ODRhNDg2",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYvv05ThzMEfJ81oAMuioVSbN486N2NshFgfqbaG6CW3PYJ_YdSXRJC5-j-wbFTRaZP9R9BGX8iXUKJiQQs7_RrsJQLVO6OIT7E0a76k71T6VZLZJn4iHvbNznzQumb0MoeeTvuZnbDYD6rkHe-MANwFRF1U0VKeI-UV3eTrCQEUVcv7LBWei3Z7fH8nFxmBPUrg4UVfUVU7Vj7Vh3hnJ8F-twzFiDTxzQLKdHSl4kHNeNSIe1feDsYd4JG8tfhcslXeqfI0bkKxGiaIum7unLgrjkznRNGOT92YtGXhVwaDW0vNZ_i-98PBOIXOJTHwOs",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 17:39:20.737 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-25 17:39:20.738 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-25 17:39:20.753 +00:00 [DBG] Creating Implicit Flow response.
2019-01-25 17:39:20.754 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 17:39:20.773 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****zVxg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****3d59"
    }
  ],
  "ActivityId": "0HLK2TFVJHG9R:00000007",
  "TimeStamp": "2019-01-25T17:39:20Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:39:20.773 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYvv05ThzMEfJ81oAMuioVSbN486N2NshFgfqbaG6CW3PYJ_YdSXRJC5-j-wbFTRaZP9R9BGX8iXUKJiQQs7_RrsJQLVO6OIT7E0a76k71T6VZLZJn4iHvbNznzQumb0MoeeTvuZnbDYD6rkHe-MANwFRF1U0VKeI-UV3eTrCQEUVcv7LBWei3Z7fH8nFxmBPUrg4UVfUVU7Vj7Vh3hnJ8F-twzFiDTxzQLKdHSl4kHNeNSIe1feDsYd4JG8tfhcslXeqfI0bkKxGiaIum7unLgrjkznRNGOT92YtGXhVwaDW0vNZ_i-98PBOIXOJTHwOs",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-25 17:39:20.775 +00:00 [DBG] Augmenting SignInContext
2019-01-25 17:39:20.776 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 17:39:20.907 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:39:20.908 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:39:20.914 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:39:20.918 +00:00 [DBG] Start token request.
2019-01-25 17:39:20.918 +00:00 [DBG] Start client validation
2019-01-25 17:39:20.918 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:39:20.920 +00:00 [DBG] Start parsing for secret in post body
2019-01-25 17:39:20.940 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-25 17:39:20.949 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:39:20.949 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:20.951 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:39:20.952 +00:00 [DBG] Client validation success
2019-01-25 17:39:20.953 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHG9Q:00000005",
  "TimeStamp": "2019-01-25T17:39:20Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:39:20.954 +00:00 [DBG] Start token request validation
2019-01-25 17:39:20.958 +00:00 [DBG] Start validation of authorization code token request
2019-01-25 17:39:21.006 +00:00 [DBG] Validation of authorization code token request success
2019-01-25 17:39:21.008 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "0b2d50018605be60591c79a21fb65e46b6f4dc505282fa1aa41a8771494e3d59",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "0b2d50018605be60591c79a21fb65e46b6f4dc505282fa1aa41a8771494e3d59",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-25 17:39:21.013 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:21.016 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:39:21.023 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 17:39:21.046 +00:00 [DBG] Creating refresh token
2019-01-25 17:39:21.050 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-25 17:39:21.077 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:21.077 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 17:39:21.115 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****8D6g"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****794e"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Ig3A"
    }
  ],
  "ActivityId": "0HLK2TFVJHG9Q:00000005",
  "TimeStamp": "2019-01-25T17:39:21Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:39:21.118 +00:00 [DBG] Token request success.
2019-01-25 17:39:21.143 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-25 17:39:21.151 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-25 17:39:21.163 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-25 17:39:21.164 +00:00 [DBG] Start userinfo request
2019-01-25 17:39:21.164 +00:00 [DBG] Bearer token found in header
2019-01-25 17:39:21.166 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:21.167 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:21.168 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 17:39:21.169 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548437961,
    "exp": 1548441561,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548437960,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-25 17:39:21.183 +00:00 [DBG] Creating userinfo response
2019-01-25 17:39:21.183 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 17:39:21.183 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 17:39:21.184 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-25 17:39:21.184 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 17:39:21.259 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-25 17:39:21.259 +00:00 [DBG] End userinfo request
2019-01-25 17:39:21.518 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:39:21.518 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:39:21.519 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:39:21.519 +00:00 [DBG] Start token request.
2019-01-25 17:39:21.519 +00:00 [DBG] Start client validation
2019-01-25 17:39:21.519 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:39:21.519 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:39:21.519 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:39:21.520 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:21.527 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:39:21.531 +00:00 [DBG] Client validation success
2019-01-25 17:39:21.531 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHG9V:00000001",
  "TimeStamp": "2019-01-25T17:39:21Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:39:21.549 +00:00 [DBG] Start token request validation
2019-01-25 17:39:21.549 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:39:21.550 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:39:21.550 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:39:21.550 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:39:21.565 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****-kXA"
    }
  ],
  "ActivityId": "0HLK2TFVJHG9V:00000001",
  "TimeStamp": "2019-01-25T17:39:21Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:39:21.567 +00:00 [DBG] Token request success.
2019-01-25 17:39:27.165 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:39:27.165 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:39:27.166 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:39:27.166 +00:00 [DBG] Start token request.
2019-01-25 17:39:27.166 +00:00 [DBG] Start client validation
2019-01-25 17:39:27.166 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:39:27.166 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:39:27.166 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:39:27.166 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:39:27.166 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:39:27.166 +00:00 [DBG] Client validation success
2019-01-25 17:39:27.166 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHGA0:00000001",
  "TimeStamp": "2019-01-25T17:39:27Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:39:27.183 +00:00 [DBG] Start token request validation
2019-01-25 17:39:27.183 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:39:27.185 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:39:27.188 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:39:27.188 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:39:27.193 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****djuQ"
    }
  ],
  "ActivityId": "0HLK2TFVJHGA0:00000001",
  "TimeStamp": "2019-01-25T17:39:27Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:39:27.196 +00:00 [DBG] Token request success.
2019-01-25 17:39:27.865 +00:00 [INF] Message received:
2019-01-25 17:39:27.865 +00:00 [INF] ----------------------------------
2019-01-25 17:39:27.873 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"bc7a58e3-2db7-48a4-babd-0d1868e7c771","CreationDate":"2019-01-25T17:39:27.7609167Z"}
2019-01-25 17:39:27.874 +00:00 [INF] ----------------------------------
2019-01-25 17:39:29.064 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 6e0423d6-0afb-4d6e-9960-176c03dbfb7b to 1 handlers took 1206 ms
2019-01-25 17:42:38.385 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:42:38.388 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:42:38.390 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:42:38.391 +00:00 [DBG] Start token request.
2019-01-25 17:42:38.393 +00:00 [DBG] Start client validation
2019-01-25 17:42:38.395 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:42:38.395 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:42:38.396 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:42:38.396 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:42:38.397 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:42:38.397 +00:00 [DBG] Client validation success
2019-01-25 17:42:38.397 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHGA1:00000001",
  "TimeStamp": "2019-01-25T17:42:38Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:42:38.407 +00:00 [DBG] Start token request validation
2019-01-25 17:42:38.408 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:42:38.408 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:42:38.409 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:42:38.409 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:42:38.415 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****zK2Q"
    }
  ],
  "ActivityId": "0HLK2TFVJHGA1:00000001",
  "TimeStamp": "2019-01-25T17:42:38Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:42:38.418 +00:00 [DBG] Token request success.
2019-01-25 17:42:41.281 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:42:41.281 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:42:41.281 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:42:41.282 +00:00 [DBG] Start token request.
2019-01-25 17:42:41.282 +00:00 [DBG] Start client validation
2019-01-25 17:42:41.282 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:42:41.282 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:42:41.282 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:42:41.282 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:42:41.282 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:42:41.282 +00:00 [DBG] Client validation success
2019-01-25 17:42:41.282 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHGA2:00000001",
  "TimeStamp": "2019-01-25T17:42:41Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:42:41.295 +00:00 [DBG] Start token request validation
2019-01-25 17:42:41.295 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:42:41.296 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:42:41.296 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:42:41.297 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:42:41.306 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Ml4g"
    }
  ],
  "ActivityId": "0HLK2TFVJHGA2:00000001",
  "TimeStamp": "2019-01-25T17:42:41Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:42:41.309 +00:00 [DBG] Token request success.
2019-01-25 17:42:41.542 +00:00 [INF] Message received:
2019-01-25 17:42:41.542 +00:00 [INF] ----------------------------------
2019-01-25 17:42:41.542 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"c928bf2f-bbe5-46b4-a01d-940ee05fe2e0","CreationDate":"2019-01-25T17:42:41.5376651Z"}
2019-01-25 17:42:41.542 +00:00 [INF] ----------------------------------
2019-01-25 17:42:42.473 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 3f4eb5de-7c98-4502-ac54-c7575bb01ee8 to 1 handlers took 931 ms
2019-01-25 17:42:52.815 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:42:52.817 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:42:52.817 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:42:52.817 +00:00 [DBG] Start token request.
2019-01-25 17:42:52.824 +00:00 [DBG] Start client validation
2019-01-25 17:42:52.825 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:42:52.826 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:42:52.832 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:42:52.836 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:42:52.836 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:42:52.837 +00:00 [DBG] Client validation success
2019-01-25 17:42:52.838 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHGA3:00000001",
  "TimeStamp": "2019-01-25T17:42:52Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:42:52.843 +00:00 [DBG] Start token request validation
2019-01-25 17:42:52.844 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:42:52.845 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:42:52.849 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:42:52.849 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:42:52.857 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****J0HQ"
    }
  ],
  "ActivityId": "0HLK2TFVJHGA3:00000001",
  "TimeStamp": "2019-01-25T17:42:52Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:42:52.858 +00:00 [DBG] Token request success.
2019-01-25 17:43:36.438 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:43:36.438 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:43:36.438 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:43:36.438 +00:00 [DBG] Start token request.
2019-01-25 17:43:36.438 +00:00 [DBG] Start client validation
2019-01-25 17:43:36.438 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:43:36.438 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:43:36.438 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:43:36.438 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:43:36.438 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:43:36.438 +00:00 [DBG] Client validation success
2019-01-25 17:43:36.439 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHGA4:00000001",
  "TimeStamp": "2019-01-25T17:43:36Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:43:36.454 +00:00 [DBG] Start token request validation
2019-01-25 17:43:36.454 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:43:36.456 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:43:36.457 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:43:36.457 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:43:36.475 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****eAAA"
    }
  ],
  "ActivityId": "0HLK2TFVJHGA4:00000001",
  "TimeStamp": "2019-01-25T17:43:36Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:43:36.481 +00:00 [DBG] Token request success.
2019-01-25 17:43:36.752 +00:00 [INF] Message received:
2019-01-25 17:43:36.752 +00:00 [INF] ----------------------------------
2019-01-25 17:43:36.752 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"5e5ce317-36e4-45af-b847-5d64a63811e5","CreationDate":"2019-01-25T17:43:36.752319Z"}
2019-01-25 17:43:36.752 +00:00 [INF] ----------------------------------
2019-01-25 17:43:37.640 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens f50101e1-2ee3-433f-963e-d3b0a95e030e to 1 handlers took 887 ms
2019-01-25 17:43:46.353 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:43:46.354 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:43:46.354 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:43:46.355 +00:00 [DBG] Start token request.
2019-01-25 17:43:46.355 +00:00 [DBG] Start client validation
2019-01-25 17:43:46.355 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:43:46.355 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:43:46.355 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:43:46.356 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:43:46.356 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:43:46.356 +00:00 [DBG] Client validation success
2019-01-25 17:43:46.356 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHGA5:00000001",
  "TimeStamp": "2019-01-25T17:43:46Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:43:46.377 +00:00 [DBG] Start token request validation
2019-01-25 17:43:46.377 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:43:46.378 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:43:46.378 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:43:46.378 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:43:46.392 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****0flQ"
    }
  ],
  "ActivityId": "0HLK2TFVJHGA5:00000001",
  "TimeStamp": "2019-01-25T17:43:46Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:43:46.392 +00:00 [DBG] Token request success.
2019-01-25 17:43:52.692 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:43:52.693 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:43:52.693 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:43:52.693 +00:00 [DBG] Start token request.
2019-01-25 17:43:52.694 +00:00 [DBG] Start client validation
2019-01-25 17:43:52.694 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:43:52.694 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:43:52.694 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:43:52.694 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:43:52.702 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:43:52.702 +00:00 [DBG] Client validation success
2019-01-25 17:43:52.703 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHGA6:00000001",
  "TimeStamp": "2019-01-25T17:43:52Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:43:52.725 +00:00 [DBG] Start token request validation
2019-01-25 17:43:52.725 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:43:52.726 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:43:52.726 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:43:52.726 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:43:52.730 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****OSCg"
    }
  ],
  "ActivityId": "0HLK2TFVJHGA6:00000001",
  "TimeStamp": "2019-01-25T17:43:52Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:43:52.730 +00:00 [DBG] Token request success.
2019-01-25 17:43:52.931 +00:00 [INF] Message received:
2019-01-25 17:43:52.931 +00:00 [INF] ----------------------------------
2019-01-25 17:43:52.932 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"80dbfe25-468e-4b50-886a-0256921b14a8","CreationDate":"2019-01-25T17:43:52.9317836Z"}
2019-01-25 17:43:52.932 +00:00 [INF] ----------------------------------
2019-01-25 17:43:53.909 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 6d32c724-b0a1-437a-b012-0f6b9360de22 to 1 handlers took 977 ms
2019-01-25 17:44:20.138 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:44:20.139 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:44:20.139 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:44:20.140 +00:00 [DBG] Start token request.
2019-01-25 17:44:20.141 +00:00 [DBG] Start client validation
2019-01-25 17:44:20.141 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:44:20.142 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:44:20.143 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:44:20.144 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:44:20.148 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:44:20.149 +00:00 [DBG] Client validation success
2019-01-25 17:44:20.151 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHGA7:00000001",
  "TimeStamp": "2019-01-25T17:44:20Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:44:20.158 +00:00 [DBG] Start token request validation
2019-01-25 17:44:20.158 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:44:20.159 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:44:20.160 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:44:20.167 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:44:20.174 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****JqkA"
    }
  ],
  "ActivityId": "0HLK2TFVJHGA7:00000001",
  "TimeStamp": "2019-01-25T17:44:20Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:44:20.174 +00:00 [DBG] Token request success.
2019-01-25 17:47:17.193 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:47:17.193 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:47:17.194 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:47:17.194 +00:00 [DBG] Start token request.
2019-01-25 17:47:17.194 +00:00 [DBG] Start client validation
2019-01-25 17:47:17.194 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:47:17.194 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:47:17.194 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:47:17.194 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:47:17.194 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:47:17.194 +00:00 [DBG] Client validation success
2019-01-25 17:47:17.194 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHGA8:00000001",
  "TimeStamp": "2019-01-25T17:47:17Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:47:17.205 +00:00 [DBG] Start token request validation
2019-01-25 17:47:17.205 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:47:17.214 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:47:17.218 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:47:17.220 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:47:17.225 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****BZTg"
    }
  ],
  "ActivityId": "0HLK2TFVJHGA8:00000001",
  "TimeStamp": "2019-01-25T17:47:17Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:47:17.229 +00:00 [DBG] Token request success.
2019-01-25 17:47:19.945 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:47:19.945 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:47:19.946 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:47:19.946 +00:00 [DBG] Start token request.
2019-01-25 17:47:19.946 +00:00 [DBG] Start client validation
2019-01-25 17:47:19.946 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:47:19.947 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:47:19.947 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:47:19.947 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:47:19.947 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:47:19.947 +00:00 [DBG] Client validation success
2019-01-25 17:47:19.948 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHGA9:00000001",
  "TimeStamp": "2019-01-25T17:47:19Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:47:19.966 +00:00 [DBG] Start token request validation
2019-01-25 17:47:19.967 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:47:19.967 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:47:19.972 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:47:19.973 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:47:19.978 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****UskQ"
    }
  ],
  "ActivityId": "0HLK2TFVJHGA9:00000001",
  "TimeStamp": "2019-01-25T17:47:19Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:47:19.979 +00:00 [DBG] Token request success.
2019-01-25 17:47:20.146 +00:00 [INF] Message received:
2019-01-25 17:47:20.146 +00:00 [INF] ----------------------------------
2019-01-25 17:47:20.146 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"d702e02f-5d59-4dae-a53d-572b77445651","CreationDate":"2019-01-25T17:47:20.1463703Z"}
2019-01-25 17:47:20.146 +00:00 [INF] ----------------------------------
2019-01-25 17:47:20.884 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens cf399eec-c2da-4944-866c-ffe7240868d6 to 1 handlers took 737 ms
2019-01-25 17:48:06.018 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:48:06.022 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:48:06.022 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:48:06.022 +00:00 [DBG] Start token request.
2019-01-25 17:48:06.022 +00:00 [DBG] Start client validation
2019-01-25 17:48:06.022 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:48:06.023 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:48:06.023 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:48:06.023 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:48:06.023 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:48:06.023 +00:00 [DBG] Client validation success
2019-01-25 17:48:06.023 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHGAA:00000001",
  "TimeStamp": "2019-01-25T17:48:06Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:48:06.037 +00:00 [DBG] Start token request validation
2019-01-25 17:48:06.037 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:48:06.039 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:48:06.039 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:48:06.040 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:48:06.046 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****UVoA"
    }
  ],
  "ActivityId": "0HLK2TFVJHGAA:00000001",
  "TimeStamp": "2019-01-25T17:48:06Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:48:06.047 +00:00 [DBG] Token request success.
2019-01-25 17:48:10.876 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:48:10.877 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:48:10.877 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:48:10.877 +00:00 [DBG] Start token request.
2019-01-25 17:48:10.877 +00:00 [DBG] Start client validation
2019-01-25 17:48:10.877 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:48:10.877 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:48:10.877 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:48:10.877 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:48:10.877 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:48:10.877 +00:00 [DBG] Client validation success
2019-01-25 17:48:10.877 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHGAB:00000001",
  "TimeStamp": "2019-01-25T17:48:10Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:48:10.890 +00:00 [DBG] Start token request validation
2019-01-25 17:48:10.890 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:48:10.890 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:48:10.890 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:48:10.891 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:48:10.894 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****dvKg"
    }
  ],
  "ActivityId": "0HLK2TFVJHGAB:00000001",
  "TimeStamp": "2019-01-25T17:48:10Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:48:10.894 +00:00 [DBG] Token request success.
2019-01-25 17:48:16.066 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:48:16.067 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:48:16.068 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:48:16.068 +00:00 [DBG] Start token request.
2019-01-25 17:48:16.068 +00:00 [DBG] Start client validation
2019-01-25 17:48:16.070 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:48:16.070 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:48:16.070 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:48:16.071 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:48:16.071 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:48:16.071 +00:00 [DBG] Client validation success
2019-01-25 17:48:16.071 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHGAC:00000001",
  "TimeStamp": "2019-01-25T17:48:16Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:48:16.077 +00:00 [DBG] Start token request validation
2019-01-25 17:48:16.077 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:48:16.078 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:48:16.080 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:48:16.082 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:48:16.089 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****NEdQ"
    }
  ],
  "ActivityId": "0HLK2TFVJHGAC:00000001",
  "TimeStamp": "2019-01-25T17:48:16Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:48:16.089 +00:00 [DBG] Token request success.
2019-01-25 17:48:19.641 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:48:19.642 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:48:19.642 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:48:19.642 +00:00 [DBG] Start token request.
2019-01-25 17:48:19.642 +00:00 [DBG] Start client validation
2019-01-25 17:48:19.642 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:48:19.642 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:48:19.642 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:48:19.642 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:48:19.643 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:48:19.643 +00:00 [DBG] Client validation success
2019-01-25 17:48:19.643 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TFVJHGAD:00000001",
  "TimeStamp": "2019-01-25T17:48:19Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:48:19.657 +00:00 [DBG] Start token request validation
2019-01-25 17:48:19.657 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:48:19.658 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:48:19.658 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:48:19.658 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:48:19.661 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****FD1w"
    }
  ],
  "ActivityId": "0HLK2TFVJHGAD:00000001",
  "TimeStamp": "2019-01-25T17:48:19Z",
  "ProcessId": 414,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:48:19.661 +00:00 [DBG] Token request success.
2019-01-25 17:55:16.249 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 17:55:17.795 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 17:55:17.865 +00:00 [INF] Setting number of workers to 1
2019-01-25 17:55:17.917 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 17:55:17.959 +00:00 [INF] Bus Rebus 1 started
2019-01-25 17:55:17.993 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 17:55:18.203 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 17:55:18.236 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 17:55:18.278 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 17:55:18.280 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 17:55:18.285 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 17:55:18.294 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 17:55:18.295 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 17:55:56.195 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:55:56.479 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:55:56.482 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:55:56.502 +00:00 [DBG] Start token request.
2019-01-25 17:55:56.512 +00:00 [DBG] Start client validation
2019-01-25 17:55:56.522 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:55:56.523 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:55:56.524 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:55:56.539 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:55:56.551 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:55:56.552 +00:00 [DBG] Client validation success
2019-01-25 17:55:56.585 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TPDEE3IT:00000001",
  "TimeStamp": "2019-01-25T17:55:56Z",
  "ProcessId": 988,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:55:56.662 +00:00 [DBG] Start token request validation
2019-01-25 17:55:56.680 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:55:56.737 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:55:56.753 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:55:56.800 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:55:56.894 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****PoEQ"
    }
  ],
  "ActivityId": "0HLK2TPDEE3IT:00000001",
  "TimeStamp": "2019-01-25T17:55:56Z",
  "ProcessId": 988,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:55:56.896 +00:00 [DBG] Token request success.
2019-01-25 17:55:57.457 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 17:55:57.470 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 17:55:57.471 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 17:55:57.480 +00:00 [DBG] Start discovery request
2019-01-25 17:55:57.728 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 17:55:57.729 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 17:55:57.730 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 17:55:57.745 +00:00 [DBG] Start key discovery request
2019-01-25 17:56:05.768 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 17:56:05.769 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 17:56:05.769 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 17:56:05.769 +00:00 [DBG] Start token request.
2019-01-25 17:56:05.769 +00:00 [DBG] Start client validation
2019-01-25 17:56:05.769 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 17:56:05.769 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 17:56:05.769 +00:00 [DBG] Secret id found: MVC
2019-01-25 17:56:05.769 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:56:05.770 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 17:56:05.770 +00:00 [DBG] Client validation success
2019-01-25 17:56:05.789 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TPDEE3IV:00000001",
  "TimeStamp": "2019-01-25T17:56:05Z",
  "ProcessId": 988,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:56:05.812 +00:00 [DBG] Start token request validation
2019-01-25 17:56:05.812 +00:00 [DBG] Start client credentials token request validation
2019-01-25 17:56:05.812 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 17:56:05.812 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 17:56:05.812 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 17:56:05.836 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****eWtw"
    }
  ],
  "ActivityId": "0HLK2TPDEE3IV:00000001",
  "TimeStamp": "2019-01-25T17:56:05Z",
  "ProcessId": 988,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:56:05.844 +00:00 [DBG] Token request success.
2019-01-25 17:56:06.523 +00:00 [INF] Message received:
2019-01-25 17:56:06.524 +00:00 [INF] ----------------------------------
2019-01-25 17:56:06.537 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"0fb344fd-d428-4474-a195-6fa5e090412e","CreationDate":"2019-01-25T17:56:06.4079627Z"}
2019-01-25 17:56:06.538 +00:00 [INF] ----------------------------------
2019-01-25 17:56:09.031 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 23eed27f-daa7-41d7-909d-9a86e0bbb56b to 1 handlers took 2512 ms
2019-01-25 17:56:19.343 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 17:56:19.348 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 17:56:19.348 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 17:56:19.348 +00:00 [DBG] Start discovery request
2019-01-25 17:56:19.516 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 17:56:19.527 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 17:56:19.527 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 17:56:19.527 +00:00 [DBG] Start key discovery request
2019-01-25 17:56:19.699 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-25 17:56:19.701 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-25 17:56:19.701 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-25 17:56:19.717 +00:00 [DBG] Processing signout request for 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 17:56:19.728 +00:00 [DBG] Start end session request validation
2019-01-25 17:56:19.741 +00:00 [DBG] Start identity token validation
2019-01-25 17:56:19.756 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 17:56:19.756 +00:00 [DBG] Client found: MVC / MVC
2019-01-25 17:56:19.814 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 17:56:19.820 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1548437961,
    "exp": 1548438261,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636840347577715696.ZTM1ZGMwNDQtZmQzYS00YzVkLTg2YjAtYTEzMmE3OTE1MjJlMzkyZDk5YmUtYzliMS00NjUxLWJhYzQtNzVkZTI3ODRhNDg2",
    "iat": 1548437961,
    "at_hash": "RNt2M8tm6hSZBQUFpbivvQ",
    "sid": "987d921ff18c3eed7eb8d5f3ec2b3cac",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548437960,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "amr": "pwd"
  }
}
2019-01-25 17:56:19.856 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYBoQ3x45JHIQTPgQmzoc1MgFPwpyt5pmEUsxRzaDJE6nhN_p5-NQU1TmppXvWwIfksL5H5RGVgbM-0TkmoH0yPoHxVkVnpHD043VV-c4mNrDxairoqhCMr0skuP51qbtR7qfNfVdbsQLhPzJ2WtPji",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDg0Mzc5NjEsImV4cCI6MTU0ODQzODI2MSwiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4NDAzNDc1Nzc3MTU2OTYuWlRNMVpHTXdORFF0Wm1RellTMDBZelZrTFRnMllqQXRZVEV6TW1FM09URTFNakpsTXpreVpEazVZbVV0WXpsaU1TMDBOalV4TFdKaFl6UXROelZrWlRJM09EUmhORGcyIiwiaWF0IjoxNTQ4NDM3OTYxLCJhdF9oYXNoIjoiUk50Mk04dG02aFNaQlFVRnBiaXZ2USIsInNpZCI6Ijk4N2Q5MjFmZjE4YzNlZWQ3ZWI4ZDVmM2VjMmIzY2FjIiwic3ViIjoiMTczZjk2NGYtMWViOS00M2NmLTkxYzctZGY3NTM3MTdjMTZjIiwiYXV0aF90aW1lIjoxNTQ4NDM3OTYwLCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImVtYWlsIjoiYWxpY2VAYXNwLm5ldCIsInBob25lIjoiMTIzNC01Njc4IiwiYWRkcmVzcyI6IlJ1YSBWZXJndWVpcm8sIDQ1NiIsImFkZHJlc3NfZGV0YWlscyI6IjggYW5kYXIgc2FsYSA4MDEiLCJuZWlnaGJvcmhvb2QiOiJWaWxhIE1hcmlhbmEiLCJjaXR5IjoiU8OjbyBQYXVsbyIsInN0YXRlIjoiU1AiLCJ6aXBfY29kZSI6IjY5MTE4IiwiYW1yIjpbInB3ZCJdfQ.laC0KWoNFQE_NdMUo9yq0hB3M7f_7scNuzyYrwvZLb6gckfvS2FP_w-h4fpEtFgLwoLyImnaljCxRlWPrD0dhnMIsO2LilCknjtIKKr0QVIaLr-I8r8rTjDNjWLkmXL1OQzWFuJ2ij2iM59nXzumB4h3IA5_Z0V-ZIiPmtccNFfmFWhHnzA6CgLjaNp1RcQTER5uYyFiWb-Wq7X_9xLIXv5UP74wR5HpcYXBUt1pgeBbFiIsp6kmIpQuOsrP3GZuxdjOqo2bR7P6E8X7YKAs9kl7mxnGPbXTFz5EiNH2S4PJnF0mnm5_WBzjmCXsNBdItTiqeB_ZlbUlXQdUlB8D6g",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYBoQ3x45JHIQTPgQmzoc1MgFPwpyt5pmEUsxRzaDJE6nhN_p5-NQU1TmppXvWwIfksL5H5RGVgbM-0TkmoH0yPoHxVkVnpHD043VV-c4mNrDxairoqhCMr0skuP51qbtR7qfNfVdbsQLhPzJ2WtPji",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 17:56:19.857 +00:00 [DBG] Success validating end session request from MVC
2019-01-25 17:56:20.349 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-25 17:56:20.352 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-25 17:56:20.353 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-25 17:56:20.361 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLK2TPDEE3J1:00000002",
  "TimeStamp": "2019-01-25T17:56:20Z",
  "ProcessId": 988,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 17:59:01.780 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 17:59:03.042 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 17:59:03.257 +00:00 [INF] Setting number of workers to 1
2019-01-25 17:59:03.331 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 17:59:03.361 +00:00 [INF] Bus Rebus 1 started
2019-01-25 17:59:03.439 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 17:59:03.630 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 17:59:03.637 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 17:59:03.734 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 17:59:03.737 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 17:59:03.747 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 17:59:03.751 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 17:59:03.754 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 18:01:36.594 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 18:01:36.840 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 18:01:36.842 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 18:01:36.850 +00:00 [DBG] Start discovery request
2019-01-25 18:01:37.031 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 18:01:37.044 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 18:01:37.045 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 18:01:37.118 +00:00 [DBG] Start key discovery request
2019-01-25 18:01:37.305 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-25 18:01:37.311 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-25 18:01:37.311 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-25 18:01:37.321 +00:00 [DBG] Start authorize request
2019-01-25 18:01:37.340 +00:00 [DBG] No user present in authorize request
2019-01-25 18:01:37.354 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 18:01:37.379 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:01:37.394 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 18:01:37.398 +00:00 [DBG] No PKCE used.
2019-01-25 18:01:37.450 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 18:01:37.467 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbar-OJD2-86f1SwmWYVx3x2UBSYGRhv0iM_XXFCIYh0d0hUKP8AvMC73yklFB7GxuYYPh88aBjf3Q0I9MYjTl1mfflSWWtkspv638B3LOduy8mnzU581CowPmI_jh9pf2DKKA_GYuFwzCtk6Fc6iwk1xsfPNNzsusfIbLybMGRxEETIzdbikWeOlUIBTm_ZalwaDW30OMOkh1cEgsAYmCy_kOWHRKXa2o-6HRWROfQIqtwBEGpE5cj3wakfDoEgHWau0Tl1FXCJR7IhuFw5dm_LgAt8c41q39nUJn4t0C_GF9oUjGMyW_BtR4bxHw9xCc",
  "Nonce": "636840360972197726.MTQxMjJmNGUtNGQ3NC00YTcyLThkMjUtZDlkYzlmMzgyOTMxYmQxZDYzNmQtOWY2OC00YzNhLWExZjAtZTgzYTE5YmJkNDQ2",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840360972197726.MTQxMjJmNGUtNGQ3NC00YTcyLThkMjUtZDlkYzlmMzgyOTMxYmQxZDYzNmQtOWY2OC00YzNhLWExZjAtZTgzYTE5YmJkNDQ2",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbar-OJD2-86f1SwmWYVx3x2UBSYGRhv0iM_XXFCIYh0d0hUKP8AvMC73yklFB7GxuYYPh88aBjf3Q0I9MYjTl1mfflSWWtkspv638B3LOduy8mnzU581CowPmI_jh9pf2DKKA_GYuFwzCtk6Fc6iwk1xsfPNNzsusfIbLybMGRxEETIzdbikWeOlUIBTm_ZalwaDW30OMOkh1cEgsAYmCy_kOWHRKXa2o-6HRWROfQIqtwBEGpE5cj3wakfDoEgHWau0Tl1FXCJR7IhuFw5dm_LgAt8c41q39nUJn4t0C_GF9oUjGMyW_BtR4bxHw9xCc",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 18:01:37.485 +00:00 [INF] Showing login: User is not authenticated
2019-01-25 18:01:37.851 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 18:01:37.853 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:01:37.854 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 18:01:37.854 +00:00 [DBG] No PKCE used.
2019-01-25 18:01:37.855 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 18:01:37.860 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:01:40.752 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-25 18:01:41.873 +00:00 [DBG] Augmenting SignInContext
2019-01-25 18:01:41.878 +00:00 [DBG] Adding idp claim with value: local
2019-01-25 18:01:41.879 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-25 18:01:41.880 +00:00 [DBG] Adding auth_time claim with value: 1548439301
2019-01-25 18:01:41.903 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 18:01:41.931 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK2TSITFIUG:00000003",
  "TimeStamp": "2019-01-25T18:01:41Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:01:41.954 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-25 18:01:41.956 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-25 18:01:41.957 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-25 18:01:41.968 +00:00 [DBG] Start authorize callback request
2019-01-25 18:01:41.975 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 18:01:41.975 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 18:01:41.975 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:01:41.975 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 18:01:41.975 +00:00 [DBG] No PKCE used.
2019-01-25 18:01:41.977 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 18:01:41.979 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbar-OJD2-86f1SwmWYVx3x2UBSYGRhv0iM_XXFCIYh0d0hUKP8AvMC73yklFB7GxuYYPh88aBjf3Q0I9MYjTl1mfflSWWtkspv638B3LOduy8mnzU581CowPmI_jh9pf2DKKA_GYuFwzCtk6Fc6iwk1xsfPNNzsusfIbLybMGRxEETIzdbikWeOlUIBTm_ZalwaDW30OMOkh1cEgsAYmCy_kOWHRKXa2o-6HRWROfQIqtwBEGpE5cj3wakfDoEgHWau0Tl1FXCJR7IhuFw5dm_LgAt8c41q39nUJn4t0C_GF9oUjGMyW_BtR4bxHw9xCc",
  "Nonce": "636840360972197726.MTQxMjJmNGUtNGQ3NC00YTcyLThkMjUtZDlkYzlmMzgyOTMxYmQxZDYzNmQtOWY2OC00YzNhLWExZjAtZTgzYTE5YmJkNDQ2",
  "SessionId": "fb7a2e16825b2b38456235261eede123",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840360972197726.MTQxMjJmNGUtNGQ3NC00YTcyLThkMjUtZDlkYzlmMzgyOTMxYmQxZDYzNmQtOWY2OC00YzNhLWExZjAtZTgzYTE5YmJkNDQ2",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbar-OJD2-86f1SwmWYVx3x2UBSYGRhv0iM_XXFCIYh0d0hUKP8AvMC73yklFB7GxuYYPh88aBjf3Q0I9MYjTl1mfflSWWtkspv638B3LOduy8mnzU581CowPmI_jh9pf2DKKA_GYuFwzCtk6Fc6iwk1xsfPNNzsusfIbLybMGRxEETIzdbikWeOlUIBTm_ZalwaDW30OMOkh1cEgsAYmCy_kOWHRKXa2o-6HRWROfQIqtwBEGpE5cj3wakfDoEgHWau0Tl1FXCJR7IhuFw5dm_LgAt8c41q39nUJn4t0C_GF9oUjGMyW_BtR4bxHw9xCc",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 18:01:42.008 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-25 18:01:42.022 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-25 18:01:42.058 +00:00 [DBG] Creating Implicit Flow response.
2019-01-25 18:01:42.072 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 18:01:42.201 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****SF_A"
    },
    {
      "TokenType": "code",
      "TokenValue": "****92ba"
    }
  ],
  "ActivityId": "0HLK2TSITFIUG:00000004",
  "TimeStamp": "2019-01-25T18:01:42Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:01:42.214 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbar-OJD2-86f1SwmWYVx3x2UBSYGRhv0iM_XXFCIYh0d0hUKP8AvMC73yklFB7GxuYYPh88aBjf3Q0I9MYjTl1mfflSWWtkspv638B3LOduy8mnzU581CowPmI_jh9pf2DKKA_GYuFwzCtk6Fc6iwk1xsfPNNzsusfIbLybMGRxEETIzdbikWeOlUIBTm_ZalwaDW30OMOkh1cEgsAYmCy_kOWHRKXa2o-6HRWROfQIqtwBEGpE5cj3wakfDoEgHWau0Tl1FXCJR7IhuFw5dm_LgAt8c41q39nUJn4t0C_GF9oUjGMyW_BtR4bxHw9xCc",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-25 18:01:42.246 +00:00 [DBG] Augmenting SignInContext
2019-01-25 18:01:42.248 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 18:01:42.700 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 18:01:42.705 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 18:01:42.706 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 18:01:42.722 +00:00 [DBG] Start token request.
2019-01-25 18:01:42.737 +00:00 [DBG] Start client validation
2019-01-25 18:01:42.753 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 18:01:42.760 +00:00 [DBG] Start parsing for secret in post body
2019-01-25 18:01:42.770 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-25 18:01:42.772 +00:00 [DBG] Secret id found: MVC
2019-01-25 18:01:42.773 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:01:42.791 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 18:01:42.791 +00:00 [DBG] Client validation success
2019-01-25 18:01:42.801 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TSITFIUF:00000003",
  "TimeStamp": "2019-01-25T18:01:42Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:01:42.821 +00:00 [DBG] Start token request validation
2019-01-25 18:01:42.839 +00:00 [DBG] Start validation of authorization code token request
2019-01-25 18:01:42.864 +00:00 [DBG] Validation of authorization code token request success
2019-01-25 18:01:42.872 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "4cb2118a6cd93c1d89f9f9e705ac8b7be8e739eedac279e4b2803271944592ba",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "4cb2118a6cd93c1d89f9f9e705ac8b7be8e739eedac279e4b2803271944592ba",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-25 18:01:42.901 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:01:42.917 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 18:01:42.918 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 18:01:42.939 +00:00 [DBG] Creating refresh token
2019-01-25 18:01:42.940 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-25 18:01:42.967 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:01:42.967 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 18:01:42.988 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Lm8g"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****92e2"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****HfEw"
    }
  ],
  "ActivityId": "0HLK2TSITFIUF:00000003",
  "TimeStamp": "2019-01-25T18:01:42Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:01:42.994 +00:00 [DBG] Token request success.
2019-01-25 18:01:43.053 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-25 18:01:43.059 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-25 18:01:43.059 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-25 18:01:43.074 +00:00 [DBG] Start userinfo request
2019-01-25 18:01:43.087 +00:00 [DBG] Bearer token found in header
2019-01-25 18:01:43.187 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:01:43.197 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:01:43.200 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 18:01:43.206 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548439302,
    "exp": 1548442902,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548439301,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-25 18:01:43.230 +00:00 [DBG] Creating userinfo response
2019-01-25 18:01:43.237 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 18:01:43.246 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 18:01:43.254 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-25 18:01:43.255 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 18:01:43.272 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-25 18:01:43.273 +00:00 [DBG] End userinfo request
2019-01-25 18:01:43.902 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 18:01:43.905 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 18:01:43.905 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 18:01:43.932 +00:00 [DBG] Start token request.
2019-01-25 18:01:43.932 +00:00 [DBG] Start client validation
2019-01-25 18:01:43.932 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 18:01:43.933 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 18:01:43.933 +00:00 [DBG] Secret id found: MVC
2019-01-25 18:01:43.933 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:01:43.933 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 18:01:43.933 +00:00 [DBG] Client validation success
2019-01-25 18:01:43.933 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TSITFIUI:00000001",
  "TimeStamp": "2019-01-25T18:01:43Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:01:43.965 +00:00 [DBG] Start token request validation
2019-01-25 18:01:44.001 +00:00 [DBG] Start client credentials token request validation
2019-01-25 18:01:44.009 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 18:01:44.010 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 18:01:44.033 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 18:01:44.040 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****1-fg"
    }
  ],
  "ActivityId": "0HLK2TSITFIUI:00000001",
  "TimeStamp": "2019-01-25T18:01:44Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:01:44.054 +00:00 [DBG] Token request success.
2019-01-25 18:01:44.474 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 18:01:44.479 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 18:01:44.481 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 18:01:44.483 +00:00 [DBG] Start discovery request
2019-01-25 18:01:44.608 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 18:01:44.611 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 18:01:44.614 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 18:01:44.614 +00:00 [DBG] Start key discovery request
2019-01-25 18:02:03.495 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-25 18:02:03.497 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-25 18:02:03.498 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-25 18:02:03.512 +00:00 [DBG] Processing signout request for 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 18:02:03.531 +00:00 [DBG] Start end session request validation
2019-01-25 18:02:03.554 +00:00 [DBG] Start identity token validation
2019-01-25 18:02:03.557 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:02:03.557 +00:00 [DBG] Client found: MVC / MVC
2019-01-25 18:02:03.559 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 18:02:03.560 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1548439302,
    "exp": 1548439602,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636840360972197726.MTQxMjJmNGUtNGQ3NC00YTcyLThkMjUtZDlkYzlmMzgyOTMxYmQxZDYzNmQtOWY2OC00YzNhLWExZjAtZTgzYTE5YmJkNDQ2",
    "iat": 1548439302,
    "at_hash": "yUFkC8qUNypLH2SraUHD_Q",
    "sid": "fb7a2e16825b2b38456235261eede123",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548439301,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "amr": "pwd"
  }
}
2019-01-25 18:02:03.571 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYeNdNdXaLt-KodsUp71TGRacga-QNBxAY1mXFWLHagapuM0xwmG_tCqBQAov2mpt0aIokuaDDDoxkwI6ULjdrFpS4XO5K5jNBnDP-IMb7ckWz9ChRZIEioWzVFHLVEyGhu8MwrQfCLpEGB-1W0FSGL",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDg0MzkzMDIsImV4cCI6MTU0ODQzOTYwMiwiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4NDAzNjA5NzIxOTc3MjYuTVRReE1qSm1OR1V0TkdRM05DMDBZVGN5TFRoa01qVXRaRGxrWXpsbU16Z3lPVE14WW1ReFpEWXpObVF0T1dZMk9DMDBZek5oTFdFeFpqQXRaVGd6WVRFNVltSmtORFEyIiwiaWF0IjoxNTQ4NDM5MzAyLCJhdF9oYXNoIjoieVVGa0M4cVVOeXBMSDJTcmFVSERfUSIsInNpZCI6ImZiN2EyZTE2ODI1YjJiMzg0NTYyMzUyNjFlZWRlMTIzIiwic3ViIjoiMTczZjk2NGYtMWViOS00M2NmLTkxYzctZGY3NTM3MTdjMTZjIiwiYXV0aF90aW1lIjoxNTQ4NDM5MzAxLCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImVtYWlsIjoiYWxpY2VAYXNwLm5ldCIsInBob25lIjoiMTIzNC01Njc4IiwiYWRkcmVzcyI6IlJ1YSBWZXJndWVpcm8sIDQ1NiIsImFkZHJlc3NfZGV0YWlscyI6IjggYW5kYXIgc2FsYSA4MDEiLCJuZWlnaGJvcmhvb2QiOiJWaWxhIE1hcmlhbmEiLCJjaXR5IjoiU8OjbyBQYXVsbyIsInN0YXRlIjoiU1AiLCJ6aXBfY29kZSI6IjY5MTE4IiwiYW1yIjpbInB3ZCJdfQ.OsWi4PK7_QW82YpnhVjBHdJB5Rxg935EA_UmJNLzEmFl3dI5SzQM-e8N2xQ8HhS0nT6kzX0NRYbEkUY8YpnwKOl-OM0AW7TtzKT14ZlBlK5cQl2OtfMTS9zmT1UEqiXI_WfCzlTT0CzWubTRrn6cyhKc7P2mhh-pppSg04zHmdXCUEKgEO4hr5JQgYoZSzO0DOqBC12aoFPOFD7gsuDGvWDHPGquXfLQG7ZbLKNEZ-EHS882R6rwZZzSRbOicfBPqPLfvOvnvVNa6KEwRmjSB7VYbP-y5CeAkh2qkgH8RjZWK5EnmPi2UVIShG7ZX8zBn9h6BRloNjJKGJ1ZztLm8g",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYeNdNdXaLt-KodsUp71TGRacga-QNBxAY1mXFWLHagapuM0xwmG_tCqBQAov2mpt0aIokuaDDDoxkwI6ULjdrFpS4XO5K5jNBnDP-IMb7ckWz9ChRZIEioWzVFHLVEyGhu8MwrQfCLpEGB-1W0FSGL",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 18:02:03.572 +00:00 [DBG] Success validating end session request from MVC
2019-01-25 18:02:03.658 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-25 18:02:03.660 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-25 18:02:03.661 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-25 18:02:03.670 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLK2TSITFIUG:00000006",
  "TimeStamp": "2019-01-25T18:02:03Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:02:06.559 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-25 18:02:06.561 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-25 18:02:06.561 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-25 18:02:06.561 +00:00 [DBG] Start authorize request
2019-01-25 18:02:06.562 +00:00 [DBG] No user present in authorize request
2019-01-25 18:02:06.562 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 18:02:06.562 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:02:06.562 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 18:02:06.562 +00:00 [DBG] No PKCE used.
2019-01-25 18:02:06.563 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 18:02:06.563 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYCHpMufMjqGT63Uee0c-DFZY8k6Pvibr0djIGGnoyQgbjgEgXDqRuqfFGDaf2zsQMF9sLavXFZ-qAQQmcfVdxQGxLY9mwWMwAqu6zl7Meaodgm9ptXo_oRGoEsZu5CDZ_4QrB9MWpnY7gTSwaCoMVArH9jiBJItpyj_3hw06gnt5LbHB78ULvhEzQzOw3Q43gTNq8Ui3ONwgFzvbzAsP98ZuSVbKbYd-HM_SGqTpGAc8Qj--zasNMYIUpI36-Mb_s7Io8V5CYgaiuVXJx3GHnQ3i2GZQ0CRqjyxHlPB_LrNPUKNN0NJCPN1ecjA2DGrxM",
  "Nonce": "636840361265483217.ODRlNjgzYWEtZTVhYi00MjU5LWEyNDItZGU2NmIwODcyZWU0ZDhmZWY3MzUtN2YzNS00YjQyLTg4YTItMDE1YmY5M2Q0ZTNm",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840361265483217.ODRlNjgzYWEtZTVhYi00MjU5LWEyNDItZGU2NmIwODcyZWU0ZDhmZWY3MzUtN2YzNS00YjQyLTg4YTItMDE1YmY5M2Q0ZTNm",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYCHpMufMjqGT63Uee0c-DFZY8k6Pvibr0djIGGnoyQgbjgEgXDqRuqfFGDaf2zsQMF9sLavXFZ-qAQQmcfVdxQGxLY9mwWMwAqu6zl7Meaodgm9ptXo_oRGoEsZu5CDZ_4QrB9MWpnY7gTSwaCoMVArH9jiBJItpyj_3hw06gnt5LbHB78ULvhEzQzOw3Q43gTNq8Ui3ONwgFzvbzAsP98ZuSVbKbYd-HM_SGqTpGAc8Qj--zasNMYIUpI36-Mb_s7Io8V5CYgaiuVXJx3GHnQ3i2GZQ0CRqjyxHlPB_LrNPUKNN0NJCPN1ecjA2DGrxM",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 18:02:06.564 +00:00 [INF] Showing login: User is not authenticated
2019-01-25 18:02:06.590 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 18:02:06.591 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:02:06.592 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 18:02:06.594 +00:00 [DBG] No PKCE used.
2019-01-25 18:02:06.597 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 18:02:06.598 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:02:12.236 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-25 18:02:12.325 +00:00 [DBG] Augmenting SignInContext
2019-01-25 18:02:12.327 +00:00 [DBG] Adding idp claim with value: local
2019-01-25 18:02:12.329 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-25 18:02:12.331 +00:00 [DBG] Adding auth_time claim with value: 1548439332
2019-01-25 18:02:12.332 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 18:02:12.342 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK2TSITFIUG:00000009",
  "TimeStamp": "2019-01-25T18:02:12Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:02:12.354 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-25 18:02:12.354 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-25 18:02:12.354 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-25 18:02:12.354 +00:00 [DBG] Start authorize callback request
2019-01-25 18:02:12.355 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 18:02:12.356 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 18:02:12.356 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:02:12.356 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 18:02:12.356 +00:00 [DBG] No PKCE used.
2019-01-25 18:02:12.361 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 18:02:12.361 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYCHpMufMjqGT63Uee0c-DFZY8k6Pvibr0djIGGnoyQgbjgEgXDqRuqfFGDaf2zsQMF9sLavXFZ-qAQQmcfVdxQGxLY9mwWMwAqu6zl7Meaodgm9ptXo_oRGoEsZu5CDZ_4QrB9MWpnY7gTSwaCoMVArH9jiBJItpyj_3hw06gnt5LbHB78ULvhEzQzOw3Q43gTNq8Ui3ONwgFzvbzAsP98ZuSVbKbYd-HM_SGqTpGAc8Qj--zasNMYIUpI36-Mb_s7Io8V5CYgaiuVXJx3GHnQ3i2GZQ0CRqjyxHlPB_LrNPUKNN0NJCPN1ecjA2DGrxM",
  "Nonce": "636840361265483217.ODRlNjgzYWEtZTVhYi00MjU5LWEyNDItZGU2NmIwODcyZWU0ZDhmZWY3MzUtN2YzNS00YjQyLTg4YTItMDE1YmY5M2Q0ZTNm",
  "SessionId": "c724e41e67f41c8324d724a592565501",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840361265483217.ODRlNjgzYWEtZTVhYi00MjU5LWEyNDItZGU2NmIwODcyZWU0ZDhmZWY3MzUtN2YzNS00YjQyLTg4YTItMDE1YmY5M2Q0ZTNm",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYCHpMufMjqGT63Uee0c-DFZY8k6Pvibr0djIGGnoyQgbjgEgXDqRuqfFGDaf2zsQMF9sLavXFZ-qAQQmcfVdxQGxLY9mwWMwAqu6zl7Meaodgm9ptXo_oRGoEsZu5CDZ_4QrB9MWpnY7gTSwaCoMVArH9jiBJItpyj_3hw06gnt5LbHB78ULvhEzQzOw3Q43gTNq8Ui3ONwgFzvbzAsP98ZuSVbKbYd-HM_SGqTpGAc8Qj--zasNMYIUpI36-Mb_s7Io8V5CYgaiuVXJx3GHnQ3i2GZQ0CRqjyxHlPB_LrNPUKNN0NJCPN1ecjA2DGrxM",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 18:02:12.362 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-25 18:02:12.362 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-25 18:02:12.420 +00:00 [DBG] Creating Implicit Flow response.
2019-01-25 18:02:12.420 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 18:02:12.440 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****boLA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****253e"
    }
  ],
  "ActivityId": "0HLK2TSITFIUG:0000000A",
  "TimeStamp": "2019-01-25T18:02:12Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:02:12.444 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpYCHpMufMjqGT63Uee0c-DFZY8k6Pvibr0djIGGnoyQgbjgEgXDqRuqfFGDaf2zsQMF9sLavXFZ-qAQQmcfVdxQGxLY9mwWMwAqu6zl7Meaodgm9ptXo_oRGoEsZu5CDZ_4QrB9MWpnY7gTSwaCoMVArH9jiBJItpyj_3hw06gnt5LbHB78ULvhEzQzOw3Q43gTNq8Ui3ONwgFzvbzAsP98ZuSVbKbYd-HM_SGqTpGAc8Qj--zasNMYIUpI36-Mb_s7Io8V5CYgaiuVXJx3GHnQ3i2GZQ0CRqjyxHlPB_LrNPUKNN0NJCPN1ecjA2DGrxM",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-25 18:02:12.445 +00:00 [DBG] Augmenting SignInContext
2019-01-25 18:02:12.447 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 18:02:12.577 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 18:02:12.578 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 18:02:12.579 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 18:02:12.580 +00:00 [DBG] Start token request.
2019-01-25 18:02:12.580 +00:00 [DBG] Start client validation
2019-01-25 18:02:12.580 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 18:02:12.580 +00:00 [DBG] Start parsing for secret in post body
2019-01-25 18:02:12.599 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-25 18:02:12.600 +00:00 [DBG] Secret id found: MVC
2019-01-25 18:02:12.600 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:02:12.601 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 18:02:12.601 +00:00 [DBG] Client validation success
2019-01-25 18:02:12.601 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TSITFIUF:00000005",
  "TimeStamp": "2019-01-25T18:02:12Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:02:12.601 +00:00 [DBG] Start token request validation
2019-01-25 18:02:12.602 +00:00 [DBG] Start validation of authorization code token request
2019-01-25 18:02:12.638 +00:00 [DBG] Validation of authorization code token request success
2019-01-25 18:02:12.638 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "7892300f67ad9ed86adcac6dd2a2fc3ec6d64e5b5d93c804313b86ece04a253e",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "7892300f67ad9ed86adcac6dd2a2fc3ec6d64e5b5d93c804313b86ece04a253e",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-25 18:02:12.639 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:02:12.639 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 18:02:12.640 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 18:02:12.685 +00:00 [DBG] Creating refresh token
2019-01-25 18:02:12.685 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-25 18:02:12.705 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:02:12.706 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 18:02:12.725 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****zCSg"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****57f6"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****NrcQ"
    }
  ],
  "ActivityId": "0HLK2TSITFIUF:00000005",
  "TimeStamp": "2019-01-25T18:02:12Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:02:12.726 +00:00 [DBG] Token request success.
2019-01-25 18:02:12.764 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-25 18:02:12.765 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-25 18:02:12.765 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-25 18:02:12.765 +00:00 [DBG] Start userinfo request
2019-01-25 18:02:12.765 +00:00 [DBG] Bearer token found in header
2019-01-25 18:02:12.768 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:02:12.770 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:02:12.770 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 18:02:12.770 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548439332,
    "exp": 1548442932,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548439332,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-25 18:02:12.770 +00:00 [DBG] Creating userinfo response
2019-01-25 18:02:12.771 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 18:02:12.771 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 18:02:12.775 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-25 18:02:12.783 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 18:02:12.822 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-25 18:02:12.825 +00:00 [DBG] End userinfo request
2019-01-25 18:02:13.046 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 18:02:13.047 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 18:02:13.047 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 18:02:13.047 +00:00 [DBG] Start token request.
2019-01-25 18:02:13.049 +00:00 [DBG] Start client validation
2019-01-25 18:02:13.049 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 18:02:13.049 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 18:02:13.049 +00:00 [DBG] Secret id found: MVC
2019-01-25 18:02:13.049 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:02:13.049 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 18:02:13.049 +00:00 [DBG] Client validation success
2019-01-25 18:02:13.050 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TSITFIUL:00000001",
  "TimeStamp": "2019-01-25T18:02:13Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:02:13.061 +00:00 [DBG] Start token request validation
2019-01-25 18:02:13.065 +00:00 [DBG] Start client credentials token request validation
2019-01-25 18:02:13.067 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 18:02:13.067 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 18:02:13.068 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 18:02:13.071 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****O40w"
    }
  ],
  "ActivityId": "0HLK2TSITFIUL:00000001",
  "TimeStamp": "2019-01-25T18:02:13Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:02:13.072 +00:00 [DBG] Token request success.
2019-01-25 18:02:19.902 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 18:02:19.902 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 18:02:19.902 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 18:02:19.903 +00:00 [DBG] Start token request.
2019-01-25 18:02:19.903 +00:00 [DBG] Start client validation
2019-01-25 18:02:19.903 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 18:02:19.903 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 18:02:19.903 +00:00 [DBG] Secret id found: MVC
2019-01-25 18:02:19.903 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:02:19.903 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 18:02:19.903 +00:00 [DBG] Client validation success
2019-01-25 18:02:19.903 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TSITFIUM:00000001",
  "TimeStamp": "2019-01-25T18:02:19Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:02:19.936 +00:00 [DBG] Start token request validation
2019-01-25 18:02:19.936 +00:00 [DBG] Start client credentials token request validation
2019-01-25 18:02:19.936 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 18:02:19.944 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 18:02:19.944 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 18:02:19.948 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****RwbQ"
    }
  ],
  "ActivityId": "0HLK2TSITFIUM:00000001",
  "TimeStamp": "2019-01-25T18:02:19Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:02:19.948 +00:00 [DBG] Token request success.
2019-01-25 18:02:20.614 +00:00 [INF] Message received:
2019-01-25 18:02:20.615 +00:00 [INF] ----------------------------------
2019-01-25 18:02:20.639 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"7a2da578-c313-44ee-bf7e-e18dcd545048","CreationDate":"2019-01-25T18:02:20.4765135Z"}
2019-01-25 18:02:20.642 +00:00 [INF] ----------------------------------
2019-01-25 18:02:21.666 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 97cd8eba-509b-4551-af98-a3ecdc0f7e44 to 1 handlers took 1063 ms
2019-01-25 18:18:02.079 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 18:18:02.080 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 18:18:02.080 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 18:18:02.082 +00:00 [DBG] Start token request.
2019-01-25 18:18:02.082 +00:00 [DBG] Start client validation
2019-01-25 18:18:02.082 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 18:18:02.082 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 18:18:02.082 +00:00 [DBG] Secret id found: MVC
2019-01-25 18:18:02.082 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:18:02.082 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 18:18:02.082 +00:00 [DBG] Client validation success
2019-01-25 18:18:02.082 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TSITFIUN:00000001",
  "TimeStamp": "2019-01-25T18:18:02Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:18:02.125 +00:00 [DBG] Start token request validation
2019-01-25 18:18:02.125 +00:00 [DBG] Start client credentials token request validation
2019-01-25 18:18:02.125 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 18:18:02.125 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 18:18:02.125 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 18:18:02.128 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****CafQ"
    }
  ],
  "ActivityId": "0HLK2TSITFIUN:00000001",
  "TimeStamp": "2019-01-25T18:18:02Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:18:02.128 +00:00 [DBG] Token request success.
2019-01-25 18:18:05.079 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 18:18:05.079 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 18:18:05.080 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 18:18:05.080 +00:00 [DBG] Start token request.
2019-01-25 18:18:05.081 +00:00 [DBG] Start client validation
2019-01-25 18:18:05.081 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 18:18:05.082 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 18:18:05.082 +00:00 [DBG] Secret id found: MVC
2019-01-25 18:18:05.083 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:18:05.083 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 18:18:05.084 +00:00 [DBG] Client validation success
2019-01-25 18:18:05.084 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2TSITFIUO:00000001",
  "TimeStamp": "2019-01-25T18:18:05Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:18:05.099 +00:00 [DBG] Start token request validation
2019-01-25 18:18:05.100 +00:00 [DBG] Start client credentials token request validation
2019-01-25 18:18:05.103 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 18:18:05.105 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 18:18:05.113 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 18:18:05.121 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****0VPA"
    }
  ],
  "ActivityId": "0HLK2TSITFIUO:00000001",
  "TimeStamp": "2019-01-25T18:18:05Z",
  "ProcessId": 1122,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:18:05.135 +00:00 [DBG] Token request success.
2019-01-25 18:18:05.364 +00:00 [INF] Message received:
2019-01-25 18:18:05.364 +00:00 [INF] ----------------------------------
2019-01-25 18:18:05.364 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"cd65cd11-c4d3-4022-bc96-01b91a115dfb","CreationDate":"2019-01-25T18:18:05.3638178Z"}
2019-01-25 18:18:05.364 +00:00 [INF] ----------------------------------
2019-01-25 18:18:06.269 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 21343e45-48c7-4ff0-bd7e-49912cabeff7 to 1 handlers took 905 ms
2019-01-25 18:57:10.339 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 18:57:12.242 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 18:57:12.415 +00:00 [INF] Setting number of workers to 1
2019-01-25 18:57:12.437 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 18:57:12.473 +00:00 [INF] Bus Rebus 1 started
2019-01-25 18:57:12.474 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 18:57:12.605 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 18:57:12.637 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 18:57:12.662 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 18:57:12.664 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 18:57:12.668 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 18:57:12.672 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 18:57:12.678 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 18:58:31.190 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 18:58:31.587 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 18:58:31.588 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 18:58:31.595 +00:00 [DBG] Start discovery request
2019-01-25 18:58:31.859 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 18:58:31.861 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 18:58:31.861 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 18:58:31.878 +00:00 [DBG] Start key discovery request
2019-01-25 18:58:33.233 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-25 18:58:33.262 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-25 18:58:33.263 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-25 18:58:33.285 +00:00 [DBG] Processing signout request for 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 18:58:33.298 +00:00 [DBG] Start end session request validation
2019-01-25 18:58:33.309 +00:00 [DBG] Start identity token validation
2019-01-25 18:58:33.344 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:58:33.344 +00:00 [DBG] Client found: MVC / MVC
2019-01-25 18:58:33.435 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 18:58:33.445 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1548439332,
    "exp": 1548439632,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636840361265483217.ODRlNjgzYWEtZTVhYi00MjU5LWEyNDItZGU2NmIwODcyZWU0ZDhmZWY3MzUtN2YzNS00YjQyLTg4YTItMDE1YmY5M2Q0ZTNm",
    "iat": 1548439332,
    "at_hash": "7nzHFHZVpIG7Aqh117w9Dg",
    "sid": "c724e41e67f41c8324d724a592565501",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548439332,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "amr": "pwd"
  }
}
2019-01-25 18:58:33.486 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbxSIsWRWTS7-UNXY8ezNxg9fonpGYSaf7YQwhsCKaIYzCxRdHlVWF7iqkRJLHAW60M878tLaTIj9pMrquWiqUsD08YYRjm_EhltwAz9kZuBovcpCyk3FKu_gDfrFY2KaID-lJTUBbYQYK5aip0hhwv",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDg0MzkzMzIsImV4cCI6MTU0ODQzOTYzMiwiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4NDAzNjEyNjU0ODMyMTcuT0RSbE5qZ3pZV0V0WlRWaFlpMDBNalU1TFdFeU5ESXRaR1UyTm1Jd09EY3laV1UwWkRobVpXWTNNelV0TjJZek5TMDBZalF5TFRnNFlUSXRNREUxWW1ZNU0yUTBaVE5tIiwiaWF0IjoxNTQ4NDM5MzMyLCJhdF9oYXNoIjoiN256SEZIWlZwSUc3QXFoMTE3dzlEZyIsInNpZCI6ImM3MjRlNDFlNjdmNDFjODMyNGQ3MjRhNTkyNTY1NTAxIiwic3ViIjoiMTczZjk2NGYtMWViOS00M2NmLTkxYzctZGY3NTM3MTdjMTZjIiwiYXV0aF90aW1lIjoxNTQ4NDM5MzMyLCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImVtYWlsIjoiYWxpY2VAYXNwLm5ldCIsInBob25lIjoiMTIzNC01Njc4IiwiYWRkcmVzcyI6IlJ1YSBWZXJndWVpcm8sIDQ1NiIsImFkZHJlc3NfZGV0YWlscyI6IjggYW5kYXIgc2FsYSA4MDEiLCJuZWlnaGJvcmhvb2QiOiJWaWxhIE1hcmlhbmEiLCJjaXR5IjoiU8OjbyBQYXVsbyIsInN0YXRlIjoiU1AiLCJ6aXBfY29kZSI6IjY5MTE4IiwiYW1yIjpbInB3ZCJdfQ.n0coUJ904i9BZ-VWKd4G5OUgwsx3lKG9_BevJv-TvRgrekjOpa1T71A815HcZArQlIhRcBLde_IQNTT001-9UDG04PvXwoffmA9tKaj1ZVslUtUC9XEpkb_GrV1oBFQ1y_SW3B6dP4zBOE5czUp8jhd2YrdiABiaDDm7tFlfmprxNdKcSLEQTx4LVjisF_3EOTR1kQFwpun8x8QGPW3vNOsVGqHhEPf9J6qQBjXcK4N7XruBgH4r7CGfb0Z0_oKErI1wIrjiprkCLxIZq6L5jZkPMG1-2TdrJEXiPIBHRTqEvCqiLfuTBuzec2REf2qkWLRYYB6eONIdtkeaO7zCSg",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbxSIsWRWTS7-UNXY8ezNxg9fonpGYSaf7YQwhsCKaIYzCxRdHlVWF7iqkRJLHAW60M878tLaTIj9pMrquWiqUsD08YYRjm_EhltwAz9kZuBovcpCyk3FKu_gDfrFY2KaID-lJTUBbYQYK5aip0hhwv",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 18:58:33.486 +00:00 [DBG] Success validating end session request from MVC
2019-01-25 18:58:34.005 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-25 18:58:34.008 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-25 18:58:34.009 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-25 18:58:34.032 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLK2USCGLV0J:00000002",
  "TimeStamp": "2019-01-25T18:58:34Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:58:36.243 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-25 18:58:36.250 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-25 18:58:36.251 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-25 18:58:36.265 +00:00 [DBG] Start authorize request
2019-01-25 18:58:36.280 +00:00 [DBG] No user present in authorize request
2019-01-25 18:58:36.293 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 18:58:36.307 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:58:36.325 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 18:58:36.328 +00:00 [DBG] No PKCE used.
2019-01-25 18:58:36.390 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 18:58:36.404 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpb0vAkWyaK2n7dzA-CfYKj8tlXOCqgy4FE-5xsSMX9CJDt2wu34sFFkSbperuMRUSpQF9u7NRaQFzx7TVeEhR5-75vQenqJtF6vhUE-2DdB6F60wiYftbtHusVcXZA2JDMQWgFUmOhxHajJWpGPgItO5xbuUrR3-c6JzzCRJwBzyNgbzH1zHrG9HYHd19z_eij84Esr1oiv5b_xqAYxRCpgTwZXFTDXCUJ7MUHON35La9YtOWGRWEF9js_hy7iFP9B0SgJa8GAj6IBSQUBaM2riDnF5ekMD2b95PjvztkN0AIHeFzIUD0leBVt9E2obqa8",
  "Nonce": "636840395162302233.NDIyM2JmNmItNGRjNy00NDIwLWFiYjMtZmQ4MjY2MTcwMGRiOWM1MzY2NTYtYWY5Ni00ZmFkLThjZjQtNTc4MDAzYjJjMjc3",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840395162302233.NDIyM2JmNmItNGRjNy00NDIwLWFiYjMtZmQ4MjY2MTcwMGRiOWM1MzY2NTYtYWY5Ni00ZmFkLThjZjQtNTc4MDAzYjJjMjc3",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpb0vAkWyaK2n7dzA-CfYKj8tlXOCqgy4FE-5xsSMX9CJDt2wu34sFFkSbperuMRUSpQF9u7NRaQFzx7TVeEhR5-75vQenqJtF6vhUE-2DdB6F60wiYftbtHusVcXZA2JDMQWgFUmOhxHajJWpGPgItO5xbuUrR3-c6JzzCRJwBzyNgbzH1zHrG9HYHd19z_eij84Esr1oiv5b_xqAYxRCpgTwZXFTDXCUJ7MUHON35La9YtOWGRWEF9js_hy7iFP9B0SgJa8GAj6IBSQUBaM2riDnF5ekMD2b95PjvztkN0AIHeFzIUD0leBVt9E2obqa8",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 18:58:36.431 +00:00 [INF] Showing login: User is not authenticated
2019-01-25 18:58:36.531 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 18:58:36.531 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:58:36.532 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 18:58:36.533 +00:00 [DBG] No PKCE used.
2019-01-25 18:58:36.533 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 18:58:36.539 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:58:39.704 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-25 18:58:39.916 +00:00 [DBG] Augmenting SignInContext
2019-01-25 18:58:39.925 +00:00 [DBG] Adding idp claim with value: local
2019-01-25 18:58:39.926 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-25 18:58:39.927 +00:00 [DBG] Adding auth_time claim with value: 1548442719
2019-01-25 18:58:39.941 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 18:58:39.956 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK2USCGLV0J:00000005",
  "TimeStamp": "2019-01-25T18:58:39Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:58:39.969 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-25 18:58:39.971 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-25 18:58:39.971 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-25 18:58:39.983 +00:00 [DBG] Start authorize callback request
2019-01-25 18:58:39.989 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 18:58:39.989 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 18:58:39.989 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:58:39.989 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 18:58:39.989 +00:00 [DBG] No PKCE used.
2019-01-25 18:58:39.990 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 18:58:39.991 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpb0vAkWyaK2n7dzA-CfYKj8tlXOCqgy4FE-5xsSMX9CJDt2wu34sFFkSbperuMRUSpQF9u7NRaQFzx7TVeEhR5-75vQenqJtF6vhUE-2DdB6F60wiYftbtHusVcXZA2JDMQWgFUmOhxHajJWpGPgItO5xbuUrR3-c6JzzCRJwBzyNgbzH1zHrG9HYHd19z_eij84Esr1oiv5b_xqAYxRCpgTwZXFTDXCUJ7MUHON35La9YtOWGRWEF9js_hy7iFP9B0SgJa8GAj6IBSQUBaM2riDnF5ekMD2b95PjvztkN0AIHeFzIUD0leBVt9E2obqa8",
  "Nonce": "636840395162302233.NDIyM2JmNmItNGRjNy00NDIwLWFiYjMtZmQ4MjY2MTcwMGRiOWM1MzY2NTYtYWY5Ni00ZmFkLThjZjQtNTc4MDAzYjJjMjc3",
  "SessionId": "6a0bc12e37c7626935fee9815606040a",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840395162302233.NDIyM2JmNmItNGRjNy00NDIwLWFiYjMtZmQ4MjY2MTcwMGRiOWM1MzY2NTYtYWY5Ni00ZmFkLThjZjQtNTc4MDAzYjJjMjc3",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpb0vAkWyaK2n7dzA-CfYKj8tlXOCqgy4FE-5xsSMX9CJDt2wu34sFFkSbperuMRUSpQF9u7NRaQFzx7TVeEhR5-75vQenqJtF6vhUE-2DdB6F60wiYftbtHusVcXZA2JDMQWgFUmOhxHajJWpGPgItO5xbuUrR3-c6JzzCRJwBzyNgbzH1zHrG9HYHd19z_eij84Esr1oiv5b_xqAYxRCpgTwZXFTDXCUJ7MUHON35La9YtOWGRWEF9js_hy7iFP9B0SgJa8GAj6IBSQUBaM2riDnF5ekMD2b95PjvztkN0AIHeFzIUD0leBVt9E2obqa8",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 18:58:40.027 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-25 18:58:40.039 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-25 18:58:40.081 +00:00 [DBG] Creating Implicit Flow response.
2019-01-25 18:58:40.103 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 18:58:40.209 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****xsew"
    },
    {
      "TokenType": "code",
      "TokenValue": "****214e"
    }
  ],
  "ActivityId": "0HLK2USCGLV0J:00000006",
  "TimeStamp": "2019-01-25T18:58:40Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:58:40.219 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpb0vAkWyaK2n7dzA-CfYKj8tlXOCqgy4FE-5xsSMX9CJDt2wu34sFFkSbperuMRUSpQF9u7NRaQFzx7TVeEhR5-75vQenqJtF6vhUE-2DdB6F60wiYftbtHusVcXZA2JDMQWgFUmOhxHajJWpGPgItO5xbuUrR3-c6JzzCRJwBzyNgbzH1zHrG9HYHd19z_eij84Esr1oiv5b_xqAYxRCpgTwZXFTDXCUJ7MUHON35La9YtOWGRWEF9js_hy7iFP9B0SgJa8GAj6IBSQUBaM2riDnF5ekMD2b95PjvztkN0AIHeFzIUD0leBVt9E2obqa8",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-25 18:58:40.260 +00:00 [DBG] Augmenting SignInContext
2019-01-25 18:58:40.261 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 18:58:40.718 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 18:58:40.723 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 18:58:40.724 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 18:58:40.737 +00:00 [DBG] Start token request.
2019-01-25 18:58:40.754 +00:00 [DBG] Start client validation
2019-01-25 18:58:40.769 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 18:58:40.779 +00:00 [DBG] Start parsing for secret in post body
2019-01-25 18:58:40.783 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-25 18:58:40.783 +00:00 [DBG] Secret id found: MVC
2019-01-25 18:58:40.784 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:58:40.803 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 18:58:40.803 +00:00 [DBG] Client validation success
2019-01-25 18:58:40.814 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2USCGLV0I:00000003",
  "TimeStamp": "2019-01-25T18:58:40Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:58:40.833 +00:00 [DBG] Start token request validation
2019-01-25 18:58:40.851 +00:00 [DBG] Start validation of authorization code token request
2019-01-25 18:58:40.874 +00:00 [DBG] Validation of authorization code token request success
2019-01-25 18:58:40.882 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "a860452e4c2f7477343d8a74d2c5a1324cb6c21d1f310fe9d03fbb564f97214e",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "a860452e4c2f7477343d8a74d2c5a1324cb6c21d1f310fe9d03fbb564f97214e",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-25 18:58:40.911 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:58:40.927 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 18:58:40.928 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 18:58:40.954 +00:00 [DBG] Creating refresh token
2019-01-25 18:58:40.954 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-25 18:58:40.976 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:58:40.977 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 18:58:40.992 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****QyXg"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****a0d7"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****HTQw"
    }
  ],
  "ActivityId": "0HLK2USCGLV0I:00000003",
  "TimeStamp": "2019-01-25T18:58:40Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:58:40.997 +00:00 [DBG] Token request success.
2019-01-25 18:58:41.057 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-25 18:58:41.059 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-25 18:58:41.060 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-25 18:58:41.079 +00:00 [DBG] Start userinfo request
2019-01-25 18:58:41.091 +00:00 [DBG] Bearer token found in header
2019-01-25 18:58:41.141 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:58:41.142 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:58:41.143 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 18:58:41.145 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548442720,
    "exp": 1548446320,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548442719,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-25 18:58:41.192 +00:00 [DBG] Creating userinfo response
2019-01-25 18:58:41.203 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 18:58:41.209 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 18:58:41.219 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-25 18:58:41.220 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 18:58:41.242 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-25 18:58:41.242 +00:00 [DBG] End userinfo request
2019-01-25 18:58:41.654 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 18:58:41.656 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 18:58:41.657 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 18:58:41.657 +00:00 [DBG] Start token request.
2019-01-25 18:58:41.657 +00:00 [DBG] Start client validation
2019-01-25 18:58:41.657 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 18:58:41.657 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 18:58:41.657 +00:00 [DBG] Secret id found: MVC
2019-01-25 18:58:41.657 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:58:41.658 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 18:58:41.658 +00:00 [DBG] Client validation success
2019-01-25 18:58:41.658 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2USCGLV0L:00000001",
  "TimeStamp": "2019-01-25T18:58:41Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:58:41.680 +00:00 [DBG] Start token request validation
2019-01-25 18:58:41.690 +00:00 [DBG] Start client credentials token request validation
2019-01-25 18:58:41.715 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 18:58:41.716 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 18:58:41.731 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 18:58:41.736 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****X8mw"
    }
  ],
  "ActivityId": "0HLK2USCGLV0L:00000001",
  "TimeStamp": "2019-01-25T18:58:41Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:58:41.750 +00:00 [DBG] Token request success.
2019-01-25 18:58:42.220 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 18:58:42.229 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 18:58:42.229 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 18:58:42.229 +00:00 [DBG] Start discovery request
2019-01-25 18:58:42.448 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 18:58:42.448 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 18:58:42.448 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 18:58:42.449 +00:00 [DBG] Start key discovery request
2019-01-25 18:58:48.893 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 18:58:48.894 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 18:58:48.894 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 18:58:48.894 +00:00 [DBG] Start token request.
2019-01-25 18:58:48.894 +00:00 [DBG] Start client validation
2019-01-25 18:58:48.894 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 18:58:48.894 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 18:58:48.894 +00:00 [DBG] Secret id found: MVC
2019-01-25 18:58:48.894 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 18:58:48.894 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 18:58:48.894 +00:00 [DBG] Client validation success
2019-01-25 18:58:48.895 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2USCGLV0N:00000001",
  "TimeStamp": "2019-01-25T18:58:48Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:58:48.899 +00:00 [DBG] Start token request validation
2019-01-25 18:58:48.899 +00:00 [DBG] Start client credentials token request validation
2019-01-25 18:58:48.900 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 18:58:48.900 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 18:58:48.901 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 18:58:48.908 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****SLxQ"
    }
  ],
  "ActivityId": "0HLK2USCGLV0N:00000001",
  "TimeStamp": "2019-01-25T18:58:48Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 18:58:48.909 +00:00 [DBG] Token request success.
2019-01-25 18:58:49.794 +00:00 [INF] Message received:
2019-01-25 18:58:49.795 +00:00 [INF] ----------------------------------
2019-01-25 18:58:49.805 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"baa3f1ab-6a86-49d7-b563-d3bcedb0b3ca","CreationDate":"2019-01-25T18:58:49.6445545Z"}
2019-01-25 18:58:49.805 +00:00 [INF] ----------------------------------
2019-01-25 18:58:51.092 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens ad23239b-a656-48c3-a6cd-8ab04852ec78 to 1 handlers took 1312 ms
2019-01-25 19:38:05.976 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-25 19:38:05.977 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-25 19:38:05.978 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-25 19:38:05.980 +00:00 [DBG] Processing signout request for 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 19:38:05.982 +00:00 [DBG] Start end session request validation
2019-01-25 19:38:05.991 +00:00 [DBG] Start identity token validation
2019-01-25 19:38:05.993 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 19:38:05.995 +00:00 [DBG] Client found: MVC / MVC
2019-01-25 19:38:05.998 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 19:38:06.003 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1548442720,
    "exp": 1548443020,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636840395162302233.NDIyM2JmNmItNGRjNy00NDIwLWFiYjMtZmQ4MjY2MTcwMGRiOWM1MzY2NTYtYWY5Ni00ZmFkLThjZjQtNTc4MDAzYjJjMjc3",
    "iat": 1548442720,
    "at_hash": "dOQ7nPHG-Y-R81vyBUn1IQ",
    "sid": "6a0bc12e37c7626935fee9815606040a",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548442719,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "amr": "pwd"
  }
}
2019-01-25 19:38:06.004 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpZ3dt46nIbWcZkl_IwxUCumYc-dCxdFv1Ap9Cac_zSc8lH6TfLwRu8fDFFMcy18FcqyRjxmoLahjIHsEUaqcuFoICRsh2LWtiF9TgstuKK8RcLQkmFpZmp614Lp8fgeylaSGtfOfS0uk4NLpkeKfC9w",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDg0NDI3MjAsImV4cCI6MTU0ODQ0MzAyMCwiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4NDAzOTUxNjIzMDIyMzMuTkRJeU0ySm1ObUl0TkdSak55MDBOREl3TFdGaVlqTXRabVE0TWpZMk1UY3dNR1JpT1dNMU16WTJOVFl0WVdZNU5pMDBabUZrTFRoalpqUXROVGM0TURBellqSmpNamMzIiwiaWF0IjoxNTQ4NDQyNzIwLCJhdF9oYXNoIjoiZE9RN25QSEctWS1SODF2eUJVbjFJUSIsInNpZCI6IjZhMGJjMTJlMzdjNzYyNjkzNWZlZTk4MTU2MDYwNDBhIiwic3ViIjoiMTczZjk2NGYtMWViOS00M2NmLTkxYzctZGY3NTM3MTdjMTZjIiwiYXV0aF90aW1lIjoxNTQ4NDQyNzE5LCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImVtYWlsIjoiYWxpY2VAYXNwLm5ldCIsInBob25lIjoiMTIzNC01Njc4IiwiYWRkcmVzcyI6IlJ1YSBWZXJndWVpcm8sIDQ1NiIsImFkZHJlc3NfZGV0YWlscyI6IjggYW5kYXIgc2FsYSA4MDEiLCJuZWlnaGJvcmhvb2QiOiJWaWxhIE1hcmlhbmEiLCJjaXR5IjoiU8OjbyBQYXVsbyIsInN0YXRlIjoiU1AiLCJ6aXBfY29kZSI6IjY5MTE4IiwiYW1yIjpbInB3ZCJdfQ.aRQ4DX6d2mRNzi-FripXJAGDcLHiZ1T3LAOLkkXtGtAp60oun8fvXKCB_DJ7YRg9rmmDG9k05pOOWd3Mp6frm0ZxJkS98sUvztqU-UPNNA8tWRC8XQhpEOgqbVdDPALWrEYXiwFF5BQDUaD_e05dkTV2iTry-PuKeAewHYZS0W5QD4TIv7VRa6aBKK4p33cStAfR8KhDRTsSKRTx1Ic1rThs6TWNs9zRFl9aaBxPtzqb6WcItenz-34c-U-itx7kdZnxMTARkmeqpNCCDkWePQv9s_eTy0hP5BSPrd9Hop6Bs5FpAw0HknrGMwxu2XkiuTL8WfyftU-HGFCpwYQyXg",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpZ3dt46nIbWcZkl_IwxUCumYc-dCxdFv1Ap9Cac_zSc8lH6TfLwRu8fDFFMcy18FcqyRjxmoLahjIHsEUaqcuFoICRsh2LWtiF9TgstuKK8RcLQkmFpZmp614Lp8fgeylaSGtfOfS0uk4NLpkeKfC9w",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 19:38:06.004 +00:00 [DBG] Success validating end session request from MVC
2019-01-25 19:38:06.017 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-25 19:38:06.019 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-25 19:38:06.022 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-25 19:38:06.023 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLK2USCGLV0O:00000002",
  "TimeStamp": "2019-01-25T19:38:06Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 19:38:07.913 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-25 19:38:07.914 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-25 19:38:07.914 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-25 19:38:07.914 +00:00 [DBG] Start authorize request
2019-01-25 19:38:07.914 +00:00 [DBG] No user present in authorize request
2019-01-25 19:38:07.914 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 19:38:07.914 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 19:38:07.914 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 19:38:07.915 +00:00 [DBG] No PKCE used.
2019-01-25 19:38:07.915 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 19:38:07.915 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbshsbn_PHLmp2bVbqdkzkgSoC4xtLFq6cCgTbIp0PJcrnpfkfY3a49cs680eUP1KG2JR4l45Y13CQgzMjFwij5g4aTZNP3sLPCzTi3UO0o8iYwtS7Bm6M0CDyIhpqwWCwTV-ZLgHc3otqzhDy6AIPuZgs9dhzfF6PXUbD11OvAEpGkGGUnuESEC6ec7o98GaAdKJPYNYKachKNOpaZ3hIsXmr2QX4wQv7PFNCbLQ14mCoh17YmlWQh65V_WZsdHnDg89Jz8xcgeNsJsT9iIYthBXY8yvtd3BOA1gbbA21szEUXXFIdsN1522ekrM2HN_A",
  "Nonce": "636840418879016710.NDUzZTZhOWEtYjRiZS00OTczLTkyODYtNTQzNTUxNTBiODA2ZjMyMGFhZGItNTlmNS00MzYzLWJkN2ItMjhmYjAxMzY2NTgx",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840418879016710.NDUzZTZhOWEtYjRiZS00OTczLTkyODYtNTQzNTUxNTBiODA2ZjMyMGFhZGItNTlmNS00MzYzLWJkN2ItMjhmYjAxMzY2NTgx",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbshsbn_PHLmp2bVbqdkzkgSoC4xtLFq6cCgTbIp0PJcrnpfkfY3a49cs680eUP1KG2JR4l45Y13CQgzMjFwij5g4aTZNP3sLPCzTi3UO0o8iYwtS7Bm6M0CDyIhpqwWCwTV-ZLgHc3otqzhDy6AIPuZgs9dhzfF6PXUbD11OvAEpGkGGUnuESEC6ec7o98GaAdKJPYNYKachKNOpaZ3hIsXmr2QX4wQv7PFNCbLQ14mCoh17YmlWQh65V_WZsdHnDg89Jz8xcgeNsJsT9iIYthBXY8yvtd3BOA1gbbA21szEUXXFIdsN1522ekrM2HN_A",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 19:38:07.915 +00:00 [INF] Showing login: User is not authenticated
2019-01-25 19:38:07.927 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 19:38:07.928 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 19:38:07.928 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 19:38:07.928 +00:00 [DBG] No PKCE used.
2019-01-25 19:38:07.929 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 19:38:07.929 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 19:38:10.287 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-25 19:38:10.342 +00:00 [DBG] Augmenting SignInContext
2019-01-25 19:38:10.342 +00:00 [DBG] Adding idp claim with value: local
2019-01-25 19:38:10.342 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-25 19:38:10.342 +00:00 [DBG] Adding auth_time claim with value: 1548445090
2019-01-25 19:38:10.343 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 19:38:10.350 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK2USCGLV0O:00000005",
  "TimeStamp": "2019-01-25T19:38:10Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 19:38:10.360 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-25 19:38:10.361 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-25 19:38:10.361 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-25 19:38:10.362 +00:00 [DBG] Start authorize callback request
2019-01-25 19:38:10.362 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 19:38:10.362 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 19:38:10.362 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 19:38:10.362 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 19:38:10.363 +00:00 [DBG] No PKCE used.
2019-01-25 19:38:10.363 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 19:38:10.363 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbshsbn_PHLmp2bVbqdkzkgSoC4xtLFq6cCgTbIp0PJcrnpfkfY3a49cs680eUP1KG2JR4l45Y13CQgzMjFwij5g4aTZNP3sLPCzTi3UO0o8iYwtS7Bm6M0CDyIhpqwWCwTV-ZLgHc3otqzhDy6AIPuZgs9dhzfF6PXUbD11OvAEpGkGGUnuESEC6ec7o98GaAdKJPYNYKachKNOpaZ3hIsXmr2QX4wQv7PFNCbLQ14mCoh17YmlWQh65V_WZsdHnDg89Jz8xcgeNsJsT9iIYthBXY8yvtd3BOA1gbbA21szEUXXFIdsN1522ekrM2HN_A",
  "Nonce": "636840418879016710.NDUzZTZhOWEtYjRiZS00OTczLTkyODYtNTQzNTUxNTBiODA2ZjMyMGFhZGItNTlmNS00MzYzLWJkN2ItMjhmYjAxMzY2NTgx",
  "SessionId": "9d37be1d79968aaa7f1cef1369c5643e",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840418879016710.NDUzZTZhOWEtYjRiZS00OTczLTkyODYtNTQzNTUxNTBiODA2ZjMyMGFhZGItNTlmNS00MzYzLWJkN2ItMjhmYjAxMzY2NTgx",
    "state": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbshsbn_PHLmp2bVbqdkzkgSoC4xtLFq6cCgTbIp0PJcrnpfkfY3a49cs680eUP1KG2JR4l45Y13CQgzMjFwij5g4aTZNP3sLPCzTi3UO0o8iYwtS7Bm6M0CDyIhpqwWCwTV-ZLgHc3otqzhDy6AIPuZgs9dhzfF6PXUbD11OvAEpGkGGUnuESEC6ec7o98GaAdKJPYNYKachKNOpaZ3hIsXmr2QX4wQv7PFNCbLQ14mCoh17YmlWQh65V_WZsdHnDg89Jz8xcgeNsJsT9iIYthBXY8yvtd3BOA1gbbA21szEUXXFIdsN1522ekrM2HN_A",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 19:38:10.363 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-25 19:38:10.366 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-25 19:38:10.397 +00:00 [DBG] Creating Implicit Flow response.
2019-01-25 19:38:10.397 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 19:38:10.423 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****kc1Q"
    },
    {
      "TokenType": "code",
      "TokenValue": "****4a15"
    }
  ],
  "ActivityId": "0HLK2USCGLV0O:00000006",
  "TimeStamp": "2019-01-25T19:38:10Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 19:38:10.423 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8Oc6lw1qtWZAlfCXRUOsdpbshsbn_PHLmp2bVbqdkzkgSoC4xtLFq6cCgTbIp0PJcrnpfkfY3a49cs680eUP1KG2JR4l45Y13CQgzMjFwij5g4aTZNP3sLPCzTi3UO0o8iYwtS7Bm6M0CDyIhpqwWCwTV-ZLgHc3otqzhDy6AIPuZgs9dhzfF6PXUbD11OvAEpGkGGUnuESEC6ec7o98GaAdKJPYNYKachKNOpaZ3hIsXmr2QX4wQv7PFNCbLQ14mCoh17YmlWQh65V_WZsdHnDg89Jz8xcgeNsJsT9iIYthBXY8yvtd3BOA1gbbA21szEUXXFIdsN1522ekrM2HN_A",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-25 19:38:10.428 +00:00 [DBG] Augmenting SignInContext
2019-01-25 19:38:10.431 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 19:38:10.670 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 19:38:10.671 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 19:38:10.671 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 19:38:10.671 +00:00 [DBG] Start token request.
2019-01-25 19:38:10.671 +00:00 [DBG] Start client validation
2019-01-25 19:38:10.671 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 19:38:10.672 +00:00 [DBG] Start parsing for secret in post body
2019-01-25 19:38:10.688 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-25 19:38:10.688 +00:00 [DBG] Secret id found: MVC
2019-01-25 19:38:10.688 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 19:38:10.688 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 19:38:10.688 +00:00 [DBG] Client validation success
2019-01-25 19:38:10.689 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2USCGLV0Q:00000001",
  "TimeStamp": "2019-01-25T19:38:10Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 19:38:10.689 +00:00 [DBG] Start token request validation
2019-01-25 19:38:10.689 +00:00 [DBG] Start validation of authorization code token request
2019-01-25 19:38:10.742 +00:00 [DBG] Validation of authorization code token request success
2019-01-25 19:38:10.747 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "6f5e8b6213cdfa99a430e385b0e96f71f671898347188689567985ac49794a15",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "6f5e8b6213cdfa99a430e385b0e96f71f671898347188689567985ac49794a15",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-25 19:38:10.749 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 19:38:10.751 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 19:38:10.752 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 19:38:10.803 +00:00 [DBG] Creating refresh token
2019-01-25 19:38:10.804 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-25 19:38:10.823 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 19:38:10.824 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 19:38:10.841 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****x0ZA"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****327b"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****qcvw"
    }
  ],
  "ActivityId": "0HLK2USCGLV0Q:00000001",
  "TimeStamp": "2019-01-25T19:38:10Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 19:38:10.841 +00:00 [DBG] Token request success.
2019-01-25 19:38:10.867 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-25 19:38:10.870 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-25 19:38:10.870 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-25 19:38:10.870 +00:00 [DBG] Start userinfo request
2019-01-25 19:38:10.871 +00:00 [DBG] Bearer token found in header
2019-01-25 19:38:10.874 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 19:38:10.874 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 19:38:10.886 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 19:38:10.887 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548445090,
    "exp": 1548448690,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548445090,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-25 19:38:10.888 +00:00 [DBG] Creating userinfo response
2019-01-25 19:38:10.889 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 19:38:10.889 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 19:38:10.889 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-25 19:38:10.890 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 19:38:10.940 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-25 19:38:10.940 +00:00 [DBG] End userinfo request
2019-01-25 19:38:11.155 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 19:38:11.155 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 19:38:11.155 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 19:38:11.156 +00:00 [DBG] Start token request.
2019-01-25 19:38:11.157 +00:00 [DBG] Start client validation
2019-01-25 19:38:11.158 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 19:38:11.158 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 19:38:11.158 +00:00 [DBG] Secret id found: MVC
2019-01-25 19:38:11.159 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 19:38:11.159 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 19:38:11.160 +00:00 [DBG] Client validation success
2019-01-25 19:38:11.162 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK2USCGLV0R:00000001",
  "TimeStamp": "2019-01-25T19:38:11Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 19:38:11.187 +00:00 [DBG] Start token request validation
2019-01-25 19:38:11.189 +00:00 [DBG] Start client credentials token request validation
2019-01-25 19:38:11.190 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 19:38:11.192 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 19:38:11.192 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 19:38:11.196 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****2hPQ"
    }
  ],
  "ActivityId": "0HLK2USCGLV0R:00000001",
  "TimeStamp": "2019-01-25T19:38:11Z",
  "ProcessId": 2128,
  "LocalIpAddress": "172.19.0.8:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 19:38:11.197 +00:00 [DBG] Token request success.
2019-01-25 20:53:27.054 +00:00 [WRN] No XML encryptor configured. Key "ee3ec1d8-4310-470d-b2e8-0ecc46515384" may be persisted to storage in unencrypted form.
2019-01-25 20:53:28.685 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 20:53:30.521 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 20:53:30.626 +00:00 [INF] Setting number of workers to 1
2019-01-25 20:53:30.739 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 20:53:30.777 +00:00 [INF] Bus Rebus 1 started
2019-01-25 20:53:30.806 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 20:53:31.011 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 20:53:31.057 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 20:53:31.131 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 20:53:31.139 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 20:53:31.142 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 20:53:31.143 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 20:53:31.146 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 20:59:03.128 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 20:59:03.542 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 20:59:03.544 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 20:59:03.562 +00:00 [DBG] Start discovery request
2019-01-25 20:59:03.760 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 20:59:03.764 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 20:59:03.765 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 20:59:03.788 +00:00 [DBG] Start key discovery request
2019-01-25 20:59:03.968 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 20:59:03.970 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 20:59:03.975 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-25 20:59:03.982 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-25 20:59:03.983 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-25 20:59:03.993 +00:00 [DBG] Start authorize request
2019-01-25 20:59:04.025 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 20:59:04.033 +00:00 [DBG] No user present in authorize request
2019-01-25 20:59:04.047 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 20:59:04.067 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 20:59:04.079 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 20:59:04.083 +00:00 [DBG] No PKCE used.
2019-01-25 20:59:04.135 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 20:59:04.150 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8PgOSDHK3lpOgY5eRaSjU8HkMyL7eTIMjKSFUuH0xy6Chz1sSCsL-QjRoKaBpyfgRRA4mNLl6KKT_YkxAslsj6_e6N1aiZqt58u2KvN2iU6pggtdnroq8N36Zif-2LA-xGB5Ik7OsbO_5EFm-fj7SXLf9waM00yoVwAuCA9giz7ZQQT-iZkhpP1kWI5Hx9m0rlFS6zw431HEK1U2I_ZW2HYh0YFbOmHOxKAWyAsEKhN4eqx2DNqFU-ekAzwEA2bQSC-vcLQYY-vLHFh6kZxir4l_Km83x9BRgYzPVlvLHcc90KP6QVwrJe12cgWSHquyvkfk1m3rPKZdGWnO-QBBvd8",
  "Nonce": "636840467438848694.NGU5ZjNlYTAtMmYwYy00OTI1LWExNjAtOTIzN2Y4Mzg2MWEzNDc3OTEzNTktY2EzYy00NWY1LThlZjEtNTM2N2JhYTZlOTU5",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840467438848694.NGU5ZjNlYTAtMmYwYy00OTI1LWExNjAtOTIzN2Y4Mzg2MWEzNDc3OTEzNTktY2EzYy00NWY1LThlZjEtNTM2N2JhYTZlOTU5",
    "state": "CfDJ8PgOSDHK3lpOgY5eRaSjU8HkMyL7eTIMjKSFUuH0xy6Chz1sSCsL-QjRoKaBpyfgRRA4mNLl6KKT_YkxAslsj6_e6N1aiZqt58u2KvN2iU6pggtdnroq8N36Zif-2LA-xGB5Ik7OsbO_5EFm-fj7SXLf9waM00yoVwAuCA9giz7ZQQT-iZkhpP1kWI5Hx9m0rlFS6zw431HEK1U2I_ZW2HYh0YFbOmHOxKAWyAsEKhN4eqx2DNqFU-ekAzwEA2bQSC-vcLQYY-vLHFh6kZxir4l_Km83x9BRgYzPVlvLHcc90KP6QVwrJe12cgWSHquyvkfk1m3rPKZdGWnO-QBBvd8",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 20:59:04.184 +00:00 [INF] Showing login: User is not authenticated
2019-01-25 20:59:04.207 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 20:59:04.207 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 20:59:04.712 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 20:59:04.712 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 20:59:04.713 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 20:59:04.713 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 20:59:04.713 +00:00 [DBG] No PKCE used.
2019-01-25 20:59:04.714 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 20:59:04.723 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 20:59:07.486 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-25 20:59:07.487 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 20:59:07.487 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 20:59:08.680 +00:00 [DBG] Augmenting SignInContext
2019-01-25 20:59:08.685 +00:00 [DBG] Adding idp claim with value: local
2019-01-25 20:59:08.685 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-25 20:59:08.686 +00:00 [DBG] Adding auth_time claim with value: 1548449948
2019-01-25 20:59:08.691 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 20:59:08.706 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 20:59:08.735 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK30VNPVEOO:00000003",
  "TimeStamp": "2019-01-25T20:59:08Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:08.759 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-25 20:59:08.760 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-25 20:59:08.761 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-25 20:59:08.773 +00:00 [DBG] Start authorize callback request
2019-01-25 20:59:08.780 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 20:59:08.780 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 20:59:08.780 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 20:59:08.781 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 20:59:08.781 +00:00 [DBG] No PKCE used.
2019-01-25 20:59:08.782 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 20:59:08.782 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8PgOSDHK3lpOgY5eRaSjU8HkMyL7eTIMjKSFUuH0xy6Chz1sSCsL-QjRoKaBpyfgRRA4mNLl6KKT_YkxAslsj6_e6N1aiZqt58u2KvN2iU6pggtdnroq8N36Zif-2LA-xGB5Ik7OsbO_5EFm-fj7SXLf9waM00yoVwAuCA9giz7ZQQT-iZkhpP1kWI5Hx9m0rlFS6zw431HEK1U2I_ZW2HYh0YFbOmHOxKAWyAsEKhN4eqx2DNqFU-ekAzwEA2bQSC-vcLQYY-vLHFh6kZxir4l_Km83x9BRgYzPVlvLHcc90KP6QVwrJe12cgWSHquyvkfk1m3rPKZdGWnO-QBBvd8",
  "Nonce": "636840467438848694.NGU5ZjNlYTAtMmYwYy00OTI1LWExNjAtOTIzN2Y4Mzg2MWEzNDc3OTEzNTktY2EzYy00NWY1LThlZjEtNTM2N2JhYTZlOTU5",
  "SessionId": "3ba9087a411e181f85cf90cd67cec8ec",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840467438848694.NGU5ZjNlYTAtMmYwYy00OTI1LWExNjAtOTIzN2Y4Mzg2MWEzNDc3OTEzNTktY2EzYy00NWY1LThlZjEtNTM2N2JhYTZlOTU5",
    "state": "CfDJ8PgOSDHK3lpOgY5eRaSjU8HkMyL7eTIMjKSFUuH0xy6Chz1sSCsL-QjRoKaBpyfgRRA4mNLl6KKT_YkxAslsj6_e6N1aiZqt58u2KvN2iU6pggtdnroq8N36Zif-2LA-xGB5Ik7OsbO_5EFm-fj7SXLf9waM00yoVwAuCA9giz7ZQQT-iZkhpP1kWI5Hx9m0rlFS6zw431HEK1U2I_ZW2HYh0YFbOmHOxKAWyAsEKhN4eqx2DNqFU-ekAzwEA2bQSC-vcLQYY-vLHFh6kZxir4l_Km83x9BRgYzPVlvLHcc90KP6QVwrJe12cgWSHquyvkfk1m3rPKZdGWnO-QBBvd8",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 20:59:08.806 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-25 20:59:08.822 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-25 20:59:08.862 +00:00 [DBG] Creating Implicit Flow response.
2019-01-25 20:59:08.875 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 20:59:09.058 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****LwqA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****6f0e"
    }
  ],
  "ActivityId": "0HLK30VNPVEOO:00000004",
  "TimeStamp": "2019-01-25T20:59:09Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:09.069 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8PgOSDHK3lpOgY5eRaSjU8HkMyL7eTIMjKSFUuH0xy6Chz1sSCsL-QjRoKaBpyfgRRA4mNLl6KKT_YkxAslsj6_e6N1aiZqt58u2KvN2iU6pggtdnroq8N36Zif-2LA-xGB5Ik7OsbO_5EFm-fj7SXLf9waM00yoVwAuCA9giz7ZQQT-iZkhpP1kWI5Hx9m0rlFS6zw431HEK1U2I_ZW2HYh0YFbOmHOxKAWyAsEKhN4eqx2DNqFU-ekAzwEA2bQSC-vcLQYY-vLHFh6kZxir4l_Km83x9BRgYzPVlvLHcc90KP6QVwrJe12cgWSHquyvkfk1m3rPKZdGWnO-QBBvd8",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-25 20:59:09.117 +00:00 [DBG] Augmenting SignInContext
2019-01-25 20:59:09.121 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 20:59:09.591 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 20:59:09.594 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 20:59:09.594 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 20:59:09.623 +00:00 [DBG] Start token request.
2019-01-25 20:59:09.647 +00:00 [DBG] Start client validation
2019-01-25 20:59:09.672 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 20:59:09.691 +00:00 [DBG] Start parsing for secret in post body
2019-01-25 20:59:09.704 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-25 20:59:09.704 +00:00 [DBG] Secret id found: MVC
2019-01-25 20:59:09.704 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 20:59:09.727 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 20:59:09.727 +00:00 [DBG] Client validation success
2019-01-25 20:59:09.741 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK30VNPVEON:00000003",
  "TimeStamp": "2019-01-25T20:59:09Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:09.757 +00:00 [DBG] Start token request validation
2019-01-25 20:59:09.780 +00:00 [DBG] Start validation of authorization code token request
2019-01-25 20:59:09.816 +00:00 [DBG] Validation of authorization code token request success
2019-01-25 20:59:09.824 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "50537a4403cafc08a6b02147f8c6dec7b005b239eb41df5e42cb10b1f94a6f0e",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "50537a4403cafc08a6b02147f8c6dec7b005b239eb41df5e42cb10b1f94a6f0e",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-25 20:59:09.852 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 20:59:09.874 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 20:59:09.875 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 20:59:09.896 +00:00 [DBG] Creating refresh token
2019-01-25 20:59:09.896 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-25 20:59:09.918 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 20:59:09.919 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 20:59:09.935 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****NWLg"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****330d"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****XMHQ"
    }
  ],
  "ActivityId": "0HLK30VNPVEON:00000003",
  "TimeStamp": "2019-01-25T20:59:09Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:09.942 +00:00 [DBG] Token request success.
2019-01-25 20:59:09.988 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-25 20:59:09.994 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-25 20:59:09.994 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-25 20:59:10.013 +00:00 [DBG] Start userinfo request
2019-01-25 20:59:10.024 +00:00 [DBG] Bearer token found in header
2019-01-25 20:59:10.104 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 20:59:10.112 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 20:59:10.114 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 20:59:10.122 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548449949,
    "exp": 1548453549,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548449948,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-25 20:59:10.138 +00:00 [DBG] Creating userinfo response
2019-01-25 20:59:10.146 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 20:59:10.152 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 20:59:10.162 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-25 20:59:10.163 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 20:59:10.185 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-25 20:59:10.186 +00:00 [DBG] End userinfo request
2019-01-25 20:59:10.777 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 20:59:10.778 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 20:59:10.778 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 20:59:10.778 +00:00 [DBG] Start token request.
2019-01-25 20:59:10.778 +00:00 [DBG] Start client validation
2019-01-25 20:59:10.778 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 20:59:10.778 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 20:59:10.778 +00:00 [DBG] Secret id found: MVC
2019-01-25 20:59:10.778 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 20:59:10.778 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 20:59:10.778 +00:00 [DBG] Client validation success
2019-01-25 20:59:10.779 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK30VNPVEOQ:00000001",
  "TimeStamp": "2019-01-25T20:59:10Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:10.787 +00:00 [DBG] Start token request validation
2019-01-25 20:59:10.799 +00:00 [DBG] Start client credentials token request validation
2019-01-25 20:59:10.808 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 20:59:10.808 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 20:59:10.813 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 20:59:10.821 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****FHeg"
    }
  ],
  "ActivityId": "0HLK30VNPVEOQ:00000001",
  "TimeStamp": "2019-01-25T20:59:10Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:10.821 +00:00 [DBG] Token request success.
2019-01-25 20:59:11.458 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 20:59:11.458 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 20:59:11.458 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 20:59:11.458 +00:00 [DBG] Start discovery request
2019-01-25 20:59:11.671 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 20:59:11.672 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 20:59:11.672 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 20:59:11.673 +00:00 [DBG] Start key discovery request
2019-01-25 20:59:21.933 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 20:59:21.934 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 20:59:21.955 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 20:59:21.955 +00:00 [DBG] Start token request.
2019-01-25 20:59:21.955 +00:00 [DBG] Start client validation
2019-01-25 20:59:21.955 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 20:59:21.955 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 20:59:21.956 +00:00 [DBG] Secret id found: MVC
2019-01-25 20:59:21.956 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 20:59:21.956 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 20:59:21.957 +00:00 [DBG] Client validation success
2019-01-25 20:59:21.957 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK30VNPVEOS:00000001",
  "TimeStamp": "2019-01-25T20:59:21Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:21.979 +00:00 [DBG] Start token request validation
2019-01-25 20:59:21.979 +00:00 [DBG] Start client credentials token request validation
2019-01-25 20:59:21.980 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 20:59:21.980 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 20:59:21.980 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 20:59:22.027 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****HNlA"
    }
  ],
  "ActivityId": "0HLK30VNPVEOS:00000001",
  "TimeStamp": "2019-01-25T20:59:22Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:22.028 +00:00 [DBG] Token request success.
2019-01-25 20:59:22.692 +00:00 [INF] Message received:
2019-01-25 20:59:22.694 +00:00 [INF] ----------------------------------
2019-01-25 20:59:22.704 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"ab822984-d8d3-43f4-9856-5e9c5c431509","CreationDate":"2019-01-25T20:59:22.5649149Z"}
2019-01-25 20:59:22.706 +00:00 [INF] ----------------------------------
2019-01-25 20:59:24.020 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 6aed25fc-69ca-4e19-b34e-3807e1d57a2e to 1 handlers took 1335 ms
2019-01-25 20:59:41.266 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 20:59:41.266 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 20:59:41.266 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 20:59:41.266 +00:00 [DBG] Start token request.
2019-01-25 20:59:41.266 +00:00 [DBG] Start client validation
2019-01-25 20:59:41.267 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 20:59:41.267 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 20:59:41.267 +00:00 [DBG] Secret id found: MVC
2019-01-25 20:59:41.267 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 20:59:41.267 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 20:59:41.267 +00:00 [DBG] Client validation success
2019-01-25 20:59:41.267 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK30VNPVEOT:00000001",
  "TimeStamp": "2019-01-25T20:59:41Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:41.297 +00:00 [DBG] Start token request validation
2019-01-25 20:59:41.297 +00:00 [DBG] Start client credentials token request validation
2019-01-25 20:59:41.298 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 20:59:41.298 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 20:59:41.298 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 20:59:41.302 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****vVoA"
    }
  ],
  "ActivityId": "0HLK30VNPVEOT:00000001",
  "TimeStamp": "2019-01-25T20:59:41Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:41.302 +00:00 [DBG] Token request success.
2019-01-25 20:59:44.322 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 20:59:44.323 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 20:59:44.323 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 20:59:44.323 +00:00 [DBG] Start token request.
2019-01-25 20:59:44.323 +00:00 [DBG] Start client validation
2019-01-25 20:59:44.323 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 20:59:44.323 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 20:59:44.323 +00:00 [DBG] Secret id found: MVC
2019-01-25 20:59:44.323 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 20:59:44.323 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 20:59:44.323 +00:00 [DBG] Client validation success
2019-01-25 20:59:44.323 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK30VNPVEOU:00000001",
  "TimeStamp": "2019-01-25T20:59:44Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:44.333 +00:00 [DBG] Start token request validation
2019-01-25 20:59:44.333 +00:00 [DBG] Start client credentials token request validation
2019-01-25 20:59:44.334 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 20:59:44.335 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 20:59:44.335 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 20:59:44.343 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****dP8g"
    }
  ],
  "ActivityId": "0HLK30VNPVEOU:00000001",
  "TimeStamp": "2019-01-25T20:59:44Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:44.344 +00:00 [DBG] Token request success.
2019-01-25 20:59:44.728 +00:00 [INF] Message received:
2019-01-25 20:59:44.728 +00:00 [INF] ----------------------------------
2019-01-25 20:59:44.728 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"93c8a47c-900e-4775-b596-468c56235081","CreationDate":"2019-01-25T20:59:44.7280145Z"}
2019-01-25 20:59:44.728 +00:00 [INF] ----------------------------------
2019-01-25 20:59:45.842 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 6bac4926-6501-4649-a8da-bd9953b2119d to 1 handlers took 1114 ms
2019-01-25 20:59:50.616 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 20:59:50.618 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 20:59:50.618 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 20:59:50.618 +00:00 [DBG] Start token request.
2019-01-25 20:59:50.618 +00:00 [DBG] Start client validation
2019-01-25 20:59:50.618 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 20:59:50.618 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 20:59:50.619 +00:00 [DBG] Secret id found: MVC
2019-01-25 20:59:50.619 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 20:59:50.619 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 20:59:50.619 +00:00 [DBG] Client validation success
2019-01-25 20:59:50.619 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK30VNPVEOV:00000001",
  "TimeStamp": "2019-01-25T20:59:50Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:50.639 +00:00 [DBG] Start token request validation
2019-01-25 20:59:50.639 +00:00 [DBG] Start client credentials token request validation
2019-01-25 20:59:50.651 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 20:59:50.652 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 20:59:50.653 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 20:59:50.658 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****xESg"
    }
  ],
  "ActivityId": "0HLK30VNPVEOV:00000001",
  "TimeStamp": "2019-01-25T20:59:50Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:50.658 +00:00 [DBG] Token request success.
2019-01-25 20:59:53.333 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 20:59:53.334 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 20:59:53.334 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 20:59:53.334 +00:00 [DBG] Start token request.
2019-01-25 20:59:53.335 +00:00 [DBG] Start client validation
2019-01-25 20:59:53.335 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 20:59:53.335 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 20:59:53.335 +00:00 [DBG] Secret id found: MVC
2019-01-25 20:59:53.336 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 20:59:53.336 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 20:59:53.336 +00:00 [DBG] Client validation success
2019-01-25 20:59:53.336 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK30VNPVEP0:00000001",
  "TimeStamp": "2019-01-25T20:59:53Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:53.349 +00:00 [DBG] Start token request validation
2019-01-25 20:59:53.349 +00:00 [DBG] Start client credentials token request validation
2019-01-25 20:59:53.350 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 20:59:53.350 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 20:59:53.350 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 20:59:53.354 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Jt4A"
    }
  ],
  "ActivityId": "0HLK30VNPVEP0:00000001",
  "TimeStamp": "2019-01-25T20:59:53Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 20:59:53.354 +00:00 [DBG] Token request success.
2019-01-25 20:59:53.599 +00:00 [INF] Message received:
2019-01-25 20:59:53.599 +00:00 [INF] ----------------------------------
2019-01-25 20:59:53.599 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"f5483a28-153f-432f-a91c-32c8dc274d41","CreationDate":"2019-01-25T20:59:53.5986503Z"}
2019-01-25 20:59:53.601 +00:00 [INF] ----------------------------------
2019-01-25 20:59:54.516 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 4968c054-dc3c-4519-9e68-15b20c3be9f4 to 1 handlers took 917 ms
2019-01-25 21:09:33.547 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 21:09:33.547 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 21:09:33.547 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 21:09:33.548 +00:00 [DBG] Start token request.
2019-01-25 21:09:33.548 +00:00 [DBG] Start client validation
2019-01-25 21:09:33.548 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 21:09:33.548 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 21:09:33.548 +00:00 [DBG] Secret id found: MVC
2019-01-25 21:09:33.548 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:09:33.548 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 21:09:33.548 +00:00 [DBG] Client validation success
2019-01-25 21:09:33.548 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK30VNPVEP1:00000001",
  "TimeStamp": "2019-01-25T21:09:33Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 21:09:33.556 +00:00 [DBG] Start token request validation
2019-01-25 21:09:33.556 +00:00 [DBG] Start client credentials token request validation
2019-01-25 21:09:33.556 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 21:09:33.557 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 21:09:33.557 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 21:09:33.561 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****2P_g"
    }
  ],
  "ActivityId": "0HLK30VNPVEP1:00000001",
  "TimeStamp": "2019-01-25T21:09:33Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 21:09:33.561 +00:00 [DBG] Token request success.
2019-01-25 21:09:37.070 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 21:09:37.071 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 21:09:37.071 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 21:09:37.071 +00:00 [DBG] Start token request.
2019-01-25 21:09:37.074 +00:00 [DBG] Start client validation
2019-01-25 21:09:37.074 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 21:09:37.074 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 21:09:37.075 +00:00 [DBG] Secret id found: MVC
2019-01-25 21:09:37.075 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:09:37.076 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 21:09:37.076 +00:00 [DBG] Client validation success
2019-01-25 21:09:37.076 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK30VNPVEP2:00000001",
  "TimeStamp": "2019-01-25T21:09:37Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 21:09:37.129 +00:00 [DBG] Start token request validation
2019-01-25 21:09:37.129 +00:00 [DBG] Start client credentials token request validation
2019-01-25 21:09:37.129 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 21:09:37.129 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 21:09:37.130 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 21:09:37.177 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****unFg"
    }
  ],
  "ActivityId": "0HLK30VNPVEP2:00000001",
  "TimeStamp": "2019-01-25T21:09:37Z",
  "ProcessId": 27,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 21:09:37.177 +00:00 [DBG] Token request success.
2019-01-25 21:09:37.522 +00:00 [INF] Message received:
2019-01-25 21:09:37.522 +00:00 [INF] ----------------------------------
2019-01-25 21:09:37.522 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"21a7993b-bb45-4198-b3e6-6b9619c739b6","CreationDate":"2019-01-25T21:09:37.5222664Z"}
2019-01-25 21:09:37.523 +00:00 [INF] ----------------------------------
2019-01-25 21:09:38.514 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens abce3031-a3e2-4071-9e14-4eeef733a129 to 1 handlers took 992 ms
2019-01-25 21:13:20.494 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 21:13:22.488 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 21:13:22.626 +00:00 [INF] Setting number of workers to 1
2019-01-25 21:13:22.663 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 21:13:22.678 +00:00 [INF] Bus Rebus 1 started
2019-01-25 21:13:22.746 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 21:13:22.858 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 21:13:22.934 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 21:13:22.958 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 21:13:22.959 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 21:13:22.961 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 21:13:22.963 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 21:13:22.966 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 21:15:21.305 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 21:15:21.573 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 21:15:21.574 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 21:15:21.590 +00:00 [DBG] Start token request.
2019-01-25 21:15:21.604 +00:00 [DBG] Start client validation
2019-01-25 21:15:21.616 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 21:15:21.618 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 21:15:21.620 +00:00 [DBG] Secret id found: MVC
2019-01-25 21:15:21.639 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:15:21.657 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 21:15:21.657 +00:00 [DBG] Client validation success
2019-01-25 21:15:21.703 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK318RAOSVD:00000001",
  "TimeStamp": "2019-01-25T21:15:21Z",
  "ProcessId": 552,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 21:15:21.781 +00:00 [DBG] Start token request validation
2019-01-25 21:15:21.801 +00:00 [DBG] Start client credentials token request validation
2019-01-25 21:15:21.864 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 21:15:21.884 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 21:15:21.924 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 21:15:22.000 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****VFkA"
    }
  ],
  "ActivityId": "0HLK318RAOSVD:00000001",
  "TimeStamp": "2019-01-25T21:15:21Z",
  "ProcessId": 552,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 21:15:22.009 +00:00 [DBG] Token request success.
2019-01-25 21:15:22.587 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 21:15:22.588 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 21:15:22.589 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 21:15:22.616 +00:00 [DBG] Start discovery request
2019-01-25 21:15:22.848 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 21:15:22.849 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 21:15:22.849 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 21:15:22.863 +00:00 [DBG] Start key discovery request
2019-01-25 21:15:28.571 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 21:15:28.571 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 21:15:28.571 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 21:15:28.571 +00:00 [DBG] Start token request.
2019-01-25 21:15:28.571 +00:00 [DBG] Start client validation
2019-01-25 21:15:28.571 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 21:15:28.572 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 21:15:28.572 +00:00 [DBG] Secret id found: MVC
2019-01-25 21:15:28.572 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:15:28.572 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 21:15:28.572 +00:00 [DBG] Client validation success
2019-01-25 21:15:28.572 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK318RAOSVF:00000001",
  "TimeStamp": "2019-01-25T21:15:28Z",
  "ProcessId": 552,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 21:15:28.606 +00:00 [DBG] Start token request validation
2019-01-25 21:15:28.606 +00:00 [DBG] Start client credentials token request validation
2019-01-25 21:15:28.613 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 21:15:28.613 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 21:15:28.614 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 21:15:28.634 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****RqzQ"
    }
  ],
  "ActivityId": "0HLK318RAOSVF:00000001",
  "TimeStamp": "2019-01-25T21:15:28Z",
  "ProcessId": 552,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-25 21:15:28.635 +00:00 [DBG] Token request success.
2019-01-25 21:15:29.304 +00:00 [INF] Message received:
2019-01-25 21:15:29.304 +00:00 [INF] ----------------------------------
2019-01-25 21:15:29.315 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"b2052f82-4fda-440d-a012-f369d5ee3640","CreationDate":"2019-01-25T21:15:29.1691982Z"}
2019-01-25 21:15:29.316 +00:00 [INF] ----------------------------------
2019-01-25 21:15:31.869 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 6d6548db-c30f-4223-88c2-3e45336d82da to 1 handlers took 2575 ms
2019-01-25 21:28:52.080 +00:00 [WRN] No XML encryptor configured. Key "1c4f9d88-3d38-4f74-bbcb-1f5e3d3d51f1" may be persisted to storage in unencrypted form.
2019-01-25 21:28:52.966 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 21:28:54.298 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 21:28:54.374 +00:00 [INF] Setting number of workers to 1
2019-01-25 21:28:54.411 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 21:28:54.426 +00:00 [INF] Bus Rebus 1 started
2019-01-25 21:28:54.462 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 21:28:54.625 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 21:28:54.678 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 21:28:54.719 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 21:28:54.722 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 21:28:54.728 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 21:28:54.730 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 21:28:54.733 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 21:30:06.689 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 21:30:06.963 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 21:30:06.964 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 21:30:06.971 +00:00 [DBG] Start discovery request
2019-01-25 21:30:07.149 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 21:30:07.157 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 21:30:07.158 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 21:30:07.277 +00:00 [DBG] Start key discovery request
2019-01-25 21:30:07.479 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 21:30:07.480 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 21:30:07.486 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-25 21:30:07.494 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-25 21:30:07.496 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-25 21:30:07.504 +00:00 [DBG] Start authorize request
2019-01-25 21:30:07.520 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 21:30:07.531 +00:00 [DBG] No user present in authorize request
2019-01-25 21:30:07.539 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 21:30:07.563 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:30:07.572 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 21:30:07.575 +00:00 [DBG] No PKCE used.
2019-01-25 21:30:07.646 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 21:30:07.664 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BmwbO3qDkGZoGlQdTyq7lrOCktW2ccSdYEjXGqGYNXvyZ8pKyKXaTRCZQRBnBQjNgqKThjKXxIqa24P0KhLLzw9Smbzgr8BKbwNkvtsm7T0OeOa_nbJaAKER28hfOVKDcLEyNQRpt0bDD2NS4kOP_LbKMk_UZTXKqMMxSWLIZtuFGwZ_Y2KVtMRqAeSc4cKtJmGgk0WMcZUKNOzWSryxYP1ze-Q0NPVu2BGjchovlLumJUWYzAVxqpYNWjaxVPEuBSEq1b2fwLbhBTD0ttCn4M_0nhmrtCZ6Fg2PLrNpvfmqHGACHpPUDdjKx1CevhxGt8",
  "Nonce": "636840486073675618.ZWRiNTg2NWItMDlmNi00Y2QwLWE1ZTEtY2Q0NDI4YTVhYjNjMTAzOGM5NDctNDMxYi00Y2QzLTk4YWEtM2E1MjhjNzYxNTM1",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840486073675618.ZWRiNTg2NWItMDlmNi00Y2QwLWE1ZTEtY2Q0NDI4YTVhYjNjMTAzOGM5NDctNDMxYi00Y2QzLTk4YWEtM2E1MjhjNzYxNTM1",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25BmwbO3qDkGZoGlQdTyq7lrOCktW2ccSdYEjXGqGYNXvyZ8pKyKXaTRCZQRBnBQjNgqKThjKXxIqa24P0KhLLzw9Smbzgr8BKbwNkvtsm7T0OeOa_nbJaAKER28hfOVKDcLEyNQRpt0bDD2NS4kOP_LbKMk_UZTXKqMMxSWLIZtuFGwZ_Y2KVtMRqAeSc4cKtJmGgk0WMcZUKNOzWSryxYP1ze-Q0NPVu2BGjchovlLumJUWYzAVxqpYNWjaxVPEuBSEq1b2fwLbhBTD0ttCn4M_0nhmrtCZ6Fg2PLrNpvfmqHGACHpPUDdjKx1CevhxGt8",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 21:30:07.682 +00:00 [INF] Showing login: User is not authenticated
2019-01-25 21:30:07.702 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 21:30:07.702 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 21:30:08.087 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 21:30:08.087 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 21:30:08.088 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:30:08.092 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 21:30:08.092 +00:00 [DBG] No PKCE used.
2019-01-25 21:30:08.094 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 21:30:08.100 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:30:12.716 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-25 21:30:12.717 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 21:30:12.717 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 21:30:14.030 +00:00 [DBG] Augmenting SignInContext
2019-01-25 21:30:14.035 +00:00 [DBG] Adding idp claim with value: local
2019-01-25 21:30:14.035 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-25 21:30:14.042 +00:00 [DBG] Adding auth_time claim with value: 1548451814
2019-01-25 21:30:14.047 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-25 21:30:14.061 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 21:30:14.093 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK31H36848F:00000003",
  "TimeStamp": "2019-01-25T21:30:14Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-25 21:30:14.122 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-25 21:30:14.124 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-25 21:30:14.124 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-25 21:30:14.139 +00:00 [DBG] Start authorize callback request
2019-01-25 21:30:14.146 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 21:30:14.147 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 21:30:14.147 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:30:14.147 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 21:30:14.148 +00:00 [DBG] No PKCE used.
2019-01-25 21:30:14.151 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 21:30:14.152 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BmwbO3qDkGZoGlQdTyq7lrOCktW2ccSdYEjXGqGYNXvyZ8pKyKXaTRCZQRBnBQjNgqKThjKXxIqa24P0KhLLzw9Smbzgr8BKbwNkvtsm7T0OeOa_nbJaAKER28hfOVKDcLEyNQRpt0bDD2NS4kOP_LbKMk_UZTXKqMMxSWLIZtuFGwZ_Y2KVtMRqAeSc4cKtJmGgk0WMcZUKNOzWSryxYP1ze-Q0NPVu2BGjchovlLumJUWYzAVxqpYNWjaxVPEuBSEq1b2fwLbhBTD0ttCn4M_0nhmrtCZ6Fg2PLrNpvfmqHGACHpPUDdjKx1CevhxGt8",
  "Nonce": "636840486073675618.ZWRiNTg2NWItMDlmNi00Y2QwLWE1ZTEtY2Q0NDI4YTVhYjNjMTAzOGM5NDctNDMxYi00Y2QzLTk4YWEtM2E1MjhjNzYxNTM1",
  "SessionId": "8ea76a96c5991c1d089026142aa1d3e8",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840486073675618.ZWRiNTg2NWItMDlmNi00Y2QwLWE1ZTEtY2Q0NDI4YTVhYjNjMTAzOGM5NDctNDMxYi00Y2QzLTk4YWEtM2E1MjhjNzYxNTM1",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25BmwbO3qDkGZoGlQdTyq7lrOCktW2ccSdYEjXGqGYNXvyZ8pKyKXaTRCZQRBnBQjNgqKThjKXxIqa24P0KhLLzw9Smbzgr8BKbwNkvtsm7T0OeOa_nbJaAKER28hfOVKDcLEyNQRpt0bDD2NS4kOP_LbKMk_UZTXKqMMxSWLIZtuFGwZ_Y2KVtMRqAeSc4cKtJmGgk0WMcZUKNOzWSryxYP1ze-Q0NPVu2BGjchovlLumJUWYzAVxqpYNWjaxVPEuBSEq1b2fwLbhBTD0ttCn4M_0nhmrtCZ6Fg2PLrNpvfmqHGACHpPUDdjKx1CevhxGt8",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 21:30:14.221 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-25 21:30:14.249 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-25 21:30:14.313 +00:00 [DBG] Creating Implicit Flow response.
2019-01-25 21:30:14.332 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 21:30:14.526 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****OIOg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****619d"
    }
  ],
  "ActivityId": "0HLK31H36848F:00000004",
  "TimeStamp": "2019-01-25T21:30:14Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-25 21:30:14.533 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BmwbO3qDkGZoGlQdTyq7lrOCktW2ccSdYEjXGqGYNXvyZ8pKyKXaTRCZQRBnBQjNgqKThjKXxIqa24P0KhLLzw9Smbzgr8BKbwNkvtsm7T0OeOa_nbJaAKER28hfOVKDcLEyNQRpt0bDD2NS4kOP_LbKMk_UZTXKqMMxSWLIZtuFGwZ_Y2KVtMRqAeSc4cKtJmGgk0WMcZUKNOzWSryxYP1ze-Q0NPVu2BGjchovlLumJUWYzAVxqpYNWjaxVPEuBSEq1b2fwLbhBTD0ttCn4M_0nhmrtCZ6Fg2PLrNpvfmqHGACHpPUDdjKx1CevhxGt8",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-25 21:30:14.574 +00:00 [DBG] Augmenting SignInContext
2019-01-25 21:30:14.577 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-25 21:30:15.094 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 21:30:15.100 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 21:30:15.100 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 21:30:15.126 +00:00 [DBG] Start token request.
2019-01-25 21:30:15.141 +00:00 [DBG] Start client validation
2019-01-25 21:30:15.162 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 21:30:15.173 +00:00 [DBG] Start parsing for secret in post body
2019-01-25 21:30:15.195 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-25 21:30:15.195 +00:00 [DBG] Secret id found: MVC
2019-01-25 21:30:15.196 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:30:15.214 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 21:30:15.214 +00:00 [DBG] Client validation success
2019-01-25 21:30:15.222 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK31H36848E:00000003",
  "TimeStamp": "2019-01-25T21:30:15Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-25 21:30:15.247 +00:00 [DBG] Start token request validation
2019-01-25 21:30:15.272 +00:00 [DBG] Start validation of authorization code token request
2019-01-25 21:30:15.323 +00:00 [DBG] Validation of authorization code token request success
2019-01-25 21:30:15.337 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "7c8fc05425d0a6d030a8a4028673c4b1e0a36bad0b2cbdced7d417120ed7619d",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "7c8fc05425d0a6d030a8a4028673c4b1e0a36bad0b2cbdced7d417120ed7619d",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-25 21:30:15.429 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:30:15.449 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 21:30:15.450 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 21:30:15.488 +00:00 [DBG] Creating refresh token
2019-01-25 21:30:15.490 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-25 21:30:15.518 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:30:15.518 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-25 21:30:15.549 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****PUdw"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****01f8"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****BDUA"
    }
  ],
  "ActivityId": "0HLK31H36848E:00000003",
  "TimeStamp": "2019-01-25T21:30:15Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-25 21:30:15.553 +00:00 [DBG] Token request success.
2019-01-25 21:30:15.612 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-25 21:30:15.616 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-25 21:30:15.617 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-25 21:30:15.640 +00:00 [DBG] Start userinfo request
2019-01-25 21:30:15.648 +00:00 [DBG] Bearer token found in header
2019-01-25 21:30:15.733 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:30:15.741 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:30:15.743 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 21:30:15.752 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548451815,
    "exp": 1548455415,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548451814,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-25 21:30:15.782 +00:00 [DBG] Creating userinfo response
2019-01-25 21:30:15.793 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 21:30:15.801 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 21:30:15.813 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-25 21:30:15.814 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-25 21:30:15.831 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-25 21:30:15.832 +00:00 [DBG] End userinfo request
2019-01-25 21:30:16.399 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 21:30:16.400 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 21:30:16.401 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 21:30:16.401 +00:00 [DBG] Start token request.
2019-01-25 21:30:16.402 +00:00 [DBG] Start client validation
2019-01-25 21:30:16.402 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 21:30:16.403 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 21:30:16.403 +00:00 [DBG] Secret id found: MVC
2019-01-25 21:30:16.403 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:30:16.404 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 21:30:16.404 +00:00 [DBG] Client validation success
2019-01-25 21:30:16.404 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK31H36848H:00000001",
  "TimeStamp": "2019-01-25T21:30:16Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-25 21:30:16.439 +00:00 [DBG] Start token request validation
2019-01-25 21:30:16.469 +00:00 [DBG] Start client credentials token request validation
2019-01-25 21:30:16.493 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 21:30:16.494 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 21:30:16.501 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 21:30:16.513 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****g5Zw"
    }
  ],
  "ActivityId": "0HLK31H36848H:00000001",
  "TimeStamp": "2019-01-25T21:30:16Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-25 21:30:16.519 +00:00 [DBG] Token request success.
2019-01-25 21:30:17.060 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 21:30:17.063 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 21:30:17.063 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 21:30:17.068 +00:00 [DBG] Start discovery request
2019-01-25 21:30:17.267 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 21:30:17.271 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 21:30:17.271 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 21:30:17.272 +00:00 [DBG] Start key discovery request
2019-01-25 21:30:25.306 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 21:30:25.314 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 21:30:25.314 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 21:30:25.314 +00:00 [DBG] Start token request.
2019-01-25 21:30:25.314 +00:00 [DBG] Start client validation
2019-01-25 21:30:25.315 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 21:30:25.315 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 21:30:25.316 +00:00 [DBG] Secret id found: MVC
2019-01-25 21:30:25.316 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:30:25.317 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 21:30:25.317 +00:00 [DBG] Client validation success
2019-01-25 21:30:25.317 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK31H36848J:00000001",
  "TimeStamp": "2019-01-25T21:30:25Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-25 21:30:25.333 +00:00 [DBG] Start token request validation
2019-01-25 21:30:25.333 +00:00 [DBG] Start client credentials token request validation
2019-01-25 21:30:25.333 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 21:30:25.334 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 21:30:25.334 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 21:30:25.347 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****CNJA"
    }
  ],
  "ActivityId": "0HLK31H36848J:00000001",
  "TimeStamp": "2019-01-25T21:30:25Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-25 21:30:25.351 +00:00 [DBG] Token request success.
2019-01-25 21:30:26.126 +00:00 [INF] Message received:
2019-01-25 21:30:26.126 +00:00 [INF] ----------------------------------
2019-01-25 21:30:26.135 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"3b586961-ae87-4e45-bbe6-762c05cf6754","CreationDate":"2019-01-25T21:30:26.0282998Z"}
2019-01-25 21:30:26.135 +00:00 [INF] ----------------------------------
2019-01-25 21:30:27.430 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens dde27bc6-83cc-465f-81d5-6dc7dadb686e to 1 handlers took 1315 ms
2019-01-25 21:30:33.974 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 21:30:33.975 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 21:30:33.975 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 21:30:33.975 +00:00 [DBG] Start token request.
2019-01-25 21:30:33.975 +00:00 [DBG] Start client validation
2019-01-25 21:30:33.975 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 21:30:33.975 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 21:30:33.975 +00:00 [DBG] Secret id found: MVC
2019-01-25 21:30:33.975 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:30:33.975 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 21:30:33.975 +00:00 [DBG] Client validation success
2019-01-25 21:30:33.976 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK31H36848K:00000001",
  "TimeStamp": "2019-01-25T21:30:33Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-25 21:30:33.997 +00:00 [DBG] Start token request validation
2019-01-25 21:30:33.997 +00:00 [DBG] Start client credentials token request validation
2019-01-25 21:30:33.998 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 21:30:33.998 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 21:30:33.998 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 21:30:34.002 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Fg5A"
    }
  ],
  "ActivityId": "0HLK31H36848K:00000001",
  "TimeStamp": "2019-01-25T21:30:34Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-25 21:30:34.002 +00:00 [DBG] Token request success.
2019-01-25 21:30:38.995 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-25 21:30:38.997 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-25 21:30:38.997 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-25 21:30:38.997 +00:00 [DBG] Start token request.
2019-01-25 21:30:38.997 +00:00 [DBG] Start client validation
2019-01-25 21:30:38.998 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-25 21:30:38.998 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-25 21:30:38.998 +00:00 [DBG] Secret id found: MVC
2019-01-25 21:30:38.998 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 21:30:38.998 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-25 21:30:38.998 +00:00 [DBG] Client validation success
2019-01-25 21:30:38.999 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK31H36848L:00000001",
  "TimeStamp": "2019-01-25T21:30:38Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-25 21:30:39.008 +00:00 [DBG] Start token request validation
2019-01-25 21:30:39.009 +00:00 [DBG] Start client credentials token request validation
2019-01-25 21:30:39.009 +00:00 [DBG] MVC credentials token request validation success
2019-01-25 21:30:39.010 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-25 21:30:39.010 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-25 21:30:39.018 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****MXUw"
    }
  ],
  "ActivityId": "0HLK31H36848L:00000001",
  "TimeStamp": "2019-01-25T21:30:39Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-25 21:30:39.023 +00:00 [DBG] Token request success.
2019-01-25 21:30:39.261 +00:00 [INF] Message received:
2019-01-25 21:30:39.261 +00:00 [INF] ----------------------------------
2019-01-25 21:30:39.262 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"d4c9a34c-e917-4164-98a8-5e4c765911fd","CreationDate":"2019-01-25T21:30:39.2610655Z"}
2019-01-25 21:30:39.262 +00:00 [INF] ----------------------------------
2019-01-25 21:30:40.370 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 36a3afe5-c663-4825-b41a-adad4a893078 to 1 handlers took 1109 ms
2019-01-25 22:34:14.514 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-25 22:34:16.488 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-25 22:34:16.587 +00:00 [INF] Setting number of workers to 1
2019-01-25 22:34:16.682 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-25 22:34:16.707 +00:00 [INF] Bus Rebus 1 started
2019-01-25 22:34:16.780 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-25 22:34:17.000 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-25 22:34:17.084 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-25 22:34:17.123 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-25 22:34:17.123 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-25 22:34:17.126 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-25 22:34:17.129 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-25 22:34:17.139 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-25 22:40:03.355 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-25 22:40:03.636 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-25 22:40:03.638 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-25 22:40:03.645 +00:00 [DBG] Start discovery request
2019-01-25 22:40:03.830 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-25 22:40:03.835 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-25 22:40:03.837 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-25 22:40:03.851 +00:00 [DBG] Start key discovery request
2019-01-25 22:40:05.386 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-25 22:40:05.391 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-25 22:40:05.392 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-25 22:40:05.419 +00:00 [DBG] Processing signout request for 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-25 22:40:05.433 +00:00 [DBG] Start end session request validation
2019-01-25 22:40:05.443 +00:00 [DBG] Start identity token validation
2019-01-25 22:40:05.476 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 22:40:05.477 +00:00 [DBG] Client found: MVC / MVC
2019-01-25 22:40:05.573 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-25 22:40:05.583 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1548451815,
    "exp": 1548452115,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636840486073675618.ZWRiNTg2NWItMDlmNi00Y2QwLWE1ZTEtY2Q0NDI4YTVhYjNjMTAzOGM5NDctNDMxYi00Y2QzLTk4YWEtM2E1MjhjNzYxNTM1",
    "iat": 1548451815,
    "at_hash": "Bpq6xplOoElWVhR5-2UbSw",
    "sid": "8ea76a96c5991c1d089026142aa1d3e8",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548451814,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "amr": "pwd"
  }
}
2019-01-25 22:40:05.617 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BmHw8Xru79XbUFmskeX2ViUIgdyHKJmLaAb8C_M53bdyjtQtZWyV41UO6VmYK1spsW1p4mZC5MLFauYpqrg-2z68ek2_uKE349q3URLDlzRSlMwlwyvy50acWX0SwA25KyaAfy0-tY2Qbz7tNZh57j7",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDg0NTE4MTUsImV4cCI6MTU0ODQ1MjExNSwiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4NDA0ODYwNzM2NzU2MTguWldSaU5UZzJOV0l0TURsbU5pMDBZMlF3TFdFMVpURXRZMlEwTkRJNFlUVmhZak5qTVRBek9HTTVORGN0TkRNeFlpMDBZMlF6TFRrNFlXRXRNMkUxTWpoak56WXhOVE0xIiwiaWF0IjoxNTQ4NDUxODE1LCJhdF9oYXNoIjoiQnBxNnhwbE9vRWxXVmhSNS0yVWJTdyIsInNpZCI6IjhlYTc2YTk2YzU5OTFjMWQwODkwMjYxNDJhYTFkM2U4Iiwic3ViIjoiMTczZjk2NGYtMWViOS00M2NmLTkxYzctZGY3NTM3MTdjMTZjIiwiYXV0aF90aW1lIjoxNTQ4NDUxODE0LCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImVtYWlsIjoiYWxpY2VAYXNwLm5ldCIsInBob25lIjoiMTIzNC01Njc4IiwiYWRkcmVzcyI6IlJ1YSBWZXJndWVpcm8sIDQ1NiIsImFkZHJlc3NfZGV0YWlscyI6IjggYW5kYXIgc2FsYSA4MDEiLCJuZWlnaGJvcmhvb2QiOiJWaWxhIE1hcmlhbmEiLCJjaXR5IjoiU8OjbyBQYXVsbyIsInN0YXRlIjoiU1AiLCJ6aXBfY29kZSI6IjY5MTE4IiwiYW1yIjpbInB3ZCJdfQ.vwt3LxC_t4O14Ll7gWVWjeRjpv3Qi6a4dcc4KX3ym9u2eb0fKdTuB7tLuKYcucIA9TbI7qzl0ek8z7e3ouEZL7tASi64sETRhUm2ljR0qa6Ldo5oTI0jTN2snk4pUKP3p_oZMKIcm4uBPcmq0RgHKjPiOLFlbI7JiLS_qwFWu1hDqHI31HtJEiId9kdeO6j30Ui6neDAPonbs2a-iLCaFfy1fw_ZUX4PII1qT4Kou-Gr2xtiCmljMXwX1jOwn_HrNGe92e7oa5koLMp_QG3PQK09kxgj-WQyClv__XGCqNETobM6VIW19Fm_kGmZBh709cBFaOEYV5pF2MLJmuPUdw",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25BmHw8Xru79XbUFmskeX2ViUIgdyHKJmLaAb8C_M53bdyjtQtZWyV41UO6VmYK1spsW1p4mZC5MLFauYpqrg-2z68ek2_uKE349q3URLDlzRSlMwlwyvy50acWX0SwA25KyaAfy0-tY2Qbz7tNZh57j7",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 22:40:05.618 +00:00 [DBG] Success validating end session request from MVC
2019-01-25 22:40:06.127 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-25 22:40:06.129 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-25 22:40:06.130 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-25 22:40:06.160 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLK32O5RKFOP:00000002",
  "TimeStamp": "2019-01-25T22:40:06Z",
  "ProcessId": 476,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-25 22:40:08.940 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-25 22:40:08.949 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-25 22:40:08.949 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-25 22:40:08.964 +00:00 [DBG] Start authorize request
2019-01-25 22:40:08.980 +00:00 [DBG] No user present in authorize request
2019-01-25 22:40:08.991 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 22:40:09.003 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 22:40:09.018 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 22:40:09.023 +00:00 [DBG] No PKCE used.
2019-01-25 22:40:09.096 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 22:40:09.115 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BmfKC2dBV9YZMFR_V22ToxNVS-BWCRpwyu74n1hU-XPZF1aYQ5XJj_q8GgGF0S1Ut9xHRESJWyklF_7a0c7hOgFgtaDA7n21uTBElU_F8YZqVAQ9wrzrTWCJSG3K-C05QLdSwp_ZZtZkhKm9S_DHQDslpDN8PqXmdpRwt-KBZr2LgbxqV3WrD6qPi1i6X6YdW0LzPY-xermkdnKG_PaGy-vaLL_wt4SW01HRtFNNeVH71pl7J_BgSS6R1XG3dG3rsVP8Qt8DFbFsmdLJsof_fKvvyOIAJrJGIIphE-ISdX1u-SMyHl058ZihLu4Lv-63cA",
  "Nonce": "636840528089230172.MmU2MmMwMzctMjMwOC00OWQ4LWI1YjgtMWU5MmFhMzJiYmY2MDNjMzc3NmYtMjlmNi00NDhiLWFhYzYtNGFhZjMzNmQwYTAx",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840528089230172.MmU2MmMwMzctMjMwOC00OWQ4LWI1YjgtMWU5MmFhMzJiYmY2MDNjMzc3NmYtMjlmNi00NDhiLWFhYzYtNGFhZjMzNmQwYTAx",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25BmfKC2dBV9YZMFR_V22ToxNVS-BWCRpwyu74n1hU-XPZF1aYQ5XJj_q8GgGF0S1Ut9xHRESJWyklF_7a0c7hOgFgtaDA7n21uTBElU_F8YZqVAQ9wrzrTWCJSG3K-C05QLdSwp_ZZtZkhKm9S_DHQDslpDN8PqXmdpRwt-KBZr2LgbxqV3WrD6qPi1i6X6YdW0LzPY-xermkdnKG_PaGy-vaLL_wt4SW01HRtFNNeVH71pl7J_BgSS6R1XG3dG3rsVP8Qt8DFbFsmdLJsof_fKvvyOIAJrJGIIphE-ISdX1u-SMyHl058ZihLu4Lv-63cA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-25 22:40:09.156 +00:00 [INF] Showing login: User is not authenticated
2019-01-25 22:40:09.263 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 22:40:09.263 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 22:40:09.265 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 22:40:09.266 +00:00 [DBG] No PKCE used.
2019-01-25 22:40:09.267 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 22:40:09.289 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 22:40:13.222 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 22:40:13.223 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 22:40:13.223 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 22:40:13.223 +00:00 [DBG] No PKCE used.
2019-01-25 22:40:13.223 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 22:40:13.224 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 22:48:28.647 +00:00 [DBG] Start authorize request protocol validation
2019-01-25 22:48:28.670 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-25 22:48:28.674 +00:00 [DBG] Checking for PKCE parameters
2019-01-25 22:48:28.676 +00:00 [DBG] No PKCE used.
2019-01-25 22:48:28.679 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-25 22:48:28.681 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:23:09.575 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-26 00:23:10.774 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-26 00:23:10.843 +00:00 [INF] Setting number of workers to 1
2019-01-26 00:23:10.873 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-26 00:23:10.907 +00:00 [INF] Bus Rebus 1 started
2019-01-26 00:23:10.925 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-26 00:23:11.112 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-26 00:23:11.157 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-26 00:23:11.230 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-26 00:23:11.253 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-26 00:23:11.268 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-26 00:23:11.270 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-26 00:23:11.274 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-26 00:30:29.363 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-26 00:30:29.651 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-26 00:30:29.654 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-26 00:30:29.663 +00:00 [DBG] Start discovery request
2019-01-26 00:30:29.874 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-26 00:30:29.910 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-26 00:30:29.919 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-26 00:30:29.984 +00:00 [DBG] Start key discovery request
2019-01-26 00:30:30.218 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 00:30:30.227 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 00:30:30.228 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 00:30:30.237 +00:00 [DBG] Start authorize request
2019-01-26 00:30:30.260 +00:00 [DBG] No user present in authorize request
2019-01-26 00:30:30.269 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 00:30:30.306 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:30:30.317 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 00:30:30.321 +00:00 [DBG] No PKCE used.
2019-01-26 00:30:30.390 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 00:30:30.415 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BmV99vJmifuY7DgI0taoVhqeH60xzD1OA0_OqbbgSW_swCEjiU3hKEvagt7oVtp_NgHq7gv9FJw-gGcdR78F51sZRQxPZ-ddbCL7QDx2r3cJnMzxlRpY4NKfHC4WRhwZURoZ5VkrX1-OgS3Iwh0to-kZsY_4hnMsbmLI2j-RI_HY06pU7pYf4SDmYDHaKxUexpUcthhSwOPgny3D7OtYPOIg5rp0aZAN-4hrHcZmaMRiQC_KdwySV-SwMT8HfsLZCXm7AYTZJ1qKA6q13HeD_yi_iHSg7l2etgRAervQpnnbCc7idi6F1qzzQgroLL2Djs",
  "Nonce": "636840594301111470.NmY2N2NlZTQtYTQwMS00MDM1LTk3NzAtZWFkNzM0NTliYWFiNTViNmQzODgtZTgzMS00MWM2LTkwZjQtNDVlZmI4YzNjOTg1",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840594301111470.NmY2N2NlZTQtYTQwMS00MDM1LTk3NzAtZWFkNzM0NTliYWFiNTViNmQzODgtZTgzMS00MWM2LTkwZjQtNDVlZmI4YzNjOTg1",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25BmV99vJmifuY7DgI0taoVhqeH60xzD1OA0_OqbbgSW_swCEjiU3hKEvagt7oVtp_NgHq7gv9FJw-gGcdR78F51sZRQxPZ-ddbCL7QDx2r3cJnMzxlRpY4NKfHC4WRhwZURoZ5VkrX1-OgS3Iwh0to-kZsY_4hnMsbmLI2j-RI_HY06pU7pYf4SDmYDHaKxUexpUcthhSwOPgny3D7OtYPOIg5rp0aZAN-4hrHcZmaMRiQC_KdwySV-SwMT8HfsLZCXm7AYTZJ1qKA6q13HeD_yi_iHSg7l2etgRAervQpnnbCc7idi6F1qzzQgroLL2Djs",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 00:30:30.438 +00:00 [INF] Showing login: User is not authenticated
2019-01-26 00:30:30.911 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 00:30:30.912 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:30:30.912 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 00:30:30.912 +00:00 [DBG] No PKCE used.
2019-01-26 00:30:30.913 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 00:30:30.931 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:35:07.387 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 00:35:07.417 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:35:07.417 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 00:35:07.418 +00:00 [DBG] No PKCE used.
2019-01-26 00:35:07.418 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 00:35:07.418 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:36:28.105 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 00:36:28.107 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:36:28.154 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 00:36:28.155 +00:00 [DBG] No PKCE used.
2019-01-26 00:36:28.156 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 00:36:28.157 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:46:23.251 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 00:46:23.251 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:46:23.256 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 00:46:23.256 +00:00 [DBG] No PKCE used.
2019-01-26 00:46:23.282 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 00:46:23.282 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:50:53.314 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 00:50:53.314 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:50:53.314 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 00:50:53.315 +00:00 [DBG] No PKCE used.
2019-01-26 00:50:53.315 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 00:50:53.315 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:51:42.437 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 00:51:42.437 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:51:42.437 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 00:51:42.437 +00:00 [DBG] No PKCE used.
2019-01-26 00:51:42.438 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 00:51:42.438 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:52:56.276 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 00:52:56.276 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:52:56.276 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 00:52:56.276 +00:00 [DBG] No PKCE used.
2019-01-26 00:52:56.276 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 00:52:56.276 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:56:10.834 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 00:56:10.834 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:56:10.834 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 00:56:10.834 +00:00 [DBG] No PKCE used.
2019-01-26 00:56:10.835 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 00:56:10.835 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:56:14.427 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 00:56:14.427 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:56:14.427 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 00:56:14.427 +00:00 [DBG] No PKCE used.
2019-01-26 00:56:14.428 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 00:56:14.428 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:56:49.728 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 00:56:49.728 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:56:49.728 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 00:56:49.728 +00:00 [DBG] No PKCE used.
2019-01-26 00:56:49.728 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 00:56:49.728 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:58:57.565 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 00:58:57.565 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 00:58:57.565 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 00:58:57.566 +00:00 [DBG] No PKCE used.
2019-01-26 00:58:57.566 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 00:58:57.567 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 01:01:12.204 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-26 01:01:14.567 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-26 01:01:14.803 +00:00 [INF] Setting number of workers to 1
2019-01-26 01:01:14.838 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-26 01:01:14.906 +00:00 [INF] Bus Rebus 1 started
2019-01-26 01:01:14.908 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-26 01:01:15.353 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-26 01:01:15.379 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-26 01:01:15.433 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-26 01:01:15.436 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-26 01:01:15.443 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-26 01:01:15.455 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-26 01:01:15.468 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-26 01:03:17.982 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-26 01:03:18.444 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-26 01:03:18.458 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-26 01:03:18.466 +00:00 [DBG] Start discovery request
2019-01-26 01:03:18.710 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-26 01:03:18.713 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-26 01:03:18.713 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-26 01:03:18.857 +00:00 [DBG] Start key discovery request
2019-01-26 01:03:19.117 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 01:03:19.126 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 01:03:19.126 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 01:03:19.143 +00:00 [DBG] Start authorize request
2019-01-26 01:03:19.178 +00:00 [DBG] No user present in authorize request
2019-01-26 01:03:19.197 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 01:03:19.245 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 01:03:19.264 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 01:03:19.276 +00:00 [DBG] No PKCE used.
2019-01-26 01:03:19.358 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 01:03:19.380 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25Bl_cEzT87YP59fXDLEllgvmyP3AoX4hueqzCT447q3fxKBAxmcga41l3PcWvdUK4y3JR1MkUqO8-3cBK23FQbsERHLtZJWjJ7K-o1BBKbVgA0d0ed-IlDUFNtT6eAdvMkIMbRebjce4Z5Zt0820hrzk6EijX61eL-ClkZ6v_mBnAQtd-qFx2pkkcSP6NKXpETC1LFl9baL3EMcFwx-9Hun6I8MOY6Qq4d9nnja0tXerwfGx-xnXxH2rjqS9BDsVe2aNgNIyTTUCt5BTvhdks2utPKc9P7xOmr2nroEVT4W8IydbSmidAkM3WgsU2c7djVo",
  "Nonce": "636840613990032749.Y2M1MjYzOWItYTExNy00MTk5LTgwNDQtOTIyNDhjYzU5YzQ3YzYyYjk1NTUtNDg2NS00ZjcyLTljYTItYzIyMWNhOTgyOThj",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840613990032749.Y2M1MjYzOWItYTExNy00MTk5LTgwNDQtOTIyNDhjYzU5YzQ3YzYyYjk1NTUtNDg2NS00ZjcyLTljYTItYzIyMWNhOTgyOThj",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25Bl_cEzT87YP59fXDLEllgvmyP3AoX4hueqzCT447q3fxKBAxmcga41l3PcWvdUK4y3JR1MkUqO8-3cBK23FQbsERHLtZJWjJ7K-o1BBKbVgA0d0ed-IlDUFNtT6eAdvMkIMbRebjce4Z5Zt0820hrzk6EijX61eL-ClkZ6v_mBnAQtd-qFx2pkkcSP6NKXpETC1LFl9baL3EMcFwx-9Hun6I8MOY6Qq4d9nnja0tXerwfGx-xnXxH2rjqS9BDsVe2aNgNIyTTUCt5BTvhdks2utPKc9P7xOmr2nroEVT4W8IydbSmidAkM3WgsU2c7djVo",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 01:03:19.411 +00:00 [INF] Showing login: User is not authenticated
2019-01-26 01:03:19.948 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 01:03:19.949 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 01:03:19.950 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 01:03:19.950 +00:00 [DBG] No PKCE used.
2019-01-26 01:03:19.951 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 01:03:19.982 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 01:03:46.123 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 01:03:46.185 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 01:03:46.198 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 01:03:46.198 +00:00 [DBG] No PKCE used.
2019-01-26 01:03:46.198 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 01:03:46.198 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 01:05:49.821 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 01:05:51.221 +00:00 [DBG] Augmenting SignInContext
2019-01-26 01:05:51.227 +00:00 [DBG] Adding idp claim with value: local
2019-01-26 01:05:51.227 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-26 01:05:51.229 +00:00 [DBG] Adding auth_time claim with value: 1548464751
2019-01-26 01:05:51.254 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 01:05:51.301 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK35878PJN5:00000003",
  "TimeStamp": "2019-01-26T01:05:51Z",
  "ProcessId": 2205,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 01:05:51.353 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 01:05:51.355 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 01:05:51.355 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 01:05:51.373 +00:00 [DBG] Start authorize callback request
2019-01-26 01:05:51.383 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-26 01:05:51.384 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 01:05:51.384 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 01:05:51.385 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 01:05:51.386 +00:00 [DBG] No PKCE used.
2019-01-26 01:05:51.388 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 01:05:51.389 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25Bl_cEzT87YP59fXDLEllgvmyP3AoX4hueqzCT447q3fxKBAxmcga41l3PcWvdUK4y3JR1MkUqO8-3cBK23FQbsERHLtZJWjJ7K-o1BBKbVgA0d0ed-IlDUFNtT6eAdvMkIMbRebjce4Z5Zt0820hrzk6EijX61eL-ClkZ6v_mBnAQtd-qFx2pkkcSP6NKXpETC1LFl9baL3EMcFwx-9Hun6I8MOY6Qq4d9nnja0tXerwfGx-xnXxH2rjqS9BDsVe2aNgNIyTTUCt5BTvhdks2utPKc9P7xOmr2nroEVT4W8IydbSmidAkM3WgsU2c7djVo",
  "Nonce": "636840613990032749.Y2M1MjYzOWItYTExNy00MTk5LTgwNDQtOTIyNDhjYzU5YzQ3YzYyYjk1NTUtNDg2NS00ZjcyLTljYTItYzIyMWNhOTgyOThj",
  "SessionId": "efdc4fd1c546d575f4be783cdd239b6e",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840613990032749.Y2M1MjYzOWItYTExNy00MTk5LTgwNDQtOTIyNDhjYzU5YzQ3YzYyYjk1NTUtNDg2NS00ZjcyLTljYTItYzIyMWNhOTgyOThj",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25Bl_cEzT87YP59fXDLEllgvmyP3AoX4hueqzCT447q3fxKBAxmcga41l3PcWvdUK4y3JR1MkUqO8-3cBK23FQbsERHLtZJWjJ7K-o1BBKbVgA0d0ed-IlDUFNtT6eAdvMkIMbRebjce4Z5Zt0820hrzk6EijX61eL-ClkZ6v_mBnAQtd-qFx2pkkcSP6NKXpETC1LFl9baL3EMcFwx-9Hun6I8MOY6Qq4d9nnja0tXerwfGx-xnXxH2rjqS9BDsVe2aNgNIyTTUCt5BTvhdks2utPKc9P7xOmr2nroEVT4W8IydbSmidAkM3WgsU2c7djVo",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 01:05:51.434 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-26 01:05:51.478 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-26 01:05:51.524 +00:00 [DBG] Creating Implicit Flow response.
2019-01-26 01:05:51.540 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-26 01:05:51.750 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****gCVg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****1e74"
    }
  ],
  "ActivityId": "0HLK35878PJN5:00000004",
  "TimeStamp": "2019-01-26T01:05:51Z",
  "ProcessId": 2205,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 01:05:51.757 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25Bl_cEzT87YP59fXDLEllgvmyP3AoX4hueqzCT447q3fxKBAxmcga41l3PcWvdUK4y3JR1MkUqO8-3cBK23FQbsERHLtZJWjJ7K-o1BBKbVgA0d0ed-IlDUFNtT6eAdvMkIMbRebjce4Z5Zt0820hrzk6EijX61eL-ClkZ6v_mBnAQtd-qFx2pkkcSP6NKXpETC1LFl9baL3EMcFwx-9Hun6I8MOY6Qq4d9nnja0tXerwfGx-xnXxH2rjqS9BDsVe2aNgNIyTTUCt5BTvhdks2utPKc9P7xOmr2nroEVT4W8IydbSmidAkM3WgsU2c7djVo",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-26 01:05:51.807 +00:00 [DBG] Augmenting SignInContext
2019-01-26 01:05:51.811 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 01:05:52.665 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 01:05:52.670 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 01:05:52.671 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 01:05:52.690 +00:00 [DBG] Start token request.
2019-01-26 01:05:52.701 +00:00 [DBG] Start client validation
2019-01-26 01:05:52.709 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 01:05:52.716 +00:00 [DBG] Start parsing for secret in post body
2019-01-26 01:05:52.721 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-26 01:05:52.721 +00:00 [DBG] Secret id found: MVC
2019-01-26 01:05:52.722 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 01:05:52.747 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 01:05:52.747 +00:00 [DBG] Client validation success
2019-01-26 01:05:52.753 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK35878PJN7:00000001",
  "TimeStamp": "2019-01-26T01:05:52Z",
  "ProcessId": 2205,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 01:05:52.767 +00:00 [DBG] Start token request validation
2019-01-26 01:05:52.788 +00:00 [DBG] Start validation of authorization code token request
2019-01-26 01:05:52.823 +00:00 [DBG] Validation of authorization code token request success
2019-01-26 01:05:52.836 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "12b3e3e4fbaa8873b9082edb243360dd7a980ab22c0f44f84f04ea0b79461e74",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "12b3e3e4fbaa8873b9082edb243360dd7a980ab22c0f44f84f04ea0b79461e74",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-26 01:05:52.871 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 01:05:52.889 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 01:05:52.890 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-26 01:05:52.920 +00:00 [DBG] Creating refresh token
2019-01-26 01:05:52.920 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-26 01:05:52.945 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 01:05:52.946 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-26 01:05:52.965 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****6AOQ"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****f20b"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****WX1Q"
    }
  ],
  "ActivityId": "0HLK35878PJN7:00000001",
  "TimeStamp": "2019-01-26T01:05:52Z",
  "ProcessId": 2205,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 01:05:52.968 +00:00 [DBG] Token request success.
2019-01-26 01:05:53.032 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-26 01:05:53.034 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-26 01:05:53.034 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-26 01:05:53.056 +00:00 [DBG] Start userinfo request
2019-01-26 01:05:53.065 +00:00 [DBG] Bearer token found in header
2019-01-26 01:05:53.153 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 01:05:53.159 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 01:05:53.162 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-26 01:05:53.169 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548464752,
    "exp": 1548468352,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548464751,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-26 01:05:53.187 +00:00 [DBG] Creating userinfo response
2019-01-26 01:05:53.201 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 01:05:53.206 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 01:05:53.215 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-26 01:05:53.215 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 01:05:53.241 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-26 01:05:53.242 +00:00 [DBG] End userinfo request
2019-01-26 01:05:54.050 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 01:05:54.050 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 01:05:54.050 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 01:05:54.050 +00:00 [DBG] Start token request.
2019-01-26 01:05:54.050 +00:00 [DBG] Start client validation
2019-01-26 01:05:54.050 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 01:05:54.055 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-26 01:05:54.055 +00:00 [DBG] Secret id found: MVC
2019-01-26 01:05:54.056 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 01:05:54.056 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 01:05:54.056 +00:00 [DBG] Client validation success
2019-01-26 01:05:54.056 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK35878PJN8:00000001",
  "TimeStamp": "2019-01-26T01:05:54Z",
  "ProcessId": 2205,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 01:05:54.123 +00:00 [DBG] Start token request validation
2019-01-26 01:05:54.140 +00:00 [DBG] Start client credentials token request validation
2019-01-26 01:05:54.163 +00:00 [DBG] MVC credentials token request validation success
2019-01-26 01:05:54.166 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-26 01:05:54.183 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 01:05:54.186 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****5zTg"
    }
  ],
  "ActivityId": "0HLK35878PJN8:00000001",
  "TimeStamp": "2019-01-26T01:05:54Z",
  "ProcessId": 2205,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 01:05:54.200 +00:00 [DBG] Token request success.
2019-01-26 01:05:54.736 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-26 01:05:54.738 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-26 01:05:54.745 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-26 01:05:54.746 +00:00 [DBG] Start discovery request
2019-01-26 01:05:55.054 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-26 01:05:55.054 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-26 01:05:55.055 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-26 01:05:55.055 +00:00 [DBG] Start key discovery request
2019-01-26 01:06:03.547 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 01:06:03.548 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 01:06:03.549 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 01:06:03.549 +00:00 [DBG] Start token request.
2019-01-26 01:06:03.549 +00:00 [DBG] Start client validation
2019-01-26 01:06:03.549 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 01:06:03.549 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-26 01:06:03.549 +00:00 [DBG] Secret id found: MVC
2019-01-26 01:06:03.549 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 01:06:03.550 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 01:06:03.550 +00:00 [DBG] Client validation success
2019-01-26 01:06:03.550 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK35878PJNA:00000001",
  "TimeStamp": "2019-01-26T01:06:03Z",
  "ProcessId": 2205,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 01:06:03.568 +00:00 [DBG] Start token request validation
2019-01-26 01:06:03.569 +00:00 [DBG] Start client credentials token request validation
2019-01-26 01:06:03.570 +00:00 [DBG] MVC credentials token request validation success
2019-01-26 01:06:03.571 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-26 01:06:03.572 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 01:06:03.583 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****r28g"
    }
  ],
  "ActivityId": "0HLK35878PJNA:00000001",
  "TimeStamp": "2019-01-26T01:06:03Z",
  "ProcessId": 2205,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 01:06:03.583 +00:00 [DBG] Token request success.
2019-01-26 01:06:04.260 +00:00 [INF] Message received:
2019-01-26 01:06:04.261 +00:00 [INF] ----------------------------------
2019-01-26 01:06:04.266 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"d4e7d829-3db4-46f8-bb46-1e52ef0ac096","CreationDate":"2019-01-26T01:06:04.1512209Z"}
2019-01-26 01:06:04.267 +00:00 [INF] ----------------------------------
2019-01-26 01:06:05.598 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 26e2974a-e5ea-4e4c-bb9e-b27b60609c5a to 1 handlers took 1353 ms
2019-01-26 02:46:40.318 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-26 02:46:40.320 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-26 02:46:40.321 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-26 02:46:40.333 +00:00 [DBG] Processing signout request for 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-26 02:46:40.346 +00:00 [DBG] Start end session request validation
2019-01-26 02:46:40.360 +00:00 [DBG] Start identity token validation
2019-01-26 02:46:40.363 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 02:46:40.364 +00:00 [DBG] Client found: MVC / MVC
2019-01-26 02:46:40.365 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-26 02:46:40.367 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1548464752,
    "exp": 1548465052,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636840613990032749.Y2M1MjYzOWItYTExNy00MTk5LTgwNDQtOTIyNDhjYzU5YzQ3YzYyYjk1NTUtNDg2NS00ZjcyLTljYTItYzIyMWNhOTgyOThj",
    "iat": 1548464752,
    "at_hash": "c6vikroA84MbYapl7oRdcQ",
    "sid": "efdc4fd1c546d575f4be783cdd239b6e",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548464751,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "amr": "pwd"
  }
}
2019-01-26 02:46:40.382 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25Bn4l3E_rxTWQG4CpaxrHdRsVw7-yGmHQ1I0SbIVWjzcivA8YRVAfVmiETTXwGNMF5IyStaFpbAI77BrbhcxPkky_J5azaV1f9RIg_uprfa3lrkotrQX21oaWpaVQvr0Eb16Fkwg8R62i2PnRkV_3g5f",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDg0NjQ3NTIsImV4cCI6MTU0ODQ2NTA1MiwiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4NDA2MTM5OTAwMzI3NDkuWTJNMU1qWXpPV0l0WVRFeE55MDBNVGs1TFRnd05EUXRPVEl5TkRoall6VTVZelEzWXpZeVlqazFOVFV0TkRnMk5TMDBaamN5TFRsallUSXRZekl5TVdOaE9UZ3lPVGhqIiwiaWF0IjoxNTQ4NDY0NzUyLCJhdF9oYXNoIjoiYzZ2aWtyb0E4NE1iWWFwbDdvUmRjUSIsInNpZCI6ImVmZGM0ZmQxYzU0NmQ1NzVmNGJlNzgzY2RkMjM5YjZlIiwic3ViIjoiMTczZjk2NGYtMWViOS00M2NmLTkxYzctZGY3NTM3MTdjMTZjIiwiYXV0aF90aW1lIjoxNTQ4NDY0NzUxLCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImVtYWlsIjoiYWxpY2VAYXNwLm5ldCIsInBob25lIjoiMTIzNC01Njc4IiwiYWRkcmVzcyI6IlJ1YSBWZXJndWVpcm8sIDQ1NiIsImFkZHJlc3NfZGV0YWlscyI6IjggYW5kYXIgc2FsYSA4MDEiLCJuZWlnaGJvcmhvb2QiOiJWaWxhIE1hcmlhbmEiLCJjaXR5IjoiU8OjbyBQYXVsbyIsInN0YXRlIjoiU1AiLCJ6aXBfY29kZSI6IjY5MTE4IiwiYW1yIjpbInB3ZCJdfQ.Lk46VJd0SbIxVmBp6MqX8XPIZeUhhUNHdB-RvkraFGATYhfK77QYDLmlNlLbFRcgVxrkCp4TvueNh3Y3wKsgV9oBOsoxpdZYSItWIjLoIdL6VUp1Rf_Va6feLtlqrVtGrMeA3ccxDc2hV2BQ-wvSGhFPcGIC7SGfamGroLowM1dwZ-AUW2FoSt-7gopHuorvpnZN2lM4WkZQcKojbrnzxrtPJd-_dlolW-TcpdUW8sfQomzXSc2srsPtWfK0UIAYfpCOtJP8BSKKzIBqfiSDQpLS87bQSTX3UJaP7_52K0KRwKcE6YHJLn9KiO1yLWZ6sJ-7RaUqGAPWvkZ6q_6AOQ",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25Bn4l3E_rxTWQG4CpaxrHdRsVw7-yGmHQ1I0SbIVWjzcivA8YRVAfVmiETTXwGNMF5IyStaFpbAI77BrbhcxPkky_J5azaV1f9RIg_uprfa3lrkotrQX21oaWpaVQvr0Eb16Fkwg8R62i2PnRkV_3g5f",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 02:46:40.382 +00:00 [DBG] Success validating end session request from MVC
2019-01-26 02:46:40.564 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-26 02:46:40.566 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 02:46:40.567 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-26 02:46:40.582 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLK35878PJNB:00000002",
  "TimeStamp": "2019-01-26T02:46:40Z",
  "ProcessId": 2205,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 02:46:43.056 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 02:46:43.057 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 02:46:43.057 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 02:46:43.057 +00:00 [DBG] Start authorize request
2019-01-26 02:46:43.057 +00:00 [DBG] No user present in authorize request
2019-01-26 02:46:43.058 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 02:46:43.058 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 02:46:43.058 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 02:46:43.058 +00:00 [DBG] No PKCE used.
2019-01-26 02:46:43.058 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 02:46:43.059 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BldQi7LX3HFxEp8T6m1Q2MGcVVu0ZKAnh_q5RBQr2YAHUUSBwH-SAuLQjqbS9y5bX8irflTChfYhgsqpKgQW7oIE2klAmPitr0HeUlZAmMaigUSHLEKomDZa-5lSzT7fuAtPL48LJxK6Tn0u83Uga2mXQfL-QqBsHG5mBBE3ziE7slmdfY_jvebNJhHwlSRmLbu4qEJ8wJR_TGjN-PSHnvVhTf_Y2RYnMd1YOjy81ZABUNpZ1EeMcGugSFE53PfsZ_lL4BGQ_s8iGxH0x5H5e9moywlKgxeyWaZDk5N52lJ3VVmWG1hPDOR8UOnfHjUsOo",
  "Nonce": "636840676030444535.YzU2YTE1MTYtNjFhOC00N2FkLTk5MGEtYTcyMDA5YTU2ODZiMzg0NGY0OTAtZjgzOS00MjVjLWE2ZjctZjkwMjAzOTdmNmFj",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840676030444535.YzU2YTE1MTYtNjFhOC00N2FkLTk5MGEtYTcyMDA5YTU2ODZiMzg0NGY0OTAtZjgzOS00MjVjLWE2ZjctZjkwMjAzOTdmNmFj",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25BldQi7LX3HFxEp8T6m1Q2MGcVVu0ZKAnh_q5RBQr2YAHUUSBwH-SAuLQjqbS9y5bX8irflTChfYhgsqpKgQW7oIE2klAmPitr0HeUlZAmMaigUSHLEKomDZa-5lSzT7fuAtPL48LJxK6Tn0u83Uga2mXQfL-QqBsHG5mBBE3ziE7slmdfY_jvebNJhHwlSRmLbu4qEJ8wJR_TGjN-PSHnvVhTf_Y2RYnMd1YOjy81ZABUNpZ1EeMcGugSFE53PfsZ_lL4BGQ_s8iGxH0x5H5e9moywlKgxeyWaZDk5N52lJ3VVmWG1hPDOR8UOnfHjUsOo",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 02:46:43.059 +00:00 [INF] Showing login: User is not authenticated
2019-01-26 02:46:43.077 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 02:46:43.078 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 02:46:43.078 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 02:46:43.078 +00:00 [DBG] No PKCE used.
2019-01-26 02:46:43.080 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 02:46:43.090 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 02:46:53.806 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 02:46:53.836 +00:00 [INF] {
  "Name": "User Login Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1001,
  "Username": "marcelo",
  "Endpoint": "UI",
  "Message": "invalid credentials",
  "ActivityId": "0HLK35878PJNB:00000006",
  "TimeStamp": "2019-01-26T02:46:53Z",
  "ProcessId": 2205,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 02:46:53.842 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 02:46:53.843 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 02:46:53.843 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 02:46:53.843 +00:00 [DBG] No PKCE used.
2019-01-26 02:46:53.843 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 02:46:53.844 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 02:47:06.615 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 02:47:06.633 +00:00 [INF] {
  "Name": "User Login Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1001,
  "Username": "marcelo",
  "Endpoint": "UI",
  "Message": "invalid credentials",
  "ActivityId": "0HLK35878PJNB:00000007",
  "TimeStamp": "2019-01-26T02:47:06Z",
  "ProcessId": 2205,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 02:47:06.633 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 02:47:06.634 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 02:47:06.634 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 02:47:06.635 +00:00 [DBG] No PKCE used.
2019-01-26 02:47:06.636 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 02:47:06.636 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 02:47:16.406 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 02:47:16.424 +00:00 [INF] {
  "Name": "User Login Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1001,
  "Username": "marcelo",
  "Endpoint": "UI",
  "Message": "invalid credentials",
  "ActivityId": "0HLK35878PJNB:00000008",
  "TimeStamp": "2019-01-26T02:47:16Z",
  "ProcessId": 2205,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 02:47:16.425 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 02:47:16.426 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 02:47:16.426 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 02:47:16.427 +00:00 [DBG] No PKCE used.
2019-01-26 02:47:16.428 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 02:47:16.429 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 02:57:46.920 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-26 02:57:48.164 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-26 02:57:48.223 +00:00 [INF] Setting number of workers to 1
2019-01-26 02:57:48.248 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-26 02:57:48.266 +00:00 [INF] Bus Rebus 1 started
2019-01-26 02:57:48.316 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-26 02:57:48.539 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-26 02:57:48.595 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-26 02:57:48.676 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-26 02:57:48.682 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-26 02:57:48.686 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-26 02:57:48.689 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-26 02:57:48.692 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-26 03:00:27.376 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-26 03:00:27.649 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-26 03:00:27.651 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-26 03:00:27.661 +00:00 [DBG] Start discovery request
2019-01-26 03:00:27.942 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-26 03:00:27.979 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-26 03:00:27.995 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-26 03:00:28.087 +00:00 [DBG] Start key discovery request
2019-01-26 03:00:28.310 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 03:00:28.318 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 03:00:28.319 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 03:00:28.329 +00:00 [DBG] Start authorize request
2019-01-26 03:00:28.352 +00:00 [DBG] No user present in authorize request
2019-01-26 03:00:28.363 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:00:28.385 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:00:28.393 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:00:28.398 +00:00 [DBG] No PKCE used.
2019-01-26 03:00:28.458 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:00:28.476 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BkrPywimc8N9vy3QRdll3y_8RUIGdWnMdAbYM8NuXhvE5Pt9r0Gk9FRZwfh2cEXtYm5vvP_wIqgEhhNgJVYWFLpjClO_WwUM35mLLRK7X-UgoC8zjzkn-qog4Y4pcT4gNStF3X0YltoSL6sZwWDSe37916A62AHph3cz4i3Rh6LpnbmNtwLalEjl_TvTliI0AQbczp6T_GywIUjqb9AlB--ic4KPd9PKZMmCrGqKA_UGXGHdp4dd8Gm83poO4QQnXlCRlfhP3uePp3a47nTYub0X4zw08YW7HVQ7UeUHfYcRseKNn4kw3M764_LgUjkveA",
  "Nonce": "636840684282048128.MDY1OTViYTMtZjU3MC00YTY5LWIyNTYtMTZkOTdiZTgxNjFjMTJjYjIyNTgtNTgxNy00NWJjLWI3NzItOTZkNDg0MjQ3Yjlm",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840684282048128.MDY1OTViYTMtZjU3MC00YTY5LWIyNTYtMTZkOTdiZTgxNjFjMTJjYjIyNTgtNTgxNy00NWJjLWI3NzItOTZkNDg0MjQ3Yjlm",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25BkrPywimc8N9vy3QRdll3y_8RUIGdWnMdAbYM8NuXhvE5Pt9r0Gk9FRZwfh2cEXtYm5vvP_wIqgEhhNgJVYWFLpjClO_WwUM35mLLRK7X-UgoC8zjzkn-qog4Y4pcT4gNStF3X0YltoSL6sZwWDSe37916A62AHph3cz4i3Rh6LpnbmNtwLalEjl_TvTliI0AQbczp6T_GywIUjqb9AlB--ic4KPd9PKZMmCrGqKA_UGXGHdp4dd8Gm83poO4QQnXlCRlfhP3uePp3a47nTYub0X4zw08YW7HVQ7UeUHfYcRseKNn4kw3M764_LgUjkveA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 03:00:28.504 +00:00 [INF] Showing login: User is not authenticated
2019-01-26 03:00:28.933 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:00:28.934 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:00:28.935 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:00:28.936 +00:00 [DBG] No PKCE used.
2019-01-26 03:00:28.938 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:00:28.946 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:00:32.163 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:00:32.164 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:00:32.165 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:00:32.166 +00:00 [DBG] No PKCE used.
2019-01-26 03:00:32.167 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:00:32.175 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:00:41.703 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 03:00:41.704 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 03:00:41.704 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 03:00:41.704 +00:00 [DBG] Start authorize request
2019-01-26 03:00:41.705 +00:00 [DBG] No user present in authorize request
2019-01-26 03:00:41.705 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:00:41.705 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:00:41.705 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:00:41.705 +00:00 [DBG] No PKCE used.
2019-01-26 03:00:41.705 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:00:41.706 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25Bnx5PJ-5iu2ZRoXxCR5ryhC4eEL3XsaGxXuFuscUZu9i2Tgmm5khxX3Ltf-9XXXuA8fEgYq6TFIqLThl_-3TDpdgdfo_9WP1jTAtpFioy3YShl3uGTJrGFGZaWVpKpBMqUOGCxAG1IuBLzzASfFkaf68iyQ3zmt9-DJ47W5IWrWmNi9uN6rEb6CiUiUUwh90RhzCatIh6lSUZcnNF3S-RMQXb4zhlJ5pEKbQftJVWyUrHMrzyi2g9Yj4Sw3BpRUki9VY4aKZpGmiUyY92P3ltxvi4KR1HcwOzcb8oclh9YmN398UhWT9b2Xg4M70pJy9Fc",
  "Nonce": "636840684416856900.ODc0MTE2OGYtNDUxNi00MjdjLWFmOTQtZTE2NGMzY2Q4Y2QwODY4ODc1NmEtMjEyYS00YWRmLThiZmEtNjA5MTY2M2U5MmNj",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840684416856900.ODc0MTE2OGYtNDUxNi00MjdjLWFmOTQtZTE2NGMzY2Q4Y2QwODY4ODc1NmEtMjEyYS00YWRmLThiZmEtNjA5MTY2M2U5MmNj",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25Bnx5PJ-5iu2ZRoXxCR5ryhC4eEL3XsaGxXuFuscUZu9i2Tgmm5khxX3Ltf-9XXXuA8fEgYq6TFIqLThl_-3TDpdgdfo_9WP1jTAtpFioy3YShl3uGTJrGFGZaWVpKpBMqUOGCxAG1IuBLzzASfFkaf68iyQ3zmt9-DJ47W5IWrWmNi9uN6rEb6CiUiUUwh90RhzCatIh6lSUZcnNF3S-RMQXb4zhlJ5pEKbQftJVWyUrHMrzyi2g9Yj4Sw3BpRUki9VY4aKZpGmiUyY92P3ltxvi4KR1HcwOzcb8oclh9YmN398UhWT9b2Xg4M70pJy9Fc",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 03:00:41.706 +00:00 [INF] Showing login: User is not authenticated
2019-01-26 03:00:41.748 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:00:41.749 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:00:41.749 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:00:41.749 +00:00 [DBG] No PKCE used.
2019-01-26 03:00:41.749 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:00:41.750 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:01:00.457 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 03:01:00.458 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 03:01:00.458 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 03:01:00.458 +00:00 [DBG] Start authorize request
2019-01-26 03:01:00.458 +00:00 [DBG] No user present in authorize request
2019-01-26 03:01:00.458 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:01:00.458 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:01:00.458 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:01:00.458 +00:00 [DBG] No PKCE used.
2019-01-26 03:01:00.459 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:01:00.459 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25Bnn52477MdObbeKpdLzDIUNU3dfFf1iCTutguRN4cT-Xkw4b2Jtjo6oDikLeybpYTV3plV8eAQOG6Mf_0du-lSCp6vMrVCI_gl0-NhJf7cwAYbiVk-JQktBcg_92aCfGiPWR_Q5no5SgBKOI3knHOsU76BJFAxu8it-WoiCKWXQ8JuaVLQPHnEDcrGKEk2T8dGwFKR9AXvdpI29SXbprMQz4krphphSYu5diucTzr9PR1Ma7Y9X5sMfN-4e-rP7h-Te8fA-Qz3sOmj0z9Ft8LTM5CTK3o-jpP7SPjbrcoADQqnaK51PZxvtmpoz6649MWo",
  "Nonce": "636840684604445418.ODdlNWZjM2UtYTNkNC00MjA1LTg3YjItY2Y5ZWE1N2UzNGIyN2Q2YjBhNmYtZGU5ZS00ZDg1LTk4NDQtZmQ3OTYyODhhNWQy",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840684604445418.ODdlNWZjM2UtYTNkNC00MjA1LTg3YjItY2Y5ZWE1N2UzNGIyN2Q2YjBhNmYtZGU5ZS00ZDg1LTk4NDQtZmQ3OTYyODhhNWQy",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25Bnn52477MdObbeKpdLzDIUNU3dfFf1iCTutguRN4cT-Xkw4b2Jtjo6oDikLeybpYTV3plV8eAQOG6Mf_0du-lSCp6vMrVCI_gl0-NhJf7cwAYbiVk-JQktBcg_92aCfGiPWR_Q5no5SgBKOI3knHOsU76BJFAxu8it-WoiCKWXQ8JuaVLQPHnEDcrGKEk2T8dGwFKR9AXvdpI29SXbprMQz4krphphSYu5diucTzr9PR1Ma7Y9X5sMfN-4e-rP7h-Te8fA-Qz3sOmj0z9Ft8LTM5CTK3o-jpP7SPjbrcoADQqnaK51PZxvtmpoz6649MWo",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 03:01:00.459 +00:00 [INF] Showing login: User is not authenticated
2019-01-26 03:01:00.473 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:01:00.473 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:01:00.473 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:01:00.473 +00:00 [DBG] No PKCE used.
2019-01-26 03:01:00.474 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:01:00.474 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:02:03.816 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 03:02:04.775 +00:00 [INF] {
  "Name": "User Login Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1001,
  "Username": "marcelo",
  "Endpoint": "UI",
  "Message": "invalid credentials",
  "ActivityId": "0HLK379M71GF2:00000007",
  "TimeStamp": "2019-01-26T03:02:04Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:02:04.783 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:02:04.784 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:02:04.787 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:02:04.788 +00:00 [DBG] No PKCE used.
2019-01-26 03:02:04.789 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:02:04.791 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:03:36.064 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 03:03:36.093 +00:00 [INF] {
  "Name": "User Login Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1001,
  "Username": "marcelo",
  "Endpoint": "UI",
  "Message": "invalid credentials",
  "ActivityId": "0HLK379M71GF2:00000008",
  "TimeStamp": "2019-01-26T03:03:36Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:03:36.108 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:03:36.115 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:03:36.120 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:03:36.128 +00:00 [DBG] No PKCE used.
2019-01-26 03:03:36.131 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:03:36.135 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:03:42.011 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 03:03:42.041 +00:00 [INF] {
  "Name": "User Login Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1001,
  "Username": "marcelo",
  "Endpoint": "UI",
  "Message": "invalid credentials",
  "ActivityId": "0HLK379M71GF2:00000009",
  "TimeStamp": "2019-01-26T03:03:42Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:03:42.044 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:03:42.046 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:03:42.048 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:03:42.049 +00:00 [DBG] No PKCE used.
2019-01-26 03:03:42.050 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:03:42.051 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:03:48.079 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:03:48.080 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:03:48.082 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:03:48.083 +00:00 [DBG] No PKCE used.
2019-01-26 03:03:48.087 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:03:48.089 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:05.334 +00:00 [DBG] CORS request made for path: /account/register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 03:04:05.858 +00:00 [DBG] Augmenting SignInContext
2019-01-26 03:04:05.868 +00:00 [DBG] Adding idp claim with value: local
2019-01-26 03:04:05.869 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-26 03:04:05.875 +00:00 [DBG] Adding auth_time claim with value: 1548471845
2019-01-26 03:04:05.906 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 03:04:06.044 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 03:04:06.046 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 03:04:06.048 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 03:04:06.060 +00:00 [DBG] Start authorize callback request
2019-01-26 03:04:06.067 +00:00 [DBG] User in authorize request: bc089cd1-ee88-40e5-8a2f-58eef18f8d06
2019-01-26 03:04:06.068 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:04:06.069 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:06.071 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:04:06.072 +00:00 [DBG] No PKCE used.
2019-01-26 03:04:06.076 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:04:06.078 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "bc089cd1-ee88-40e5-8a2f-58eef18f8d06",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25Bnn52477MdObbeKpdLzDIUNU3dfFf1iCTutguRN4cT-Xkw4b2Jtjo6oDikLeybpYTV3plV8eAQOG6Mf_0du-lSCp6vMrVCI_gl0-NhJf7cwAYbiVk-JQktBcg_92aCfGiPWR_Q5no5SgBKOI3knHOsU76BJFAxu8it-WoiCKWXQ8JuaVLQPHnEDcrGKEk2T8dGwFKR9AXvdpI29SXbprMQz4krphphSYu5diucTzr9PR1Ma7Y9X5sMfN-4e-rP7h-Te8fA-Qz3sOmj0z9Ft8LTM5CTK3o-jpP7SPjbrcoADQqnaK51PZxvtmpoz6649MWo",
  "Nonce": "636840684604445418.ODdlNWZjM2UtYTNkNC00MjA1LTg3YjItY2Y5ZWE1N2UzNGIyN2Q2YjBhNmYtZGU5ZS00ZDg1LTk4NDQtZmQ3OTYyODhhNWQy",
  "SessionId": "6ce422c1c44c0dfcd396f2f0e8ce0a9e",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840684604445418.ODdlNWZjM2UtYTNkNC00MjA1LTg3YjItY2Y5ZWE1N2UzNGIyN2Q2YjBhNmYtZGU5ZS00ZDg1LTk4NDQtZmQ3OTYyODhhNWQy",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25Bnn52477MdObbeKpdLzDIUNU3dfFf1iCTutguRN4cT-Xkw4b2Jtjo6oDikLeybpYTV3plV8eAQOG6Mf_0du-lSCp6vMrVCI_gl0-NhJf7cwAYbiVk-JQktBcg_92aCfGiPWR_Q5no5SgBKOI3knHOsU76BJFAxu8it-WoiCKWXQ8JuaVLQPHnEDcrGKEk2T8dGwFKR9AXvdpI29SXbprMQz4krphphSYu5diucTzr9PR1Ma7Y9X5sMfN-4e-rP7h-Te8fA-Qz3sOmj0z9Ft8LTM5CTK3o-jpP7SPjbrcoADQqnaK51PZxvtmpoz6649MWo",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 03:04:06.139 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-26 03:04:06.160 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-26 03:04:06.219 +00:00 [DBG] Creating Implicit Flow response.
2019-01-26 03:04:06.247 +00:00 [DBG] Getting claims for identity token for subject: bc089cd1-ee88-40e5-8a2f-58eef18f8d06 and client: MVC
2019-01-26 03:04:06.425 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "bc089cd1-ee88-40e5-8a2f-58eef18f8d06",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****T9Ng"
    },
    {
      "TokenType": "code",
      "TokenValue": "****ba4f"
    }
  ],
  "ActivityId": "0HLK379M71GF2:0000000C",
  "TimeStamp": "2019-01-26T03:04:06Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:04:06.450 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "bc089cd1-ee88-40e5-8a2f-58eef18f8d06",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25Bnn52477MdObbeKpdLzDIUNU3dfFf1iCTutguRN4cT-Xkw4b2Jtjo6oDikLeybpYTV3plV8eAQOG6Mf_0du-lSCp6vMrVCI_gl0-NhJf7cwAYbiVk-JQktBcg_92aCfGiPWR_Q5no5SgBKOI3knHOsU76BJFAxu8it-WoiCKWXQ8JuaVLQPHnEDcrGKEk2T8dGwFKR9AXvdpI29SXbprMQz4krphphSYu5diucTzr9PR1Ma7Y9X5sMfN-4e-rP7h-Te8fA-Qz3sOmj0z9Ft8LTM5CTK3o-jpP7SPjbrcoADQqnaK51PZxvtmpoz6649MWo",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-26 03:04:06.578 +00:00 [DBG] Augmenting SignInContext
2019-01-26 03:04:06.580 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 03:04:07.671 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 03:04:07.683 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 03:04:07.684 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 03:04:07.701 +00:00 [DBG] Start token request.
2019-01-26 03:04:07.715 +00:00 [DBG] Start client validation
2019-01-26 03:04:07.728 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 03:04:07.734 +00:00 [DBG] Start parsing for secret in post body
2019-01-26 03:04:07.743 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-26 03:04:07.744 +00:00 [DBG] Secret id found: MVC
2019-01-26 03:04:07.745 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:07.762 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 03:04:07.763 +00:00 [DBG] Client validation success
2019-01-26 03:04:07.770 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK379M71GF4:00000001",
  "TimeStamp": "2019-01-26T03:04:07Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:04:07.785 +00:00 [DBG] Start token request validation
2019-01-26 03:04:07.803 +00:00 [DBG] Start validation of authorization code token request
2019-01-26 03:04:07.832 +00:00 [DBG] Validation of authorization code token request success
2019-01-26 03:04:07.842 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "46def6257509adfc6bf6c127dde279b0758fab661658a936f5e8f0112de5ba4f",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "46def6257509adfc6bf6c127dde279b0758fab661658a936f5e8f0112de5ba4f",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-26 03:04:07.865 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:07.882 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 03:04:07.884 +00:00 [DBG] Getting claims for access token for subject: bc089cd1-ee88-40e5-8a2f-58eef18f8d06
2019-01-26 03:04:07.911 +00:00 [DBG] Creating refresh token
2019-01-26 03:04:07.912 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-26 03:04:07.937 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:07.938 +00:00 [DBG] Getting claims for identity token for subject: bc089cd1-ee88-40e5-8a2f-58eef18f8d06 and client: MVC
2019-01-26 03:04:07.958 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****8foQ"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****7646"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Z-1w"
    }
  ],
  "ActivityId": "0HLK379M71GF4:00000001",
  "TimeStamp": "2019-01-26T03:04:07Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:04:07.967 +00:00 [DBG] Token request success.
2019-01-26 03:04:08.015 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-26 03:04:08.021 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-26 03:04:08.022 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-26 03:04:08.044 +00:00 [DBG] Start userinfo request
2019-01-26 03:04:08.058 +00:00 [DBG] Bearer token found in header
2019-01-26 03:04:08.184 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:08.190 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:08.192 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-26 03:04:08.201 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548471847,
    "exp": 1548475447,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "bc089cd1-ee88-40e5-8a2f-58eef18f8d06",
    "auth_time": 1548471845,
    "idp": "local",
    "name": "",
    "email": "marcelo@marcelo",
    "phone": "",
    "address": "",
    "address_details": "",
    "neighborhood": "",
    "city": "",
    "state": "",
    "zip_code": "",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-26 03:04:08.229 +00:00 [DBG] Creating userinfo response
2019-01-26 03:04:08.239 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 03:04:08.247 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 03:04:08.253 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-26 03:04:08.254 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 03:04:08.271 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-26 03:04:08.272 +00:00 [DBG] End userinfo request
2019-01-26 03:04:08.957 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 03:04:08.966 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 03:04:08.971 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 03:04:08.979 +00:00 [DBG] Start token request.
2019-01-26 03:04:08.981 +00:00 [DBG] Start client validation
2019-01-26 03:04:08.982 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 03:04:08.985 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-26 03:04:08.987 +00:00 [DBG] Secret id found: MVC
2019-01-26 03:04:08.988 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:08.994 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 03:04:08.996 +00:00 [DBG] Client validation success
2019-01-26 03:04:08.998 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK379M71GF5:00000001",
  "TimeStamp": "2019-01-26T03:04:08Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:04:09.008 +00:00 [DBG] Start token request validation
2019-01-26 03:04:09.029 +00:00 [DBG] Start client credentials token request validation
2019-01-26 03:04:09.044 +00:00 [DBG] MVC credentials token request validation success
2019-01-26 03:04:09.045 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-26 03:04:09.061 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 03:04:09.064 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****ARvw"
    }
  ],
  "ActivityId": "0HLK379M71GF5:00000001",
  "TimeStamp": "2019-01-26T03:04:09Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:04:09.067 +00:00 [DBG] Token request success.
2019-01-26 03:04:09.532 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-26 03:04:09.533 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-26 03:04:09.534 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-26 03:04:09.535 +00:00 [DBG] Start discovery request
2019-01-26 03:04:09.607 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-26 03:04:09.610 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-26 03:04:09.611 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-26 03:04:09.614 +00:00 [DBG] Start key discovery request
2019-01-26 03:04:17.532 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-26 03:04:17.535 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-26 03:04:17.545 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-26 03:04:17.563 +00:00 [DBG] Processing signout request for bc089cd1-ee88-40e5-8a2f-58eef18f8d06
2019-01-26 03:04:17.596 +00:00 [DBG] Start end session request validation
2019-01-26 03:04:17.614 +00:00 [DBG] Start identity token validation
2019-01-26 03:04:17.623 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:17.623 +00:00 [DBG] Client found: MVC / MVC
2019-01-26 03:04:17.626 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-26 03:04:17.628 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1548471847,
    "exp": 1548472147,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636840684604445418.ODdlNWZjM2UtYTNkNC00MjA1LTg3YjItY2Y5ZWE1N2UzNGIyN2Q2YjBhNmYtZGU5ZS00ZDg1LTk4NDQtZmQ3OTYyODhhNWQy",
    "iat": 1548471847,
    "at_hash": "TtCDVsTyg0rgTOjuopek6g",
    "sid": "6ce422c1c44c0dfcd396f2f0e8ce0a9e",
    "sub": "bc089cd1-ee88-40e5-8a2f-58eef18f8d06",
    "auth_time": 1548471845,
    "idp": "local",
    "name": "",
    "email": "marcelo@marcelo",
    "phone": "",
    "address": "",
    "address_details": "",
    "neighborhood": "",
    "city": "",
    "state": "",
    "zip_code": "",
    "amr": "pwd"
  }
}
2019-01-26 03:04:17.649 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "bc089cd1-ee88-40e5-8a2f-58eef18f8d06",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BkfFLwaGI_XtgeU6OhHboSKHnnuaqySoxN6G3RJQAtVA2NpWQP0LF5xX0A3N7s5FGm8fNE8zNx1Zo8AJwtyaFU9kDI7X7s-XAqq9pfIyhlen6wnAeOtL8NwzuzMmduv3Y5_hLzsGzTJhIyW-1vDR3aA",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDg0NzE4NDcsImV4cCI6MTU0ODQ3MjE0NywiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4NDA2ODQ2MDQ0NDU0MTguT0RkbE5XWmpNMlV0WVROa05DMDBNakExTFRnM1lqSXRZMlk1WldFMU4yVXpOR0l5TjJRMllqQmhObVl0WkdVNVpTMDBaRGcxTFRrNE5EUXRabVEzT1RZeU9EaGhOV1F5IiwiaWF0IjoxNTQ4NDcxODQ3LCJhdF9oYXNoIjoiVHRDRFZzVHlnMHJnVE9qdW9wZWs2ZyIsInNpZCI6IjZjZTQyMmMxYzQ0YzBkZmNkMzk2ZjJmMGU4Y2UwYTllIiwic3ViIjoiYmMwODljZDEtZWU4OC00MGU1LThhMmYtNThlZWYxOGY4ZDA2IiwiYXV0aF90aW1lIjoxNTQ4NDcxODQ1LCJpZHAiOiJsb2NhbCIsIm5hbWUiOiIiLCJlbWFpbCI6Im1hcmNlbG9AbWFyY2VsbyIsInBob25lIjoiIiwiYWRkcmVzcyI6IiIsImFkZHJlc3NfZGV0YWlscyI6IiIsIm5laWdoYm9yaG9vZCI6IiIsImNpdHkiOiIiLCJzdGF0ZSI6IiIsInppcF9jb2RlIjoiIiwiYW1yIjpbInB3ZCJdfQ.tF-YWw-FM9BvnG2X1TIqKtxzwqK18qdmp-lTGCOW8nsUXEaOsunqE8UgCPFVBiHpTOvS0yx-gRz_lqS6wXJQA8MUZIj1hxfggmQAU9i-wpTjjwoEooE6C85RW4Od7VzKbNkPrrEX_WUg-siu8HnLUngZEu0Ts_HG0WXIUgmeAzS_D7PSdmTiMMR3oZ82kWqDE0GXfhEl9KOg7gxxcm3YzL7vFB2YpGnKh-ih1zXp9Rjsatz3Vexs-CdQBts1Qy7CL7ILW-9fFOy9YdTgFs1RgwhuVrtJEcBXJd4nj1PdZ42DjxOHfqd-gy3NBUX1a6cflTreZ4UXYec8TCxORk8foQ",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25BkfFLwaGI_XtgeU6OhHboSKHnnuaqySoxN6G3RJQAtVA2NpWQP0LF5xX0A3N7s5FGm8fNE8zNx1Zo8AJwtyaFU9kDI7X7s-XAqq9pfIyhlen6wnAeOtL8NwzuzMmduv3Y5_hLzsGzTJhIyW-1vDR3aA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 03:04:17.655 +00:00 [DBG] Success validating end session request from MVC
2019-01-26 03:04:17.757 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-26 03:04:17.759 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 03:04:17.760 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-26 03:04:17.770 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "bc089cd1-ee88-40e5-8a2f-58eef18f8d06",
  "DisplayName": "bc089cd1-ee88-40e5-8a2f-58eef18f8d06",
  "ActivityId": "0HLK379M71GF2:0000000E",
  "TimeStamp": "2019-01-26T03:04:17Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:04:19.915 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 03:04:19.916 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 03:04:19.919 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 03:04:19.922 +00:00 [DBG] Start authorize request
2019-01-26 03:04:19.933 +00:00 [DBG] No user present in authorize request
2019-01-26 03:04:19.935 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:04:19.938 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:19.939 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:04:19.940 +00:00 [DBG] No PKCE used.
2019-01-26 03:04:19.942 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:04:19.943 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BmwROsEhcilGKJmedDvk7mFr5cAF9gevMPEwnFt2vPcMaz0bCWsFVwV6Buyb63sj8AIVj7McXWupLCyhtuu-pvgxCpHJJd7JgVLVDwqrpnDQZpNKCeKah4jQAHTLu8v3XfQbGq5aLwJfBgpzxEQKJBL6jTERyaX718ztmojMvHmejgemVHrr1cECliNfYESDqddt3_UmkmIthOdyQOZK1VYRl99KMSnv8lRJ8twsrv2TihoBHoh-O2lwc7KpgQ37Sj1qwIjzOzqBrwX702EV8EEabIZzSXNYwKUd-2kEQlaqYLc6-ZiFHcUFFH4GaoBe5w",
  "Nonce": "636840686599057233.NWQ5Mjc1ZTItOTg2ZS00NmNiLTk4MWMtMzRmYzE5YWE0ZDRhNmE3ODk2YmUtZmE1OC00YjViLTljMWMtNzNjN2E4MDNiNWRk",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840686599057233.NWQ5Mjc1ZTItOTg2ZS00NmNiLTk4MWMtMzRmYzE5YWE0ZDRhNmE3ODk2YmUtZmE1OC00YjViLTljMWMtNzNjN2E4MDNiNWRk",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25BmwROsEhcilGKJmedDvk7mFr5cAF9gevMPEwnFt2vPcMaz0bCWsFVwV6Buyb63sj8AIVj7McXWupLCyhtuu-pvgxCpHJJd7JgVLVDwqrpnDQZpNKCeKah4jQAHTLu8v3XfQbGq5aLwJfBgpzxEQKJBL6jTERyaX718ztmojMvHmejgemVHrr1cECliNfYESDqddt3_UmkmIthOdyQOZK1VYRl99KMSnv8lRJ8twsrv2TihoBHoh-O2lwc7KpgQ37Sj1qwIjzOzqBrwX702EV8EEabIZzSXNYwKUd-2kEQlaqYLc6-ZiFHcUFFH4GaoBe5w",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 03:04:19.944 +00:00 [INF] Showing login: User is not authenticated
2019-01-26 03:04:19.961 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:04:19.962 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:19.964 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:04:19.967 +00:00 [DBG] No PKCE used.
2019-01-26 03:04:19.970 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:04:19.971 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:25.633 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 03:04:25.661 +00:00 [INF] {
  "Name": "User Login Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1001,
  "Username": "marcelo",
  "Endpoint": "UI",
  "Message": "invalid credentials",
  "ActivityId": "0HLK379M71GF2:00000011",
  "TimeStamp": "2019-01-26T03:04:25Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:04:25.664 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:04:25.668 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:25.670 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:04:25.672 +00:00 [DBG] No PKCE used.
2019-01-26 03:04:25.675 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:04:25.678 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:32.263 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 03:04:32.387 +00:00 [INF] {
  "Name": "User Login Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1001,
  "Username": "marcelo",
  "Endpoint": "UI",
  "Message": "invalid credentials",
  "ActivityId": "0HLK379M71GF2:00000012",
  "TimeStamp": "2019-01-26T03:04:32Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:04:32.399 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:04:32.400 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:32.406 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:04:32.408 +00:00 [DBG] No PKCE used.
2019-01-26 03:04:32.444 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:04:32.447 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:37.246 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 03:04:37.267 +00:00 [INF] {
  "Name": "User Login Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1001,
  "Username": "marcelo",
  "Endpoint": "UI",
  "Message": "invalid credentials",
  "ActivityId": "0HLK379M71GF2:00000013",
  "TimeStamp": "2019-01-26T03:04:37Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:04:37.269 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:04:37.269 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:37.271 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:04:37.274 +00:00 [DBG] No PKCE used.
2019-01-26 03:04:37.278 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:04:37.279 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:46.664 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 03:04:46.687 +00:00 [INF] {
  "Name": "User Login Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1001,
  "Username": "marcelo",
  "Endpoint": "UI",
  "Message": "invalid credentials",
  "ActivityId": "0HLK379M71GF2:00000014",
  "TimeStamp": "2019-01-26T03:04:46Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:04:46.688 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:04:46.689 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:46.691 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:04:46.692 +00:00 [DBG] No PKCE used.
2019-01-26 03:04:46.696 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:04:46.697 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:49.083 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:04:49.089 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:04:49.091 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:04:49.094 +00:00 [DBG] No PKCE used.
2019-01-26 03:04:49.100 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:04:49.107 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:15.677 +00:00 [DBG] CORS request made for path: /account/register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 03:05:15.793 +00:00 [DBG] Augmenting SignInContext
2019-01-26 03:05:15.794 +00:00 [DBG] Adding idp claim with value: local
2019-01-26 03:05:15.795 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-26 03:05:15.799 +00:00 [DBG] Adding auth_time claim with value: 1548471915
2019-01-26 03:05:15.805 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 03:05:15.888 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 03:05:15.890 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 03:05:15.891 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 03:05:15.893 +00:00 [DBG] Start authorize callback request
2019-01-26 03:05:15.917 +00:00 [DBG] User in authorize request: d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5
2019-01-26 03:05:15.921 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:05:15.926 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:15.927 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:05:15.928 +00:00 [DBG] No PKCE used.
2019-01-26 03:05:15.935 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:05:15.944 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BmwROsEhcilGKJmedDvk7mFr5cAF9gevMPEwnFt2vPcMaz0bCWsFVwV6Buyb63sj8AIVj7McXWupLCyhtuu-pvgxCpHJJd7JgVLVDwqrpnDQZpNKCeKah4jQAHTLu8v3XfQbGq5aLwJfBgpzxEQKJBL6jTERyaX718ztmojMvHmejgemVHrr1cECliNfYESDqddt3_UmkmIthOdyQOZK1VYRl99KMSnv8lRJ8twsrv2TihoBHoh-O2lwc7KpgQ37Sj1qwIjzOzqBrwX702EV8EEabIZzSXNYwKUd-2kEQlaqYLc6-ZiFHcUFFH4GaoBe5w",
  "Nonce": "636840686599057233.NWQ5Mjc1ZTItOTg2ZS00NmNiLTk4MWMtMzRmYzE5YWE0ZDRhNmE3ODk2YmUtZmE1OC00YjViLTljMWMtNzNjN2E4MDNiNWRk",
  "SessionId": "bdc3e7599955ecdccaf903a9869364c9",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840686599057233.NWQ5Mjc1ZTItOTg2ZS00NmNiLTk4MWMtMzRmYzE5YWE0ZDRhNmE3ODk2YmUtZmE1OC00YjViLTljMWMtNzNjN2E4MDNiNWRk",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25BmwROsEhcilGKJmedDvk7mFr5cAF9gevMPEwnFt2vPcMaz0bCWsFVwV6Buyb63sj8AIVj7McXWupLCyhtuu-pvgxCpHJJd7JgVLVDwqrpnDQZpNKCeKah4jQAHTLu8v3XfQbGq5aLwJfBgpzxEQKJBL6jTERyaX718ztmojMvHmejgemVHrr1cECliNfYESDqddt3_UmkmIthOdyQOZK1VYRl99KMSnv8lRJ8twsrv2TihoBHoh-O2lwc7KpgQ37Sj1qwIjzOzqBrwX702EV8EEabIZzSXNYwKUd-2kEQlaqYLc6-ZiFHcUFFH4GaoBe5w",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 03:05:15.947 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-26 03:05:15.955 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-26 03:05:15.991 +00:00 [DBG] Creating Implicit Flow response.
2019-01-26 03:05:15.992 +00:00 [DBG] Getting claims for identity token for subject: d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5 and client: MVC
2019-01-26 03:05:16.024 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****DzKg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****0c23"
    }
  ],
  "ActivityId": "0HLK379M71GF2:00000017",
  "TimeStamp": "2019-01-26T03:05:16Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:16.027 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BmwROsEhcilGKJmedDvk7mFr5cAF9gevMPEwnFt2vPcMaz0bCWsFVwV6Buyb63sj8AIVj7McXWupLCyhtuu-pvgxCpHJJd7JgVLVDwqrpnDQZpNKCeKah4jQAHTLu8v3XfQbGq5aLwJfBgpzxEQKJBL6jTERyaX718ztmojMvHmejgemVHrr1cECliNfYESDqddt3_UmkmIthOdyQOZK1VYRl99KMSnv8lRJ8twsrv2TihoBHoh-O2lwc7KpgQ37Sj1qwIjzOzqBrwX702EV8EEabIZzSXNYwKUd-2kEQlaqYLc6-ZiFHcUFFH4GaoBe5w",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-26 03:05:16.032 +00:00 [DBG] Augmenting SignInContext
2019-01-26 03:05:16.036 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 03:05:16.279 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 03:05:16.324 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 03:05:16.355 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 03:05:16.372 +00:00 [DBG] Start token request.
2019-01-26 03:05:16.377 +00:00 [DBG] Start client validation
2019-01-26 03:05:16.380 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 03:05:16.387 +00:00 [DBG] Start parsing for secret in post body
2019-01-26 03:05:16.401 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-26 03:05:16.407 +00:00 [DBG] Secret id found: MVC
2019-01-26 03:05:16.421 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:16.458 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 03:05:16.462 +00:00 [DBG] Client validation success
2019-01-26 03:05:16.469 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK379M71GF4:00000003",
  "TimeStamp": "2019-01-26T03:05:16Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:16.472 +00:00 [DBG] Start token request validation
2019-01-26 03:05:16.474 +00:00 [DBG] Start validation of authorization code token request
2019-01-26 03:05:16.527 +00:00 [DBG] Validation of authorization code token request success
2019-01-26 03:05:16.545 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "d03c38122de79ccef29bac79fd39d9904a266154658754620b61dac8d63d0c23",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "d03c38122de79ccef29bac79fd39d9904a266154658754620b61dac8d63d0c23",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-26 03:05:16.553 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:16.555 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 03:05:16.557 +00:00 [DBG] Getting claims for access token for subject: d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5
2019-01-26 03:05:16.613 +00:00 [DBG] Creating refresh token
2019-01-26 03:05:16.615 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-26 03:05:16.658 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:16.682 +00:00 [DBG] Getting claims for identity token for subject: d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5 and client: MVC
2019-01-26 03:05:16.703 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****IThA"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****0f20"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****zunQ"
    }
  ],
  "ActivityId": "0HLK379M71GF4:00000003",
  "TimeStamp": "2019-01-26T03:05:16Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:16.705 +00:00 [DBG] Token request success.
2019-01-26 03:05:16.746 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-26 03:05:16.784 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-26 03:05:16.800 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-26 03:05:16.814 +00:00 [DBG] Start userinfo request
2019-01-26 03:05:16.832 +00:00 [DBG] Bearer token found in header
2019-01-26 03:05:16.841 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:16.843 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:16.864 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-26 03:05:16.893 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548471916,
    "exp": 1548475516,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
    "auth_time": 1548471915,
    "idp": "local",
    "name": "",
    "email": "u0104",
    "phone": "",
    "address": "",
    "address_details": "",
    "neighborhood": "",
    "city": "",
    "state": "",
    "zip_code": "",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-26 03:05:16.899 +00:00 [DBG] Creating userinfo response
2019-01-26 03:05:16.908 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 03:05:16.912 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 03:05:16.914 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-26 03:05:16.918 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 03:05:17.013 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-26 03:05:17.015 +00:00 [DBG] End userinfo request
2019-01-26 03:05:17.420 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 03:05:17.422 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 03:05:17.424 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 03:05:17.425 +00:00 [DBG] Start token request.
2019-01-26 03:05:17.426 +00:00 [DBG] Start client validation
2019-01-26 03:05:17.430 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 03:05:17.435 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-26 03:05:17.435 +00:00 [DBG] Secret id found: MVC
2019-01-26 03:05:17.436 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:17.438 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 03:05:17.439 +00:00 [DBG] Client validation success
2019-01-26 03:05:17.440 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK379M71GF7:00000001",
  "TimeStamp": "2019-01-26T03:05:17Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:17.453 +00:00 [DBG] Start token request validation
2019-01-26 03:05:17.455 +00:00 [DBG] Start client credentials token request validation
2019-01-26 03:05:17.456 +00:00 [DBG] MVC credentials token request validation success
2019-01-26 03:05:17.457 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-26 03:05:17.459 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 03:05:17.464 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****gdaQ"
    }
  ],
  "ActivityId": "0HLK379M71GF7:00000001",
  "TimeStamp": "2019-01-26T03:05:17Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:17.472 +00:00 [DBG] Token request success.
2019-01-26 03:05:22.883 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-26 03:05:22.885 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-26 03:05:22.889 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-26 03:05:22.895 +00:00 [DBG] Processing signout request for d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5
2019-01-26 03:05:22.906 +00:00 [DBG] Start end session request validation
2019-01-26 03:05:22.908 +00:00 [DBG] Start identity token validation
2019-01-26 03:05:22.910 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:22.911 +00:00 [DBG] Client found: MVC / MVC
2019-01-26 03:05:22.915 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-26 03:05:22.917 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1548471916,
    "exp": 1548472216,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636840686599057233.NWQ5Mjc1ZTItOTg2ZS00NmNiLTk4MWMtMzRmYzE5YWE0ZDRhNmE3ODk2YmUtZmE1OC00YjViLTljMWMtNzNjN2E4MDNiNWRk",
    "iat": 1548471916,
    "at_hash": "DrCb_zHRZ1kTCuYpw5WHrw",
    "sid": "bdc3e7599955ecdccaf903a9869364c9",
    "sub": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
    "auth_time": 1548471915,
    "idp": "local",
    "name": "",
    "email": "u0104",
    "phone": "",
    "address": "",
    "address_details": "",
    "neighborhood": "",
    "city": "",
    "state": "",
    "zip_code": "",
    "amr": "pwd"
  }
}
2019-01-26 03:05:22.919 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25Bmocc-uJEeWQ6Q_MDZ9lBDe79ZQnqVL29LT9erFjO6Mw7flyT3MTSN7TW6yuHsS1U6-r6eQBDJaNpGl4lerLt1dFkwhRL8UTmBYI8Hxmel4twzpCaVf14BfiBT4ruEWLoIRE93mkFRu3Ovo8EhzkRuc",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDg0NzE5MTYsImV4cCI6MTU0ODQ3MjIxNiwiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4NDA2ODY1OTkwNTcyMzMuTldRNU1qYzFaVEl0T1RnMlpTMDBObU5pTFRrNE1XTXRNelJtWXpFNVlXRTBaRFJoTm1FM09EazJZbVV0Wm1FMU9DMDBZalZpTFRsak1XTXROek5qTjJFNE1ETmlOV1JrIiwiaWF0IjoxNTQ4NDcxOTE2LCJhdF9oYXNoIjoiRHJDYl96SFJaMWtUQ3VZcHc1V0hydyIsInNpZCI6ImJkYzNlNzU5OTk1NWVjZGNjYWY5MDNhOTg2OTM2NGM5Iiwic3ViIjoiZDEyZTZhMTctZjlkMS00YzZkLWI3NWItNTNkM2ZhYmQyM2Q1IiwiYXV0aF90aW1lIjoxNTQ4NDcxOTE1LCJpZHAiOiJsb2NhbCIsIm5hbWUiOiIiLCJlbWFpbCI6InUwMTA0IiwicGhvbmUiOiIiLCJhZGRyZXNzIjoiIiwiYWRkcmVzc19kZXRhaWxzIjoiIiwibmVpZ2hib3Job29kIjoiIiwiY2l0eSI6IiIsInN0YXRlIjoiIiwiemlwX2NvZGUiOiIiLCJhbXIiOlsicHdkIl19.o-8D9sD8RsXOSrRqfW14ECLRcdh_G_bjP6rFNesaw3grDjjfAY3GTZFMjxDkuEQ1qPuiITbhVrD_va-t-QPRLRxrrn6lyX2nxmdln4gvriaygGVeZfk8vH-fSSg85q1EcUbmScfuvJwxiWM8sv5KBUU8DbcWIpgfPrVOmK05eBB0mnm08-fgto8CGSHkQBA0Qq10xRQhd_h9d32U4mmyBcko6vMjuobG3uhPtiU-K27gahjq8_9N5kiF89fB3zJYLz8-kgRViqT856prO28ppVfSGiNYJxzXWtjXYB9cwVyLAKk5OHZr_d2t3tmpDQptZhOb0jpNEFsvMr_BAYIThA",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25Bmocc-uJEeWQ6Q_MDZ9lBDe79ZQnqVL29LT9erFjO6Mw7flyT3MTSN7TW6yuHsS1U6-r6eQBDJaNpGl4lerLt1dFkwhRL8UTmBYI8Hxmel4twzpCaVf14BfiBT4ruEWLoIRE93mkFRu3Ovo8EhzkRuc",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 03:05:22.921 +00:00 [DBG] Success validating end session request from MVC
2019-01-26 03:05:22.943 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-26 03:05:22.944 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 03:05:22.946 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-26 03:05:22.951 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "DisplayName": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "ActivityId": "0HLK379M71GF2:00000019",
  "TimeStamp": "2019-01-26T03:05:22Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:24.984 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 03:05:24.985 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 03:05:24.987 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 03:05:24.991 +00:00 [DBG] Start authorize request
2019-01-26 03:05:25.002 +00:00 [DBG] No user present in authorize request
2019-01-26 03:05:25.003 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:05:25.005 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:25.006 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:05:25.007 +00:00 [DBG] No PKCE used.
2019-01-26 03:05:25.009 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:05:25.010 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BmU8DRK64v9Xip5i9-0NKSdLgK_x11_W4QaqzSVxPV3hrBS6c6o1FzmL8pcWluOqNn1dm82A30QCG8CoC7VRK8qK6G-vhnH0rQcLnqOkvWoABYZrIhzxOF4Etviry13-cUbMQHFQ-PXAjxhQKxet_btTJGkuwrmXp5dW1sqluVmL0yYWosyGytV-6FW_5bjrpWnuAytRv7_SxFem-fKn78uQpPHzg8rQ0NOr_alCEq2kkNmEobxyY7kajrZd5XMKPqtx-65XIDBie21J3S1iCqtstOSPshpOYks6awrIrdp9XLbQ3FaEg_VjOZ-17RdB9U",
  "Nonce": "636840687249730353.Zjk0ODNkMmYtMTNlMC00OGMxLWIyM2UtYWE5ZWI1ZmYwZGIzN2ZlNjM1YmEtMGVkNC00YWU4LTliMDUtNzkzMGQ4ZDYyN2E3",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840687249730353.Zjk0ODNkMmYtMTNlMC00OGMxLWIyM2UtYWE5ZWI1ZmYwZGIzN2ZlNjM1YmEtMGVkNC00YWU4LTliMDUtNzkzMGQ4ZDYyN2E3",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25BmU8DRK64v9Xip5i9-0NKSdLgK_x11_W4QaqzSVxPV3hrBS6c6o1FzmL8pcWluOqNn1dm82A30QCG8CoC7VRK8qK6G-vhnH0rQcLnqOkvWoABYZrIhzxOF4Etviry13-cUbMQHFQ-PXAjxhQKxet_btTJGkuwrmXp5dW1sqluVmL0yYWosyGytV-6FW_5bjrpWnuAytRv7_SxFem-fKn78uQpPHzg8rQ0NOr_alCEq2kkNmEobxyY7kajrZd5XMKPqtx-65XIDBie21J3S1iCqtstOSPshpOYks6awrIrdp9XLbQ3FaEg_VjOZ-17RdB9U",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 03:05:25.014 +00:00 [INF] Showing login: User is not authenticated
2019-01-26 03:05:25.030 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:05:25.032 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:25.033 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:05:25.034 +00:00 [DBG] No PKCE used.
2019-01-26 03:05:25.035 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:05:25.036 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:28.557 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 03:05:28.648 +00:00 [DBG] Augmenting SignInContext
2019-01-26 03:05:28.649 +00:00 [DBG] Adding idp claim with value: local
2019-01-26 03:05:28.650 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-26 03:05:28.652 +00:00 [DBG] Adding auth_time claim with value: 1548471928
2019-01-26 03:05:28.654 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 03:05:28.670 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "u0104",
  "SubjectId": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "DisplayName": "u0104",
  "Endpoint": "UI",
  "ActivityId": "0HLK379M71GF2:0000001C",
  "TimeStamp": "2019-01-26T03:05:28Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:28.690 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 03:05:28.691 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 03:05:28.692 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 03:05:28.693 +00:00 [DBG] Start authorize callback request
2019-01-26 03:05:28.697 +00:00 [DBG] User in authorize request: d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5
2019-01-26 03:05:28.698 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:05:28.699 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:28.700 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:05:28.701 +00:00 [DBG] No PKCE used.
2019-01-26 03:05:28.703 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:05:28.705 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BmU8DRK64v9Xip5i9-0NKSdLgK_x11_W4QaqzSVxPV3hrBS6c6o1FzmL8pcWluOqNn1dm82A30QCG8CoC7VRK8qK6G-vhnH0rQcLnqOkvWoABYZrIhzxOF4Etviry13-cUbMQHFQ-PXAjxhQKxet_btTJGkuwrmXp5dW1sqluVmL0yYWosyGytV-6FW_5bjrpWnuAytRv7_SxFem-fKn78uQpPHzg8rQ0NOr_alCEq2kkNmEobxyY7kajrZd5XMKPqtx-65XIDBie21J3S1iCqtstOSPshpOYks6awrIrdp9XLbQ3FaEg_VjOZ-17RdB9U",
  "Nonce": "636840687249730353.Zjk0ODNkMmYtMTNlMC00OGMxLWIyM2UtYWE5ZWI1ZmYwZGIzN2ZlNjM1YmEtMGVkNC00YWU4LTliMDUtNzkzMGQ4ZDYyN2E3",
  "SessionId": "bafed5e68550f04d66011805c777942c",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840687249730353.Zjk0ODNkMmYtMTNlMC00OGMxLWIyM2UtYWE5ZWI1ZmYwZGIzN2ZlNjM1YmEtMGVkNC00YWU4LTliMDUtNzkzMGQ4ZDYyN2E3",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25BmU8DRK64v9Xip5i9-0NKSdLgK_x11_W4QaqzSVxPV3hrBS6c6o1FzmL8pcWluOqNn1dm82A30QCG8CoC7VRK8qK6G-vhnH0rQcLnqOkvWoABYZrIhzxOF4Etviry13-cUbMQHFQ-PXAjxhQKxet_btTJGkuwrmXp5dW1sqluVmL0yYWosyGytV-6FW_5bjrpWnuAytRv7_SxFem-fKn78uQpPHzg8rQ0NOr_alCEq2kkNmEobxyY7kajrZd5XMKPqtx-65XIDBie21J3S1iCqtstOSPshpOYks6awrIrdp9XLbQ3FaEg_VjOZ-17RdB9U",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 03:05:28.706 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-26 03:05:28.713 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-26 03:05:28.730 +00:00 [DBG] Creating Implicit Flow response.
2019-01-26 03:05:28.731 +00:00 [DBG] Getting claims for identity token for subject: d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5 and client: MVC
2019-01-26 03:05:28.756 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ZblQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****faff"
    }
  ],
  "ActivityId": "0HLK379M71GF2:0000001D",
  "TimeStamp": "2019-01-26T03:05:28Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:28.757 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BmU8DRK64v9Xip5i9-0NKSdLgK_x11_W4QaqzSVxPV3hrBS6c6o1FzmL8pcWluOqNn1dm82A30QCG8CoC7VRK8qK6G-vhnH0rQcLnqOkvWoABYZrIhzxOF4Etviry13-cUbMQHFQ-PXAjxhQKxet_btTJGkuwrmXp5dW1sqluVmL0yYWosyGytV-6FW_5bjrpWnuAytRv7_SxFem-fKn78uQpPHzg8rQ0NOr_alCEq2kkNmEobxyY7kajrZd5XMKPqtx-65XIDBie21J3S1iCqtstOSPshpOYks6awrIrdp9XLbQ3FaEg_VjOZ-17RdB9U",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-26 03:05:28.758 +00:00 [DBG] Augmenting SignInContext
2019-01-26 03:05:28.762 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 03:05:28.929 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 03:05:28.947 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 03:05:28.962 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 03:05:28.970 +00:00 [DBG] Start token request.
2019-01-26 03:05:28.977 +00:00 [DBG] Start client validation
2019-01-26 03:05:28.994 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 03:05:29.015 +00:00 [DBG] Start parsing for secret in post body
2019-01-26 03:05:29.034 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-26 03:05:29.035 +00:00 [DBG] Secret id found: MVC
2019-01-26 03:05:29.037 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:29.039 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 03:05:29.046 +00:00 [DBG] Client validation success
2019-01-26 03:05:29.049 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK379M71GF4:00000005",
  "TimeStamp": "2019-01-26T03:05:29Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:29.050 +00:00 [DBG] Start token request validation
2019-01-26 03:05:29.057 +00:00 [DBG] Start validation of authorization code token request
2019-01-26 03:05:29.098 +00:00 [DBG] Validation of authorization code token request success
2019-01-26 03:05:29.099 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "380f2b6f5048c33ab1ec910a8c92aa16a1bf9015ad6a55970a96b20ceae2faff",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "380f2b6f5048c33ab1ec910a8c92aa16a1bf9015ad6a55970a96b20ceae2faff",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-26 03:05:29.105 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:29.108 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 03:05:29.113 +00:00 [DBG] Getting claims for access token for subject: d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5
2019-01-26 03:05:29.144 +00:00 [DBG] Creating refresh token
2019-01-26 03:05:29.146 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-26 03:05:29.185 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:29.186 +00:00 [DBG] Getting claims for identity token for subject: d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5 and client: MVC
2019-01-26 03:05:29.215 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****o12w"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****94a5"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****OpTw"
    }
  ],
  "ActivityId": "0HLK379M71GF4:00000005",
  "TimeStamp": "2019-01-26T03:05:29Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:29.217 +00:00 [DBG] Token request success.
2019-01-26 03:05:29.246 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-26 03:05:29.248 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-26 03:05:29.250 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-26 03:05:29.252 +00:00 [DBG] Start userinfo request
2019-01-26 03:05:29.258 +00:00 [DBG] Bearer token found in header
2019-01-26 03:05:29.260 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:29.262 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:29.263 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-26 03:05:29.265 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548471929,
    "exp": 1548475529,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
    "auth_time": 1548471928,
    "idp": "local",
    "name": "",
    "email": "u0104",
    "phone": "",
    "address": "",
    "address_details": "",
    "neighborhood": "",
    "city": "",
    "state": "",
    "zip_code": "",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-26 03:05:29.266 +00:00 [DBG] Creating userinfo response
2019-01-26 03:05:29.269 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 03:05:29.271 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 03:05:29.272 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-26 03:05:29.297 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 03:05:29.353 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-26 03:05:29.354 +00:00 [DBG] End userinfo request
2019-01-26 03:05:29.565 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 03:05:29.567 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 03:05:29.567 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 03:05:29.568 +00:00 [DBG] Start token request.
2019-01-26 03:05:29.579 +00:00 [DBG] Start client validation
2019-01-26 03:05:29.584 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 03:05:29.584 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-26 03:05:29.587 +00:00 [DBG] Secret id found: MVC
2019-01-26 03:05:29.589 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:29.593 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 03:05:29.603 +00:00 [DBG] Client validation success
2019-01-26 03:05:29.604 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK379M71GF8:00000001",
  "TimeStamp": "2019-01-26T03:05:29Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:29.616 +00:00 [DBG] Start token request validation
2019-01-26 03:05:29.617 +00:00 [DBG] Start client credentials token request validation
2019-01-26 03:05:29.620 +00:00 [DBG] MVC credentials token request validation success
2019-01-26 03:05:29.627 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-26 03:05:29.630 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 03:05:29.636 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****q3xQ"
    }
  ],
  "ActivityId": "0HLK379M71GF8:00000001",
  "TimeStamp": "2019-01-26T03:05:29Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:29.638 +00:00 [DBG] Token request success.
2019-01-26 03:05:32.805 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-26 03:05:32.807 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-26 03:05:32.810 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-26 03:05:32.812 +00:00 [DBG] Processing signout request for d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5
2019-01-26 03:05:32.816 +00:00 [DBG] Start end session request validation
2019-01-26 03:05:32.816 +00:00 [DBG] Start identity token validation
2019-01-26 03:05:32.818 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:32.819 +00:00 [DBG] Client found: MVC / MVC
2019-01-26 03:05:32.820 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-26 03:05:32.822 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1548471929,
    "exp": 1548472229,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636840687249730353.Zjk0ODNkMmYtMTNlMC00OGMxLWIyM2UtYWE5ZWI1ZmYwZGIzN2ZlNjM1YmEtMGVkNC00YWU4LTliMDUtNzkzMGQ4ZDYyN2E3",
    "iat": 1548471929,
    "at_hash": "c3_l-adzzRskPnDw4raEqQ",
    "sid": "bafed5e68550f04d66011805c777942c",
    "sub": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
    "auth_time": 1548471928,
    "idp": "local",
    "name": "",
    "email": "u0104",
    "phone": "",
    "address": "",
    "address_details": "",
    "neighborhood": "",
    "city": "",
    "state": "",
    "zip_code": "",
    "amr": "pwd"
  }
}
2019-01-26 03:05:32.826 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BlD7czmF-LIi5OCJ9RngHhC7SqbsmJaecextt0C-D3z3TsFu-A28UX0OCegBRBD8FrEh_mMRzY544HCBCXKrhaGtdF-ODpH1wZCvNAOjDkYsC9q3-7GRoXtisSbK-WyseftRHmIaJo870xULFO_mOkv",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDg0NzE5MjksImV4cCI6MTU0ODQ3MjIyOSwiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4NDA2ODcyNDk3MzAzNTMuWmprME9ETmtNbVl0TVRObE1DMDBPR014TFdJeU0yVXRZV0U1WldJMVptWXdaR0l6TjJabE5qTTFZbUV0TUdWa05DMDBZV1U0TFRsaU1EVXROemt6TUdRNFpEWXlOMkUzIiwiaWF0IjoxNTQ4NDcxOTI5LCJhdF9oYXNoIjoiYzNfbC1hZHp6UnNrUG5EdzRyYUVxUSIsInNpZCI6ImJhZmVkNWU2ODU1MGYwNGQ2NjAxMTgwNWM3Nzc5NDJjIiwic3ViIjoiZDEyZTZhMTctZjlkMS00YzZkLWI3NWItNTNkM2ZhYmQyM2Q1IiwiYXV0aF90aW1lIjoxNTQ4NDcxOTI4LCJpZHAiOiJsb2NhbCIsIm5hbWUiOiIiLCJlbWFpbCI6InUwMTA0IiwicGhvbmUiOiIiLCJhZGRyZXNzIjoiIiwiYWRkcmVzc19kZXRhaWxzIjoiIiwibmVpZ2hib3Job29kIjoiIiwiY2l0eSI6IiIsInN0YXRlIjoiIiwiemlwX2NvZGUiOiIiLCJhbXIiOlsicHdkIl19.oq3AXH9yPym6Vgj46hHHPLxhzXDym0yCJYSlo1vA07Urdgc6CM3w6q9h25IHRxCiNmnKjg66d2FHPASAmPrZ9WIZ2BjLbmwybOBPlqSl5rZZzYqpH6YqS3SBvpaGE0zzWJBcpthKL8DR3V8Y5HJYeadi-Vl6EXq6BdCEP2MTr1QYE_kiUWS3iEcDvfdorPXhqJnDZILkJjYjEJ-brMNPfj92ez3pg-dwCbARqoFPxCYxIRs5BjUzIw4KVvJMMCuKTOd4YsesB6G65nRJFgjJPZnzPWwidMKhn4ZvLhDEpag-8acXE0MlUnIjPbsfrSSfHMGg7RVrEkFCNKfubJo12w",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25BlD7czmF-LIi5OCJ9RngHhC7SqbsmJaecextt0C-D3z3TsFu-A28UX0OCegBRBD8FrEh_mMRzY544HCBCXKrhaGtdF-ODpH1wZCvNAOjDkYsC9q3-7GRoXtisSbK-WyseftRHmIaJo870xULFO_mOkv",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 03:05:32.829 +00:00 [DBG] Success validating end session request from MVC
2019-01-26 03:05:32.886 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-26 03:05:32.888 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 03:05:32.891 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-26 03:05:32.893 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "DisplayName": "u0104",
  "ActivityId": "0HLK379M71GF2:0000001F",
  "TimeStamp": "2019-01-26T03:05:32Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:35.336 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 03:05:35.338 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 03:05:35.343 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 03:05:35.345 +00:00 [DBG] Start authorize request
2019-01-26 03:05:35.355 +00:00 [DBG] No user present in authorize request
2019-01-26 03:05:35.358 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:05:35.360 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:35.362 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:05:35.362 +00:00 [DBG] No PKCE used.
2019-01-26 03:05:35.365 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:05:35.366 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BlslnrFbIo7i_Fg-JvogSmiZafDOXVG5Wy79tyIl8mo8YE631SH-abSBFLPepfdRoIdHeZIRkirXGXSriKEN2kmSr5CePSGr4IVH-l4Q01hNSP7r-SJPmagzHK0MEbozFm0ZS_sP8KF3HWweU_mDDoCGdT1SNwLXtHdHCPOD9bLJkcSmdrxCWnf22R01slw6s1L-ZH-S1QWKiTla_XR6Qr06FdTlKYL31k669lizgkDHJAmj0zfqNhsQomUU0LiCI9ZFv-d84lmMNTBxW-aRrA0UX0Oq33R8Xk7wTeRasoh69hUrifjtFi00_0ipUI8MgY",
  "Nonce": "636840687353276228.OTUyYzg0ZjctNjA1Ny00OTYwLThiZWQtOTdhMzk3M2IwMGI2ZmZjNGE2MWMtNWE4MS00ZDhlLTk2NjAtODFlNzRmZjBhZmVk",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840687353276228.OTUyYzg0ZjctNjA1Ny00OTYwLThiZWQtOTdhMzk3M2IwMGI2ZmZjNGE2MWMtNWE4MS00ZDhlLTk2NjAtODFlNzRmZjBhZmVk",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25BlslnrFbIo7i_Fg-JvogSmiZafDOXVG5Wy79tyIl8mo8YE631SH-abSBFLPepfdRoIdHeZIRkirXGXSriKEN2kmSr5CePSGr4IVH-l4Q01hNSP7r-SJPmagzHK0MEbozFm0ZS_sP8KF3HWweU_mDDoCGdT1SNwLXtHdHCPOD9bLJkcSmdrxCWnf22R01slw6s1L-ZH-S1QWKiTla_XR6Qr06FdTlKYL31k669lizgkDHJAmj0zfqNhsQomUU0LiCI9ZFv-d84lmMNTBxW-aRrA0UX0Oq33R8Xk7wTeRasoh69hUrifjtFi00_0ipUI8MgY",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 03:05:35.367 +00:00 [INF] Showing login: User is not authenticated
2019-01-26 03:05:35.384 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:05:35.386 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:35.387 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:05:35.389 +00:00 [DBG] No PKCE used.
2019-01-26 03:05:35.393 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:05:35.394 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:44.248 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 03:05:44.343 +00:00 [DBG] Augmenting SignInContext
2019-01-26 03:05:44.343 +00:00 [DBG] Adding idp claim with value: local
2019-01-26 03:05:44.344 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-26 03:05:44.346 +00:00 [DBG] Adding auth_time claim with value: 1548471944
2019-01-26 03:05:44.347 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 03:05:44.358 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "u0104",
  "SubjectId": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "DisplayName": "u0104",
  "Endpoint": "UI",
  "ActivityId": "0HLK379M71GF2:00000022",
  "TimeStamp": "2019-01-26T03:05:44Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:44.374 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 03:05:44.375 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 03:05:44.377 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 03:05:44.378 +00:00 [DBG] Start authorize callback request
2019-01-26 03:05:44.380 +00:00 [DBG] User in authorize request: d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5
2019-01-26 03:05:44.381 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 03:05:44.383 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:44.387 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 03:05:44.388 +00:00 [DBG] No PKCE used.
2019-01-26 03:05:44.390 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 03:05:44.392 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BlslnrFbIo7i_Fg-JvogSmiZafDOXVG5Wy79tyIl8mo8YE631SH-abSBFLPepfdRoIdHeZIRkirXGXSriKEN2kmSr5CePSGr4IVH-l4Q01hNSP7r-SJPmagzHK0MEbozFm0ZS_sP8KF3HWweU_mDDoCGdT1SNwLXtHdHCPOD9bLJkcSmdrxCWnf22R01slw6s1L-ZH-S1QWKiTla_XR6Qr06FdTlKYL31k669lizgkDHJAmj0zfqNhsQomUU0LiCI9ZFv-d84lmMNTBxW-aRrA0UX0Oq33R8Xk7wTeRasoh69hUrifjtFi00_0ipUI8MgY",
  "Nonce": "636840687353276228.OTUyYzg0ZjctNjA1Ny00OTYwLThiZWQtOTdhMzk3M2IwMGI2ZmZjNGE2MWMtNWE4MS00ZDhlLTk2NjAtODFlNzRmZjBhZmVk",
  "SessionId": "a1414e4c747979ad8da05c239a7a081d",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636840687353276228.OTUyYzg0ZjctNjA1Ny00OTYwLThiZWQtOTdhMzk3M2IwMGI2ZmZjNGE2MWMtNWE4MS00ZDhlLTk2NjAtODFlNzRmZjBhZmVk",
    "state": "CfDJ8BLPb2XM6IVFhO7-20T25BlslnrFbIo7i_Fg-JvogSmiZafDOXVG5Wy79tyIl8mo8YE631SH-abSBFLPepfdRoIdHeZIRkirXGXSriKEN2kmSr5CePSGr4IVH-l4Q01hNSP7r-SJPmagzHK0MEbozFm0ZS_sP8KF3HWweU_mDDoCGdT1SNwLXtHdHCPOD9bLJkcSmdrxCWnf22R01slw6s1L-ZH-S1QWKiTla_XR6Qr06FdTlKYL31k669lizgkDHJAmj0zfqNhsQomUU0LiCI9ZFv-d84lmMNTBxW-aRrA0UX0Oq33R8Xk7wTeRasoh69hUrifjtFi00_0ipUI8MgY",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 03:05:44.393 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-26 03:05:44.406 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-26 03:05:44.433 +00:00 [DBG] Creating Implicit Flow response.
2019-01-26 03:05:44.438 +00:00 [DBG] Getting claims for identity token for subject: d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5 and client: MVC
2019-01-26 03:05:44.463 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****PfoQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****f94c"
    }
  ],
  "ActivityId": "0HLK379M71GF2:00000023",
  "TimeStamp": "2019-01-26T03:05:44Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:44.468 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8BLPb2XM6IVFhO7-20T25BlslnrFbIo7i_Fg-JvogSmiZafDOXVG5Wy79tyIl8mo8YE631SH-abSBFLPepfdRoIdHeZIRkirXGXSriKEN2kmSr5CePSGr4IVH-l4Q01hNSP7r-SJPmagzHK0MEbozFm0ZS_sP8KF3HWweU_mDDoCGdT1SNwLXtHdHCPOD9bLJkcSmdrxCWnf22R01slw6s1L-ZH-S1QWKiTla_XR6Qr06FdTlKYL31k669lizgkDHJAmj0zfqNhsQomUU0LiCI9ZFv-d84lmMNTBxW-aRrA0UX0Oq33R8Xk7wTeRasoh69hUrifjtFi00_0ipUI8MgY",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-26 03:05:44.470 +00:00 [DBG] Augmenting SignInContext
2019-01-26 03:05:44.473 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 03:05:44.648 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 03:05:44.666 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 03:05:44.676 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 03:05:44.682 +00:00 [DBG] Start token request.
2019-01-26 03:05:44.688 +00:00 [DBG] Start client validation
2019-01-26 03:05:44.690 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 03:05:44.708 +00:00 [DBG] Start parsing for secret in post body
2019-01-26 03:05:44.725 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-26 03:05:44.738 +00:00 [DBG] Secret id found: MVC
2019-01-26 03:05:44.740 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:44.743 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 03:05:44.754 +00:00 [DBG] Client validation success
2019-01-26 03:05:44.756 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK379M71GF4:00000007",
  "TimeStamp": "2019-01-26T03:05:44Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:44.760 +00:00 [DBG] Start token request validation
2019-01-26 03:05:44.770 +00:00 [DBG] Start validation of authorization code token request
2019-01-26 03:05:44.798 +00:00 [DBG] Validation of authorization code token request success
2019-01-26 03:05:44.803 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "511dc7efa809520718bfe78fc4d7e4afc74fc31f3d5de64cd486c5e6708df94c",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "511dc7efa809520718bfe78fc4d7e4afc74fc31f3d5de64cd486c5e6708df94c",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-26 03:05:44.806 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:44.808 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 03:05:44.822 +00:00 [DBG] Getting claims for access token for subject: d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5
2019-01-26 03:05:44.843 +00:00 [DBG] Creating refresh token
2019-01-26 03:05:44.847 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-26 03:05:44.870 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:44.871 +00:00 [DBG] Getting claims for identity token for subject: d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5 and client: MVC
2019-01-26 03:05:44.895 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****vwkw"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****bad6"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****xY1w"
    }
  ],
  "ActivityId": "0HLK379M71GF4:00000007",
  "TimeStamp": "2019-01-26T03:05:44Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:44.896 +00:00 [DBG] Token request success.
2019-01-26 03:05:44.928 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-26 03:05:44.930 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-26 03:05:44.935 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-26 03:05:44.937 +00:00 [DBG] Start userinfo request
2019-01-26 03:05:44.939 +00:00 [DBG] Bearer token found in header
2019-01-26 03:05:44.943 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:44.953 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:44.955 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-26 03:05:44.959 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548471944,
    "exp": 1548475544,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5",
    "auth_time": 1548471944,
    "idp": "local",
    "name": "",
    "email": "u0104",
    "phone": "",
    "address": "",
    "address_details": "",
    "neighborhood": "",
    "city": "",
    "state": "",
    "zip_code": "",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-26 03:05:44.964 +00:00 [DBG] Creating userinfo response
2019-01-26 03:05:44.972 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 03:05:44.975 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 03:05:44.979 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-26 03:05:44.992 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 03:05:45.038 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-26 03:05:45.039 +00:00 [DBG] End userinfo request
2019-01-26 03:05:45.337 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 03:05:45.350 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 03:05:45.353 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 03:05:45.354 +00:00 [DBG] Start token request.
2019-01-26 03:05:45.360 +00:00 [DBG] Start client validation
2019-01-26 03:05:45.365 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 03:05:45.369 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-26 03:05:45.370 +00:00 [DBG] Secret id found: MVC
2019-01-26 03:05:45.371 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:05:45.376 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 03:05:45.377 +00:00 [DBG] Client validation success
2019-01-26 03:05:45.379 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK379M71GFA:00000001",
  "TimeStamp": "2019-01-26T03:05:45Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:45.396 +00:00 [DBG] Start token request validation
2019-01-26 03:05:45.397 +00:00 [DBG] Start client credentials token request validation
2019-01-26 03:05:45.405 +00:00 [DBG] MVC credentials token request validation success
2019-01-26 03:05:45.406 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-26 03:05:45.408 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 03:05:45.414 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****mxdg"
    }
  ],
  "ActivityId": "0HLK379M71GFA:00000001",
  "TimeStamp": "2019-01-26T03:05:45Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:05:45.421 +00:00 [DBG] Token request success.
2019-01-26 03:06:13.807 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 03:06:13.808 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 03:06:13.809 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 03:06:13.824 +00:00 [DBG] Start token request.
2019-01-26 03:06:13.826 +00:00 [DBG] Start client validation
2019-01-26 03:06:13.837 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 03:06:13.840 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-26 03:06:13.845 +00:00 [DBG] Secret id found: MVC
2019-01-26 03:06:13.847 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 03:06:13.849 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 03:06:13.859 +00:00 [DBG] Client validation success
2019-01-26 03:06:13.860 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK379M71GFB:00000001",
  "TimeStamp": "2019-01-26T03:06:13Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:06:13.872 +00:00 [DBG] Start token request validation
2019-01-26 03:06:13.872 +00:00 [DBG] Start client credentials token request validation
2019-01-26 03:06:13.876 +00:00 [DBG] MVC credentials token request validation success
2019-01-26 03:06:13.877 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-26 03:06:13.881 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 03:06:13.892 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****P-RQ"
    }
  ],
  "ActivityId": "0HLK379M71GFB:00000001",
  "TimeStamp": "2019-01-26T03:06:13Z",
  "ProcessId": 5340,
  "LocalIpAddress": "172.18.0.6:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 03:06:13.895 +00:00 [DBG] Token request success.
2019-01-26 03:06:14.542 +00:00 [INF] Message received:
2019-01-26 03:06:14.543 +00:00 [INF] ----------------------------------
2019-01-26 03:06:14.552 +00:00 [INF] {"UsuarioId":"d12e6a17-f9d1-4c6d-b75b-53d3fabd23d5","Nome":"u0104","Email":"u0104@u0104","Telefone":"u0104'","Endereco":"u0104","Complemento":"u0104","Bairro":"u0104","Municipio":"u0104","UF":"SP","CEP":"u0104","Id":"77d5ef9a-120d-4bfe-a225-801f089d92ce","CreationDate":"2019-01-26T03:06:14.4188338Z"}
2019-01-26 03:06:14.553 +00:00 [INF] ----------------------------------
2019-01-26 03:06:15.091 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 97a47961-b4dc-47b4-b51d-eb9283ffd385 to 1 handlers took 566 ms
2019-01-26 13:22:24.911 +00:00 [WRN] No XML encryptor configured. Key "e3c98bdb-2ea0-4027-a003-64c5ce506dbb" may be persisted to storage in unencrypted form.
2019-01-26 13:22:26.189 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-26 13:22:28.158 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-26 13:22:28.230 +00:00 [INF] Setting number of workers to 1
2019-01-26 13:22:28.266 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-26 13:22:28.286 +00:00 [INF] Bus Rebus 1 started
2019-01-26 13:22:28.389 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-26 13:22:28.681 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-26 13:22:28.682 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-26 13:22:28.756 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-26 13:22:28.763 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-26 13:22:28.767 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-26 13:22:28.770 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-26 13:22:28.771 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-26 13:26:14.181 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-26 13:26:14.459 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-26 13:26:14.461 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-26 13:26:14.471 +00:00 [DBG] Start discovery request
2019-01-26 13:26:14.681 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-26 13:26:14.720 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-26 13:26:14.721 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-26 13:26:14.771 +00:00 [DBG] Start key discovery request
2019-01-26 13:26:14.977 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-26 13:26:14.979 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-26 13:26:14.989 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 13:26:15.000 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 13:26:15.000 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 13:26:15.017 +00:00 [DBG] Start authorize request
2019-01-26 13:26:15.047 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-26 13:26:15.056 +00:00 [DBG] No user present in authorize request
2019-01-26 13:26:15.071 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 13:26:15.090 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:26:15.109 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 13:26:15.113 +00:00 [DBG] No PKCE used.
2019-01-26 13:26:15.183 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:26:15.203 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8NAcRCUm0GVNkKIoZ2xr21Wo5GLQnzTOP045DP-NxZ42pd-_MWa3o2roE2EoHh4Wv_rtJxHNQ7lhiNArqC-0PPtDUm9nM2UdESXY55sppghLWg5vrMw0QxgRsbQAiXqGx0ZGCVCCD9r2HTJXX6-L8uCZFX75W_0Lm1kUvpd6du482794vROrvVmsqcbGXIAu6shzWnVDMXtxAKLuZP1SkYw1sXmw6xvmmk5fe3xoXMdYEwdHiQTh4Zwh4h7CaJH6JtGeoS7rm-85NgOsO8CrSj1QG2m4Iq7XlGnxjGPgo1HpE-z3G01KnS-n1kxRqJCXCj0Fu64k1DvFvuMAmXo2zNc",
  "Nonce": "636841059748649289.ODFkNDM5NTEtYzc4Yi00MjBjLTk2OTItMTNkZmY0YTczMzBiYmU5YmI4MjUtNjk3YS00NDdiLTlmYzMtMTFkMDRiYmE4NzI5",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636841059748649289.ODFkNDM5NTEtYzc4Yi00MjBjLTk2OTItMTNkZmY0YTczMzBiYmU5YmI4MjUtNjk3YS00NDdiLTlmYzMtMTFkMDRiYmE4NzI5",
    "state": "CfDJ8NAcRCUm0GVNkKIoZ2xr21Wo5GLQnzTOP045DP-NxZ42pd-_MWa3o2roE2EoHh4Wv_rtJxHNQ7lhiNArqC-0PPtDUm9nM2UdESXY55sppghLWg5vrMw0QxgRsbQAiXqGx0ZGCVCCD9r2HTJXX6-L8uCZFX75W_0Lm1kUvpd6du482794vROrvVmsqcbGXIAu6shzWnVDMXtxAKLuZP1SkYw1sXmw6xvmmk5fe3xoXMdYEwdHiQTh4Zwh4h7CaJH6JtGeoS7rm-85NgOsO8CrSj1QG2m4Iq7XlGnxjGPgo1HpE-z3G01KnS-n1kxRqJCXCj0Fu64k1DvFvuMAmXo2zNc",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 13:26:15.238 +00:00 [INF] Showing login: User is not authenticated
2019-01-26 13:26:15.259 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-26 13:26:15.259 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-26 13:26:15.755 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-26 13:26:15.755 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 13:26:15.756 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:26:15.757 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 13:26:15.758 +00:00 [DBG] No PKCE used.
2019-01-26 13:26:15.759 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:26:15.769 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:26:25.076 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 13:26:25.078 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-26 13:26:25.078 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-26 13:26:30.614 +00:00 [WRN] Invalid password for user 173f964f-1eb9-43cf-91c7-df753717c16c.
2019-01-26 13:26:30.619 +00:00 [WRN] User 173f964f-1eb9-43cf-91c7-df753717c16c failed to provide the correct password.
2019-01-26 13:26:31.450 +00:00 [INF] {
  "Name": "User Login Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1001,
  "Username": "alice",
  "Endpoint": "UI",
  "Message": "invalid credentials",
  "ActivityId": "0HLK3I7C0Q9QC:00000002",
  "TimeStamp": "2019-01-26T13:26:31Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:26:31.462 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-26 13:26:31.464 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 13:26:31.466 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:26:31.468 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 13:26:31.469 +00:00 [DBG] No PKCE used.
2019-01-26 13:26:31.480 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:26:31.481 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:26:40.980 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 13:26:40.981 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-26 13:26:40.981 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-26 13:26:41.566 +00:00 [DBG] Augmenting SignInContext
2019-01-26 13:26:41.572 +00:00 [DBG] Adding idp claim with value: local
2019-01-26 13:26:41.573 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-26 13:26:41.577 +00:00 [DBG] Adding auth_time claim with value: 1548509201
2019-01-26 13:26:41.586 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-26 13:26:41.608 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:26:41.623 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK3I7C0Q9QC:00000003",
  "TimeStamp": "2019-01-26T13:26:41Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:26:41.655 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 13:26:41.656 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 13:26:41.657 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 13:26:41.673 +00:00 [DBG] Start authorize callback request
2019-01-26 13:26:41.685 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-26 13:26:41.685 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 13:26:41.685 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:26:41.685 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 13:26:41.685 +00:00 [DBG] No PKCE used.
2019-01-26 13:26:41.686 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:26:41.686 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8NAcRCUm0GVNkKIoZ2xr21Wo5GLQnzTOP045DP-NxZ42pd-_MWa3o2roE2EoHh4Wv_rtJxHNQ7lhiNArqC-0PPtDUm9nM2UdESXY55sppghLWg5vrMw0QxgRsbQAiXqGx0ZGCVCCD9r2HTJXX6-L8uCZFX75W_0Lm1kUvpd6du482794vROrvVmsqcbGXIAu6shzWnVDMXtxAKLuZP1SkYw1sXmw6xvmmk5fe3xoXMdYEwdHiQTh4Zwh4h7CaJH6JtGeoS7rm-85NgOsO8CrSj1QG2m4Iq7XlGnxjGPgo1HpE-z3G01KnS-n1kxRqJCXCj0Fu64k1DvFvuMAmXo2zNc",
  "Nonce": "636841059748649289.ODFkNDM5NTEtYzc4Yi00MjBjLTk2OTItMTNkZmY0YTczMzBiYmU5YmI4MjUtNjk3YS00NDdiLTlmYzMtMTFkMDRiYmE4NzI5",
  "SessionId": "751363d6121dcda9033b8098d9a9c62b",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636841059748649289.ODFkNDM5NTEtYzc4Yi00MjBjLTk2OTItMTNkZmY0YTczMzBiYmU5YmI4MjUtNjk3YS00NDdiLTlmYzMtMTFkMDRiYmE4NzI5",
    "state": "CfDJ8NAcRCUm0GVNkKIoZ2xr21Wo5GLQnzTOP045DP-NxZ42pd-_MWa3o2roE2EoHh4Wv_rtJxHNQ7lhiNArqC-0PPtDUm9nM2UdESXY55sppghLWg5vrMw0QxgRsbQAiXqGx0ZGCVCCD9r2HTJXX6-L8uCZFX75W_0Lm1kUvpd6du482794vROrvVmsqcbGXIAu6shzWnVDMXtxAKLuZP1SkYw1sXmw6xvmmk5fe3xoXMdYEwdHiQTh4Zwh4h7CaJH6JtGeoS7rm-85NgOsO8CrSj1QG2m4Iq7XlGnxjGPgo1HpE-z3G01KnS-n1kxRqJCXCj0Fu64k1DvFvuMAmXo2zNc",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 13:26:41.720 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-26 13:26:41.738 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-26 13:26:41.788 +00:00 [DBG] Creating Implicit Flow response.
2019-01-26 13:26:41.815 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-26 13:26:42.023 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Hw2A"
    },
    {
      "TokenType": "code",
      "TokenValue": "****09ad"
    }
  ],
  "ActivityId": "0HLK3I7C0Q9QC:00000004",
  "TimeStamp": "2019-01-26T13:26:42Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:26:42.032 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8NAcRCUm0GVNkKIoZ2xr21Wo5GLQnzTOP045DP-NxZ42pd-_MWa3o2roE2EoHh4Wv_rtJxHNQ7lhiNArqC-0PPtDUm9nM2UdESXY55sppghLWg5vrMw0QxgRsbQAiXqGx0ZGCVCCD9r2HTJXX6-L8uCZFX75W_0Lm1kUvpd6du482794vROrvVmsqcbGXIAu6shzWnVDMXtxAKLuZP1SkYw1sXmw6xvmmk5fe3xoXMdYEwdHiQTh4Zwh4h7CaJH6JtGeoS7rm-85NgOsO8CrSj1QG2m4Iq7XlGnxjGPgo1HpE-z3G01KnS-n1kxRqJCXCj0Fu64k1DvFvuMAmXo2zNc",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-26 13:26:42.092 +00:00 [DBG] Augmenting SignInContext
2019-01-26 13:26:42.094 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:26:42.988 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 13:26:42.996 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 13:26:42.997 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 13:26:43.016 +00:00 [DBG] Start token request.
2019-01-26 13:26:43.039 +00:00 [DBG] Start client validation
2019-01-26 13:26:43.054 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 13:26:43.073 +00:00 [DBG] Start parsing for secret in post body
2019-01-26 13:26:43.083 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-26 13:26:43.083 +00:00 [DBG] Secret id found: MVC
2019-01-26 13:26:43.083 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:26:43.126 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 13:26:43.127 +00:00 [DBG] Client validation success
2019-01-26 13:26:43.140 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK3I7C0Q9QA:00000003",
  "TimeStamp": "2019-01-26T13:26:43Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:26:43.163 +00:00 [DBG] Start token request validation
2019-01-26 13:26:43.187 +00:00 [DBG] Start validation of authorization code token request
2019-01-26 13:26:43.235 +00:00 [DBG] Validation of authorization code token request success
2019-01-26 13:26:43.244 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "1e8a063819374658d00c7e3a41bcf67938092ce1f7a2d786e24b5f99e3fd09ad",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "1e8a063819374658d00c7e3a41bcf67938092ce1f7a2d786e24b5f99e3fd09ad",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-26 13:26:43.280 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:26:43.309 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 13:26:43.315 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-26 13:26:43.366 +00:00 [DBG] Creating refresh token
2019-01-26 13:26:43.366 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-26 13:26:43.398 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:26:43.399 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-26 13:26:43.440 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****g5kQ"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****74f6"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****UzWQ"
    }
  ],
  "ActivityId": "0HLK3I7C0Q9QA:00000003",
  "TimeStamp": "2019-01-26T13:26:43Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:26:43.451 +00:00 [DBG] Token request success.
2019-01-26 13:26:43.551 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-26 13:26:43.553 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-26 13:26:43.553 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-26 13:26:43.587 +00:00 [DBG] Start userinfo request
2019-01-26 13:26:43.604 +00:00 [DBG] Bearer token found in header
2019-01-26 13:26:43.737 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:26:43.747 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:26:43.751 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-26 13:26:43.758 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548509203,
    "exp": 1548512803,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548509201,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-26 13:26:43.785 +00:00 [DBG] Creating userinfo response
2019-01-26 13:26:43.802 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 13:26:43.818 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 13:26:43.837 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-26 13:26:43.838 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 13:26:43.875 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-26 13:26:43.876 +00:00 [DBG] End userinfo request
2019-01-26 13:26:44.653 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 13:26:44.655 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 13:26:44.655 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 13:26:44.655 +00:00 [DBG] Start token request.
2019-01-26 13:26:44.655 +00:00 [DBG] Start client validation
2019-01-26 13:26:44.655 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 13:26:44.656 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-26 13:26:44.656 +00:00 [DBG] Secret id found: MVC
2019-01-26 13:26:44.656 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:26:44.656 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 13:26:44.656 +00:00 [DBG] Client validation success
2019-01-26 13:26:44.657 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK3I7C0Q9QD:00000001",
  "TimeStamp": "2019-01-26T13:26:44Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:26:44.681 +00:00 [DBG] Start token request validation
2019-01-26 13:26:44.689 +00:00 [DBG] Start client credentials token request validation
2019-01-26 13:26:44.719 +00:00 [DBG] MVC credentials token request validation success
2019-01-26 13:26:44.722 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-26 13:26:44.742 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 13:26:44.750 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****4e7A"
    }
  ],
  "ActivityId": "0HLK3I7C0Q9QD:00000001",
  "TimeStamp": "2019-01-26T13:26:44Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:26:44.751 +00:00 [DBG] Token request success.
2019-01-26 13:26:45.392 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-26 13:26:45.396 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-26 13:26:45.397 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-26 13:26:45.397 +00:00 [DBG] Start discovery request
2019-01-26 13:26:45.676 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-26 13:26:45.676 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-26 13:26:45.676 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-26 13:26:45.676 +00:00 [DBG] Start key discovery request
2019-01-26 13:27:02.667 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 13:27:02.667 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 13:27:02.668 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 13:27:02.668 +00:00 [DBG] Start token request.
2019-01-26 13:27:02.668 +00:00 [DBG] Start client validation
2019-01-26 13:27:02.668 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 13:27:02.668 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-26 13:27:02.668 +00:00 [DBG] Secret id found: MVC
2019-01-26 13:27:02.668 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:27:02.668 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 13:27:02.668 +00:00 [DBG] Client validation success
2019-01-26 13:27:02.668 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK3I7C0Q9QF:00000001",
  "TimeStamp": "2019-01-26T13:27:02Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:27:02.720 +00:00 [DBG] Start token request validation
2019-01-26 13:27:02.720 +00:00 [DBG] Start client credentials token request validation
2019-01-26 13:27:02.721 +00:00 [DBG] MVC credentials token request validation success
2019-01-26 13:27:02.721 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-26 13:27:02.721 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 13:27:02.727 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****8-pg"
    }
  ],
  "ActivityId": "0HLK3I7C0Q9QF:00000001",
  "TimeStamp": "2019-01-26T13:27:02Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:27:02.727 +00:00 [DBG] Token request success.
2019-01-26 13:27:03.808 +00:00 [WRN] Unhandled exception [1,"28d6db40-a19b-4a7c-9d15-e95d33e10ce4"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 28d6db40-a19b-4a7c-9d15-e95d33e10ce4 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-01-26 13:27:03.990 +00:00 [INF] Message received:
2019-01-26 13:27:03.990 +00:00 [INF] ----------------------------------
2019-01-26 13:27:03.999 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"1723e31e-d89f-4187-afca-302e624229c0","CreationDate":"2019-01-26T13:27:03.888033Z"}
2019-01-26 13:27:03.999 +00:00 [INF] ----------------------------------
2019-01-26 13:27:05.355 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 09da22b4-c196-4be3-b9d6-d4039c94d055 to 1 handlers took 1383 ms
2019-01-26 13:27:16.143 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 13:27:16.153 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 13:27:16.153 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 13:27:16.153 +00:00 [DBG] Start token request.
2019-01-26 13:27:16.153 +00:00 [DBG] Start client validation
2019-01-26 13:27:16.153 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 13:27:16.153 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-26 13:27:16.153 +00:00 [DBG] Secret id found: MVC
2019-01-26 13:27:16.153 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:27:16.153 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 13:27:16.153 +00:00 [DBG] Client validation success
2019-01-26 13:27:16.153 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK3I7C0Q9QG:00000001",
  "TimeStamp": "2019-01-26T13:27:16Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:27:16.166 +00:00 [DBG] Start token request validation
2019-01-26 13:27:16.166 +00:00 [DBG] Start client credentials token request validation
2019-01-26 13:27:16.167 +00:00 [DBG] MVC credentials token request validation success
2019-01-26 13:27:16.167 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-26 13:27:16.167 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 13:27:16.190 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****zY5g"
    }
  ],
  "ActivityId": "0HLK3I7C0Q9QG:00000001",
  "TimeStamp": "2019-01-26T13:27:16Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:27:16.197 +00:00 [DBG] Token request success.
2019-01-26 13:27:20.761 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 13:27:20.762 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 13:27:20.762 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 13:27:20.763 +00:00 [DBG] Start token request.
2019-01-26 13:27:20.763 +00:00 [DBG] Start client validation
2019-01-26 13:27:20.763 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 13:27:20.763 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-26 13:27:20.764 +00:00 [DBG] Secret id found: MVC
2019-01-26 13:27:20.765 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:27:20.766 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 13:27:20.766 +00:00 [DBG] Client validation success
2019-01-26 13:27:20.766 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK3I7C0Q9QH:00000001",
  "TimeStamp": "2019-01-26T13:27:20Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:27:20.772 +00:00 [DBG] Start token request validation
2019-01-26 13:27:20.772 +00:00 [DBG] Start client credentials token request validation
2019-01-26 13:27:20.772 +00:00 [DBG] MVC credentials token request validation success
2019-01-26 13:27:20.773 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-26 13:27:20.773 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 13:27:20.776 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****tZwQ"
    }
  ],
  "ActivityId": "0HLK3I7C0Q9QH:00000001",
  "TimeStamp": "2019-01-26T13:27:20Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:27:20.776 +00:00 [DBG] Token request success.
2019-01-26 13:27:20.988 +00:00 [WRN] Unhandled exception [1,"65ea7d51-b435-4666-9e6f-d4022b27ba4a"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 65ea7d51-b435-4666-9e6f-d4022b27ba4a and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-01-26 13:27:21.076 +00:00 [INF] Message received:
2019-01-26 13:27:21.077 +00:00 [INF] ----------------------------------
2019-01-26 13:27:21.078 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"a8e39277-28d9-4df4-8cec-0c7cbed60819","CreationDate":"2019-01-26T13:27:21.0755511Z"}
2019-01-26 13:27:21.079 +00:00 [INF] ----------------------------------
2019-01-26 13:27:22.409 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens aa8261c8-e3be-4b1a-a354-76d6b394dcf4 to 1 handlers took 1333 ms
2019-01-26 13:27:24.638 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-26 13:27:24.645 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-26 13:27:24.648 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-26 13:27:24.669 +00:00 [DBG] Processing signout request for 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-26 13:27:24.690 +00:00 [DBG] Start end session request validation
2019-01-26 13:27:24.719 +00:00 [DBG] Start identity token validation
2019-01-26 13:27:24.725 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:27:24.725 +00:00 [DBG] Client found: MVC / MVC
2019-01-26 13:27:24.726 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-26 13:27:24.727 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1548509203,
    "exp": 1548509503,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636841059748649289.ODFkNDM5NTEtYzc4Yi00MjBjLTk2OTItMTNkZmY0YTczMzBiYmU5YmI4MjUtNjk3YS00NDdiLTlmYzMtMTFkMDRiYmE4NzI5",
    "iat": 1548509203,
    "at_hash": "EEMeIEiPnPlSv2TsiF55wQ",
    "sid": "751363d6121dcda9033b8098d9a9c62b",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548509201,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "amr": "pwd"
  }
}
2019-01-26 13:27:24.736 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8NAcRCUm0GVNkKIoZ2xr21WzQrpeack0gKEERkga9Ywo6EN7XbrwixEnSGp8eQ1yFy2k-0N0dvQ4DUT9OKu9EPnydTj4bRYHXQnUe0NivyEag9-xrGPHt7pu7cDV9yUmV3jgsrkyrNVsscWlrnX6hnCEsRMEG66KBl5Qti7aplzR",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDg1MDkyMDMsImV4cCI6MTU0ODUwOTUwMywiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4NDEwNTk3NDg2NDkyODkuT0RGa05ETTVOVEV0WXpjNFlpMDBNakJqTFRrMk9USXRNVE5rWm1ZMFlUY3pNekJpWW1VNVltSTRNalV0TmprM1lTMDBORGRpTFRsbVl6TXRNVEZrTURSaVltRTROekk1IiwiaWF0IjoxNTQ4NTA5MjAzLCJhdF9oYXNoIjoiRUVNZUlFaVBuUGxTdjJUc2lGNTV3USIsInNpZCI6Ijc1MTM2M2Q2MTIxZGNkYTkwMzNiODA5OGQ5YTljNjJiIiwic3ViIjoiMTczZjk2NGYtMWViOS00M2NmLTkxYzctZGY3NTM3MTdjMTZjIiwiYXV0aF90aW1lIjoxNTQ4NTA5MjAxLCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImVtYWlsIjoiYWxpY2VAYXNwLm5ldCIsInBob25lIjoiMTIzNC01Njc4IiwiYWRkcmVzcyI6IlJ1YSBWZXJndWVpcm8sIDQ1NiIsImFkZHJlc3NfZGV0YWlscyI6IjggYW5kYXIgc2FsYSA4MDEiLCJuZWlnaGJvcmhvb2QiOiJWaWxhIE1hcmlhbmEiLCJjaXR5IjoiU8OjbyBQYXVsbyIsInN0YXRlIjoiU1AiLCJ6aXBfY29kZSI6IjY5MTE4IiwiYW1yIjpbInB3ZCJdfQ.xDS0d1juC04Jq83HdE0lSBxvgNAH0jVHmhlAR1THdd0zf7bPKrdWXK6s7lsx0RoboBIDsVLxUQ7MoHElUj6VuID1qdv1yDUMiw8du4IWNlhBXofHQMto7z5lgpqKSB8Vd8YxsIifRTVkYONiRT8EtsaQzU-lI3oPKvS-YsIfvWEOMn2COoEmAnVoDjjDjfu_4SmuvM6vkH7fHbi-ZIMMa_JoDg78SKtf6manV44HGd1hZhMgzGnafeuBs3eO6beYBleEfKzRUI1OxfrcyASsBd5jI3ZWp6OOTsZxKzwhrhL1GT5Q1_rO2Pk-CTAi2SnzN6SP9aCOwruSZU_Gy3g5kQ",
    "state": "CfDJ8NAcRCUm0GVNkKIoZ2xr21WzQrpeack0gKEERkga9Ywo6EN7XbrwixEnSGp8eQ1yFy2k-0N0dvQ4DUT9OKu9EPnydTj4bRYHXQnUe0NivyEag9-xrGPHt7pu7cDV9yUmV3jgsrkyrNVsscWlrnX6hnCEsRMEG66KBl5Qti7aplzR",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 13:27:24.742 +00:00 [DBG] Success validating end session request from MVC
2019-01-26 13:27:24.857 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-26 13:27:24.858 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:27:24.858 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-26 13:27:24.868 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLK3I7C0Q9QC:00000006",
  "TimeStamp": "2019-01-26T13:27:24Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:27:27.065 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 13:27:27.066 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 13:27:27.066 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 13:27:27.066 +00:00 [DBG] Start authorize request
2019-01-26 13:27:27.066 +00:00 [DBG] No user present in authorize request
2019-01-26 13:27:27.066 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 13:27:27.066 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:27:27.066 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 13:27:27.066 +00:00 [DBG] No PKCE used.
2019-01-26 13:27:27.066 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:27:27.067 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8NAcRCUm0GVNkKIoZ2xr21U2ZjBelbOn3-RAkjXddHEG1OayTalHvBP_QeYS4amW8bEiA_QIq3RawmU-zbmIfcQQxThj5Qt5D1XWWGtdF6n-CzJzzSM22uVokGCxwgGnwWwjPwG1KA9gWUOfNgDgARLp1IebB3lc-3qZFEwzwq3ee-wWtlSqUf77U5R7qN0Q_OuXmkSZVA7nSxAEwoEOHea9G70mbjkqoc4q96iR6ZAAIohiAiX0EoSlPHQsZNkYv7pKawdUdYHEZZXIo-wMoLE9f75GkoGlKIkZDollkMYIP8fGZM_ASaGI8xD6m8fuZQ-k_rYlLZYGkDMbdHrkiVQ",
  "Nonce": "636841060470503796.NjgyOTIwOGEtODE3Mi00OGNjLTg0YmUtMTVmNTIwMmFmNTE3YTc3OGIzNTAtYzUzNi00MzIyLTk5ODEtZGM0NWFhMWJhMmY0",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636841060470503796.NjgyOTIwOGEtODE3Mi00OGNjLTg0YmUtMTVmNTIwMmFmNTE3YTc3OGIzNTAtYzUzNi00MzIyLTk5ODEtZGM0NWFhMWJhMmY0",
    "state": "CfDJ8NAcRCUm0GVNkKIoZ2xr21U2ZjBelbOn3-RAkjXddHEG1OayTalHvBP_QeYS4amW8bEiA_QIq3RawmU-zbmIfcQQxThj5Qt5D1XWWGtdF6n-CzJzzSM22uVokGCxwgGnwWwjPwG1KA9gWUOfNgDgARLp1IebB3lc-3qZFEwzwq3ee-wWtlSqUf77U5R7qN0Q_OuXmkSZVA7nSxAEwoEOHea9G70mbjkqoc4q96iR6ZAAIohiAiX0EoSlPHQsZNkYv7pKawdUdYHEZZXIo-wMoLE9f75GkoGlKIkZDollkMYIP8fGZM_ASaGI8xD6m8fuZQ-k_rYlLZYGkDMbdHrkiVQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 13:27:27.068 +00:00 [INF] Showing login: User is not authenticated
2019-01-26 13:27:27.102 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 13:27:27.102 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:27:27.102 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 13:27:27.102 +00:00 [DBG] No PKCE used.
2019-01-26 13:27:27.103 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:27:27.103 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:27:29.480 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 13:27:29.739 +00:00 [DBG] Augmenting SignInContext
2019-01-26 13:27:29.740 +00:00 [DBG] Adding idp claim with value: local
2019-01-26 13:27:29.740 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-26 13:27:29.741 +00:00 [DBG] Adding auth_time claim with value: 1548509249
2019-01-26 13:27:29.742 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:27:29.755 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK3I7C0Q9QC:00000009",
  "TimeStamp": "2019-01-26T13:27:29Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:27:29.787 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 13:27:29.788 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 13:27:29.788 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 13:27:29.788 +00:00 [DBG] Start authorize callback request
2019-01-26 13:27:29.788 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-26 13:27:29.788 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 13:27:29.788 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:27:29.788 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 13:27:29.789 +00:00 [DBG] No PKCE used.
2019-01-26 13:27:29.789 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:27:29.789 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8NAcRCUm0GVNkKIoZ2xr21U2ZjBelbOn3-RAkjXddHEG1OayTalHvBP_QeYS4amW8bEiA_QIq3RawmU-zbmIfcQQxThj5Qt5D1XWWGtdF6n-CzJzzSM22uVokGCxwgGnwWwjPwG1KA9gWUOfNgDgARLp1IebB3lc-3qZFEwzwq3ee-wWtlSqUf77U5R7qN0Q_OuXmkSZVA7nSxAEwoEOHea9G70mbjkqoc4q96iR6ZAAIohiAiX0EoSlPHQsZNkYv7pKawdUdYHEZZXIo-wMoLE9f75GkoGlKIkZDollkMYIP8fGZM_ASaGI8xD6m8fuZQ-k_rYlLZYGkDMbdHrkiVQ",
  "Nonce": "636841060470503796.NjgyOTIwOGEtODE3Mi00OGNjLTg0YmUtMTVmNTIwMmFmNTE3YTc3OGIzNTAtYzUzNi00MzIyLTk5ODEtZGM0NWFhMWJhMmY0",
  "SessionId": "f30070cfad120069a98451541f275605",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636841060470503796.NjgyOTIwOGEtODE3Mi00OGNjLTg0YmUtMTVmNTIwMmFmNTE3YTc3OGIzNTAtYzUzNi00MzIyLTk5ODEtZGM0NWFhMWJhMmY0",
    "state": "CfDJ8NAcRCUm0GVNkKIoZ2xr21U2ZjBelbOn3-RAkjXddHEG1OayTalHvBP_QeYS4amW8bEiA_QIq3RawmU-zbmIfcQQxThj5Qt5D1XWWGtdF6n-CzJzzSM22uVokGCxwgGnwWwjPwG1KA9gWUOfNgDgARLp1IebB3lc-3qZFEwzwq3ee-wWtlSqUf77U5R7qN0Q_OuXmkSZVA7nSxAEwoEOHea9G70mbjkqoc4q96iR6ZAAIohiAiX0EoSlPHQsZNkYv7pKawdUdYHEZZXIo-wMoLE9f75GkoGlKIkZDollkMYIP8fGZM_ASaGI8xD6m8fuZQ-k_rYlLZYGkDMbdHrkiVQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 13:27:29.789 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-26 13:27:29.789 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-26 13:27:29.840 +00:00 [DBG] Creating Implicit Flow response.
2019-01-26 13:27:29.843 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-26 13:27:29.874 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****4HNA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****df4a"
    }
  ],
  "ActivityId": "0HLK3I7C0Q9QC:0000000A",
  "TimeStamp": "2019-01-26T13:27:29Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:27:29.877 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8NAcRCUm0GVNkKIoZ2xr21U2ZjBelbOn3-RAkjXddHEG1OayTalHvBP_QeYS4amW8bEiA_QIq3RawmU-zbmIfcQQxThj5Qt5D1XWWGtdF6n-CzJzzSM22uVokGCxwgGnwWwjPwG1KA9gWUOfNgDgARLp1IebB3lc-3qZFEwzwq3ee-wWtlSqUf77U5R7qN0Q_OuXmkSZVA7nSxAEwoEOHea9G70mbjkqoc4q96iR6ZAAIohiAiX0EoSlPHQsZNkYv7pKawdUdYHEZZXIo-wMoLE9f75GkoGlKIkZDollkMYIP8fGZM_ASaGI8xD6m8fuZQ-k_rYlLZYGkDMbdHrkiVQ",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-26 13:27:29.877 +00:00 [DBG] Augmenting SignInContext
2019-01-26 13:27:29.878 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:27:30.015 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 13:27:30.023 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 13:27:30.025 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 13:27:30.026 +00:00 [DBG] Start token request.
2019-01-26 13:27:30.028 +00:00 [DBG] Start client validation
2019-01-26 13:27:30.029 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 13:27:30.030 +00:00 [DBG] Start parsing for secret in post body
2019-01-26 13:27:30.047 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-26 13:27:30.047 +00:00 [DBG] Secret id found: MVC
2019-01-26 13:27:30.047 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:27:30.048 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 13:27:30.048 +00:00 [DBG] Client validation success
2019-01-26 13:27:30.048 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK3I7C0Q9QA:00000005",
  "TimeStamp": "2019-01-26T13:27:30Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:27:30.048 +00:00 [DBG] Start token request validation
2019-01-26 13:27:30.048 +00:00 [DBG] Start validation of authorization code token request
2019-01-26 13:27:30.129 +00:00 [DBG] Validation of authorization code token request success
2019-01-26 13:27:30.130 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "79501ceaef4e161638b391236803ce186cee5ac72ebfd41da33879ab6597df4a",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "79501ceaef4e161638b391236803ce186cee5ac72ebfd41da33879ab6597df4a",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-26 13:27:30.137 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:27:30.137 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 13:27:30.137 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-26 13:27:30.197 +00:00 [DBG] Creating refresh token
2019-01-26 13:27:30.197 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-26 13:27:30.222 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:27:30.223 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-26 13:27:30.253 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****QauQ"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****3280"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****MDBw"
    }
  ],
  "ActivityId": "0HLK3I7C0Q9QA:00000005",
  "TimeStamp": "2019-01-26T13:27:30Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:27:30.255 +00:00 [DBG] Token request success.
2019-01-26 13:27:30.263 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-26 13:27:30.264 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-26 13:27:30.264 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-26 13:27:30.264 +00:00 [DBG] Start userinfo request
2019-01-26 13:27:30.265 +00:00 [DBG] Bearer token found in header
2019-01-26 13:27:30.266 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:27:30.266 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:27:30.266 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-26 13:27:30.266 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548509250,
    "exp": 1548512850,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548509249,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-26 13:27:30.267 +00:00 [DBG] Creating userinfo response
2019-01-26 13:27:30.267 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 13:27:30.267 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 13:27:30.267 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-26 13:27:30.268 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 13:27:30.304 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-26 13:27:30.304 +00:00 [DBG] End userinfo request
2019-01-26 13:27:30.630 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 13:27:30.632 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 13:27:30.632 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 13:27:30.633 +00:00 [DBG] Start token request.
2019-01-26 13:27:30.634 +00:00 [DBG] Start client validation
2019-01-26 13:27:30.635 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 13:27:30.635 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-26 13:27:30.636 +00:00 [DBG] Secret id found: MVC
2019-01-26 13:27:30.637 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:27:30.638 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 13:27:30.639 +00:00 [DBG] Client validation success
2019-01-26 13:27:30.644 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK3I7C0Q9QI:00000001",
  "TimeStamp": "2019-01-26T13:27:30Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:27:30.652 +00:00 [DBG] Start token request validation
2019-01-26 13:27:30.652 +00:00 [DBG] Start client credentials token request validation
2019-01-26 13:27:30.652 +00:00 [DBG] MVC credentials token request validation success
2019-01-26 13:27:30.652 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-26 13:27:30.652 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 13:27:30.665 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****zWtw"
    }
  ],
  "ActivityId": "0HLK3I7C0Q9QI:00000001",
  "TimeStamp": "2019-01-26T13:27:30Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:27:30.666 +00:00 [DBG] Token request success.
2019-01-26 13:28:04.886 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 13:28:04.887 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 13:28:04.887 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 13:28:04.887 +00:00 [DBG] Start token request.
2019-01-26 13:28:04.887 +00:00 [DBG] Start client validation
2019-01-26 13:28:04.888 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 13:28:04.888 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-26 13:28:04.888 +00:00 [DBG] Secret id found: MVC
2019-01-26 13:28:04.888 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:28:04.888 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 13:28:04.888 +00:00 [DBG] Client validation success
2019-01-26 13:28:04.889 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK3I7C0Q9QJ:00000001",
  "TimeStamp": "2019-01-26T13:28:04Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:28:04.894 +00:00 [DBG] Start token request validation
2019-01-26 13:28:04.895 +00:00 [DBG] Start client credentials token request validation
2019-01-26 13:28:04.895 +00:00 [DBG] MVC credentials token request validation success
2019-01-26 13:28:04.896 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-26 13:28:04.896 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 13:28:04.913 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****6HeA"
    }
  ],
  "ActivityId": "0HLK3I7C0Q9QJ:00000001",
  "TimeStamp": "2019-01-26T13:28:04Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:28:04.914 +00:00 [DBG] Token request success.
2019-01-26 13:28:05.214 +00:00 [INF] Message received:
2019-01-26 13:28:05.222 +00:00 [INF] ----------------------------------
2019-01-26 13:28:05.222 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Mariana","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"3a3045d0-6890-4533-bbba-510709a06ba7","CreationDate":"2019-01-26T13:28:05.2121616Z"}
2019-01-26 13:28:05.223 +00:00 [INF] ----------------------------------
2019-01-26 13:28:15.245 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 44e6deac-2bd1-43e7-980b-31d363e1bf78 to 1 handlers took 10031 ms
2019-01-26 13:28:22.079 +00:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-01-26 13:28:22.080 +00:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-01-26 13:28:22.080 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-01-26 13:28:22.081 +00:00 [DBG] Processing signout request for 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-26 13:28:22.081 +00:00 [DBG] Start end session request validation
2019-01-26 13:28:22.081 +00:00 [DBG] Start identity token validation
2019-01-26 13:28:22.082 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:28:22.082 +00:00 [DBG] Client found: MVC / MVC
2019-01-26 13:28:22.082 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-26 13:28:22.082 +00:00 [DBG] Token validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1548509250,
    "exp": 1548509550,
    "iss": "http://10.0.75.1:5105",
    "aud": "MVC",
    "nonce": "636841060470503796.NjgyOTIwOGEtODE3Mi00OGNjLTg0YmUtMTVmNTIwMmFmNTE3YTc3OGIzNTAtYzUzNi00MzIyLTk5ODEtZGM0NWFhMWJhMmY0",
    "iat": 1548509250,
    "at_hash": "ObIC_uoupwLuaA3D5_y27w",
    "sid": "f30070cfad120069a98451541f275605",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548509249,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "amr": "pwd"
  }
}
2019-01-26 13:28:22.083 +00:00 [INF] End session request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "PostLogOutUri": "http://localhost:5100/signout-callback-oidc",
  "State": "CfDJ8NAcRCUm0GVNkKIoZ2xr21W7EA1kJ0YBhQ_Y-du7VCQm-CGWfb8pW7axGZZunUTts_n-y5mvyQggbrUl7kPnzBzrgP3N4D_5fzZMdDn2DOTiutTprGY6onzEqQpAed9vEhM9bBbEka5rLoMjE2zCny7sduy37dKqPTtIVT7e5fi6",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5100/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1ODZhNDE0YjMzNGQ3NmY2ODBkMTQ1MjhmNTk0ZWM2IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDg1MDkyNTAsImV4cCI6MTU0ODUwOTU1MCwiaXNzIjoiaHR0cDovLzEwLjAuNzUuMTo1MTA1IiwiYXVkIjoiTVZDIiwibm9uY2UiOiI2MzY4NDEwNjA0NzA1MDM3OTYuTmpneU9USXdPR0V0T0RFM01pMDBPR05qTFRnMFltVXRNVFZtTlRJd01tRm1OVEUzWVRjM09HSXpOVEF0WXpVek5pMDBNekl5TFRrNU9ERXRaR00wTldGaE1XSmhNbVkwIiwiaWF0IjoxNTQ4NTA5MjUwLCJhdF9oYXNoIjoiT2JJQ191b3Vwd0x1YUEzRDVfeTI3dyIsInNpZCI6ImYzMDA3MGNmYWQxMjAwNjlhOTg0NTE1NDFmMjc1NjA1Iiwic3ViIjoiMTczZjk2NGYtMWViOS00M2NmLTkxYzctZGY3NTM3MTdjMTZjIiwiYXV0aF90aW1lIjoxNTQ4NTA5MjQ5LCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImVtYWlsIjoiYWxpY2VAYXNwLm5ldCIsInBob25lIjoiMTIzNC01Njc4IiwiYWRkcmVzcyI6IlJ1YSBWZXJndWVpcm8sIDQ1NiIsImFkZHJlc3NfZGV0YWlscyI6IjggYW5kYXIgc2FsYSA4MDEiLCJuZWlnaGJvcmhvb2QiOiJWaWxhIE1hcmlhbmEiLCJjaXR5IjoiU8OjbyBQYXVsbyIsInN0YXRlIjoiU1AiLCJ6aXBfY29kZSI6IjY5MTE4IiwiYW1yIjpbInB3ZCJdfQ.GgmXjnkWhdFCYGdtEqIXNWssjnJY1jlKZ12ALaFHtdVGOo7ZMhZBtmVpHIpSYGaBJUx42OtuX_SeUEdNOOzn4rZ4lWiVnxa6ke-LS1Ld0AtuXJrSgfe5kzfK39iUcX2iS6xKzrKrEsAPMaSpChRQfDuf7vq3ouLoRt2MWXWKvUbee_rjpjrvkGzfMSi7LQnlngRNmOMM3V-XZlK91N9H7LYCT8s3dthbK-9itQJ21zAnwN1aTKoPdWJn3UrZnDP0uOMIeaJ_GvteY1tDX0v-C7W-X5R7A-yYW2P0u74xN2ehkDY9a7q_UhVt1ZHw6WL_fzUYObg67MdpPqudujQauQ",
    "state": "CfDJ8NAcRCUm0GVNkKIoZ2xr21W7EA1kJ0YBhQ_Y-du7VCQm-CGWfb8pW7axGZZunUTts_n-y5mvyQggbrUl7kPnzBzrgP3N4D_5fzZMdDn2DOTiutTprGY6onzEqQpAed9vEhM9bBbEka5rLoMjE2zCny7sduy37dKqPTtIVT7e5fi6",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 13:28:22.083 +00:00 [DBG] Success validating end session request from MVC
2019-01-26 13:28:22.134 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-01-26 13:28:22.135 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:28:22.140 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-01-26 13:28:22.143 +00:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLK3I7C0Q9QC:0000000C",
  "TimeStamp": "2019-01-26T13:28:22Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:28:23.731 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 13:28:23.731 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 13:28:23.732 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 13:28:23.732 +00:00 [DBG] Start authorize request
2019-01-26 13:28:23.732 +00:00 [DBG] No user present in authorize request
2019-01-26 13:28:23.732 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 13:28:23.733 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:28:23.734 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 13:28:23.734 +00:00 [DBG] No PKCE used.
2019-01-26 13:28:23.735 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:28:23.735 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8NAcRCUm0GVNkKIoZ2xr21UZXGbIj99TIWKY-WfgqyHxddAs7qHI9-9n9aXuTN0_eNPYKXTuPIlDZ4CtQVD4zFjbCxSzTOHoFVwYZGCY67kW_gsTdEeQkuUPvU82K_rhKhBNjOViWDSU0pgFN6zb0yosR6CdxDxNApsZmWD_-G_ipjXNOr1dm_dUoLQa_fQbjElQ1yWIWeg5Y2xlSnymdQ-27Ug-Ajqq3aqHfHNV6CPxy_3Ys5Nr1Li4xn8ETBFe4_KOHbUB04TMMsm_IJxLZ99BlvvBBrYLv0jAw7v0HZ0thfvutmJCRxltmAQXvtWtYcdwJWLdh__fETnWIiUrtoE",
  "Nonce": "636841061037173028.OTQ2N2RiMTMtMTcyMy00Mjk3LThkNzgtN2VkMzEyNmMwNjZhODdkOTFiOWItMjMwNC00ODgxLThkYTAtZGE2ZTVmNjdkMDg3",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636841061037173028.OTQ2N2RiMTMtMTcyMy00Mjk3LThkNzgtN2VkMzEyNmMwNjZhODdkOTFiOWItMjMwNC00ODgxLThkYTAtZGE2ZTVmNjdkMDg3",
    "state": "CfDJ8NAcRCUm0GVNkKIoZ2xr21UZXGbIj99TIWKY-WfgqyHxddAs7qHI9-9n9aXuTN0_eNPYKXTuPIlDZ4CtQVD4zFjbCxSzTOHoFVwYZGCY67kW_gsTdEeQkuUPvU82K_rhKhBNjOViWDSU0pgFN6zb0yosR6CdxDxNApsZmWD_-G_ipjXNOr1dm_dUoLQa_fQbjElQ1yWIWeg5Y2xlSnymdQ-27Ug-Ajqq3aqHfHNV6CPxy_3Ys5Nr1Li4xn8ETBFe4_KOHbUB04TMMsm_IJxLZ99BlvvBBrYLv0jAw7v0HZ0thfvutmJCRxltmAQXvtWtYcdwJWLdh__fETnWIiUrtoE",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 13:28:23.736 +00:00 [INF] Showing login: User is not authenticated
2019-01-26 13:28:23.748 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 13:28:23.748 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:28:23.749 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 13:28:23.749 +00:00 [DBG] No PKCE used.
2019-01-26 13:28:23.750 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:28:23.750 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:28:26.160 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-26 13:28:26.222 +00:00 [DBG] Augmenting SignInContext
2019-01-26 13:28:26.223 +00:00 [DBG] Adding idp claim with value: local
2019-01-26 13:28:26.223 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-26 13:28:26.223 +00:00 [DBG] Adding auth_time claim with value: 1548509306
2019-01-26 13:28:26.224 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:28:26.232 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK3I7C0Q9QC:0000000F",
  "TimeStamp": "2019-01-26T13:28:26Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:28:26.246 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 13:28:26.248 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 13:28:26.251 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 13:28:26.253 +00:00 [DBG] Start authorize callback request
2019-01-26 13:28:26.254 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-26 13:28:26.254 +00:00 [DBG] Start authorize request protocol validation
2019-01-26 13:28:26.255 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:28:26.255 +00:00 [DBG] Checking for PKCE parameters
2019-01-26 13:28:26.255 +00:00 [DBG] No PKCE used.
2019-01-26 13:28:26.256 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:28:26.256 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8NAcRCUm0GVNkKIoZ2xr21UZXGbIj99TIWKY-WfgqyHxddAs7qHI9-9n9aXuTN0_eNPYKXTuPIlDZ4CtQVD4zFjbCxSzTOHoFVwYZGCY67kW_gsTdEeQkuUPvU82K_rhKhBNjOViWDSU0pgFN6zb0yosR6CdxDxNApsZmWD_-G_ipjXNOr1dm_dUoLQa_fQbjElQ1yWIWeg5Y2xlSnymdQ-27Ug-Ajqq3aqHfHNV6CPxy_3Ys5Nr1Li4xn8ETBFe4_KOHbUB04TMMsm_IJxLZ99BlvvBBrYLv0jAw7v0HZ0thfvutmJCRxltmAQXvtWtYcdwJWLdh__fETnWIiUrtoE",
  "Nonce": "636841061037173028.OTQ2N2RiMTMtMTcyMy00Mjk3LThkNzgtN2VkMzEyNmMwNjZhODdkOTFiOWItMjMwNC00ODgxLThkYTAtZGE2ZTVmNjdkMDg3",
  "SessionId": "8fc851b117091c202a860b6a7835d3ed",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636841061037173028.OTQ2N2RiMTMtMTcyMy00Mjk3LThkNzgtN2VkMzEyNmMwNjZhODdkOTFiOWItMjMwNC00ODgxLThkYTAtZGE2ZTVmNjdkMDg3",
    "state": "CfDJ8NAcRCUm0GVNkKIoZ2xr21UZXGbIj99TIWKY-WfgqyHxddAs7qHI9-9n9aXuTN0_eNPYKXTuPIlDZ4CtQVD4zFjbCxSzTOHoFVwYZGCY67kW_gsTdEeQkuUPvU82K_rhKhBNjOViWDSU0pgFN6zb0yosR6CdxDxNApsZmWD_-G_ipjXNOr1dm_dUoLQa_fQbjElQ1yWIWeg5Y2xlSnymdQ-27Ug-Ajqq3aqHfHNV6CPxy_3Ys5Nr1Li4xn8ETBFe4_KOHbUB04TMMsm_IJxLZ99BlvvBBrYLv0jAw7v0HZ0thfvutmJCRxltmAQXvtWtYcdwJWLdh__fETnWIiUrtoE",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-26 13:28:26.258 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-26 13:28:26.259 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-26 13:28:26.282 +00:00 [DBG] Creating Implicit Flow response.
2019-01-26 13:28:26.283 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-26 13:28:26.306 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****F_MQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****c316"
    }
  ],
  "ActivityId": "0HLK3I7C0Q9QC:00000010",
  "TimeStamp": "2019-01-26T13:28:26Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:28:26.307 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8NAcRCUm0GVNkKIoZ2xr21UZXGbIj99TIWKY-WfgqyHxddAs7qHI9-9n9aXuTN0_eNPYKXTuPIlDZ4CtQVD4zFjbCxSzTOHoFVwYZGCY67kW_gsTdEeQkuUPvU82K_rhKhBNjOViWDSU0pgFN6zb0yosR6CdxDxNApsZmWD_-G_ipjXNOr1dm_dUoLQa_fQbjElQ1yWIWeg5Y2xlSnymdQ-27Ug-Ajqq3aqHfHNV6CPxy_3Ys5Nr1Li4xn8ETBFe4_KOHbUB04TMMsm_IJxLZ99BlvvBBrYLv0jAw7v0HZ0thfvutmJCRxltmAQXvtWtYcdwJWLdh__fETnWIiUrtoE",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-26 13:28:26.308 +00:00 [DBG] Augmenting SignInContext
2019-01-26 13:28:26.312 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:28:26.501 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 13:28:26.503 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 13:28:26.503 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 13:28:26.504 +00:00 [DBG] Start token request.
2019-01-26 13:28:26.504 +00:00 [DBG] Start client validation
2019-01-26 13:28:26.505 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 13:28:26.505 +00:00 [DBG] Start parsing for secret in post body
2019-01-26 13:28:26.509 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-26 13:28:26.510 +00:00 [DBG] Secret id found: MVC
2019-01-26 13:28:26.510 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:28:26.511 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 13:28:26.511 +00:00 [DBG] Client validation success
2019-01-26 13:28:26.512 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK3I7C0Q9QA:00000007",
  "TimeStamp": "2019-01-26T13:28:26Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:28:26.513 +00:00 [DBG] Start token request validation
2019-01-26 13:28:26.514 +00:00 [DBG] Start validation of authorization code token request
2019-01-26 13:28:26.571 +00:00 [DBG] Validation of authorization code token request success
2019-01-26 13:28:26.572 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "7233b5238e83987e356357e1e913c124c75a87695086fc1d0180f92e8e31c316",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "7233b5238e83987e356357e1e913c124c75a87695086fc1d0180f92e8e31c316",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-26 13:28:26.573 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:28:26.585 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 13:28:26.585 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-26 13:28:26.646 +00:00 [DBG] Creating refresh token
2019-01-26 13:28:26.646 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-26 13:28:26.673 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:28:26.674 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-26 13:28:26.706 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****YV2A"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****1379"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****-Ejg"
    }
  ],
  "ActivityId": "0HLK3I7C0Q9QA:00000007",
  "TimeStamp": "2019-01-26T13:28:26Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:28:26.706 +00:00 [DBG] Token request success.
2019-01-26 13:28:26.720 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-26 13:28:26.725 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-26 13:28:26.725 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-26 13:28:26.725 +00:00 [DBG] Start userinfo request
2019-01-26 13:28:26.726 +00:00 [DBG] Bearer token found in header
2019-01-26 13:28:26.726 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:28:26.727 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:28:26.727 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-26 13:28:26.727 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548509306,
    "exp": 1548512906,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548509306,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Mariana",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-26 13:28:26.728 +00:00 [DBG] Creating userinfo response
2019-01-26 13:28:26.728 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 13:28:26.728 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 13:28:26.729 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-26 13:28:26.729 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-26 13:28:26.788 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-26 13:28:26.788 +00:00 [DBG] End userinfo request
2019-01-26 13:28:27.162 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 13:28:27.162 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 13:28:27.162 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 13:28:27.162 +00:00 [DBG] Start token request.
2019-01-26 13:28:27.162 +00:00 [DBG] Start client validation
2019-01-26 13:28:27.162 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 13:28:27.162 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-26 13:28:27.162 +00:00 [DBG] Secret id found: MVC
2019-01-26 13:28:27.162 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:28:27.162 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 13:28:27.162 +00:00 [DBG] Client validation success
2019-01-26 13:28:27.163 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK3I7C0Q9QK:00000001",
  "TimeStamp": "2019-01-26T13:28:27Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:28:27.197 +00:00 [DBG] Start token request validation
2019-01-26 13:28:27.197 +00:00 [DBG] Start client credentials token request validation
2019-01-26 13:28:27.198 +00:00 [DBG] MVC credentials token request validation success
2019-01-26 13:28:27.198 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-26 13:28:27.198 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 13:28:27.201 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****VYfg"
    }
  ],
  "ActivityId": "0HLK3I7C0Q9QK:00000001",
  "TimeStamp": "2019-01-26T13:28:27Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:28:27.201 +00:00 [DBG] Token request success.
2019-01-26 13:28:35.733 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-26 13:28:35.734 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-26 13:28:35.734 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-26 13:28:35.735 +00:00 [DBG] Start token request.
2019-01-26 13:28:35.736 +00:00 [DBG] Start client validation
2019-01-26 13:28:35.737 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-26 13:28:35.737 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-26 13:28:35.737 +00:00 [DBG] Secret id found: MVC
2019-01-26 13:28:35.738 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-26 13:28:35.740 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-26 13:28:35.741 +00:00 [DBG] Client validation success
2019-01-26 13:28:35.741 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK3I7C0Q9QL:00000001",
  "TimeStamp": "2019-01-26T13:28:35Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:28:35.762 +00:00 [DBG] Start token request validation
2019-01-26 13:28:35.762 +00:00 [DBG] Start client credentials token request validation
2019-01-26 13:28:35.763 +00:00 [DBG] MVC credentials token request validation success
2019-01-26 13:28:35.763 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-26 13:28:35.763 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-26 13:28:35.773 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****367g"
    }
  ],
  "ActivityId": "0HLK3I7C0Q9QL:00000001",
  "TimeStamp": "2019-01-26T13:28:35Z",
  "ProcessId": 18,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-26 13:28:35.773 +00:00 [DBG] Token request success.
2019-01-26 13:28:36.004 +00:00 [INF] Message received:
2019-01-26 13:28:36.004 +00:00 [INF] ----------------------------------
2019-01-26 13:28:36.004 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"ef596d6f-8867-48d2-8974-36d02ddf85a0","CreationDate":"2019-01-26T13:28:35.9998804Z"}
2019-01-26 13:28:36.007 +00:00 [INF] ----------------------------------
2019-01-26 13:28:45.564 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens a403c542-017b-41da-b988-62f69a199173 to 1 handlers took 9559 ms
2019-01-26 14:13:02.560 +00:00 [WRN] No XML encryptor configured. Key "6f3776d6-1751-4f0a-bf32-d79d5029ff8c" may be persisted to storage in unencrypted form.
2019-01-26 14:13:03.801 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-26 14:13:05.302 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-26 14:13:05.381 +00:00 [INF] Setting number of workers to 1
2019-01-26 14:13:05.398 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-26 14:13:05.438 +00:00 [INF] Bus Rebus 1 started
2019-01-26 14:13:05.458 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-26 14:13:05.574 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-26 14:13:05.651 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-26 14:13:05.726 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-26 14:13:05.730 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-26 14:13:05.733 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-26 14:13:05.737 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-26 14:13:05.738 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-26 14:21:31.333 +00:00 [WRN] No XML encryptor configured. Key "e0bbb14a-091e-4a28-8ee4-7faa82ded141" may be persisted to storage in unencrypted form.
2019-01-26 14:21:32.581 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-26 14:21:34.108 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-26 14:21:34.178 +00:00 [INF] Setting number of workers to 1
2019-01-26 14:21:34.245 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-26 14:21:34.268 +00:00 [INF] Bus Rebus 1 started
2019-01-26 14:21:34.315 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-26 14:21:34.581 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-26 14:21:34.714 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-26 14:21:34.765 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-26 14:21:34.771 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-26 14:21:34.773 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-26 14:21:34.774 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-26 14:21:34.775 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-26 16:26:33.998 +00:00 [WRN] An error occurred when attempting to receive the next message: Rebus.Exceptions.RebusApplicationException: Queue throw EndOfStreamException(meaning it was canceled by rabbitmq) ---> System.IO.EndOfStreamException: SharedQueue closed
   at RabbitMQ.Util.SharedQueue`1.EnsureIsOpen()
   at RabbitMQ.Util.SharedQueue`1.Dequeue(Int32 millisecondsTimeout, T& result)
   at Rebus.RabbitMq.RabbitMqTransport.Receive(ITransactionContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Rebus.RabbitMq.RabbitMqTransport.Receive(ITransactionContext context, CancellationToken cancellationToken)
   at Rebus.Workers.ThreadPoolBased.ThreadPoolWorker.ReceiveTransportMessage(CancellationToken token, ITransactionContext context) in C:\projects-rebus\Rebus\Rebus\Workers\ThreadPoolBased\ThreadPoolWorker.cs:line 136
2019-01-26 16:26:34.118 +00:00 [INF] Existing connection found to be CLOSED
2019-01-26 16:26:34.371 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-26 17:02:14.552 +00:00 [WRN] No XML encryptor configured. Key "9e91051c-266c-47a3-8131-f5a94c745340" may be persisted to storage in unencrypted form.
2019-01-26 17:02:16.532 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-26 17:02:18.599 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-26 17:02:18.716 +00:00 [INF] Setting number of workers to 1
2019-01-26 17:02:18.744 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-26 17:02:18.774 +00:00 [INF] Bus Rebus 1 started
2019-01-26 17:02:18.784 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-26 17:02:19.094 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-26 17:02:19.148 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-26 17:02:19.237 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-26 17:02:19.298 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-26 17:02:19.299 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-26 17:02:19.303 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-26 17:02:19.315 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-26 17:07:44.962 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-26 17:07:48.010 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-26 17:07:48.125 +00:00 [INF] Setting number of workers to 1
2019-01-26 17:07:48.146 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-26 17:07:48.173 +00:00 [INF] Bus Rebus 1 started
2019-01-26 17:07:48.256 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-26 17:07:48.564 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-26 17:07:48.626 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-26 17:07:48.678 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-26 17:07:48.679 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-26 17:07:48.680 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-26 17:07:48.689 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-26 17:07:48.693 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-26 17:10:50.041 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-26 17:10:52.808 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-26 17:10:52.968 +00:00 [INF] Setting number of workers to 1
2019-01-26 17:10:53.018 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-26 17:10:53.115 +00:00 [INF] Bus Rebus 1 started
2019-01-26 17:10:53.115 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-26 17:10:53.404 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-26 17:10:53.579 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-26 17:10:53.656 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-26 17:10:53.658 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-26 17:10:53.659 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-26 17:10:53.659 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-26 17:10:53.660 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-26 18:08:20.609 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-26 18:08:22.825 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-26 18:08:22.975 +00:00 [INF] Setting number of workers to 1
2019-01-26 18:08:23.024 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-26 18:08:23.142 +00:00 [INF] Bus Rebus 1 started
2019-01-26 18:08:23.224 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-26 18:08:23.678 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-26 18:08:23.846 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-26 18:08:23.912 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-26 18:08:23.914 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-26 18:08:23.917 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-26 18:08:23.923 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-26 18:08:23.924 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-26 18:13:50.349 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-26 18:13:52.881 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-26 18:13:53.031 +00:00 [INF] Setting number of workers to 1
2019-01-26 18:13:53.072 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-26 18:13:53.151 +00:00 [INF] Bus Rebus 1 started
2019-01-26 18:13:53.164 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-26 18:13:53.635 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-26 18:13:53.730 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-26 18:13:53.814 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-26 18:13:53.832 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-26 18:13:53.864 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-26 18:13:53.879 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-26 18:13:53.895 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-27 20:19:29.482 +00:00 [WRN] No XML encryptor configured. Key "0039d883-88a6-4bc3-b3ef-12427f6b2cfa" may be persisted to storage in unencrypted form.
2019-01-27 20:19:30.711 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-27 20:19:32.373 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-27 20:19:32.672 +00:00 [INF] Setting number of workers to 1
2019-01-27 20:19:32.739 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-27 20:19:32.761 +00:00 [INF] Bus Rebus 1 started
2019-01-27 20:19:32.871 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-27 20:19:32.957 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-27 20:19:33.005 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-27 20:19:33.024 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-27 20:19:33.026 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-27 20:19:33.027 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-27 20:19:33.027 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-27 20:19:33.028 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-27 20:39:20.207 +00:00 [WRN] No XML encryptor configured. Key "34842329-217d-44e1-859f-ebe90191aafe" may be persisted to storage in unencrypted form.
2019-01-27 20:39:21.764 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-27 20:39:23.975 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-27 20:39:24.115 +00:00 [INF] Setting number of workers to 1
2019-01-27 20:39:24.182 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-27 20:39:24.322 +00:00 [INF] Bus Rebus 1 started
2019-01-27 20:39:24.355 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-27 20:39:25.041 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-27 20:39:25.092 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-27 20:39:25.150 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-27 20:39:25.155 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-27 20:39:25.156 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-27 20:39:25.157 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-27 20:39:25.158 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-27 21:04:45.056 +00:00 [WRN] No XML encryptor configured. Key "427cde1c-87c3-4513-95de-23edd97999ba" may be persisted to storage in unencrypted form.
2019-01-27 21:04:46.569 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-27 21:04:48.557 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-27 21:04:48.665 +00:00 [INF] Setting number of workers to 1
2019-01-27 21:04:48.685 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-27 21:04:48.713 +00:00 [INF] Bus Rebus 1 started
2019-01-27 21:04:48.722 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-27 21:04:48.791 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-27 21:04:48.952 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-27 21:04:48.991 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-27 21:04:48.994 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-27 21:04:48.997 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-27 21:04:48.998 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-27 21:04:49.000 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-27 21:06:22.793 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-27 21:06:25.153 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-27 21:06:25.338 +00:00 [INF] Setting number of workers to 1
2019-01-27 21:06:25.519 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-27 21:06:25.617 +00:00 [INF] Bus Rebus 1 started
2019-01-27 21:06:25.676 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-27 21:06:26.032 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-27 21:06:26.117 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-27 21:06:26.187 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-27 21:06:26.188 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-27 21:06:26.189 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-27 21:06:26.190 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-27 21:06:26.191 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-27 21:15:32.236 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-27 21:15:34.050 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-27 21:15:34.175 +00:00 [INF] Setting number of workers to 1
2019-01-27 21:15:34.263 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-27 21:15:34.419 +00:00 [INF] Bus Rebus 1 started
2019-01-27 21:15:34.432 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-27 21:15:34.699 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-27 21:15:34.890 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-27 21:15:35.011 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-27 21:15:35.085 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-27 21:15:35.087 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-27 21:15:35.098 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-27 21:15:35.102 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-27 21:17:57.793 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-27 21:17:58.072 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-27 21:17:58.074 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-27 21:17:58.082 +00:00 [DBG] Start discovery request
2019-01-27 21:17:58.246 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-27 21:17:58.248 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-27 21:17:58.249 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-27 21:17:58.261 +00:00 [DBG] Start key discovery request
2019-01-27 21:17:58.434 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-27 21:17:58.444 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-27 21:17:58.445 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-27 21:17:58.455 +00:00 [DBG] Start authorize request
2019-01-27 21:17:58.486 +00:00 [DBG] No user present in authorize request
2019-01-27 21:17:58.496 +00:00 [DBG] Start authorize request protocol validation
2019-01-27 21:17:58.512 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:17:58.520 +00:00 [DBG] Checking for PKCE parameters
2019-01-27 21:17:58.523 +00:00 [DBG] No PKCE used.
2019-01-27 21:17:58.569 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-27 21:17:58.587 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8LbfqR2HUa9Eg1JdObOcVK96EDWWHEBydGF2gLVmuJVk0YwmVp-iiizKXo-78jd4AAcTPmJTrDyCszC4rQQUO4Yovhw55pInOJTsrUvbdQ-PEN-RVZaAO6zhe37ELdZcVeyrSK_NTNT0bFtBuhJA-iKkW8iawu6Udy5kcPC4yJFOHpXDDMk6M5u1FjPx9luQoNBysEQVxAQbRWmZSBajcE4sbH1bQBTKPM-TZYKXzYmW_STuVV5vLDPTmj4hyG9X-UqbATTKpH8KKViC1JJ_LEdrWfxfiIvkUXKf_BkLwvCWFIYp_1vIPFN6qjHc-oRl9Xes310rUhhH84ZIAS-QapA",
  "Nonce": "636842206783488055.YjcwMTJjZDQtMTI5NS00NTMyLTk4MDYtNzZjNzkxMTUyNDAyZTNmNGRhZWQtNjhmNy00YTE0LWI3ZTctZjQ2ZWY2YWQ2ZDcx",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636842206783488055.YjcwMTJjZDQtMTI5NS00NTMyLTk4MDYtNzZjNzkxMTUyNDAyZTNmNGRhZWQtNjhmNy00YTE0LWI3ZTctZjQ2ZWY2YWQ2ZDcx",
    "state": "CfDJ8LbfqR2HUa9Eg1JdObOcVK96EDWWHEBydGF2gLVmuJVk0YwmVp-iiizKXo-78jd4AAcTPmJTrDyCszC4rQQUO4Yovhw55pInOJTsrUvbdQ-PEN-RVZaAO6zhe37ELdZcVeyrSK_NTNT0bFtBuhJA-iKkW8iawu6Udy5kcPC4yJFOHpXDDMk6M5u1FjPx9luQoNBysEQVxAQbRWmZSBajcE4sbH1bQBTKPM-TZYKXzYmW_STuVV5vLDPTmj4hyG9X-UqbATTKpH8KKViC1JJ_LEdrWfxfiIvkUXKf_BkLwvCWFIYp_1vIPFN6qjHc-oRl9Xes310rUhhH84ZIAS-QapA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-27 21:17:58.602 +00:00 [INF] Showing login: User is not authenticated
2019-01-27 21:17:58.961 +00:00 [DBG] Start authorize request protocol validation
2019-01-27 21:17:58.962 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:17:58.963 +00:00 [DBG] Checking for PKCE parameters
2019-01-27 21:17:58.964 +00:00 [DBG] No PKCE used.
2019-01-27 21:17:58.969 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-27 21:17:58.976 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:18:01.751 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-27 21:18:02.971 +00:00 [DBG] Augmenting SignInContext
2019-01-27 21:18:02.976 +00:00 [DBG] Adding idp claim with value: local
2019-01-27 21:18:02.977 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-27 21:18:02.977 +00:00 [DBG] Adding auth_time claim with value: 1548623882
2019-01-27 21:18:02.997 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-27 21:18:03.042 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK4JJKCCPOF:00000002",
  "TimeStamp": "2019-01-27T21:18:03Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:18:03.075 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-27 21:18:03.076 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-27 21:18:03.076 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-27 21:18:03.087 +00:00 [DBG] Start authorize callback request
2019-01-27 21:18:03.094 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-27 21:18:03.094 +00:00 [DBG] Start authorize request protocol validation
2019-01-27 21:18:03.094 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:18:03.095 +00:00 [DBG] Checking for PKCE parameters
2019-01-27 21:18:03.095 +00:00 [DBG] No PKCE used.
2019-01-27 21:18:03.095 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-27 21:18:03.100 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8LbfqR2HUa9Eg1JdObOcVK96EDWWHEBydGF2gLVmuJVk0YwmVp-iiizKXo-78jd4AAcTPmJTrDyCszC4rQQUO4Yovhw55pInOJTsrUvbdQ-PEN-RVZaAO6zhe37ELdZcVeyrSK_NTNT0bFtBuhJA-iKkW8iawu6Udy5kcPC4yJFOHpXDDMk6M5u1FjPx9luQoNBysEQVxAQbRWmZSBajcE4sbH1bQBTKPM-TZYKXzYmW_STuVV5vLDPTmj4hyG9X-UqbATTKpH8KKViC1JJ_LEdrWfxfiIvkUXKf_BkLwvCWFIYp_1vIPFN6qjHc-oRl9Xes310rUhhH84ZIAS-QapA",
  "Nonce": "636842206783488055.YjcwMTJjZDQtMTI5NS00NTMyLTk4MDYtNzZjNzkxMTUyNDAyZTNmNGRhZWQtNjhmNy00YTE0LWI3ZTctZjQ2ZWY2YWQ2ZDcx",
  "SessionId": "e66a6058f91753dda4333fe6ad948561",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636842206783488055.YjcwMTJjZDQtMTI5NS00NTMyLTk4MDYtNzZjNzkxMTUyNDAyZTNmNGRhZWQtNjhmNy00YTE0LWI3ZTctZjQ2ZWY2YWQ2ZDcx",
    "state": "CfDJ8LbfqR2HUa9Eg1JdObOcVK96EDWWHEBydGF2gLVmuJVk0YwmVp-iiizKXo-78jd4AAcTPmJTrDyCszC4rQQUO4Yovhw55pInOJTsrUvbdQ-PEN-RVZaAO6zhe37ELdZcVeyrSK_NTNT0bFtBuhJA-iKkW8iawu6Udy5kcPC4yJFOHpXDDMk6M5u1FjPx9luQoNBysEQVxAQbRWmZSBajcE4sbH1bQBTKPM-TZYKXzYmW_STuVV5vLDPTmj4hyG9X-UqbATTKpH8KKViC1JJ_LEdrWfxfiIvkUXKf_BkLwvCWFIYp_1vIPFN6qjHc-oRl9Xes310rUhhH84ZIAS-QapA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-27 21:18:03.126 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-27 21:18:03.138 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-27 21:18:03.175 +00:00 [DBG] Creating Implicit Flow response.
2019-01-27 21:18:03.191 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-27 21:18:03.323 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****F26w"
    },
    {
      "TokenType": "code",
      "TokenValue": "****ed8b"
    }
  ],
  "ActivityId": "0HLK4JJKCCPOF:00000003",
  "TimeStamp": "2019-01-27T21:18:03Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:18:03.339 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8LbfqR2HUa9Eg1JdObOcVK96EDWWHEBydGF2gLVmuJVk0YwmVp-iiizKXo-78jd4AAcTPmJTrDyCszC4rQQUO4Yovhw55pInOJTsrUvbdQ-PEN-RVZaAO6zhe37ELdZcVeyrSK_NTNT0bFtBuhJA-iKkW8iawu6Udy5kcPC4yJFOHpXDDMk6M5u1FjPx9luQoNBysEQVxAQbRWmZSBajcE4sbH1bQBTKPM-TZYKXzYmW_STuVV5vLDPTmj4hyG9X-UqbATTKpH8KKViC1JJ_LEdrWfxfiIvkUXKf_BkLwvCWFIYp_1vIPFN6qjHc-oRl9Xes310rUhhH84ZIAS-QapA",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-27 21:18:03.376 +00:00 [DBG] Augmenting SignInContext
2019-01-27 21:18:03.377 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-27 21:18:03.864 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-27 21:18:03.872 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-27 21:18:03.872 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-27 21:18:03.886 +00:00 [DBG] Start token request.
2019-01-27 21:18:03.895 +00:00 [DBG] Start client validation
2019-01-27 21:18:03.905 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-27 21:18:03.911 +00:00 [DBG] Start parsing for secret in post body
2019-01-27 21:18:03.915 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-27 21:18:03.916 +00:00 [DBG] Secret id found: MVC
2019-01-27 21:18:03.916 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:18:03.932 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-27 21:18:03.933 +00:00 [DBG] Client validation success
2019-01-27 21:18:03.939 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4JJKCCPOD:00000003",
  "TimeStamp": "2019-01-27T21:18:03Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:18:03.956 +00:00 [DBG] Start token request validation
2019-01-27 21:18:03.969 +00:00 [DBG] Start validation of authorization code token request
2019-01-27 21:18:03.995 +00:00 [DBG] Validation of authorization code token request success
2019-01-27 21:18:04.003 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "80247023e72c55045a8c717f3b682391e0cc0238d2e5a67d808b17a986b5ed8b",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "80247023e72c55045a8c717f3b682391e0cc0238d2e5a67d808b17a986b5ed8b",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-27 21:18:04.025 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:18:04.040 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-27 21:18:04.041 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-27 21:18:04.062 +00:00 [DBG] Creating refresh token
2019-01-27 21:18:04.062 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-27 21:18:04.082 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:18:04.083 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-27 21:18:04.103 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****HxWg"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****32c9"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****-w6Q"
    }
  ],
  "ActivityId": "0HLK4JJKCCPOD:00000003",
  "TimeStamp": "2019-01-27T21:18:04Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:18:04.106 +00:00 [DBG] Token request success.
2019-01-27 21:18:04.162 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-27 21:18:04.163 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-27 21:18:04.163 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-27 21:18:04.183 +00:00 [DBG] Start userinfo request
2019-01-27 21:18:04.192 +00:00 [DBG] Bearer token found in header
2019-01-27 21:18:04.272 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:18:04.277 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:18:04.278 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-27 21:18:04.284 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548623884,
    "exp": 1548627484,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548623882,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Galvão",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-27 21:18:04.296 +00:00 [DBG] Creating userinfo response
2019-01-27 21:18:04.305 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-27 21:18:04.310 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-27 21:18:04.315 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-27 21:18:04.316 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-27 21:18:04.329 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-27 21:18:04.330 +00:00 [DBG] End userinfo request
2019-01-27 21:18:04.880 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-27 21:18:04.888 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-27 21:18:04.890 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-27 21:18:04.894 +00:00 [DBG] Start token request.
2019-01-27 21:18:04.896 +00:00 [DBG] Start client validation
2019-01-27 21:18:04.898 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-27 21:18:04.901 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-27 21:18:04.903 +00:00 [DBG] Secret id found: MVC
2019-01-27 21:18:04.904 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:18:04.905 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-27 21:18:04.905 +00:00 [DBG] Client validation success
2019-01-27 21:18:04.907 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4JJKCCPOG:00000001",
  "TimeStamp": "2019-01-27T21:18:04Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:18:04.915 +00:00 [DBG] Start token request validation
2019-01-27 21:18:04.941 +00:00 [DBG] Start client credentials token request validation
2019-01-27 21:18:04.957 +00:00 [DBG] MVC credentials token request validation success
2019-01-27 21:18:04.959 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-27 21:18:04.970 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-27 21:18:04.984 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Hkaw"
    }
  ],
  "ActivityId": "0HLK4JJKCCPOG:00000001",
  "TimeStamp": "2019-01-27T21:18:04Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:18:04.984 +00:00 [DBG] Token request success.
2019-01-27 21:18:05.478 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-27 21:18:05.479 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-27 21:18:05.479 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-27 21:18:05.479 +00:00 [DBG] Start discovery request
2019-01-27 21:18:05.549 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-27 21:18:05.550 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-27 21:18:05.551 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-27 21:18:05.552 +00:00 [DBG] Start key discovery request
2019-01-27 21:18:13.182 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-27 21:18:13.182 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-27 21:18:13.183 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-27 21:18:13.183 +00:00 [DBG] Start token request.
2019-01-27 21:18:13.183 +00:00 [DBG] Start client validation
2019-01-27 21:18:13.183 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-27 21:18:13.183 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-27 21:18:13.183 +00:00 [DBG] Secret id found: MVC
2019-01-27 21:18:13.183 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:18:13.183 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-27 21:18:13.183 +00:00 [DBG] Client validation success
2019-01-27 21:18:13.183 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4JJKCCPOI:00000001",
  "TimeStamp": "2019-01-27T21:18:13Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:18:13.198 +00:00 [DBG] Start token request validation
2019-01-27 21:18:13.198 +00:00 [DBG] Start client credentials token request validation
2019-01-27 21:18:13.198 +00:00 [DBG] MVC credentials token request validation success
2019-01-27 21:18:13.199 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-27 21:18:13.199 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-27 21:18:13.203 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****HWaQ"
    }
  ],
  "ActivityId": "0HLK4JJKCCPOI:00000001",
  "TimeStamp": "2019-01-27T21:18:13Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:18:13.203 +00:00 [DBG] Token request success.
2019-01-27 21:18:15.154 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-27 21:18:15.154 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-27 21:18:15.154 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-27 21:18:15.154 +00:00 [DBG] Start token request.
2019-01-27 21:18:15.154 +00:00 [DBG] Start client validation
2019-01-27 21:18:15.154 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-27 21:18:15.155 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-27 21:18:15.155 +00:00 [DBG] Secret id found: MVC
2019-01-27 21:18:15.155 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:18:15.155 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-27 21:18:15.155 +00:00 [DBG] Client validation success
2019-01-27 21:18:15.155 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4JJKCCPOJ:00000001",
  "TimeStamp": "2019-01-27T21:18:15Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:18:15.160 +00:00 [DBG] Start token request validation
2019-01-27 21:18:15.160 +00:00 [DBG] Start client credentials token request validation
2019-01-27 21:18:15.160 +00:00 [DBG] MVC credentials token request validation success
2019-01-27 21:18:15.161 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-27 21:18:15.164 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-27 21:18:15.199 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****pakw"
    }
  ],
  "ActivityId": "0HLK4JJKCCPOJ:00000001",
  "TimeStamp": "2019-01-27T21:18:15Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:18:15.200 +00:00 [DBG] Token request success.
2019-01-27 21:18:21.103 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-27 21:18:21.103 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-27 21:18:21.104 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-27 21:18:21.104 +00:00 [DBG] Start token request.
2019-01-27 21:18:21.104 +00:00 [DBG] Start client validation
2019-01-27 21:18:21.104 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-27 21:18:21.104 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-27 21:18:21.104 +00:00 [DBG] Secret id found: MVC
2019-01-27 21:18:21.104 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:18:21.104 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-27 21:18:21.104 +00:00 [DBG] Client validation success
2019-01-27 21:18:21.104 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4JJKCCPOK:00000001",
  "TimeStamp": "2019-01-27T21:18:21Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:18:21.137 +00:00 [DBG] Start token request validation
2019-01-27 21:18:21.137 +00:00 [DBG] Start client credentials token request validation
2019-01-27 21:18:21.138 +00:00 [DBG] MVC credentials token request validation success
2019-01-27 21:18:21.138 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-27 21:18:21.138 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-27 21:18:21.154 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****5_7A"
    }
  ],
  "ActivityId": "0HLK4JJKCCPOK:00000001",
  "TimeStamp": "2019-01-27T21:18:21Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:18:21.155 +00:00 [DBG] Token request success.
2019-01-27 21:18:22.073 +00:00 [WRN] Unhandled exception [1,"c0c8aabc-5759-483e-abd4-1ddc06e1a93f"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID c0c8aabc-5759-483e-abd4-1ddc06e1a93f and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-01-27 21:18:22.139 +00:00 [ERR] Moving message with ID ["c0c8aabc-5759-483e-abd4-1ddc06e1a93f","error"] to error queue System.AggregateException: 1 unhandled exceptions (Message with ID c0c8aabc-5759-483e-abd4-1ddc06e1a93f and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)) ---> Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID c0c8aabc-5759-483e-abd4-1ddc06e1a93f and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
   --- End of inner exception stack trace ---
---> (Inner Exception #0) Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID c0c8aabc-5759-483e-abd4-1ddc06e1a93f and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114<---

2019-01-27 21:18:22.298 +00:00 [INF] Message received:
2019-01-27 21:18:22.298 +00:00 [INF] ----------------------------------
2019-01-27 21:18:22.310 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"97c1dbe9-3b63-45e9-82d3-c0e0bdd78891","CreationDate":"2019-01-27T21:18:22.250513Z"}
2019-01-27 21:18:22.311 +00:00 [INF] ----------------------------------
2019-01-27 21:18:40.574 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens b33c3edd-c8d0-44f0-b1e6-a144bb1ea197 to 1 handlers took 18282 ms
2019-01-27 21:18:58.582 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-27 21:18:58.586 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-27 21:18:58.586 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-27 21:18:58.587 +00:00 [DBG] Start token request.
2019-01-27 21:18:58.588 +00:00 [DBG] Start client validation
2019-01-27 21:18:58.589 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-27 21:18:58.590 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-27 21:18:58.591 +00:00 [DBG] Secret id found: MVC
2019-01-27 21:18:58.593 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:18:58.595 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-27 21:18:58.597 +00:00 [DBG] Client validation success
2019-01-27 21:18:58.604 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4JJKCCPOL:00000001",
  "TimeStamp": "2019-01-27T21:18:58Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:18:58.613 +00:00 [DBG] Start token request validation
2019-01-27 21:18:58.617 +00:00 [DBG] Start client credentials token request validation
2019-01-27 21:18:58.618 +00:00 [DBG] MVC credentials token request validation success
2019-01-27 21:18:58.622 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-27 21:18:58.623 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-27 21:18:58.628 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****-jNw"
    }
  ],
  "ActivityId": "0HLK4JJKCCPOL:00000001",
  "TimeStamp": "2019-01-27T21:18:58Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:18:58.630 +00:00 [DBG] Token request success.
2019-01-27 21:19:02.056 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-27 21:19:02.057 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-27 21:19:02.059 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-27 21:19:02.062 +00:00 [DBG] Start token request.
2019-01-27 21:19:02.065 +00:00 [DBG] Start client validation
2019-01-27 21:19:02.073 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-27 21:19:02.075 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-27 21:19:02.077 +00:00 [DBG] Secret id found: MVC
2019-01-27 21:19:02.079 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:19:02.080 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-27 21:19:02.082 +00:00 [DBG] Client validation success
2019-01-27 21:19:02.091 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4JJKCCPOM:00000001",
  "TimeStamp": "2019-01-27T21:19:02Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:19:02.105 +00:00 [DBG] Start token request validation
2019-01-27 21:19:02.107 +00:00 [DBG] Start client credentials token request validation
2019-01-27 21:19:02.113 +00:00 [DBG] MVC credentials token request validation success
2019-01-27 21:19:02.114 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-27 21:19:02.116 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-27 21:19:02.120 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****mONA"
    }
  ],
  "ActivityId": "0HLK4JJKCCPOM:00000001",
  "TimeStamp": "2019-01-27T21:19:02Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:19:02.135 +00:00 [DBG] Token request success.
2019-01-27 21:19:02.367 +00:00 [INF] Message received:
2019-01-27 21:19:02.367 +00:00 [INF] ----------------------------------
2019-01-27 21:19:02.367 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"6c13ba53-1837-4eea-a453-c572d73fad04","CreationDate":"2019-01-27T21:19:02.3667452Z"}
2019-01-27 21:19:02.367 +00:00 [INF] ----------------------------------
2019-01-27 21:19:03.159 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens edeefc4a-6584-4a4f-92a0-b375c8a62a8b to 1 handlers took 792 ms
2019-01-27 21:19:09.250 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-27 21:19:09.296 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-27 21:19:09.296 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-27 21:19:09.296 +00:00 [DBG] Start token request.
2019-01-27 21:19:09.296 +00:00 [DBG] Start client validation
2019-01-27 21:19:09.296 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-27 21:19:09.296 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-27 21:19:09.296 +00:00 [DBG] Secret id found: MVC
2019-01-27 21:19:09.297 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:19:09.297 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-27 21:19:09.297 +00:00 [DBG] Client validation success
2019-01-27 21:19:09.297 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4JJKCCPON:00000001",
  "TimeStamp": "2019-01-27T21:19:09Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:19:09.318 +00:00 [DBG] Start token request validation
2019-01-27 21:19:09.319 +00:00 [DBG] Start client credentials token request validation
2019-01-27 21:19:09.320 +00:00 [DBG] MVC credentials token request validation success
2019-01-27 21:19:09.320 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-27 21:19:09.321 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-27 21:19:09.326 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****KyYg"
    }
  ],
  "ActivityId": "0HLK4JJKCCPON:00000001",
  "TimeStamp": "2019-01-27T21:19:09Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:19:09.327 +00:00 [DBG] Token request success.
2019-01-27 21:19:12.115 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-27 21:19:12.115 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-27 21:19:12.115 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-27 21:19:12.115 +00:00 [DBG] Start token request.
2019-01-27 21:19:12.115 +00:00 [DBG] Start client validation
2019-01-27 21:19:12.115 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-27 21:19:12.116 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-27 21:19:12.116 +00:00 [DBG] Secret id found: MVC
2019-01-27 21:19:12.116 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:19:12.116 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-27 21:19:12.116 +00:00 [DBG] Client validation success
2019-01-27 21:19:12.116 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4JJKCCPOO:00000001",
  "TimeStamp": "2019-01-27T21:19:12Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:19:12.130 +00:00 [DBG] Start token request validation
2019-01-27 21:19:12.130 +00:00 [DBG] Start client credentials token request validation
2019-01-27 21:19:12.131 +00:00 [DBG] MVC credentials token request validation success
2019-01-27 21:19:12.135 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-27 21:19:12.136 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-27 21:19:12.147 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****GAHA"
    }
  ],
  "ActivityId": "0HLK4JJKCCPOO:00000001",
  "TimeStamp": "2019-01-27T21:19:12Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:19:12.154 +00:00 [DBG] Token request success.
2019-01-27 21:19:12.419 +00:00 [INF] Message received:
2019-01-27 21:19:12.419 +00:00 [INF] ----------------------------------
2019-01-27 21:19:12.419 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"e615f2dd-c6cb-4c65-a98a-09023cb0a301","CreationDate":"2019-01-27T21:19:12.419271Z"}
2019-01-27 21:19:12.419 +00:00 [INF] ----------------------------------
2019-01-27 21:19:13.069 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 9a23df87-b4db-4bd5-a9b2-41d1111b93cb to 1 handlers took 649 ms
2019-01-27 21:19:16.288 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-27 21:19:16.289 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-27 21:19:16.289 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-27 21:19:16.289 +00:00 [DBG] Start token request.
2019-01-27 21:19:16.289 +00:00 [DBG] Start client validation
2019-01-27 21:19:16.289 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-27 21:19:16.289 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-27 21:19:16.289 +00:00 [DBG] Secret id found: MVC
2019-01-27 21:19:16.289 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:19:16.289 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-27 21:19:16.289 +00:00 [DBG] Client validation success
2019-01-27 21:19:16.289 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4JJKCCPOP:00000001",
  "TimeStamp": "2019-01-27T21:19:16Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:19:16.304 +00:00 [DBG] Start token request validation
2019-01-27 21:19:16.304 +00:00 [DBG] Start client credentials token request validation
2019-01-27 21:19:16.305 +00:00 [DBG] MVC credentials token request validation success
2019-01-27 21:19:16.305 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-27 21:19:16.305 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-27 21:19:16.308 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Fifw"
    }
  ],
  "ActivityId": "0HLK4JJKCCPOP:00000001",
  "TimeStamp": "2019-01-27T21:19:16Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:19:16.308 +00:00 [DBG] Token request success.
2019-01-27 21:19:18.963 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-27 21:19:18.964 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-27 21:19:18.964 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-27 21:19:18.966 +00:00 [DBG] Start token request.
2019-01-27 21:19:18.967 +00:00 [DBG] Start client validation
2019-01-27 21:19:18.967 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-27 21:19:18.968 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-27 21:19:18.969 +00:00 [DBG] Secret id found: MVC
2019-01-27 21:19:18.969 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:19:18.969 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-27 21:19:18.969 +00:00 [DBG] Client validation success
2019-01-27 21:19:18.970 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4JJKCCPOQ:00000001",
  "TimeStamp": "2019-01-27T21:19:18Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:19:18.981 +00:00 [DBG] Start token request validation
2019-01-27 21:19:18.981 +00:00 [DBG] Start client credentials token request validation
2019-01-27 21:19:18.982 +00:00 [DBG] MVC credentials token request validation success
2019-01-27 21:19:18.982 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-27 21:19:18.982 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-27 21:19:18.988 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****VFXg"
    }
  ],
  "ActivityId": "0HLK4JJKCCPOQ:00000001",
  "TimeStamp": "2019-01-27T21:19:18Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:19:18.991 +00:00 [DBG] Token request success.
2019-01-27 21:19:19.211 +00:00 [INF] Message received:
2019-01-27 21:19:19.211 +00:00 [INF] ----------------------------------
2019-01-27 21:19:19.212 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"d520997a-e3c4-47d4-a359-973d34607d69","CreationDate":"2019-01-27T21:19:19.2113043Z"}
2019-01-27 21:19:19.212 +00:00 [INF] ----------------------------------
2019-01-27 21:19:19.862 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 83dcae97-5f1f-484d-b1a9-5f794632ee87 to 1 handlers took 650 ms
2019-01-27 21:19:24.698 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-27 21:19:24.720 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-27 21:19:24.720 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-27 21:19:24.720 +00:00 [DBG] Start token request.
2019-01-27 21:19:24.720 +00:00 [DBG] Start client validation
2019-01-27 21:19:24.720 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-27 21:19:24.721 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-27 21:19:24.721 +00:00 [DBG] Secret id found: MVC
2019-01-27 21:19:24.721 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:19:24.721 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-27 21:19:24.721 +00:00 [DBG] Client validation success
2019-01-27 21:19:24.721 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4JJKCCPOR:00000001",
  "TimeStamp": "2019-01-27T21:19:24Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:19:24.747 +00:00 [DBG] Start token request validation
2019-01-27 21:19:24.747 +00:00 [DBG] Start client credentials token request validation
2019-01-27 21:19:24.748 +00:00 [DBG] MVC credentials token request validation success
2019-01-27 21:19:24.749 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-27 21:19:24.749 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-27 21:19:24.758 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****qcxA"
    }
  ],
  "ActivityId": "0HLK4JJKCCPOR:00000001",
  "TimeStamp": "2019-01-27T21:19:24Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:19:24.759 +00:00 [DBG] Token request success.
2019-01-27 21:19:27.563 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-27 21:19:27.564 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-27 21:19:27.564 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-27 21:19:27.565 +00:00 [DBG] Start token request.
2019-01-27 21:19:27.566 +00:00 [DBG] Start client validation
2019-01-27 21:19:27.567 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-27 21:19:27.568 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-27 21:19:27.568 +00:00 [DBG] Secret id found: MVC
2019-01-27 21:19:27.568 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-27 21:19:27.568 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-27 21:19:27.568 +00:00 [DBG] Client validation success
2019-01-27 21:19:27.568 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4JJKCCPOS:00000001",
  "TimeStamp": "2019-01-27T21:19:27Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:19:27.577 +00:00 [DBG] Start token request validation
2019-01-27 21:19:27.579 +00:00 [DBG] Start client credentials token request validation
2019-01-27 21:19:27.582 +00:00 [DBG] MVC credentials token request validation success
2019-01-27 21:19:27.583 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-27 21:19:27.583 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-27 21:19:27.589 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****-oYg"
    }
  ],
  "ActivityId": "0HLK4JJKCCPOS:00000001",
  "TimeStamp": "2019-01-27T21:19:27Z",
  "ProcessId": 167,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-27 21:19:27.589 +00:00 [DBG] Token request success.
2019-01-27 21:19:27.805 +00:00 [INF] Message received:
2019-01-27 21:19:27.805 +00:00 [INF] ----------------------------------
2019-01-27 21:19:27.805 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"2e06bafb-2756-4f66-bc7c-1c72c7c3aac1","CreationDate":"2019-01-27T21:19:27.8051955Z"}
2019-01-27 21:19:27.805 +00:00 [INF] ----------------------------------
2019-01-27 21:19:28.508 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 7c3ddcae-ccee-41ae-8dbb-43a91d6692be to 1 handlers took 703 ms
2019-01-28 00:35:37.852 +00:00 [WRN] No XML encryptor configured. Key "41e73afd-ea8b-4a19-9c72-f7fee93e424c" may be persisted to storage in unencrypted form.
2019-01-28 00:35:39.599 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 00:35:41.613 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 00:35:41.717 +00:00 [INF] Setting number of workers to 1
2019-01-28 00:35:41.767 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 00:35:41.781 +00:00 [INF] Bus Rebus 1 started
2019-01-28 00:35:41.826 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 00:35:41.964 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 00:35:41.998 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 00:35:42.097 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 00:35:42.103 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 00:35:42.104 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 00:35:42.104 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 00:35:42.108 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 00:40:26.657 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 00:40:29.287 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 00:40:29.448 +00:00 [INF] Setting number of workers to 1
2019-01-28 00:40:29.472 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 00:40:29.549 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 00:40:29.558 +00:00 [INF] Bus Rebus 1 started
2019-01-28 00:40:29.858 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 00:40:29.994 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 00:40:30.116 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 00:40:30.125 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 00:40:30.146 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 00:40:30.150 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 00:40:30.154 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 00:42:50.480 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 00:42:52.985 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 00:42:53.049 +00:00 [INF] Setting number of workers to 1
2019-01-28 00:42:53.078 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 00:42:53.114 +00:00 [INF] Bus Rebus 1 started
2019-01-28 00:42:53.156 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 00:42:53.363 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 00:42:53.405 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 00:42:53.462 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 00:42:53.472 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 00:42:53.474 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 00:42:53.476 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 00:42:53.478 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 00:46:38.964 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 00:46:40.591 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 00:46:40.763 +00:00 [INF] Setting number of workers to 1
2019-01-28 00:46:40.785 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 00:46:40.827 +00:00 [INF] Bus Rebus 1 started
2019-01-28 00:46:41.015 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 00:46:41.212 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 00:46:41.253 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 00:46:41.296 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 00:46:41.297 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 00:46:41.298 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 00:46:41.299 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 00:46:41.299 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 00:49:44.624 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 00:49:46.032 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 00:49:46.112 +00:00 [INF] Setting number of workers to 1
2019-01-28 00:49:46.139 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 00:49:46.158 +00:00 [INF] Bus Rebus 1 started
2019-01-28 00:49:46.243 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 00:49:46.367 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 00:49:46.520 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 00:49:46.592 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 00:49:46.598 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 00:49:46.603 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 00:49:46.604 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 00:49:46.614 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 00:55:30.352 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 00:55:32.588 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 00:55:32.729 +00:00 [INF] Setting number of workers to 1
2019-01-28 00:55:32.767 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 00:55:32.798 +00:00 [INF] Bus Rebus 1 started
2019-01-28 00:55:32.799 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 00:55:33.375 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 00:55:33.493 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 00:55:33.576 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 00:55:33.592 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 00:55:33.607 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 00:55:33.620 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 00:55:33.623 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 01:10:22.097 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 01:10:23.810 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 01:10:23.912 +00:00 [INF] Setting number of workers to 1
2019-01-28 01:10:23.975 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 01:10:24.040 +00:00 [INF] Bus Rebus 1 started
2019-01-28 01:10:24.083 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 01:10:24.363 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 01:10:24.421 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 01:10:24.456 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 01:10:24.457 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 01:10:24.458 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 01:10:24.459 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 01:10:24.459 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 01:20:39.160 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 01:20:41.839 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 01:20:42.024 +00:00 [INF] Setting number of workers to 1
2019-01-28 01:20:42.061 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 01:20:42.094 +00:00 [INF] Bus Rebus 1 started
2019-01-28 01:20:42.178 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 01:20:42.447 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 01:20:42.536 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 01:20:42.593 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 01:20:42.596 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 01:20:42.607 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 01:20:42.610 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 01:20:42.618 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 01:26:51.527 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 01:26:53.632 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 01:26:53.815 +00:00 [INF] Setting number of workers to 1
2019-01-28 01:26:53.850 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 01:26:53.892 +00:00 [INF] Bus Rebus 1 started
2019-01-28 01:26:53.917 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 01:26:54.083 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 01:26:54.126 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 01:26:54.173 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 01:26:54.176 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 01:26:54.178 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 01:26:54.180 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 01:26:54.188 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 01:32:43.073 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 01:32:44.508 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 01:32:44.617 +00:00 [INF] Setting number of workers to 1
2019-01-28 01:32:44.669 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 01:32:44.688 +00:00 [INF] Bus Rebus 1 started
2019-01-28 01:32:44.782 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 01:32:44.963 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 01:32:45.047 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 01:32:45.109 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 01:32:45.110 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 01:32:45.111 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 01:32:45.116 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 01:32:45.119 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 01:34:47.565 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 01:34:47.835 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 01:34:47.835 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 01:34:47.847 +00:00 [DBG] Start discovery request
2019-01-28 01:34:48.063 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-28 01:34:48.084 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-28 01:34:48.090 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-28 01:34:48.126 +00:00 [DBG] Start key discovery request
2019-01-28 01:34:48.296 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 01:34:48.297 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 01:34:48.301 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 01:34:48.311 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 01:34:48.311 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 01:34:48.318 +00:00 [DBG] Start authorize request
2019-01-28 01:34:48.330 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 01:34:48.338 +00:00 [DBG] No user present in authorize request
2019-01-28 01:34:48.348 +00:00 [DBG] Start authorize request protocol validation
2019-01-28 01:34:48.364 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 01:34:48.375 +00:00 [DBG] Checking for PKCE parameters
2019-01-28 01:34:48.377 +00:00 [DBG] No PKCE used.
2019-01-28 01:34:48.437 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 01:34:48.452 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8MtwZM_hS2hGsubAOCOlW2GEtMGg9ddP_KsgmmM-4VqzxBMfOUgn0QeykXZiOHkVsK88116V44se9Ml4xedmg7QIff1PicOwYvP3991l8JIsITabc_1XOGI-1shazuq9UR4WDpUmzcBTzBTm7IxnXRCzuxeHfddudByKZ1vd5Yx_CQrAl7bRInkbv3xLFWeDeWx6h5BOnWw_aemQFHunTEc5vm6cqLB26BI6vUwIXdVRWV2EJeT-mREvhAJtL3EsBdOLQ5tEn1x8INt55kduHOTKhOshkdawe_bPOicXpIt8-z53AIVIVw4ZdHWSEyMVTAllVU1plrBvCNtCOlE_aZM",
  "Nonce": "636842360882057215.ZWRiMTkzYWYtODczMS00ZjYyLWExMjctZjEyNTM0MWM2NWEwMmY1MzIxZjYtZmNkZC00MTYxLTg4YTYtZDgyMjM0NGZlYTAz",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636842360882057215.ZWRiMTkzYWYtODczMS00ZjYyLWExMjctZjEyNTM0MWM2NWEwMmY1MzIxZjYtZmNkZC00MTYxLTg4YTYtZDgyMjM0NGZlYTAz",
    "state": "CfDJ8MtwZM_hS2hGsubAOCOlW2GEtMGg9ddP_KsgmmM-4VqzxBMfOUgn0QeykXZiOHkVsK88116V44se9Ml4xedmg7QIff1PicOwYvP3991l8JIsITabc_1XOGI-1shazuq9UR4WDpUmzcBTzBTm7IxnXRCzuxeHfddudByKZ1vd5Yx_CQrAl7bRInkbv3xLFWeDeWx6h5BOnWw_aemQFHunTEc5vm6cqLB26BI6vUwIXdVRWV2EJeT-mREvhAJtL3EsBdOLQ5tEn1x8INt55kduHOTKhOshkdawe_bPOicXpIt8-z53AIVIVw4ZdHWSEyMVTAllVU1plrBvCNtCOlE_aZM",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-28 01:34:48.471 +00:00 [INF] Showing login: User is not authenticated
2019-01-28 01:34:48.489 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 01:34:48.489 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 01:34:48.866 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 01:34:48.867 +00:00 [DBG] Start authorize request protocol validation
2019-01-28 01:34:48.868 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 01:34:48.868 +00:00 [DBG] Checking for PKCE parameters
2019-01-28 01:34:48.869 +00:00 [DBG] No PKCE used.
2019-01-28 01:34:48.871 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 01:34:48.876 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 01:34:52.024 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-28 01:34:52.025 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 01:34:52.025 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 01:34:53.272 +00:00 [DBG] Augmenting SignInContext
2019-01-28 01:34:53.277 +00:00 [DBG] Adding idp claim with value: local
2019-01-28 01:34:53.277 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-28 01:34:53.278 +00:00 [DBG] Adding auth_time claim with value: 1548639293
2019-01-28 01:34:53.284 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 01:34:53.301 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-28 01:34:53.341 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK4O34RE6NG:00000004",
  "TimeStamp": "2019-01-28T01:34:53Z",
  "ProcessId": 1489,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-28 01:34:53.371 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-28 01:34:53.373 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-28 01:34:53.373 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-28 01:34:53.384 +00:00 [DBG] Start authorize callback request
2019-01-28 01:34:53.404 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-28 01:34:53.404 +00:00 [DBG] Start authorize request protocol validation
2019-01-28 01:34:53.405 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 01:34:53.405 +00:00 [DBG] Checking for PKCE parameters
2019-01-28 01:34:53.406 +00:00 [DBG] No PKCE used.
2019-01-28 01:34:53.406 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 01:34:53.407 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8MtwZM_hS2hGsubAOCOlW2GEtMGg9ddP_KsgmmM-4VqzxBMfOUgn0QeykXZiOHkVsK88116V44se9Ml4xedmg7QIff1PicOwYvP3991l8JIsITabc_1XOGI-1shazuq9UR4WDpUmzcBTzBTm7IxnXRCzuxeHfddudByKZ1vd5Yx_CQrAl7bRInkbv3xLFWeDeWx6h5BOnWw_aemQFHunTEc5vm6cqLB26BI6vUwIXdVRWV2EJeT-mREvhAJtL3EsBdOLQ5tEn1x8INt55kduHOTKhOshkdawe_bPOicXpIt8-z53AIVIVw4ZdHWSEyMVTAllVU1plrBvCNtCOlE_aZM",
  "Nonce": "636842360882057215.ZWRiMTkzYWYtODczMS00ZjYyLWExMjctZjEyNTM0MWM2NWEwMmY1MzIxZjYtZmNkZC00MTYxLTg4YTYtZDgyMjM0NGZlYTAz",
  "SessionId": "2cbba1dcb965d3f1e2b2ce1fa03040f5",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636842360882057215.ZWRiMTkzYWYtODczMS00ZjYyLWExMjctZjEyNTM0MWM2NWEwMmY1MzIxZjYtZmNkZC00MTYxLTg4YTYtZDgyMjM0NGZlYTAz",
    "state": "CfDJ8MtwZM_hS2hGsubAOCOlW2GEtMGg9ddP_KsgmmM-4VqzxBMfOUgn0QeykXZiOHkVsK88116V44se9Ml4xedmg7QIff1PicOwYvP3991l8JIsITabc_1XOGI-1shazuq9UR4WDpUmzcBTzBTm7IxnXRCzuxeHfddudByKZ1vd5Yx_CQrAl7bRInkbv3xLFWeDeWx6h5BOnWw_aemQFHunTEc5vm6cqLB26BI6vUwIXdVRWV2EJeT-mREvhAJtL3EsBdOLQ5tEn1x8INt55kduHOTKhOshkdawe_bPOicXpIt8-z53AIVIVw4ZdHWSEyMVTAllVU1plrBvCNtCOlE_aZM",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-28 01:34:53.429 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-28 01:34:53.444 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-28 01:34:53.496 +00:00 [DBG] Creating Implicit Flow response.
2019-01-28 01:34:53.515 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-28 01:34:53.690 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****pwRA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****aa94"
    }
  ],
  "ActivityId": "0HLK4O34RE6NG:00000005",
  "TimeStamp": "2019-01-28T01:34:53Z",
  "ProcessId": 1489,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-28 01:34:53.708 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8MtwZM_hS2hGsubAOCOlW2GEtMGg9ddP_KsgmmM-4VqzxBMfOUgn0QeykXZiOHkVsK88116V44se9Ml4xedmg7QIff1PicOwYvP3991l8JIsITabc_1XOGI-1shazuq9UR4WDpUmzcBTzBTm7IxnXRCzuxeHfddudByKZ1vd5Yx_CQrAl7bRInkbv3xLFWeDeWx6h5BOnWw_aemQFHunTEc5vm6cqLB26BI6vUwIXdVRWV2EJeT-mREvhAJtL3EsBdOLQ5tEn1x8INt55kduHOTKhOshkdawe_bPOicXpIt8-z53AIVIVw4ZdHWSEyMVTAllVU1plrBvCNtCOlE_aZM",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-28 01:34:53.740 +00:00 [DBG] Augmenting SignInContext
2019-01-28 01:34:53.742 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-28 01:34:54.159 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-28 01:34:54.164 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-28 01:34:54.164 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-28 01:34:54.183 +00:00 [DBG] Start token request.
2019-01-28 01:34:54.197 +00:00 [DBG] Start client validation
2019-01-28 01:34:54.211 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-28 01:34:54.222 +00:00 [DBG] Start parsing for secret in post body
2019-01-28 01:34:54.232 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-28 01:34:54.232 +00:00 [DBG] Secret id found: MVC
2019-01-28 01:34:54.234 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 01:34:54.263 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-28 01:34:54.263 +00:00 [DBG] Client validation success
2019-01-28 01:34:54.276 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4O34RE6NF:00000003",
  "TimeStamp": "2019-01-28T01:34:54Z",
  "ProcessId": 1489,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-28 01:34:54.293 +00:00 [DBG] Start token request validation
2019-01-28 01:34:54.314 +00:00 [DBG] Start validation of authorization code token request
2019-01-28 01:34:54.343 +00:00 [DBG] Validation of authorization code token request success
2019-01-28 01:34:54.351 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "a49def12591235486ff4e561b56525ff59902aa339f759f084183d48133eaa94",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "a49def12591235486ff4e561b56525ff59902aa339f759f084183d48133eaa94",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-28 01:34:54.375 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 01:34:54.392 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-28 01:34:54.393 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-28 01:34:54.414 +00:00 [DBG] Creating refresh token
2019-01-28 01:34:54.414 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-28 01:34:54.434 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 01:34:54.435 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-28 01:34:54.455 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****4qyQ"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****78e8"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Il6A"
    }
  ],
  "ActivityId": "0HLK4O34RE6NF:00000003",
  "TimeStamp": "2019-01-28T01:34:54Z",
  "ProcessId": 1489,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-28 01:34:54.461 +00:00 [DBG] Token request success.
2019-01-28 01:34:54.506 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-28 01:34:54.511 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-28 01:34:54.514 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-28 01:34:54.528 +00:00 [DBG] Start userinfo request
2019-01-28 01:34:54.534 +00:00 [DBG] Bearer token found in header
2019-01-28 01:34:54.614 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 01:34:54.620 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 01:34:54.623 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-28 01:34:54.630 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548639294,
    "exp": 1548642894,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548639293,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Galvão",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-28 01:34:54.649 +00:00 [DBG] Creating userinfo response
2019-01-28 01:34:54.662 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-28 01:34:54.668 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-28 01:34:54.679 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-28 01:34:54.680 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-28 01:34:54.694 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-28 01:34:54.698 +00:00 [DBG] End userinfo request
2019-01-28 01:34:55.200 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-28 01:34:55.200 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-28 01:34:55.200 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-28 01:34:55.200 +00:00 [DBG] Start token request.
2019-01-28 01:34:55.200 +00:00 [DBG] Start client validation
2019-01-28 01:34:55.201 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-28 01:34:55.201 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-28 01:34:55.201 +00:00 [DBG] Secret id found: MVC
2019-01-28 01:34:55.201 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 01:34:55.201 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-28 01:34:55.201 +00:00 [DBG] Client validation success
2019-01-28 01:34:55.201 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4O34RE6NI:00000001",
  "TimeStamp": "2019-01-28T01:34:55Z",
  "ProcessId": 1489,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-28 01:34:55.229 +00:00 [DBG] Start token request validation
2019-01-28 01:34:55.256 +00:00 [DBG] Start client credentials token request validation
2019-01-28 01:34:55.266 +00:00 [DBG] MVC credentials token request validation success
2019-01-28 01:34:55.269 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-28 01:34:55.291 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-28 01:34:55.300 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****9oLQ"
    }
  ],
  "ActivityId": "0HLK4O34RE6NI:00000001",
  "TimeStamp": "2019-01-28T01:34:55Z",
  "ProcessId": 1489,
  "LocalIpAddress": "172.19.0.9:80",
  "RemoteIpAddress": "172.19.0.1"
}
2019-01-28 01:34:55.314 +00:00 [DBG] Token request success.
2019-01-28 01:34:55.844 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 01:34:55.844 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 01:34:55.845 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 01:34:55.845 +00:00 [DBG] Start discovery request
2019-01-28 01:34:55.995 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-28 01:34:55.996 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-28 01:34:55.996 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-28 01:34:55.996 +00:00 [DBG] Start key discovery request
2019-01-28 01:44:46.460 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 01:44:49.561 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 01:44:49.742 +00:00 [INF] Setting number of workers to 1
2019-01-28 01:44:49.787 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 01:44:49.807 +00:00 [INF] Bus Rebus 1 started
2019-01-28 01:44:49.845 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 01:44:50.181 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 01:44:50.221 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 01:44:50.337 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 01:44:50.338 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 01:44:50.340 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 01:44:50.349 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 01:44:50.357 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 01:59:58.663 +00:00 [WRN] No XML encryptor configured. Key "a87742ba-2c15-4169-8c90-2181b7f19df9" may be persisted to storage in unencrypted form.
2019-01-28 01:59:59.963 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 02:00:01.650 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 02:00:01.782 +00:00 [INF] Setting number of workers to 1
2019-01-28 02:00:01.819 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 02:00:01.873 +00:00 [INF] Bus Rebus 1 started
2019-01-28 02:00:01.914 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 02:00:02.217 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 02:00:02.283 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 02:00:02.342 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 02:00:02.345 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 02:00:02.345 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 02:00:02.346 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 02:00:02.347 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 02:07:47.477 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 02:07:49.242 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 02:07:49.381 +00:00 [INF] Setting number of workers to 1
2019-01-28 02:07:49.421 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 02:07:49.457 +00:00 [INF] Bus Rebus 1 started
2019-01-28 02:07:49.458 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 02:07:49.669 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 02:07:49.763 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 02:07:49.817 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 02:07:49.831 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 02:07:49.834 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 02:07:49.836 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 02:07:49.839 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 02:18:34.495 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 02:18:36.226 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 02:18:36.392 +00:00 [INF] Setting number of workers to 1
2019-01-28 02:18:36.414 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 02:18:36.428 +00:00 [INF] Bus Rebus 1 started
2019-01-28 02:18:36.492 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 02:18:36.673 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 02:18:36.742 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 02:18:36.788 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 02:18:36.793 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 02:18:36.794 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 02:18:36.795 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 02:18:36.800 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 02:23:08.195 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 02:23:09.984 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 02:23:10.340 +00:00 [INF] Setting number of workers to 1
2019-01-28 02:23:10.367 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 02:23:10.384 +00:00 [INF] Bus Rebus 1 started
2019-01-28 02:23:10.417 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 02:23:10.623 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 02:23:10.709 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 02:23:10.745 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 02:23:10.749 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 02:23:10.749 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 02:23:10.749 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 02:23:10.750 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 02:33:58.999 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 02:34:01.058 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 02:34:01.165 +00:00 [INF] Setting number of workers to 1
2019-01-28 02:34:01.313 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 02:34:01.378 +00:00 [INF] Bus Rebus 1 started
2019-01-28 02:34:01.428 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 02:34:01.736 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 02:34:01.799 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 02:34:01.886 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 02:34:01.906 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 02:34:01.931 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 02:34:01.934 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 02:34:01.936 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 02:36:29.776 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 02:36:32.335 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 02:36:32.471 +00:00 [INF] Setting number of workers to 1
2019-01-28 02:36:32.543 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 02:36:32.579 +00:00 [INF] Bus Rebus 1 started
2019-01-28 02:36:32.660 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 02:36:32.860 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 02:36:32.940 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 02:36:32.976 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 02:36:32.986 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 02:36:32.989 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 02:36:32.993 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 02:36:32.996 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 02:40:47.174 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 02:40:49.085 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 02:40:49.136 +00:00 [INF] Setting number of workers to 1
2019-01-28 02:40:49.219 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 02:40:49.233 +00:00 [INF] Bus Rebus 1 started
2019-01-28 02:40:49.306 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 02:40:49.578 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 02:40:49.655 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 02:40:49.743 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 02:40:49.753 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 02:40:49.754 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 02:40:49.754 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 02:40:49.755 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 02:43:06.813 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 02:43:08.640 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 02:43:08.791 +00:00 [INF] Setting number of workers to 1
2019-01-28 02:43:08.835 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 02:43:08.858 +00:00 [INF] Bus Rebus 1 started
2019-01-28 02:43:08.968 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 02:43:09.304 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 02:43:09.419 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 02:43:09.552 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 02:43:09.560 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 02:43:09.561 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 02:43:09.563 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 02:43:09.574 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 02:48:35.096 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 02:48:36.668 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 02:48:36.739 +00:00 [INF] Setting number of workers to 1
2019-01-28 02:48:36.758 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 02:48:36.799 +00:00 [INF] Bus Rebus 1 started
2019-01-28 02:48:36.848 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 02:48:37.044 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 02:48:37.102 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 02:48:37.148 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 02:48:37.151 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 02:48:37.152 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 02:48:37.153 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 02:48:37.154 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 02:52:31.382 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 02:52:33.477 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 02:52:33.605 +00:00 [INF] Setting number of workers to 1
2019-01-28 02:52:33.658 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 02:52:33.710 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 02:52:33.711 +00:00 [INF] Bus Rebus 1 started
2019-01-28 02:52:34.038 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 02:52:34.039 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 02:52:34.128 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 02:52:34.128 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 02:52:34.128 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 02:52:34.129 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 02:52:34.129 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 02:58:53.772 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 02:58:55.410 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 02:58:55.505 +00:00 [INF] Setting number of workers to 1
2019-01-28 02:58:55.539 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 02:58:55.562 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 02:58:55.564 +00:00 [INF] Bus Rebus 1 started
2019-01-28 02:58:55.907 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 02:58:55.986 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 02:58:56.020 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 02:58:56.029 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 02:58:56.033 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 02:58:56.034 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 02:58:56.040 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 03:02:54.487 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 03:02:55.868 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 03:02:55.995 +00:00 [INF] Setting number of workers to 1
2019-01-28 03:02:56.029 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 03:02:56.118 +00:00 [INF] Bus Rebus 1 started
2019-01-28 03:02:56.120 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 03:02:56.312 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 03:02:56.371 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 03:02:56.400 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 03:02:56.407 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 03:02:56.438 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 03:02:56.440 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 03:02:56.442 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 03:07:49.379 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-28 03:07:51.210 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-28 03:07:51.373 +00:00 [INF] Setting number of workers to 1
2019-01-28 03:07:51.408 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-28 03:07:51.456 +00:00 [INF] Bus Rebus 1 started
2019-01-28 03:07:51.523 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-28 03:07:51.850 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-28 03:07:51.944 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-28 03:07:51.979 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-28 03:07:51.980 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-28 03:07:51.981 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-28 03:07:51.981 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-28 03:07:51.981 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-28 03:08:53.814 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 03:08:54.066 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 03:08:54.069 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 03:08:54.076 +00:00 [DBG] Start discovery request
2019-01-28 03:08:54.290 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-28 03:08:54.291 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-28 03:08:54.304 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-28 03:08:54.352 +00:00 [DBG] Start key discovery request
2019-01-28 03:08:54.537 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 03:08:54.537 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 03:08:54.542 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 03:08:54.550 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 03:08:54.551 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 03:08:54.557 +00:00 [DBG] Start authorize request
2019-01-28 03:08:54.573 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 03:08:54.582 +00:00 [DBG] No user present in authorize request
2019-01-28 03:08:54.591 +00:00 [DBG] Start authorize request protocol validation
2019-01-28 03:08:54.613 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:08:54.622 +00:00 [DBG] Checking for PKCE parameters
2019-01-28 03:08:54.627 +00:00 [DBG] No PKCE used.
2019-01-28 03:08:54.679 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 03:08:54.697 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8HoriBNJ1bdGip5HtOdaKDAaDden5m4i3SFo6WkDCU03lraIA-WxpzUZuChdLDWOy1-bdzfuKpF0245YKBXwd12TS81Q0ofnci54WPaoDBtAFIR30WwMXxM5W2R_69ns1ckXXrouCqwpzkmOrE3Nw1B1CSjWNmtqiHijtY1Ylqc8HkBYTjyLJzp8uoFmm_Vofr9g4FerJ_XyekvqwnlXri1tZjaL3VzETyilTzpRj2QSiUWQqAAvixXMJKKnpC4Fl3IYrzQc6DgNLK_lT7ZgPIw6tMQURqv0ONwenGjNQ0D3Jgcgzg19tpvbAnr4vio7k6j6cXQXazu-DfJpywOJJaE",
  "Nonce": "636842417344509512.ZDY0YTdlMDQtZjEyYS00OTUxLTgyODctYzFiZGFjN2NmNzMxYTI2NzA0MTQtZjk2NC00NGRhLWI0YjAtM2QyNDBjZWY2NjY0",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636842417344509512.ZDY0YTdlMDQtZjEyYS00OTUxLTgyODctYzFiZGFjN2NmNzMxYTI2NzA0MTQtZjk2NC00NGRhLWI0YjAtM2QyNDBjZWY2NjY0",
    "state": "CfDJ8HoriBNJ1bdGip5HtOdaKDAaDden5m4i3SFo6WkDCU03lraIA-WxpzUZuChdLDWOy1-bdzfuKpF0245YKBXwd12TS81Q0ofnci54WPaoDBtAFIR30WwMXxM5W2R_69ns1ckXXrouCqwpzkmOrE3Nw1B1CSjWNmtqiHijtY1Ylqc8HkBYTjyLJzp8uoFmm_Vofr9g4FerJ_XyekvqwnlXri1tZjaL3VzETyilTzpRj2QSiUWQqAAvixXMJKKnpC4Fl3IYrzQc6DgNLK_lT7ZgPIw6tMQURqv0ONwenGjNQ0D3Jgcgzg19tpvbAnr4vio7k6j6cXQXazu-DfJpywOJJaE",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-28 03:08:54.724 +00:00 [INF] Showing login: User is not authenticated
2019-01-28 03:08:54.742 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 03:08:54.742 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 03:08:55.106 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 03:08:55.107 +00:00 [DBG] Start authorize request protocol validation
2019-01-28 03:08:55.112 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:08:55.112 +00:00 [DBG] Checking for PKCE parameters
2019-01-28 03:08:55.112 +00:00 [DBG] No PKCE used.
2019-01-28 03:08:55.112 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 03:08:55.118 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:08:57.999 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-28 03:08:58.001 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 03:08:58.002 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 03:08:59.271 +00:00 [DBG] Augmenting SignInContext
2019-01-28 03:08:59.278 +00:00 [DBG] Adding idp claim with value: local
2019-01-28 03:08:59.278 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-28 03:08:59.279 +00:00 [DBG] Adding auth_time claim with value: 1548644939
2019-01-28 03:08:59.287 +00:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-01-28 03:08:59.302 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-28 03:08:59.330 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK4PNNIF6QC:00000004",
  "TimeStamp": "2019-01-28T03:08:59Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:08:59.359 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-28 03:08:59.360 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-28 03:08:59.361 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-28 03:08:59.372 +00:00 [DBG] Start authorize callback request
2019-01-28 03:08:59.381 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-28 03:08:59.382 +00:00 [DBG] Start authorize request protocol validation
2019-01-28 03:08:59.382 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:08:59.382 +00:00 [DBG] Checking for PKCE parameters
2019-01-28 03:08:59.382 +00:00 [DBG] No PKCE used.
2019-01-28 03:08:59.383 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 03:08:59.384 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8HoriBNJ1bdGip5HtOdaKDAaDden5m4i3SFo6WkDCU03lraIA-WxpzUZuChdLDWOy1-bdzfuKpF0245YKBXwd12TS81Q0ofnci54WPaoDBtAFIR30WwMXxM5W2R_69ns1ckXXrouCqwpzkmOrE3Nw1B1CSjWNmtqiHijtY1Ylqc8HkBYTjyLJzp8uoFmm_Vofr9g4FerJ_XyekvqwnlXri1tZjaL3VzETyilTzpRj2QSiUWQqAAvixXMJKKnpC4Fl3IYrzQc6DgNLK_lT7ZgPIw6tMQURqv0ONwenGjNQ0D3Jgcgzg19tpvbAnr4vio7k6j6cXQXazu-DfJpywOJJaE",
  "Nonce": "636842417344509512.ZDY0YTdlMDQtZjEyYS00OTUxLTgyODctYzFiZGFjN2NmNzMxYTI2NzA0MTQtZjk2NC00NGRhLWI0YjAtM2QyNDBjZWY2NjY0",
  "SessionId": "2720cd65b79a485185f729dcea51b048",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636842417344509512.ZDY0YTdlMDQtZjEyYS00OTUxLTgyODctYzFiZGFjN2NmNzMxYTI2NzA0MTQtZjk2NC00NGRhLWI0YjAtM2QyNDBjZWY2NjY0",
    "state": "CfDJ8HoriBNJ1bdGip5HtOdaKDAaDden5m4i3SFo6WkDCU03lraIA-WxpzUZuChdLDWOy1-bdzfuKpF0245YKBXwd12TS81Q0ofnci54WPaoDBtAFIR30WwMXxM5W2R_69ns1ckXXrouCqwpzkmOrE3Nw1B1CSjWNmtqiHijtY1Ylqc8HkBYTjyLJzp8uoFmm_Vofr9g4FerJ_XyekvqwnlXri1tZjaL3VzETyilTzpRj2QSiUWQqAAvixXMJKKnpC4Fl3IYrzQc6DgNLK_lT7ZgPIw6tMQURqv0ONwenGjNQ0D3Jgcgzg19tpvbAnr4vio7k6j6cXQXazu-DfJpywOJJaE",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-28 03:08:59.409 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-28 03:08:59.427 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-28 03:08:59.467 +00:00 [DBG] Creating Implicit Flow response.
2019-01-28 03:08:59.486 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-28 03:08:59.651 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****bYLw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****6c02"
    }
  ],
  "ActivityId": "0HLK4PNNIF6QC:00000005",
  "TimeStamp": "2019-01-28T03:08:59Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:08:59.667 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8HoriBNJ1bdGip5HtOdaKDAaDden5m4i3SFo6WkDCU03lraIA-WxpzUZuChdLDWOy1-bdzfuKpF0245YKBXwd12TS81Q0ofnci54WPaoDBtAFIR30WwMXxM5W2R_69ns1ckXXrouCqwpzkmOrE3Nw1B1CSjWNmtqiHijtY1Ylqc8HkBYTjyLJzp8uoFmm_Vofr9g4FerJ_XyekvqwnlXri1tZjaL3VzETyilTzpRj2QSiUWQqAAvixXMJKKnpC4Fl3IYrzQc6DgNLK_lT7ZgPIw6tMQURqv0ONwenGjNQ0D3Jgcgzg19tpvbAnr4vio7k6j6cXQXazu-DfJpywOJJaE",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-28 03:08:59.730 +00:00 [DBG] Augmenting SignInContext
2019-01-28 03:08:59.731 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-28 03:09:00.209 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-28 03:09:00.213 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-28 03:09:00.215 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-28 03:09:00.236 +00:00 [DBG] Start token request.
2019-01-28 03:09:00.249 +00:00 [DBG] Start client validation
2019-01-28 03:09:00.258 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-28 03:09:00.266 +00:00 [DBG] Start parsing for secret in post body
2019-01-28 03:09:00.272 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-28 03:09:00.273 +00:00 [DBG] Secret id found: MVC
2019-01-28 03:09:00.273 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:09:00.292 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-28 03:09:00.292 +00:00 [DBG] Client validation success
2019-01-28 03:09:00.300 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4PNNIF6QB:00000003",
  "TimeStamp": "2019-01-28T03:09:00Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:09:00.314 +00:00 [DBG] Start token request validation
2019-01-28 03:09:00.335 +00:00 [DBG] Start validation of authorization code token request
2019-01-28 03:09:00.373 +00:00 [DBG] Validation of authorization code token request success
2019-01-28 03:09:00.383 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "7dda44bfff229391bafd44b4575885b2c4b686e13e5e5ac01b6a6c6090a36c02",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "7dda44bfff229391bafd44b4575885b2c4b686e13e5e5ac01b6a6c6090a36c02",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-28 03:09:00.411 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:09:00.427 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-28 03:09:00.428 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-28 03:09:00.450 +00:00 [DBG] Creating refresh token
2019-01-28 03:09:00.451 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-28 03:09:00.472 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:09:00.473 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-28 03:09:00.492 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****lQWA"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****c0ae"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****-OEw"
    }
  ],
  "ActivityId": "0HLK4PNNIF6QB:00000003",
  "TimeStamp": "2019-01-28T03:09:00Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:09:00.495 +00:00 [DBG] Token request success.
2019-01-28 03:09:00.548 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-28 03:09:00.552 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-28 03:09:00.552 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-28 03:09:00.569 +00:00 [DBG] Start userinfo request
2019-01-28 03:09:00.579 +00:00 [DBG] Bearer token found in header
2019-01-28 03:09:00.661 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:09:00.666 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:09:00.668 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-28 03:09:00.679 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548644940,
    "exp": 1548648540,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548644939,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Galvão",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-28 03:09:00.697 +00:00 [DBG] Creating userinfo response
2019-01-28 03:09:00.708 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-28 03:09:00.714 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-28 03:09:00.725 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-28 03:09:00.725 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-28 03:09:00.745 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-28 03:09:00.746 +00:00 [DBG] End userinfo request
2019-01-28 03:09:01.215 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-28 03:09:01.216 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-28 03:09:01.216 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-28 03:09:01.217 +00:00 [DBG] Start token request.
2019-01-28 03:09:01.217 +00:00 [DBG] Start client validation
2019-01-28 03:09:01.217 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-28 03:09:01.218 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-28 03:09:01.218 +00:00 [DBG] Secret id found: MVC
2019-01-28 03:09:01.218 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:09:01.219 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-28 03:09:01.219 +00:00 [DBG] Client validation success
2019-01-28 03:09:01.219 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4PNNIF6QE:00000001",
  "TimeStamp": "2019-01-28T03:09:01Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:09:01.240 +00:00 [DBG] Start token request validation
2019-01-28 03:09:01.262 +00:00 [DBG] Start client credentials token request validation
2019-01-28 03:09:01.270 +00:00 [DBG] MVC credentials token request validation success
2019-01-28 03:09:01.270 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-28 03:09:01.285 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-28 03:09:01.292 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****yGPA"
    }
  ],
  "ActivityId": "0HLK4PNNIF6QE:00000001",
  "TimeStamp": "2019-01-28T03:09:01Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:09:01.292 +00:00 [DBG] Token request success.
2019-01-28 03:09:01.817 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 03:09:01.817 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 03:09:01.817 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 03:09:01.818 +00:00 [DBG] Start discovery request
2019-01-28 03:09:01.912 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-28 03:09:01.915 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-28 03:09:01.917 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-28 03:09:01.918 +00:00 [DBG] Start key discovery request
2019-01-28 03:09:05.986 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-28 03:09:05.987 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-28 03:09:05.987 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-28 03:09:05.987 +00:00 [DBG] Start token request.
2019-01-28 03:09:05.987 +00:00 [DBG] Start client validation
2019-01-28 03:09:05.987 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-28 03:09:05.987 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-28 03:09:05.987 +00:00 [DBG] Secret id found: MVC
2019-01-28 03:09:05.987 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:09:05.987 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-28 03:09:05.988 +00:00 [DBG] Client validation success
2019-01-28 03:09:05.988 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4PNNIF6QG:00000001",
  "TimeStamp": "2019-01-28T03:09:05Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:09:06.002 +00:00 [DBG] Start token request validation
2019-01-28 03:09:06.002 +00:00 [DBG] Start client credentials token request validation
2019-01-28 03:09:06.002 +00:00 [DBG] MVC credentials token request validation success
2019-01-28 03:09:06.002 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-28 03:09:06.002 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-28 03:09:06.006 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****LgMA"
    }
  ],
  "ActivityId": "0HLK4PNNIF6QG:00000001",
  "TimeStamp": "2019-01-28T03:09:06Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:09:06.006 +00:00 [DBG] Token request success.
2019-01-28 03:09:16.832 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-28 03:09:16.832 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-28 03:09:16.832 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-28 03:09:16.832 +00:00 [DBG] Start token request.
2019-01-28 03:09:16.832 +00:00 [DBG] Start client validation
2019-01-28 03:09:16.832 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-28 03:09:16.832 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-28 03:09:16.832 +00:00 [DBG] Secret id found: MVC
2019-01-28 03:09:16.832 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:09:16.832 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-28 03:09:16.832 +00:00 [DBG] Client validation success
2019-01-28 03:09:16.833 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4PNNIF6QH:00000001",
  "TimeStamp": "2019-01-28T03:09:16Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:09:16.851 +00:00 [DBG] Start token request validation
2019-01-28 03:09:16.851 +00:00 [DBG] Start client credentials token request validation
2019-01-28 03:09:16.852 +00:00 [DBG] MVC credentials token request validation success
2019-01-28 03:09:16.852 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-28 03:09:16.852 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-28 03:09:16.861 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****HLsA"
    }
  ],
  "ActivityId": "0HLK4PNNIF6QH:00000001",
  "TimeStamp": "2019-01-28T03:09:16Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:09:16.868 +00:00 [DBG] Token request success.
2019-01-28 03:09:21.366 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-28 03:09:21.367 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-28 03:09:21.367 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-28 03:09:21.367 +00:00 [DBG] Start token request.
2019-01-28 03:09:21.367 +00:00 [DBG] Start client validation
2019-01-28 03:09:21.367 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-28 03:09:21.367 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-28 03:09:21.367 +00:00 [DBG] Secret id found: MVC
2019-01-28 03:09:21.367 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:09:21.367 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-28 03:09:21.367 +00:00 [DBG] Client validation success
2019-01-28 03:09:21.367 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4PNNIF6QI:00000001",
  "TimeStamp": "2019-01-28T03:09:21Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:09:21.382 +00:00 [DBG] Start token request validation
2019-01-28 03:09:21.385 +00:00 [DBG] Start client credentials token request validation
2019-01-28 03:09:21.385 +00:00 [DBG] MVC credentials token request validation success
2019-01-28 03:09:21.385 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-28 03:09:21.386 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-28 03:09:21.397 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****tKrw"
    }
  ],
  "ActivityId": "0HLK4PNNIF6QI:00000001",
  "TimeStamp": "2019-01-28T03:09:21Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:09:21.397 +00:00 [DBG] Token request success.
2019-01-28 03:09:22.151 +00:00 [WRN] Unhandled exception [1,"e4a57017-8735-4156-b6f1-9ee354483aad"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID e4a57017-8735-4156-b6f1-9ee354483aad and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-01-28 03:09:22.273 +00:00 [ERR] Moving message with ID ["e4a57017-8735-4156-b6f1-9ee354483aad","error"] to error queue System.AggregateException: 1 unhandled exceptions (Message with ID e4a57017-8735-4156-b6f1-9ee354483aad and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)) ---> Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID e4a57017-8735-4156-b6f1-9ee354483aad and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
   --- End of inner exception stack trace ---
---> (Inner Exception #0) Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID e4a57017-8735-4156-b6f1-9ee354483aad and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114<---

2019-01-28 03:09:22.394 +00:00 [INF] Message received:
2019-01-28 03:09:22.398 +00:00 [INF] ----------------------------------
2019-01-28 03:09:22.407 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"a0b4ac04-e7c7-4904-b427-c207b5d45f4e","CreationDate":"2019-01-28T03:09:22.3722699Z"}
2019-01-28 03:09:22.409 +00:00 [INF] ----------------------------------
2019-01-28 03:09:23.201 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 391b6f7d-0f59-4113-a13a-4f8d2af80719 to 1 handlers took 813 ms
2019-01-28 03:09:54.794 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-28 03:09:54.794 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-28 03:09:54.795 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-28 03:09:54.795 +00:00 [DBG] Start token request.
2019-01-28 03:09:54.795 +00:00 [DBG] Start client validation
2019-01-28 03:09:54.795 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-28 03:09:54.795 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-28 03:09:54.795 +00:00 [DBG] Secret id found: MVC
2019-01-28 03:09:54.795 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:09:54.796 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-28 03:09:54.797 +00:00 [DBG] Client validation success
2019-01-28 03:09:54.797 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4PNNIF6QJ:00000001",
  "TimeStamp": "2019-01-28T03:09:54Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:09:54.812 +00:00 [DBG] Start token request validation
2019-01-28 03:09:54.812 +00:00 [DBG] Start client credentials token request validation
2019-01-28 03:09:54.813 +00:00 [DBG] MVC credentials token request validation success
2019-01-28 03:09:54.813 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-28 03:09:54.814 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-28 03:09:54.820 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****50cA"
    }
  ],
  "ActivityId": "0HLK4PNNIF6QJ:00000001",
  "TimeStamp": "2019-01-28T03:09:54Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:09:54.829 +00:00 [DBG] Token request success.
2019-01-28 03:09:58.046 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-28 03:09:58.069 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-28 03:09:58.069 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-28 03:09:58.069 +00:00 [DBG] Start token request.
2019-01-28 03:09:58.069 +00:00 [DBG] Start client validation
2019-01-28 03:09:58.069 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-28 03:09:58.069 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-28 03:09:58.069 +00:00 [DBG] Secret id found: MVC
2019-01-28 03:09:58.069 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:09:58.070 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-28 03:09:58.070 +00:00 [DBG] Client validation success
2019-01-28 03:09:58.070 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4PNNIF6QK:00000001",
  "TimeStamp": "2019-01-28T03:09:58Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:09:58.080 +00:00 [DBG] Start token request validation
2019-01-28 03:09:58.080 +00:00 [DBG] Start client credentials token request validation
2019-01-28 03:09:58.080 +00:00 [DBG] MVC credentials token request validation success
2019-01-28 03:09:58.080 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-28 03:09:58.081 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-28 03:09:58.084 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****a-BA"
    }
  ],
  "ActivityId": "0HLK4PNNIF6QK:00000001",
  "TimeStamp": "2019-01-28T03:09:58Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:09:58.084 +00:00 [DBG] Token request success.
2019-01-28 03:09:58.411 +00:00 [INF] Message received:
2019-01-28 03:09:58.411 +00:00 [INF] ----------------------------------
2019-01-28 03:09:58.413 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"e86ca526-45cf-4bfb-b7ba-63062dcc39a5","CreationDate":"2019-01-28T03:09:58.4115951Z"}
2019-01-28 03:09:58.413 +00:00 [INF] ----------------------------------
2019-01-28 03:09:59.393 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens e814c1d4-51e8-4e68-a608-e0f6a6553d38 to 1 handlers took 981 ms
2019-01-28 03:10:09.227 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-28 03:10:09.227 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-28 03:10:09.227 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-28 03:10:09.227 +00:00 [DBG] Start token request.
2019-01-28 03:10:09.227 +00:00 [DBG] Start client validation
2019-01-28 03:10:09.227 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-28 03:10:09.228 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-28 03:10:09.228 +00:00 [DBG] Secret id found: MVC
2019-01-28 03:10:09.228 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:10:09.228 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-28 03:10:09.228 +00:00 [DBG] Client validation success
2019-01-28 03:10:09.228 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4PNNIF6QL:00000001",
  "TimeStamp": "2019-01-28T03:10:09Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:10:09.248 +00:00 [DBG] Start token request validation
2019-01-28 03:10:09.248 +00:00 [DBG] Start client credentials token request validation
2019-01-28 03:10:09.248 +00:00 [DBG] MVC credentials token request validation success
2019-01-28 03:10:09.248 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-28 03:10:09.249 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-28 03:10:09.262 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****CevA"
    }
  ],
  "ActivityId": "0HLK4PNNIF6QL:00000001",
  "TimeStamp": "2019-01-28T03:10:09Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:10:09.262 +00:00 [DBG] Token request success.
2019-01-28 03:10:13.624 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-28 03:10:13.624 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-28 03:10:13.624 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-28 03:10:13.624 +00:00 [DBG] Start token request.
2019-01-28 03:10:13.624 +00:00 [DBG] Start client validation
2019-01-28 03:10:13.624 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-28 03:10:13.624 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-28 03:10:13.638 +00:00 [DBG] Secret id found: MVC
2019-01-28 03:10:13.639 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-28 03:10:13.639 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-28 03:10:13.639 +00:00 [DBG] Client validation success
2019-01-28 03:10:13.639 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK4PNNIF6QM:00000001",
  "TimeStamp": "2019-01-28T03:10:13Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:10:13.662 +00:00 [DBG] Start token request validation
2019-01-28 03:10:13.662 +00:00 [DBG] Start client credentials token request validation
2019-01-28 03:10:13.662 +00:00 [DBG] MVC credentials token request validation success
2019-01-28 03:10:13.663 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-28 03:10:13.663 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-28 03:10:13.673 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****2eUg"
    }
  ],
  "ActivityId": "0HLK4PNNIF6QM:00000001",
  "TimeStamp": "2019-01-28T03:10:13Z",
  "ProcessId": 1873,
  "LocalIpAddress": "172.18.0.8:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-28 03:10:13.684 +00:00 [DBG] Token request success.
2019-01-28 03:10:13.994 +00:00 [INF] Message received:
2019-01-28 03:10:13.994 +00:00 [INF] ----------------------------------
2019-01-28 03:10:13.994 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"7f3627be-7661-4d9e-855d-d92a05fd8873","CreationDate":"2019-01-28T03:10:13.9942506Z"}
2019-01-28 03:10:13.994 +00:00 [INF] ----------------------------------
2019-01-28 03:10:14.781 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 638c8e46-8cf1-412d-a6ae-acbb167fcea6 to 1 handlers took 787 ms
2019-01-28 06:54:02.356 +00:00 [WRN] An error occurred when attempting to receive the next message: Rebus.Exceptions.RebusApplicationException: Queue throw EndOfStreamException(meaning it was canceled by rabbitmq) ---> System.IO.EndOfStreamException: SharedQueue closed
   at RabbitMQ.Util.SharedQueue`1.EnsureIsOpen()
   at RabbitMQ.Util.SharedQueue`1.Dequeue(Int32 millisecondsTimeout, T& result)
   at Rebus.RabbitMq.RabbitMqTransport.Receive(ITransactionContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Rebus.RabbitMq.RabbitMqTransport.Receive(ITransactionContext context, CancellationToken cancellationToken)
   at Rebus.Workers.ThreadPoolBased.ThreadPoolWorker.ReceiveTransportMessage(CancellationToken token, ITransactionContext context) in C:\projects-rebus\Rebus\Rebus\Workers\ThreadPoolBased\ThreadPoolWorker.cs:line 136
2019-01-28 06:54:02.452 +00:00 [INF] Existing connection found to be CLOSED
2019-01-28 06:54:02.617 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-29 23:38:16.547 +00:00 [WRN] An error occurred when attempting to receive the next message: Rebus.Exceptions.RebusApplicationException: Queue throw EndOfStreamException(meaning it was canceled by rabbitmq) ---> System.IO.EndOfStreamException: SharedQueue closed
   at RabbitMQ.Util.SharedQueue`1.EnsureIsOpen()
   at RabbitMQ.Util.SharedQueue`1.Dequeue(Int32 millisecondsTimeout, T& result)
   at Rebus.RabbitMq.RabbitMqTransport.Receive(ITransactionContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Rebus.RabbitMq.RabbitMqTransport.Receive(ITransactionContext context, CancellationToken cancellationToken)
   at Rebus.Workers.ThreadPoolBased.ThreadPoolWorker.ReceiveTransportMessage(CancellationToken token, ITransactionContext context) in C:\projects-rebus\Rebus\Rebus\Workers\ThreadPoolBased\ThreadPoolWorker.cs:line 136
2019-01-29 23:38:16.832 +00:00 [INF] Existing connection found to be CLOSED
2019-01-29 23:38:17.948 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-29 23:30:16.407 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-29 23:30:17.576 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-29 23:30:17.628 -02:00 [INF] Setting number of workers to 1
2019-01-29 23:30:17.635 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-29 23:30:17.648 -02:00 [INF] Bus Rebus 1 started
2019-01-29 23:30:17.659 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-29 23:30:17.755 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-29 23:30:17.769 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-29 23:30:17.790 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-29 23:30:17.790 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-29 23:30:17.790 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-29 23:30:17.790 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-29 23:30:17.790 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-29 23:30:18.874 -02:00 [INF] Setting number of workers to 0
2019-01-29 23:30:18.893 -02:00 [DBG] Removing worker Rebus 1 worker 1
2019-01-29 23:30:19.779 -02:00 [DBG] Worker Rebus 1 worker 1 stopped
2019-01-29 23:30:19.792 -02:00 [INF] Stopping periodic task CleanupTrackedErrors
2019-01-29 23:30:20.023 -02:00 [INF] Disposing RabbitMQ connection
2019-01-29 23:30:20.373 -02:00 [INF] Bus Rebus 1 stopped
2019-01-29 23:32:31.291 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-29 23:32:32.125 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-29 23:32:32.164 -02:00 [INF] Setting number of workers to 1
2019-01-29 23:32:32.174 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-29 23:32:32.194 -02:00 [INF] Bus Rebus 1 started
2019-01-29 23:32:32.202 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-29 23:32:32.265 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-29 23:32:32.300 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-29 23:32:32.322 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-29 23:32:32.324 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-29 23:32:32.325 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-29 23:32:32.325 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-29 23:32:32.326 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-29 23:38:28.670 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-29 23:38:29.192 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-29 23:38:29.224 -02:00 [INF] Setting number of workers to 1
2019-01-29 23:38:29.226 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-29 23:38:29.233 -02:00 [INF] Bus Rebus 1 started
2019-01-29 23:38:29.235 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-29 23:38:29.281 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-29 23:38:29.303 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-29 23:38:29.330 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-29 23:38:29.331 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-29 23:38:29.331 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-29 23:38:29.331 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-29 23:38:29.331 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-29 23:41:43.088 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-29 23:41:43.721 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-29 23:41:43.784 -02:00 [INF] Setting number of workers to 1
2019-01-29 23:41:43.788 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-29 23:41:51.954 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-29 23:41:52.659 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-29 23:41:52.699 -02:00 [INF] Setting number of workers to 1
2019-01-29 23:41:52.705 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-29 23:41:52.708 -02:00 [INF] Bus Rebus 1 started
2019-01-29 23:41:52.720 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-29 23:41:52.795 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-29 23:41:52.826 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-29 23:41:52.847 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-29 23:41:52.847 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-29 23:41:52.847 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-29 23:41:52.847 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-29 23:41:52.847 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-29 23:44:10.003 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-29 23:44:10.535 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-29 23:44:10.561 -02:00 [INF] Setting number of workers to 1
2019-01-29 23:44:10.570 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-29 23:44:10.582 -02:00 [INF] Bus Rebus 1 started
2019-01-29 23:44:10.590 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-29 23:44:10.642 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-29 23:44:10.675 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-29 23:44:10.707 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-29 23:44:10.707 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-29 23:44:10.707 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-29 23:44:10.707 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-29 23:44:10.707 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-29 23:54:22.477 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-29 23:54:22.998 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-29 23:54:23.027 -02:00 [INF] Setting number of workers to 1
2019-01-29 23:54:23.029 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-29 23:54:23.034 -02:00 [INF] Bus Rebus 1 started
2019-01-29 23:54:23.035 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-29 23:54:23.100 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-29 23:54:23.113 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-29 23:54:23.130 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-29 23:54:23.130 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-29 23:54:23.130 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-29 23:54:23.131 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-29 23:54:23.131 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-29 23:54:26.928 -02:00 [INF] Setting number of workers to 0
2019-01-29 23:54:26.937 -02:00 [DBG] Removing worker Rebus 1 worker 1
2019-01-29 23:54:27.128 -02:00 [DBG] Worker Rebus 1 worker 1 stopped
2019-01-29 23:54:27.137 -02:00 [INF] Stopping periodic task CleanupTrackedErrors
2019-01-29 23:54:27.146 -02:00 [INF] Disposing RabbitMQ connection
2019-01-29 23:54:27.162 -02:00 [INF] Bus Rebus 1 stopped
2019-01-29 23:59:31.803 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-29 23:59:32.496 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-29 23:59:32.526 -02:00 [INF] Setting number of workers to 1
2019-01-29 23:59:32.531 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-29 23:59:32.533 -02:00 [INF] Bus Rebus 1 started
2019-01-29 23:59:32.557 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-29 23:59:32.649 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-29 23:59:32.681 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-29 23:59:32.705 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-29 23:59:32.705 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-29 23:59:32.705 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-29 23:59:32.706 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-29 23:59:32.706 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-29 23:59:33.931 -02:00 [INF] Setting number of workers to 0
2019-01-29 23:59:33.948 -02:00 [DBG] Removing worker Rebus 1 worker 1
2019-01-29 23:59:34.680 -02:00 [DBG] Worker Rebus 1 worker 1 stopped
2019-01-29 23:59:34.699 -02:00 [INF] Stopping periodic task CleanupTrackedErrors
2019-01-29 23:59:34.712 -02:00 [INF] Disposing RabbitMQ connection
2019-01-29 23:59:34.755 -02:00 [INF] Bus Rebus 1 stopped
2019-01-30 00:00:11.668 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-30 00:00:12.064 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-30 00:00:12.086 -02:00 [INF] Setting number of workers to 1
2019-01-30 00:00:12.087 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-30 00:00:12.090 -02:00 [INF] Bus Rebus 1 started
2019-01-30 00:00:12.092 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-30 00:00:12.136 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-30 00:00:12.137 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-30 00:00:12.151 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-30 00:00:12.152 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-30 00:00:12.152 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-30 00:00:12.152 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-30 00:00:12.152 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-30 00:00:13.301 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-30 00:00:13.674 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-30 00:00:13.675 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-30 00:00:13.689 -02:00 [DBG] Start discovery request
2019-01-30 00:00:13.984 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-30 00:00:13.987 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-30 00:00:13.988 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-30 00:00:14.008 -02:00 [DBG] Start key discovery request
2019-01-30 00:00:14.331 -02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-30 00:00:14.340 -02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-30 00:00:14.340 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-30 00:00:14.356 -02:00 [DBG] Start authorize request
2019-01-30 00:00:14.388 -02:00 [DBG] No user present in authorize request
2019-01-30 00:00:14.405 -02:00 [DBG] Start authorize request protocol validation
2019-01-30 00:00:14.444 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:00:14.461 -02:00 [DBG] Checking for PKCE parameters
2019-01-30 00:00:14.468 -02:00 [DBG] No PKCE used.
2019-01-30 00:00:14.652 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-30 00:00:14.711 -02:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8L1NgttdDVBJok3bZPXg4zOgmj2Fqg8H-XF6lp1rbNb4SEUI1BpuS5LnuRhcAtUL5jt9HAeQeE0g9reJLaUqXrww6-NfwgpJur6DNH3amx64cMvMRw7qswAR1tjfFUv-ZUxEquwvoF0xdi1dAddvtqMA2m9a14U_wR37yVOtUoU5fDWW_DQmuT1YHFYFPQGx1GiSD7RHuD7bxBxIXuURasFEIwFq_jx4hUMDlRcl7_e8x7U9yFPIrQWYshrwTSehbR32GIcuAmAVMjEK8iRwsGybDvrTS6VnpIKuCG5hA8L9hYnUo_uWGfq3WaFL0n54GhFHKOPlLmHP2h0QCOrlXFk",
  "Nonce": "636844104142449036.NzBiMDIzMzAtOGE0OS00YzZlLTg3MjAtZThiZjAyMjQyNjllNDA3ZGMwMDMtOTY1Yy00OTBlLWI1MTctZGRjNzk5YjY4YzVl",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636844104142449036.NzBiMDIzMzAtOGE0OS00YzZlLTg3MjAtZThiZjAyMjQyNjllNDA3ZGMwMDMtOTY1Yy00OTBlLWI1MTctZGRjNzk5YjY4YzVl",
    "state": "CfDJ8L1NgttdDVBJok3bZPXg4zOgmj2Fqg8H-XF6lp1rbNb4SEUI1BpuS5LnuRhcAtUL5jt9HAeQeE0g9reJLaUqXrww6-NfwgpJur6DNH3amx64cMvMRw7qswAR1tjfFUv-ZUxEquwvoF0xdi1dAddvtqMA2m9a14U_wR37yVOtUoU5fDWW_DQmuT1YHFYFPQGx1GiSD7RHuD7bxBxIXuURasFEIwFq_jx4hUMDlRcl7_e8x7U9yFPIrQWYshrwTSehbR32GIcuAmAVMjEK8iRwsGybDvrTS6VnpIKuCG5hA8L9hYnUo_uWGfq3WaFL0n54GhFHKOPlLmHP2h0QCOrlXFk",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-30 00:00:14.760 -02:00 [INF] Showing login: User is not authenticated
2019-01-30 00:00:15.406 -02:00 [DBG] Start authorize request protocol validation
2019-01-30 00:00:15.407 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:00:15.407 -02:00 [DBG] Checking for PKCE parameters
2019-01-30 00:00:15.407 -02:00 [DBG] No PKCE used.
2019-01-30 00:00:15.408 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-30 00:00:15.417 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:00:26.551 -02:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-30 00:00:27.798 -02:00 [DBG] Augmenting SignInContext
2019-01-30 00:00:27.816 -02:00 [DBG] Adding idp claim with value: local
2019-01-30 00:00:27.817 -02:00 [DBG] Adding amr claim with value: pwd
2019-01-30 00:00:27.818 -02:00 [DBG] Adding auth_time claim with value: 1548813627
2019-01-30 00:00:27.853 -02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-30 00:00:27.888 -02:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK6AQLSRDML:00000007",
  "TimeStamp": "2019-01-30T02:00:27Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:00:27.919 -02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-30 00:00:27.920 -02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-30 00:00:27.921 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-30 00:00:27.942 -02:00 [DBG] Start authorize callback request
2019-01-30 00:00:27.952 -02:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-30 00:00:27.952 -02:00 [DBG] Start authorize request protocol validation
2019-01-30 00:00:27.953 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:00:27.953 -02:00 [DBG] Checking for PKCE parameters
2019-01-30 00:00:27.953 -02:00 [DBG] No PKCE used.
2019-01-30 00:00:27.954 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-30 00:00:27.955 -02:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8L1NgttdDVBJok3bZPXg4zOgmj2Fqg8H-XF6lp1rbNb4SEUI1BpuS5LnuRhcAtUL5jt9HAeQeE0g9reJLaUqXrww6-NfwgpJur6DNH3amx64cMvMRw7qswAR1tjfFUv-ZUxEquwvoF0xdi1dAddvtqMA2m9a14U_wR37yVOtUoU5fDWW_DQmuT1YHFYFPQGx1GiSD7RHuD7bxBxIXuURasFEIwFq_jx4hUMDlRcl7_e8x7U9yFPIrQWYshrwTSehbR32GIcuAmAVMjEK8iRwsGybDvrTS6VnpIKuCG5hA8L9hYnUo_uWGfq3WaFL0n54GhFHKOPlLmHP2h0QCOrlXFk",
  "Nonce": "636844104142449036.NzBiMDIzMzAtOGE0OS00YzZlLTg3MjAtZThiZjAyMjQyNjllNDA3ZGMwMDMtOTY1Yy00OTBlLWI1MTctZGRjNzk5YjY4YzVl",
  "SessionId": "ab5c771d1b04abcb39f3c4382084fb62",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636844104142449036.NzBiMDIzMzAtOGE0OS00YzZlLTg3MjAtZThiZjAyMjQyNjllNDA3ZGMwMDMtOTY1Yy00OTBlLWI1MTctZGRjNzk5YjY4YzVl",
    "state": "CfDJ8L1NgttdDVBJok3bZPXg4zOgmj2Fqg8H-XF6lp1rbNb4SEUI1BpuS5LnuRhcAtUL5jt9HAeQeE0g9reJLaUqXrww6-NfwgpJur6DNH3amx64cMvMRw7qswAR1tjfFUv-ZUxEquwvoF0xdi1dAddvtqMA2m9a14U_wR37yVOtUoU5fDWW_DQmuT1YHFYFPQGx1GiSD7RHuD7bxBxIXuURasFEIwFq_jx4hUMDlRcl7_e8x7U9yFPIrQWYshrwTSehbR32GIcuAmAVMjEK8iRwsGybDvrTS6VnpIKuCG5hA8L9hYnUo_uWGfq3WaFL0n54GhFHKOPlLmHP2h0QCOrlXFk",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-30 00:00:27.990 -02:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-30 00:00:28.009 -02:00 [DBG] Creating Hybrid Flow response.
2019-01-30 00:00:28.086 -02:00 [DBG] Creating Implicit Flow response.
2019-01-30 00:00:28.109 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-30 00:00:28.377 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****BAkQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****e775"
    }
  ],
  "ActivityId": "0HLK6AQLSRDMM:00000002",
  "TimeStamp": "2019-01-30T02:00:28Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:00:28.394 -02:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "State": "CfDJ8L1NgttdDVBJok3bZPXg4zOgmj2Fqg8H-XF6lp1rbNb4SEUI1BpuS5LnuRhcAtUL5jt9HAeQeE0g9reJLaUqXrww6-NfwgpJur6DNH3amx64cMvMRw7qswAR1tjfFUv-ZUxEquwvoF0xdi1dAddvtqMA2m9a14U_wR37yVOtUoU5fDWW_DQmuT1YHFYFPQGx1GiSD7RHuD7bxBxIXuURasFEIwFq_jx4hUMDlRcl7_e8x7U9yFPIrQWYshrwTSehbR32GIcuAmAVMjEK8iRwsGybDvrTS6VnpIKuCG5hA8L9hYnUo_uWGfq3WaFL0n54GhFHKOPlLmHP2h0QCOrlXFk",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-30 00:00:28.466 -02:00 [DBG] Augmenting SignInContext
2019-01-30 00:00:28.467 -02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-30 00:00:29.269 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 00:00:29.277 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 00:00:29.277 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 00:00:29.296 -02:00 [DBG] Start token request.
2019-01-30 00:00:29.307 -02:00 [DBG] Start client validation
2019-01-30 00:00:29.316 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 00:00:29.326 -02:00 [DBG] Start parsing for secret in post body
2019-01-30 00:00:29.327 -02:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-30 00:00:29.328 -02:00 [DBG] Secret id found: MVC
2019-01-30 00:00:29.328 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:00:29.346 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 00:00:29.346 -02:00 [DBG] Client validation success
2019-01-30 00:00:29.356 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK6AQLSRDMN:00000002",
  "TimeStamp": "2019-01-30T02:00:29Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:00:29.368 -02:00 [DBG] Start token request validation
2019-01-30 00:00:29.413 -02:00 [DBG] Start validation of authorization code token request
2019-01-30 00:00:29.495 -02:00 [DBG] Validation of authorization code token request success
2019-01-30 00:00:29.511 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "dbdd7e3f24862507bb7a2b694a42ad75a9056112fab7965490f628ace262e775",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "dbdd7e3f24862507bb7a2b694a42ad75a9056112fab7965490f628ace262e775",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5000/signin-oidc"
  }
}
2019-01-30 00:00:29.564 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:00:29.597 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 00:00:29.598 -02:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-30 00:00:29.637 -02:00 [DBG] Creating refresh token
2019-01-30 00:00:29.638 -02:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-30 00:00:29.681 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:00:29.682 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-30 00:00:29.709 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****1e1g"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****fce5"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****H6Kw"
    }
  ],
  "ActivityId": "0HLK6AQLSRDMN:00000002",
  "TimeStamp": "2019-01-30T02:00:29Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:00:29.717 -02:00 [DBG] Token request success.
2019-01-30 00:00:29.858 -02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-30 00:00:29.860 -02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-30 00:00:29.860 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-30 00:00:29.883 -02:00 [DBG] Start userinfo request
2019-01-30 00:00:29.897 -02:00 [DBG] Bearer token found in header
2019-01-30 00:00:30.099 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:00:30.108 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:00:30.110 -02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-30 00:00:30.117 -02:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548813629,
    "exp": 1548817229,
    "iss": "http://localhost:5105",
    "aud": [
      "http://localhost:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548813627,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Galvão",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-30 00:00:30.146 -02:00 [DBG] Creating userinfo response
2019-01-30 00:00:30.161 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-30 00:00:30.171 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-30 00:00:30.178 -02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-30 00:00:30.178 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-30 00:00:30.201 -02:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-30 00:00:30.201 -02:00 [DBG] End userinfo request
2019-01-30 00:00:30.963 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 00:00:30.964 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 00:00:30.964 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 00:00:30.964 -02:00 [DBG] Start token request.
2019-01-30 00:00:30.964 -02:00 [DBG] Start client validation
2019-01-30 00:00:30.964 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 00:00:30.966 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 00:00:30.966 -02:00 [DBG] Secret id found: MVC
2019-01-30 00:00:30.966 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:00:30.966 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 00:00:30.966 -02:00 [DBG] Client validation success
2019-01-30 00:00:30.966 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK6AQLSRDML:00000008",
  "TimeStamp": "2019-01-30T02:00:30Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:00:30.966 -02:00 [DBG] Start token request validation
2019-01-30 00:00:30.977 -02:00 [DBG] Start client credentials token request validation
2019-01-30 00:00:30.990 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 00:00:30.990 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 00:00:30.996 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 00:00:31.001 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****RU9Q"
    }
  ],
  "ActivityId": "0HLK6AQLSRDML:00000008",
  "TimeStamp": "2019-01-30T02:00:31Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:00:31.001 -02:00 [DBG] Token request success.
2019-01-30 00:00:35.238 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-30 00:00:35.240 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-30 00:00:35.240 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-30 00:00:35.241 -02:00 [DBG] Start discovery request
2019-01-30 00:00:35.431 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-30 00:00:35.432 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-30 00:00:35.432 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-30 00:00:35.432 -02:00 [DBG] Start key discovery request
2019-01-30 00:00:45.273 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 00:00:45.274 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 00:00:45.275 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 00:00:45.276 -02:00 [DBG] Start token request.
2019-01-30 00:00:45.276 -02:00 [DBG] Start client validation
2019-01-30 00:00:45.276 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 00:00:45.276 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 00:00:45.276 -02:00 [DBG] Secret id found: MVC
2019-01-30 00:00:45.276 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:00:45.277 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 00:00:45.277 -02:00 [DBG] Client validation success
2019-01-30 00:00:45.278 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK6AQLSRDMO:00000004",
  "TimeStamp": "2019-01-30T02:00:45Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:00:45.279 -02:00 [DBG] Start token request validation
2019-01-30 00:00:45.279 -02:00 [DBG] Start client credentials token request validation
2019-01-30 00:00:45.280 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 00:00:45.280 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 00:00:45.281 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 00:00:45.289 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****66RA"
    }
  ],
  "ActivityId": "0HLK6AQLSRDMO:00000004",
  "TimeStamp": "2019-01-30T02:00:45Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:00:45.289 -02:00 [DBG] Token request success.
2019-01-30 00:00:45.938 -02:00 [INF] Message received:
2019-01-30 00:00:45.939 -02:00 [INF] ----------------------------------
2019-01-30 00:00:45.952 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"7fbe69a4-bf3b-4391-a4b6-13d8b0c42186","CreationDate":"2019-01-30T02:00:45.8003912Z"}
2019-01-30 00:00:45.952 -02:00 [INF] ----------------------------------
2019-01-30 00:00:46.953 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 5c9cdd8c-9207-4165-8a18-ec79ce69dc3b to 1 handlers took 1026 ms
2019-01-30 00:01:18.272 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 00:01:18.273 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 00:01:18.273 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 00:01:18.274 -02:00 [DBG] Start token request.
2019-01-30 00:01:18.274 -02:00 [DBG] Start client validation
2019-01-30 00:01:18.274 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 00:01:18.278 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 00:01:18.278 -02:00 [DBG] Secret id found: MVC
2019-01-30 00:01:18.278 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:01:18.279 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 00:01:18.279 -02:00 [DBG] Client validation success
2019-01-30 00:01:18.279 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK6AQLSRDML:00000009",
  "TimeStamp": "2019-01-30T02:01:18Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:01:18.279 -02:00 [DBG] Start token request validation
2019-01-30 00:01:18.279 -02:00 [DBG] Start client credentials token request validation
2019-01-30 00:01:18.280 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 00:01:18.280 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 00:01:18.280 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 00:01:18.289 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****zwqA"
    }
  ],
  "ActivityId": "0HLK6AQLSRDML:00000009",
  "TimeStamp": "2019-01-30T02:01:18Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:01:18.289 -02:00 [DBG] Token request success.
2019-01-30 00:01:35.430 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 00:01:35.433 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 00:01:35.433 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 00:01:35.434 -02:00 [DBG] Start token request.
2019-01-30 00:01:35.434 -02:00 [DBG] Start client validation
2019-01-30 00:01:35.434 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 00:01:35.434 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 00:01:35.434 -02:00 [DBG] Secret id found: MVC
2019-01-30 00:01:35.434 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:01:35.434 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 00:01:35.434 -02:00 [DBG] Client validation success
2019-01-30 00:01:35.434 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK6AQLSRDMN:00000004",
  "TimeStamp": "2019-01-30T02:01:35Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:01:35.435 -02:00 [DBG] Start token request validation
2019-01-30 00:01:35.435 -02:00 [DBG] Start client credentials token request validation
2019-01-30 00:01:35.435 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 00:01:35.435 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 00:01:35.436 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 00:01:35.441 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****bjmg"
    }
  ],
  "ActivityId": "0HLK6AQLSRDMN:00000004",
  "TimeStamp": "2019-01-30T02:01:35Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:01:35.441 -02:00 [DBG] Token request success.
2019-01-30 00:01:35.491 -02:00 [INF] Message received:
2019-01-30 00:01:35.491 -02:00 [INF] ----------------------------------
2019-01-30 00:01:35.491 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"18026661-9fa0-485f-81a8-b767111f710b","CreationDate":"2019-01-30T02:01:35.4904244Z"}
2019-01-30 00:01:35.491 -02:00 [INF] ----------------------------------
2019-01-30 00:01:36.076 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens f0f507ab-c675-44b9-904f-9283c56f19df to 1 handlers took 585 ms
2019-01-30 00:01:51.909 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 00:01:51.910 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 00:01:51.910 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 00:01:51.910 -02:00 [DBG] Start token request.
2019-01-30 00:01:51.910 -02:00 [DBG] Start client validation
2019-01-30 00:01:51.910 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 00:01:51.911 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 00:01:51.911 -02:00 [DBG] Secret id found: MVC
2019-01-30 00:01:51.911 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:01:51.911 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 00:01:51.911 -02:00 [DBG] Client validation success
2019-01-30 00:01:51.911 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK6AQLSRDML:0000000A",
  "TimeStamp": "2019-01-30T02:01:51Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:01:51.911 -02:00 [DBG] Start token request validation
2019-01-30 00:01:51.911 -02:00 [DBG] Start client credentials token request validation
2019-01-30 00:01:51.912 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 00:01:51.912 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 00:01:51.912 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 00:01:51.920 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****sbQg"
    }
  ],
  "ActivityId": "0HLK6AQLSRDML:0000000A",
  "TimeStamp": "2019-01-30T02:01:51Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:01:51.920 -02:00 [DBG] Token request success.
2019-01-30 00:01:57.161 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 00:01:57.162 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 00:01:57.162 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 00:01:57.162 -02:00 [DBG] Start token request.
2019-01-30 00:01:57.162 -02:00 [DBG] Start client validation
2019-01-30 00:01:57.162 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 00:01:57.162 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 00:01:57.162 -02:00 [DBG] Secret id found: MVC
2019-01-30 00:01:57.162 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:01:57.162 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 00:01:57.163 -02:00 [DBG] Client validation success
2019-01-30 00:01:57.163 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK6AQLSRDMN:00000005",
  "TimeStamp": "2019-01-30T02:01:57Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:01:57.163 -02:00 [DBG] Start token request validation
2019-01-30 00:01:57.163 -02:00 [DBG] Start client credentials token request validation
2019-01-30 00:01:57.163 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 00:01:57.164 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 00:01:57.164 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 00:01:57.171 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Izmw"
    }
  ],
  "ActivityId": "0HLK6AQLSRDMN:00000005",
  "TimeStamp": "2019-01-30T02:01:57Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:01:57.171 -02:00 [DBG] Token request success.
2019-01-30 00:02:00.040 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 00:02:00.041 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 00:02:00.041 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 00:02:00.041 -02:00 [DBG] Start token request.
2019-01-30 00:02:00.042 -02:00 [DBG] Start client validation
2019-01-30 00:02:00.042 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 00:02:00.042 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 00:02:00.042 -02:00 [DBG] Secret id found: MVC
2019-01-30 00:02:00.042 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 00:02:00.042 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 00:02:00.042 -02:00 [DBG] Client validation success
2019-01-30 00:02:00.042 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK6AQLSRDML:0000000B",
  "TimeStamp": "2019-01-30T02:02:00Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:02:00.043 -02:00 [DBG] Start token request validation
2019-01-30 00:02:00.043 -02:00 [DBG] Start client credentials token request validation
2019-01-30 00:02:00.043 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 00:02:00.043 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 00:02:00.043 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 00:02:00.049 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****kT6Q"
    }
  ],
  "ActivityId": "0HLK6AQLSRDML:0000000B",
  "TimeStamp": "2019-01-30T02:02:00Z",
  "ProcessId": 15624,
  "LocalIpAddress": "127.0.0.1:16404",
  "RemoteIpAddress": "::1"
}
2019-01-30 00:02:00.050 -02:00 [DBG] Token request success.
2019-01-30 00:02:00.068 -02:00 [INF] Message received:
2019-01-30 00:02:00.069 -02:00 [INF] ----------------------------------
2019-01-30 00:02:00.069 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"118a3558-f474-46f3-a9a5-945a728143d3","CreationDate":"2019-01-30T02:02:00.0687733Z"}
2019-01-30 00:02:00.069 -02:00 [INF] ----------------------------------
2019-01-30 00:02:00.446 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 91d04b88-3ddb-4265-8d93-cf7596ac6492 to 1 handlers took 377 ms
2019-01-30 00:08:46.575 -02:00 [WRN] An error occurred when attempting to receive the next message: Rebus.Exceptions.RebusApplicationException: Queue throw EndOfStreamException(meaning it was canceled by rabbitmq) ---> System.IO.EndOfStreamException: SharedQueue closed
   at RabbitMQ.Util.SharedQueue`1.EnsureIsOpen()
   at RabbitMQ.Util.SharedQueue`1.Dequeue(Int32 millisecondsTimeout, T& result)
   at Rebus.RabbitMq.RabbitMqTransport.Receive(ITransactionContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Rebus.RabbitMq.RabbitMqTransport.Receive(ITransactionContext context, CancellationToken cancellationToken)
   at Rebus.Workers.ThreadPoolBased.ThreadPoolWorker.ReceiveTransportMessage(CancellationToken token, ITransactionContext context) in C:\projects-rebus\Rebus\Rebus\Workers\ThreadPoolBased\ThreadPoolWorker.cs:line 136
2019-01-30 00:08:46.585 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:08:48.604 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:08:49.106 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:08:51.106 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:08:53.112 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:08:53.614 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:08:55.615 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:08:57.625 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:08:58.126 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:09:00.127 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:09:02.134 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:09:02.636 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:09:04.637 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:09:06.645 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:09:07.147 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:09:09.148 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:09:11.163 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:09:11.665 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:09:13.667 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:09:15.678 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:09:16.182 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:09:18.183 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:09:20.216 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:09:20.720 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:09:22.721 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:09:24.738 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:09:25.242 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:09:27.245 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:09:29.262 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:09:29.765 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:09:31.766 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:09:33.784 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:09:34.289 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:09:36.289 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:09:38.296 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:09:38.797 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:09:40.802 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:09:42.815 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:09:43.317 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:09:45.317 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:09:47.330 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:09:47.832 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:09:49.834 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:09:51.841 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:09:52.343 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:09:54.344 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:09:56.352 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:09:56.858 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:09:58.859 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:10:00.867 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:10:01.373 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:10:03.374 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:10:05.395 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:10:05.896 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:10:07.896 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:10:09.926 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:10:10.428 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:10:12.429 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:10:14.444 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:10:14.945 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:10:16.946 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:10:18.953 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:10:19.454 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:10:21.455 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:10:23.486 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:10:23.988 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:10:25.989 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:10:27.995 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:10:28.497 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 00:10:30.498 -02:00 [INF] Existing connection found to be CLOSED
2019-01-30 00:10:32.509 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-01-30 00:10:33.039 -02:00 [WRN] Could not initialize consumer: RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.InitializeConsumer()
   at Rebus.RabbitMq.RabbitMqTransport.EnsureConsumerInitialized() - waiting 2 seconds
2019-01-30 02:46:44.991 +00:00 [WRN] No XML encryptor configured. Key "b5d6c16c-58cd-4988-b30b-34d6e838a026" may be persisted to storage in unencrypted form.
2019-01-30 02:46:46.456 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-30 02:46:48.229 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-30 02:46:48.405 +00:00 [INF] Setting number of workers to 1
2019-01-30 02:46:48.462 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-30 02:46:48.540 +00:00 [INF] Bus Rebus 1 started
2019-01-30 02:46:48.566 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-30 02:46:48.719 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-30 02:46:48.808 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-30 02:46:48.843 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-30 02:46:48.847 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-30 02:46:48.848 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-30 02:46:48.856 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-30 02:46:48.857 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-30 02:53:05.645 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-30 02:53:07.061 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-30 02:53:07.162 +00:00 [INF] Setting number of workers to 1
2019-01-30 02:53:07.193 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-30 02:53:07.218 +00:00 [INF] Bus Rebus 1 started
2019-01-30 02:53:07.243 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-30 02:53:07.456 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-30 02:53:07.516 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-30 02:53:07.573 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-30 02:53:07.581 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-30 02:53:07.585 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-30 02:53:07.595 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-30 02:53:07.601 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-30 03:01:18.217 +00:00 [WRN] No XML encryptor configured. Key "bec8b9e6-b317-45bd-a497-90e01856338b" may be persisted to storage in unencrypted form.
2019-01-30 03:01:19.466 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-30 03:01:21.184 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-30 03:01:21.279 +00:00 [INF] Setting number of workers to 1
2019-01-30 03:01:21.316 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-30 03:01:21.373 +00:00 [INF] Bus Rebus 1 started
2019-01-30 03:01:21.424 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-30 03:01:21.627 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-30 03:01:21.678 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-30 03:01:21.712 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-30 03:01:21.724 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-30 03:01:21.727 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-30 03:01:21.730 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-30 03:01:21.732 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-30 03:02:39.690 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-30 03:02:39.978 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-30 03:02:39.978 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-30 03:02:39.989 +00:00 [DBG] Start discovery request
2019-01-30 03:02:40.200 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-30 03:02:40.204 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-30 03:02:40.204 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-30 03:02:40.221 +00:00 [DBG] Start key discovery request
2019-01-30 03:02:40.388 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-30 03:02:40.397 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-30 03:02:40.397 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-30 03:02:40.412 +00:00 [DBG] Start authorize request
2019-01-30 03:02:40.441 +00:00 [DBG] No user present in authorize request
2019-01-30 03:02:40.450 +00:00 [DBG] Start authorize request protocol validation
2019-01-30 03:02:40.470 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 03:02:40.479 +00:00 [DBG] Checking for PKCE parameters
2019-01-30 03:02:40.482 +00:00 [DBG] No PKCE used.
2019-01-30 03:02:40.540 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-30 03:02:40.560 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8J_m40B8yAlJkqrLk_-MYmwVVYZh0e5WYeZJDKykVbJWbaB5kumgshjBitHZlHsVSEzP-Tm4eMtFBIG2sDDGOOskYnKHQpCnxYx9Sk_agtXPcFXQ87T15n9HgPqIbdSZeBNEA6Q63Vb6-gmzE0yqD4szB-IcwoLxZilvnOsWvX3bABzwunXhBCTpXxbWwX30fB3eyrqW-BxZJBOEm05k5uVq-OfNahFqtqJOf-zYK9CBD3ARJ1FPW53UrWXPUlu-Q8koqB_zIGUAg22BO3xiT5YkiaeNFvUG7qpwNCiLkokSszkMwQkIv31-4lBoo-WDE0t1diDcTEorPqmNCh7n9qQ",
  "Nonce": "636844141603275732.NDQ3YzZjYTYtZDQyOC00MDNkLTlkNjYtY2FmNThkOWIwYzhkODlkYTVjYWMtMDI5Ni00NDQ3LTk0OTktNTg2MjZhZDQ1MDZj",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636844141603275732.NDQ3YzZjYTYtZDQyOC00MDNkLTlkNjYtY2FmNThkOWIwYzhkODlkYTVjYWMtMDI5Ni00NDQ3LTk0OTktNTg2MjZhZDQ1MDZj",
    "state": "CfDJ8J_m40B8yAlJkqrLk_-MYmwVVYZh0e5WYeZJDKykVbJWbaB5kumgshjBitHZlHsVSEzP-Tm4eMtFBIG2sDDGOOskYnKHQpCnxYx9Sk_agtXPcFXQ87T15n9HgPqIbdSZeBNEA6Q63Vb6-gmzE0yqD4szB-IcwoLxZilvnOsWvX3bABzwunXhBCTpXxbWwX30fB3eyrqW-BxZJBOEm05k5uVq-OfNahFqtqJOf-zYK9CBD3ARJ1FPW53UrWXPUlu-Q8koqB_zIGUAg22BO3xiT5YkiaeNFvUG7qpwNCiLkokSszkMwQkIv31-4lBoo-WDE0t1diDcTEorPqmNCh7n9qQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-30 03:02:40.599 +00:00 [INF] Showing login: User is not authenticated
2019-01-30 03:02:40.967 +00:00 [DBG] Start authorize request protocol validation
2019-01-30 03:02:40.968 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 03:02:40.968 +00:00 [DBG] Checking for PKCE parameters
2019-01-30 03:02:40.969 +00:00 [DBG] No PKCE used.
2019-01-30 03:02:40.969 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-30 03:02:40.976 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 03:02:43.621 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-30 03:02:44.775 +00:00 [DBG] Augmenting SignInContext
2019-01-30 03:02:44.782 +00:00 [DBG] Adding idp claim with value: local
2019-01-30 03:02:44.783 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-30 03:02:44.784 +00:00 [DBG] Adding auth_time claim with value: 1548817364
2019-01-30 03:02:44.802 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-30 03:02:44.832 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK6BTIFI7QS:00000002",
  "TimeStamp": "2019-01-30T03:02:44Z",
  "ProcessId": 25,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-30 03:02:44.858 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-30 03:02:44.859 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-30 03:02:44.860 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-30 03:02:44.870 +00:00 [DBG] Start authorize callback request
2019-01-30 03:02:44.880 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-30 03:02:44.880 +00:00 [DBG] Start authorize request protocol validation
2019-01-30 03:02:44.881 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 03:02:44.881 +00:00 [DBG] Checking for PKCE parameters
2019-01-30 03:02:44.881 +00:00 [DBG] No PKCE used.
2019-01-30 03:02:44.882 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-30 03:02:44.883 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8J_m40B8yAlJkqrLk_-MYmwVVYZh0e5WYeZJDKykVbJWbaB5kumgshjBitHZlHsVSEzP-Tm4eMtFBIG2sDDGOOskYnKHQpCnxYx9Sk_agtXPcFXQ87T15n9HgPqIbdSZeBNEA6Q63Vb6-gmzE0yqD4szB-IcwoLxZilvnOsWvX3bABzwunXhBCTpXxbWwX30fB3eyrqW-BxZJBOEm05k5uVq-OfNahFqtqJOf-zYK9CBD3ARJ1FPW53UrWXPUlu-Q8koqB_zIGUAg22BO3xiT5YkiaeNFvUG7qpwNCiLkokSszkMwQkIv31-4lBoo-WDE0t1diDcTEorPqmNCh7n9qQ",
  "Nonce": "636844141603275732.NDQ3YzZjYTYtZDQyOC00MDNkLTlkNjYtY2FmNThkOWIwYzhkODlkYTVjYWMtMDI5Ni00NDQ3LTk0OTktNTg2MjZhZDQ1MDZj",
  "SessionId": "11799fc88f18dd3205c5ae412cab84f3",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636844141603275732.NDQ3YzZjYTYtZDQyOC00MDNkLTlkNjYtY2FmNThkOWIwYzhkODlkYTVjYWMtMDI5Ni00NDQ3LTk0OTktNTg2MjZhZDQ1MDZj",
    "state": "CfDJ8J_m40B8yAlJkqrLk_-MYmwVVYZh0e5WYeZJDKykVbJWbaB5kumgshjBitHZlHsVSEzP-Tm4eMtFBIG2sDDGOOskYnKHQpCnxYx9Sk_agtXPcFXQ87T15n9HgPqIbdSZeBNEA6Q63Vb6-gmzE0yqD4szB-IcwoLxZilvnOsWvX3bABzwunXhBCTpXxbWwX30fB3eyrqW-BxZJBOEm05k5uVq-OfNahFqtqJOf-zYK9CBD3ARJ1FPW53UrWXPUlu-Q8koqB_zIGUAg22BO3xiT5YkiaeNFvUG7qpwNCiLkokSszkMwQkIv31-4lBoo-WDE0t1diDcTEorPqmNCh7n9qQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-30 03:02:44.908 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-30 03:02:44.919 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-30 03:02:44.956 +00:00 [DBG] Creating Implicit Flow response.
2019-01-30 03:02:44.970 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-30 03:02:45.131 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Ofrg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****7019"
    }
  ],
  "ActivityId": "0HLK6BTIFI7QS:00000003",
  "TimeStamp": "2019-01-30T03:02:45Z",
  "ProcessId": 25,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-30 03:02:45.140 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8J_m40B8yAlJkqrLk_-MYmwVVYZh0e5WYeZJDKykVbJWbaB5kumgshjBitHZlHsVSEzP-Tm4eMtFBIG2sDDGOOskYnKHQpCnxYx9Sk_agtXPcFXQ87T15n9HgPqIbdSZeBNEA6Q63Vb6-gmzE0yqD4szB-IcwoLxZilvnOsWvX3bABzwunXhBCTpXxbWwX30fB3eyrqW-BxZJBOEm05k5uVq-OfNahFqtqJOf-zYK9CBD3ARJ1FPW53UrWXPUlu-Q8koqB_zIGUAg22BO3xiT5YkiaeNFvUG7qpwNCiLkokSszkMwQkIv31-4lBoo-WDE0t1diDcTEorPqmNCh7n9qQ",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-30 03:02:45.174 +00:00 [DBG] Augmenting SignInContext
2019-01-30 03:02:45.175 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-30 03:02:45.696 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 03:02:45.703 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 03:02:45.703 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 03:02:45.723 +00:00 [DBG] Start token request.
2019-01-30 03:02:45.736 +00:00 [DBG] Start client validation
2019-01-30 03:02:45.749 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 03:02:45.756 +00:00 [DBG] Start parsing for secret in post body
2019-01-30 03:02:45.761 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-30 03:02:45.762 +00:00 [DBG] Secret id found: MVC
2019-01-30 03:02:45.762 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 03:02:45.779 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 03:02:45.780 +00:00 [DBG] Client validation success
2019-01-30 03:02:45.788 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK6BTIFI7QQ:00000003",
  "TimeStamp": "2019-01-30T03:02:45Z",
  "ProcessId": 25,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-30 03:02:45.805 +00:00 [DBG] Start token request validation
2019-01-30 03:02:45.824 +00:00 [DBG] Start validation of authorization code token request
2019-01-30 03:02:45.855 +00:00 [DBG] Validation of authorization code token request success
2019-01-30 03:02:45.863 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "9583050d6210246f87817a0886b868a90ed0aa15088827c07ed8d16bd0867019",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "9583050d6210246f87817a0886b868a90ed0aa15088827c07ed8d16bd0867019",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-30 03:02:45.890 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 03:02:45.905 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 03:02:45.905 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-30 03:02:45.933 +00:00 [DBG] Creating refresh token
2019-01-30 03:02:45.934 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-30 03:02:45.954 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 03:02:45.955 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-30 03:02:45.973 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****cDhQ"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****25c0"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****ru-A"
    }
  ],
  "ActivityId": "0HLK6BTIFI7QQ:00000003",
  "TimeStamp": "2019-01-30T03:02:45Z",
  "ProcessId": 25,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-30 03:02:45.977 +00:00 [DBG] Token request success.
2019-01-30 03:02:46.034 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-30 03:02:46.036 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-30 03:02:46.036 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-30 03:02:46.051 +00:00 [DBG] Start userinfo request
2019-01-30 03:02:46.059 +00:00 [DBG] Bearer token found in header
2019-01-30 03:02:46.141 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 03:02:46.151 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 03:02:46.153 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-30 03:02:46.160 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548817365,
    "exp": 1548820965,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548817364,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Galvão",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-30 03:02:46.180 +00:00 [DBG] Creating userinfo response
2019-01-30 03:02:46.189 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-30 03:02:46.198 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-30 03:02:46.204 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-30 03:02:46.204 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-30 03:02:46.222 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-30 03:02:46.222 +00:00 [DBG] End userinfo request
2019-01-30 03:02:46.831 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 03:02:46.833 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 03:02:46.834 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 03:02:46.835 +00:00 [DBG] Start token request.
2019-01-30 03:02:46.835 +00:00 [DBG] Start client validation
2019-01-30 03:02:46.836 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 03:02:46.840 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 03:02:46.841 +00:00 [DBG] Secret id found: MVC
2019-01-30 03:02:46.841 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 03:02:46.848 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 03:02:46.848 +00:00 [DBG] Client validation success
2019-01-30 03:02:46.849 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK6BTIFI7QT:00000001",
  "TimeStamp": "2019-01-30T03:02:46Z",
  "ProcessId": 25,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-30 03:02:46.875 +00:00 [DBG] Start token request validation
2019-01-30 03:02:46.892 +00:00 [DBG] Start client credentials token request validation
2019-01-30 03:02:46.904 +00:00 [DBG] MVC credentials token request validation success
2019-01-30 03:02:46.908 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 03:02:46.927 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 03:02:46.931 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****lVTQ"
    }
  ],
  "ActivityId": "0HLK6BTIFI7QT:00000001",
  "TimeStamp": "2019-01-30T03:02:46Z",
  "ProcessId": 25,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-30 03:02:46.941 +00:00 [DBG] Token request success.
2019-01-30 03:02:47.471 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-30 03:02:47.475 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-30 03:02:47.476 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-30 03:02:47.476 +00:00 [DBG] Start discovery request
2019-01-30 03:02:47.771 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-30 03:02:47.771 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-30 03:02:47.771 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-30 03:02:47.771 +00:00 [DBG] Start key discovery request
2019-01-30 03:02:52.987 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 03:02:52.988 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 03:02:52.988 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 03:02:52.988 +00:00 [DBG] Start token request.
2019-01-30 03:02:52.988 +00:00 [DBG] Start client validation
2019-01-30 03:02:52.988 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 03:02:52.988 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 03:02:52.988 +00:00 [DBG] Secret id found: MVC
2019-01-30 03:02:52.989 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 03:02:52.989 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 03:02:52.989 +00:00 [DBG] Client validation success
2019-01-30 03:02:52.990 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK6BTIFI7QV:00000001",
  "TimeStamp": "2019-01-30T03:02:52Z",
  "ProcessId": 25,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-30 03:02:53.001 +00:00 [DBG] Start token request validation
2019-01-30 03:02:53.001 +00:00 [DBG] Start client credentials token request validation
2019-01-30 03:02:53.002 +00:00 [DBG] MVC credentials token request validation success
2019-01-30 03:02:53.002 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 03:02:53.002 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 03:02:53.017 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****DKow"
    }
  ],
  "ActivityId": "0HLK6BTIFI7QV:00000001",
  "TimeStamp": "2019-01-30T03:02:53Z",
  "ProcessId": 25,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-30 03:02:53.018 +00:00 [DBG] Token request success.
2019-01-30 03:02:53.814 +00:00 [WRN] Unhandled exception [1,"43a1c4de-ccad-4793-936a-a8f28efa50d6"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 43a1c4de-ccad-4793-936a-a8f28efa50d6 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-01-30 03:02:53.917 +00:00 [INF] Message received:
2019-01-30 03:02:53.920 +00:00 [INF] ----------------------------------
2019-01-30 03:02:53.939 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"68df22c6-48fe-4385-b28c-74315cbe6d2e","CreationDate":"2019-01-30T03:02:53.8505043Z"}
2019-01-30 03:02:53.946 +00:00 [INF] ----------------------------------
2019-01-30 03:02:54.844 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 88096c3a-2640-41c4-8211-8567e8790abf to 1 handlers took 945 ms
2019-01-30 03:03:04.793 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 03:03:04.794 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 03:03:04.794 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 03:03:04.794 +00:00 [DBG] Start token request.
2019-01-30 03:03:04.794 +00:00 [DBG] Start client validation
2019-01-30 03:03:04.794 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 03:03:04.794 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 03:03:04.794 +00:00 [DBG] Secret id found: MVC
2019-01-30 03:03:04.794 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 03:03:04.794 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 03:03:04.794 +00:00 [DBG] Client validation success
2019-01-30 03:03:04.795 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK6BTIFI7R0:00000001",
  "TimeStamp": "2019-01-30T03:03:04Z",
  "ProcessId": 25,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-30 03:03:04.804 +00:00 [DBG] Start token request validation
2019-01-30 03:03:04.804 +00:00 [DBG] Start client credentials token request validation
2019-01-30 03:03:04.805 +00:00 [DBG] MVC credentials token request validation success
2019-01-30 03:03:04.810 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 03:03:04.810 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 03:03:04.822 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****vTCQ"
    }
  ],
  "ActivityId": "0HLK6BTIFI7R0:00000001",
  "TimeStamp": "2019-01-30T03:03:04Z",
  "ProcessId": 25,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-30 03:03:04.832 +00:00 [DBG] Token request success.
2019-01-30 03:03:07.569 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 03:03:07.569 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 03:03:07.570 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 03:03:07.570 +00:00 [DBG] Start token request.
2019-01-30 03:03:07.570 +00:00 [DBG] Start client validation
2019-01-30 03:03:07.570 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 03:03:07.570 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 03:03:07.570 +00:00 [DBG] Secret id found: MVC
2019-01-30 03:03:07.570 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 03:03:07.570 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 03:03:07.570 +00:00 [DBG] Client validation success
2019-01-30 03:03:07.570 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK6BTIFI7R1:00000001",
  "TimeStamp": "2019-01-30T03:03:07Z",
  "ProcessId": 25,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-30 03:03:07.588 +00:00 [DBG] Start token request validation
2019-01-30 03:03:07.588 +00:00 [DBG] Start client credentials token request validation
2019-01-30 03:03:07.590 +00:00 [DBG] MVC credentials token request validation success
2019-01-30 03:03:07.591 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 03:03:07.591 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 03:03:07.608 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****JCrQ"
    }
  ],
  "ActivityId": "0HLK6BTIFI7R1:00000001",
  "TimeStamp": "2019-01-30T03:03:07Z",
  "ProcessId": 25,
  "LocalIpAddress": "172.18.0.9:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-30 03:03:07.608 +00:00 [DBG] Token request success.
2019-01-30 03:03:07.760 +00:00 [WRN] Unhandled exception [1,"6055a35f-a19a-4f5f-b774-370cf3d7fcc0"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 6055a35f-a19a-4f5f-b774-370cf3d7fcc0 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-01-30 03:03:07.867 +00:00 [INF] Message received:
2019-01-30 03:03:07.868 +00:00 [INF] ----------------------------------
2019-01-30 03:03:07.873 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"4efb3ce7-b14c-4a9f-a1a6-c8328d395aac","CreationDate":"2019-01-30T03:03:07.8677084Z"}
2019-01-30 03:03:07.873 +00:00 [INF] ----------------------------------
2019-01-30 03:03:08.564 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 99ca80fc-fca7-4d48-86c5-f9973d41afae to 1 handlers took 696 ms
2019-01-30 23:25:01.443 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-30 23:33:11.334 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-30 23:33:11.582 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-30 23:33:11.598 -02:00 [INF] Setting number of workers to 1
2019-01-30 23:33:11.601 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-30 23:33:11.603 -02:00 [INF] Bus Rebus 1 started
2019-01-30 23:33:11.604 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-30 23:33:11.633 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-30 23:33:11.643 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-30 23:33:11.654 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-30 23:33:11.654 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-30 23:33:11.654 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-30 23:33:11.654 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-30 23:33:11.654 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-30 23:33:52.865 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-30 23:33:54.563 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-30 23:33:54.739 -02:00 [INF] Setting number of workers to 1
2019-01-30 23:33:54.761 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-30 23:33:54.782 -02:00 [INF] Bus Rebus 1 started
2019-01-30 23:33:54.795 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-30 23:33:55.103 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-30 23:33:55.217 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-30 23:33:55.240 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-30 23:33:55.241 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-30 23:33:55.241 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-30 23:33:55.241 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-30 23:33:55.242 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-30 23:35:58.936 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-30 23:35:58.967 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-30 23:35:58.968 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-30 23:35:58.973 -02:00 [DBG] Start discovery request
2019-01-30 23:35:59.111 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-30 23:35:59.112 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-30 23:35:59.112 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-30 23:35:59.122 -02:00 [DBG] Start key discovery request
2019-01-30 23:35:59.658 -02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-30 23:35:59.669 -02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-30 23:35:59.669 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-30 23:35:59.677 -02:00 [DBG] Start authorize request
2019-01-30 23:35:59.698 -02:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-30 23:35:59.708 -02:00 [DBG] Start authorize request protocol validation
2019-01-30 23:35:59.732 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:35:59.742 -02:00 [DBG] Checking for PKCE parameters
2019-01-30 23:35:59.745 -02:00 [DBG] No PKCE used.
2019-01-30 23:35:59.819 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-30 23:35:59.838 -02:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8L1NgttdDVBJok3bZPXg4zNdkFlFF_31siR0_mu0K7v67gHFpiPZTm_ByCRi0kXxsYlw7jby_AXj43x1yxpjlS3IeURV0So-DHuMqYS0c8QrwfQVN8T9FPPwZfejudvHR06g0Gd_CO037Nfr6ama_mfaiUqceWIN8M155_WZGLqlZ3HTGIwqsBFNdQJYK-X6PdW0A8e_EeDJbV42VhAXQyy3IBe6YPHelZK7koQ-kw1C2UmgqWTyd2O1ZFDCwWhjJ35KmFCX9TrzQILZqSkDVyTw7vA13ERhSWSJwbFpeti4mYanpP8rJq0urvJ_cGtIL2BN8EIK3NeWOgWJK336Iag",
  "Nonce": "636844953593417610.MWE1MDMwN2ItMzRiZi00NGYyLTk5NGEtZjdmMmE5NTM4YjYwYmVmOTEzNjYtMDZlNC00ZDIwLWJkYTYtMjJjMDRkZGM1ZDMy",
  "SessionId": "ab5c771d1b04abcb39f3c4382084fb62",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636844953593417610.MWE1MDMwN2ItMzRiZi00NGYyLTk5NGEtZjdmMmE5NTM4YjYwYmVmOTEzNjYtMDZlNC00ZDIwLWJkYTYtMjJjMDRkZGM1ZDMy",
    "state": "CfDJ8L1NgttdDVBJok3bZPXg4zNdkFlFF_31siR0_mu0K7v67gHFpiPZTm_ByCRi0kXxsYlw7jby_AXj43x1yxpjlS3IeURV0So-DHuMqYS0c8QrwfQVN8T9FPPwZfejudvHR06g0Gd_CO037Nfr6ama_mfaiUqceWIN8M155_WZGLqlZ3HTGIwqsBFNdQJYK-X6PdW0A8e_EeDJbV42VhAXQyy3IBe6YPHelZK7koQ-kw1C2UmgqWTyd2O1ZFDCwWhjJ35KmFCX9TrzQILZqSkDVyTw7vA13ERhSWSJwbFpeti4mYanpP8rJq0urvJ_cGtIL2BN8EIK3NeWOgWJK336Iag",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-30 23:35:59.878 -02:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-30 23:35:59.892 -02:00 [DBG] Creating Hybrid Flow response.
2019-01-30 23:35:59.947 -02:00 [DBG] Creating Implicit Flow response.
2019-01-30 23:35:59.971 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-30 23:36:00.146 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****WpEw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****1558"
    }
  ],
  "ActivityId": "0HLK73GL8JP3B:00000003",
  "TimeStamp": "2019-01-31T01:36:00Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:00.156 -02:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "State": "CfDJ8L1NgttdDVBJok3bZPXg4zNdkFlFF_31siR0_mu0K7v67gHFpiPZTm_ByCRi0kXxsYlw7jby_AXj43x1yxpjlS3IeURV0So-DHuMqYS0c8QrwfQVN8T9FPPwZfejudvHR06g0Gd_CO037Nfr6ama_mfaiUqceWIN8M155_WZGLqlZ3HTGIwqsBFNdQJYK-X6PdW0A8e_EeDJbV42VhAXQyy3IBe6YPHelZK7koQ-kw1C2UmgqWTyd2O1ZFDCwWhjJ35KmFCX9TrzQILZqSkDVyTw7vA13ERhSWSJwbFpeti4mYanpP8rJq0urvJ_cGtIL2BN8EIK3NeWOgWJK336Iag",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-30 23:36:00.968 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 23:36:00.975 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 23:36:00.975 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 23:36:01.000 -02:00 [DBG] Start token request.
2019-01-30 23:36:01.010 -02:00 [DBG] Start client validation
2019-01-30 23:36:01.022 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 23:36:01.034 -02:00 [DBG] Start parsing for secret in post body
2019-01-30 23:36:01.068 -02:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-30 23:36:01.068 -02:00 [DBG] Secret id found: MVC
2019-01-30 23:36:01.068 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:36:01.086 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 23:36:01.086 -02:00 [DBG] Client validation success
2019-01-30 23:36:01.093 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK73GL8JP3B:00000004",
  "TimeStamp": "2019-01-31T01:36:01Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:01.104 -02:00 [DBG] Start token request validation
2019-01-30 23:36:01.128 -02:00 [DBG] Start validation of authorization code token request
2019-01-30 23:36:01.158 -02:00 [DBG] Validation of authorization code token request success
2019-01-30 23:36:01.163 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "3762bcc3dc6b5f534463f40fdc53c6442fa6b7e5934bb590ed43946f66ca1558",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "3762bcc3dc6b5f534463f40fdc53c6442fa6b7e5934bb590ed43946f66ca1558",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5000/signin-oidc"
  }
}
2019-01-30 23:36:01.183 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:36:01.195 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 23:36:01.198 -02:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-30 23:36:01.214 -02:00 [DBG] Creating refresh token
2019-01-30 23:36:01.215 -02:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-30 23:36:01.241 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:36:01.241 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-30 23:36:01.257 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****x3LQ"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****c9a4"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****LXww"
    }
  ],
  "ActivityId": "0HLK73GL8JP3B:00000004",
  "TimeStamp": "2019-01-31T01:36:01Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:01.259 -02:00 [DBG] Token request success.
2019-01-30 23:36:01.326 -02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-30 23:36:01.328 -02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-30 23:36:01.328 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-30 23:36:01.344 -02:00 [DBG] Start userinfo request
2019-01-30 23:36:01.353 -02:00 [DBG] Bearer token found in header
2019-01-30 23:36:01.453 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:36:01.457 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:36:01.459 -02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-30 23:36:01.466 -02:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548898561,
    "exp": 1548902161,
    "iss": "http://localhost:5105",
    "aud": [
      "http://localhost:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548813627,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Galvão",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-30 23:36:01.476 -02:00 [DBG] Creating userinfo response
2019-01-30 23:36:01.482 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-30 23:36:01.486 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-30 23:36:01.490 -02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-30 23:36:01.490 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-30 23:36:01.499 -02:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-30 23:36:01.499 -02:00 [DBG] End userinfo request
2019-01-30 23:36:01.982 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 23:36:01.983 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 23:36:01.983 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 23:36:01.984 -02:00 [DBG] Start token request.
2019-01-30 23:36:01.984 -02:00 [DBG] Start client validation
2019-01-30 23:36:01.984 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 23:36:01.985 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 23:36:01.985 -02:00 [DBG] Secret id found: MVC
2019-01-30 23:36:01.985 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:36:01.985 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 23:36:01.985 -02:00 [DBG] Client validation success
2019-01-30 23:36:01.986 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK73GL8JP3B:00000006",
  "TimeStamp": "2019-01-31T01:36:01Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:01.986 -02:00 [DBG] Start token request validation
2019-01-30 23:36:01.993 -02:00 [DBG] Start client credentials token request validation
2019-01-30 23:36:02.004 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 23:36:02.004 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 23:36:02.010 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 23:36:02.015 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****fi8Q"
    }
  ],
  "ActivityId": "0HLK73GL8JP3B:00000006",
  "TimeStamp": "2019-01-31T01:36:02Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:02.015 -02:00 [DBG] Token request success.
2019-01-30 23:36:02.459 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-30 23:36:02.460 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-30 23:36:02.460 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-30 23:36:02.461 -02:00 [DBG] Start discovery request
2019-01-30 23:36:02.578 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-30 23:36:02.582 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-30 23:36:02.586 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-30 23:36:02.586 -02:00 [DBG] Start key discovery request
2019-01-30 23:36:11.512 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 23:36:11.513 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 23:36:11.513 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 23:36:11.513 -02:00 [DBG] Start token request.
2019-01-30 23:36:11.513 -02:00 [DBG] Start client validation
2019-01-30 23:36:11.513 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 23:36:11.513 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 23:36:11.514 -02:00 [DBG] Secret id found: MVC
2019-01-30 23:36:11.514 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:36:11.514 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 23:36:11.514 -02:00 [DBG] Client validation success
2019-01-30 23:36:11.514 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK73GL8JP3B:00000009",
  "TimeStamp": "2019-01-31T01:36:11Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:11.515 -02:00 [DBG] Start token request validation
2019-01-30 23:36:11.516 -02:00 [DBG] Start client credentials token request validation
2019-01-30 23:36:11.516 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 23:36:11.516 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 23:36:11.517 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 23:36:11.522 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****cAPw"
    }
  ],
  "ActivityId": "0HLK73GL8JP3B:00000009",
  "TimeStamp": "2019-01-31T01:36:11Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:11.522 -02:00 [DBG] Token request success.
2019-01-30 23:36:13.608 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 23:36:13.609 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 23:36:13.609 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 23:36:13.609 -02:00 [DBG] Start token request.
2019-01-30 23:36:13.609 -02:00 [DBG] Start client validation
2019-01-30 23:36:13.609 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 23:36:13.609 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 23:36:13.609 -02:00 [DBG] Secret id found: MVC
2019-01-30 23:36:13.609 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:36:13.610 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 23:36:13.610 -02:00 [DBG] Client validation success
2019-01-30 23:36:13.610 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK73GL8JP3B:0000000A",
  "TimeStamp": "2019-01-31T01:36:13Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:13.610 -02:00 [DBG] Start token request validation
2019-01-30 23:36:13.610 -02:00 [DBG] Start client credentials token request validation
2019-01-30 23:36:13.611 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 23:36:13.611 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 23:36:13.611 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 23:36:13.616 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****JjVw"
    }
  ],
  "ActivityId": "0HLK73GL8JP3B:0000000A",
  "TimeStamp": "2019-01-31T01:36:13Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:13.616 -02:00 [DBG] Token request success.
2019-01-30 23:36:17.741 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 23:36:17.742 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 23:36:17.742 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 23:36:17.743 -02:00 [DBG] Start token request.
2019-01-30 23:36:17.743 -02:00 [DBG] Start client validation
2019-01-30 23:36:17.743 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 23:36:17.743 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 23:36:17.743 -02:00 [DBG] Secret id found: MVC
2019-01-30 23:36:17.743 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:36:17.743 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 23:36:17.743 -02:00 [DBG] Client validation success
2019-01-30 23:36:17.743 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK73GL8JP3B:0000000B",
  "TimeStamp": "2019-01-31T01:36:17Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:17.745 -02:00 [DBG] Start token request validation
2019-01-30 23:36:17.745 -02:00 [DBG] Start client credentials token request validation
2019-01-30 23:36:17.745 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 23:36:17.745 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 23:36:17.745 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 23:36:17.752 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****hu0w"
    }
  ],
  "ActivityId": "0HLK73GL8JP3B:0000000B",
  "TimeStamp": "2019-01-31T01:36:17Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:17.752 -02:00 [DBG] Token request success.
2019-01-30 23:36:24.664 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 23:36:24.665 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 23:36:24.667 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 23:36:24.667 -02:00 [DBG] Start token request.
2019-01-30 23:36:24.667 -02:00 [DBG] Start client validation
2019-01-30 23:36:24.667 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 23:36:24.667 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 23:36:24.667 -02:00 [DBG] Secret id found: MVC
2019-01-30 23:36:24.667 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:36:24.667 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 23:36:24.667 -02:00 [DBG] Client validation success
2019-01-30 23:36:24.667 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK73GL8JP3B:0000000C",
  "TimeStamp": "2019-01-31T01:36:24Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:24.669 -02:00 [DBG] Start token request validation
2019-01-30 23:36:24.669 -02:00 [DBG] Start client credentials token request validation
2019-01-30 23:36:24.669 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 23:36:24.670 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 23:36:24.670 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 23:36:24.675 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****MLvQ"
    }
  ],
  "ActivityId": "0HLK73GL8JP3B:0000000C",
  "TimeStamp": "2019-01-31T01:36:24Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:24.676 -02:00 [DBG] Token request success.
2019-01-30 23:36:25.318 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 23:36:25.319 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 23:36:25.319 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 23:36:25.319 -02:00 [DBG] Start token request.
2019-01-30 23:36:25.319 -02:00 [DBG] Start client validation
2019-01-30 23:36:25.319 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 23:36:25.319 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 23:36:25.319 -02:00 [DBG] Secret id found: MVC
2019-01-30 23:36:25.319 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:36:25.319 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 23:36:25.319 -02:00 [DBG] Client validation success
2019-01-30 23:36:25.320 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK73GL8JP3B:0000000D",
  "TimeStamp": "2019-01-31T01:36:25Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:25.320 -02:00 [DBG] Start token request validation
2019-01-30 23:36:25.320 -02:00 [DBG] Start client credentials token request validation
2019-01-30 23:36:25.320 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 23:36:25.320 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 23:36:25.321 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 23:36:25.325 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****fM-g"
    }
  ],
  "ActivityId": "0HLK73GL8JP3B:0000000D",
  "TimeStamp": "2019-01-31T01:36:25Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:25.325 -02:00 [DBG] Token request success.
2019-01-30 23:36:25.969 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 23:36:25.970 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 23:36:25.971 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 23:36:25.971 -02:00 [DBG] Start token request.
2019-01-30 23:36:25.971 -02:00 [DBG] Start client validation
2019-01-30 23:36:25.971 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 23:36:25.971 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 23:36:25.971 -02:00 [DBG] Secret id found: MVC
2019-01-30 23:36:25.971 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:36:25.971 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 23:36:25.971 -02:00 [DBG] Client validation success
2019-01-30 23:36:25.972 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK73GL8JP3B:0000000E",
  "TimeStamp": "2019-01-31T01:36:25Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:25.973 -02:00 [DBG] Start token request validation
2019-01-30 23:36:25.973 -02:00 [DBG] Start client credentials token request validation
2019-01-30 23:36:25.974 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 23:36:25.974 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 23:36:25.974 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 23:36:25.980 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****fM-g"
    }
  ],
  "ActivityId": "0HLK73GL8JP3B:0000000E",
  "TimeStamp": "2019-01-31T01:36:25Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:25.980 -02:00 [DBG] Token request success.
2019-01-30 23:36:26.508 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 23:36:26.508 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 23:36:26.508 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 23:36:26.508 -02:00 [DBG] Start token request.
2019-01-30 23:36:26.508 -02:00 [DBG] Start client validation
2019-01-30 23:36:26.508 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 23:36:26.509 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 23:36:26.509 -02:00 [DBG] Secret id found: MVC
2019-01-30 23:36:26.509 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:36:26.509 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 23:36:26.509 -02:00 [DBG] Client validation success
2019-01-30 23:36:26.510 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK73GL8JP3B:0000000F",
  "TimeStamp": "2019-01-31T01:36:26Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:26.514 -02:00 [DBG] Start token request validation
2019-01-30 23:36:26.514 -02:00 [DBG] Start client credentials token request validation
2019-01-30 23:36:26.515 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 23:36:26.516 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 23:36:26.516 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 23:36:26.522 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****F7iQ"
    }
  ],
  "ActivityId": "0HLK73GL8JP3B:0000000F",
  "TimeStamp": "2019-01-31T01:36:26Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:26.522 -02:00 [DBG] Token request success.
2019-01-30 23:36:35.097 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 23:36:35.098 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 23:36:35.098 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 23:36:35.098 -02:00 [DBG] Start token request.
2019-01-30 23:36:35.098 -02:00 [DBG] Start client validation
2019-01-30 23:36:35.098 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 23:36:35.098 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 23:36:35.098 -02:00 [DBG] Secret id found: MVC
2019-01-30 23:36:35.099 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:36:35.099 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 23:36:35.099 -02:00 [DBG] Client validation success
2019-01-30 23:36:35.099 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK73GL8JP3B:00000010",
  "TimeStamp": "2019-01-31T01:36:35Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:35.099 -02:00 [DBG] Start token request validation
2019-01-30 23:36:35.100 -02:00 [DBG] Start client credentials token request validation
2019-01-30 23:36:35.100 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 23:36:35.100 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 23:36:35.100 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 23:36:35.106 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****YawQ"
    }
  ],
  "ActivityId": "0HLK73GL8JP3B:00000010",
  "TimeStamp": "2019-01-31T01:36:35Z",
  "ProcessId": 4280,
  "LocalIpAddress": "127.0.0.1:20510",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:36:35.106 -02:00 [DBG] Token request success.
2019-01-30 23:36:36.043 -02:00 [WRN] Unhandled exception [1,"7d71619c-4fe0-49d4-8959-4e77a344cc2a"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 7d71619c-4fe0-49d4-8959-4e77a344cc2a and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-01-30 23:36:36.105 -02:00 [INF] Message received:
2019-01-30 23:36:36.105 -02:00 [INF] ----------------------------------
2019-01-30 23:36:36.119 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"a32d1fa4-e40e-4d12-9013-c4ecd9dae136","CreationDate":"2019-01-31T01:36:36.0829681Z"}
2019-01-30 23:36:36.120 -02:00 [INF] ----------------------------------
2019-01-30 23:36:37.102 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 587bc6d2-8337-4fd5-8a74-ac32114530be to 1 handlers took 1004 ms
2019-01-30 23:49:07.232 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-30 23:49:52.469 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-30 23:49:52.923 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-30 23:49:53.010 -02:00 [INF] Setting number of workers to 1
2019-01-30 23:49:53.012 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-30 23:49:53.021 -02:00 [INF] Bus Rebus 1 started
2019-01-30 23:49:53.022 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-30 23:49:53.065 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-30 23:49:53.086 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-30 23:49:53.102 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-30 23:49:53.103 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-30 23:49:53.103 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-30 23:49:53.103 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-30 23:49:53.103 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-30 23:50:52.803 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-30 23:50:54.102 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-30 23:50:54.163 -02:00 [INF] Setting number of workers to 1
2019-01-30 23:50:54.238 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-30 23:50:54.287 -02:00 [INF] Bus Rebus 1 started
2019-01-30 23:50:54.352 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-30 23:50:54.443 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-30 23:50:54.573 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-30 23:50:54.593 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-30 23:50:54.594 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-30 23:50:54.594 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-30 23:50:54.594 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-30 23:50:54.594 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-30 23:51:45.903 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-30 23:51:46.628 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-30 23:51:46.670 -02:00 [INF] Setting number of workers to 1
2019-01-30 23:51:46.678 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-30 23:51:46.703 -02:00 [INF] Bus Rebus 1 started
2019-01-30 23:51:46.712 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-30 23:51:46.843 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-30 23:51:46.967 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-30 23:51:46.989 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-30 23:51:46.990 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-30 23:51:46.990 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-30 23:51:46.990 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-30 23:51:46.991 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-30 23:55:43.420 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 23:55:43.447 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 23:55:43.447 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 23:55:43.458 -02:00 [DBG] Start token request.
2019-01-30 23:55:43.464 -02:00 [DBG] Start client validation
2019-01-30 23:55:43.473 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 23:55:43.473 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 23:55:43.474 -02:00 [DBG] Secret id found: MVC
2019-01-30 23:55:43.483 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:55:43.495 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 23:55:43.495 -02:00 [DBG] Client validation success
2019-01-30 23:55:43.515 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK73QKL2MUN:00000001",
  "TimeStamp": "2019-01-31T01:55:43Z",
  "ProcessId": 13048,
  "LocalIpAddress": "127.0.0.1:23098",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:55:43.552 -02:00 [DBG] Start token request validation
2019-01-30 23:55:43.561 -02:00 [DBG] Start client credentials token request validation
2019-01-30 23:55:43.612 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 23:55:43.636 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 23:55:43.683 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 23:55:43.822 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****hmZg"
    }
  ],
  "ActivityId": "0HLK73QKL2MUN:00000001",
  "TimeStamp": "2019-01-31T01:55:43Z",
  "ProcessId": 13048,
  "LocalIpAddress": "127.0.0.1:23098",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:55:43.825 -02:00 [DBG] Token request success.
2019-01-30 23:55:44.371 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-30 23:55:44.373 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-30 23:55:44.373 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-30 23:55:44.381 -02:00 [DBG] Start discovery request
2019-01-30 23:55:44.537 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-30 23:55:44.539 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-30 23:55:44.539 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-30 23:55:44.546 -02:00 [DBG] Start key discovery request
2019-01-30 23:56:31.626 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-30 23:56:32.587 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-30 23:56:32.610 -02:00 [INF] Setting number of workers to 1
2019-01-30 23:56:32.620 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-30 23:56:32.639 -02:00 [INF] Bus Rebus 1 started
2019-01-30 23:56:32.648 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-30 23:56:32.689 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-30 23:56:32.725 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-30 23:56:32.741 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-30 23:56:32.743 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-30 23:56:32.743 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-30 23:56:32.744 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-30 23:56:32.745 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-30 23:57:47.818 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 23:57:47.838 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 23:57:47.838 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 23:57:47.848 -02:00 [DBG] Start token request.
2019-01-30 23:57:47.855 -02:00 [DBG] Start client validation
2019-01-30 23:57:47.862 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 23:57:47.863 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 23:57:47.863 -02:00 [DBG] Secret id found: MVC
2019-01-30 23:57:47.872 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:57:47.883 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 23:57:47.883 -02:00 [DBG] Client validation success
2019-01-30 23:57:47.907 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK73T9NNA0H:00000001",
  "TimeStamp": "2019-01-31T01:57:47Z",
  "ProcessId": 11500,
  "LocalIpAddress": "127.0.0.1:20866",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:57:47.946 -02:00 [DBG] Start token request validation
2019-01-30 23:57:47.959 -02:00 [DBG] Start client credentials token request validation
2019-01-30 23:57:48.020 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 23:57:48.037 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 23:57:48.069 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 23:57:48.159 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****zKRQ"
    }
  ],
  "ActivityId": "0HLK73T9NNA0H:00000001",
  "TimeStamp": "2019-01-31T01:57:48Z",
  "ProcessId": 11500,
  "LocalIpAddress": "127.0.0.1:20866",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:57:48.161 -02:00 [DBG] Token request success.
2019-01-30 23:57:48.600 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-30 23:57:48.602 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-30 23:57:48.602 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-30 23:57:48.611 -02:00 [DBG] Start discovery request
2019-01-30 23:57:48.774 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-30 23:57:48.776 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-30 23:57:48.776 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-30 23:57:48.782 -02:00 [DBG] Start key discovery request
2019-01-30 23:57:54.020 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-30 23:57:54.022 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-30 23:57:54.022 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-30 23:57:54.022 -02:00 [DBG] Start token request.
2019-01-30 23:57:54.023 -02:00 [DBG] Start client validation
2019-01-30 23:57:54.023 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-30 23:57:54.023 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-30 23:57:54.023 -02:00 [DBG] Secret id found: MVC
2019-01-30 23:57:54.023 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-30 23:57:54.023 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-30 23:57:54.023 -02:00 [DBG] Client validation success
2019-01-30 23:57:54.024 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK73T9NNA0H:00000004",
  "TimeStamp": "2019-01-31T01:57:54Z",
  "ProcessId": 11500,
  "LocalIpAddress": "127.0.0.1:20866",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:57:54.025 -02:00 [DBG] Start token request validation
2019-01-30 23:57:54.025 -02:00 [DBG] Start client credentials token request validation
2019-01-30 23:57:54.025 -02:00 [DBG] MVC credentials token request validation success
2019-01-30 23:57:54.026 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-30 23:57:54.026 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-30 23:57:54.031 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****u8tA"
    }
  ],
  "ActivityId": "0HLK73T9NNA0H:00000004",
  "TimeStamp": "2019-01-31T01:57:54Z",
  "ProcessId": 11500,
  "LocalIpAddress": "127.0.0.1:20866",
  "RemoteIpAddress": "::1"
}
2019-01-30 23:57:54.031 -02:00 [DBG] Token request success.
2019-01-30 23:57:54.717 -02:00 [WRN] Unhandled exception [1,"48f510ef-67b2-4b3a-9f92-d3d906a8a081"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 48f510ef-67b2-4b3a-9f92-d3d906a8a081 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-01-30 23:57:54.794 -02:00 [INF] Message received:
2019-01-30 23:57:54.795 -02:00 [INF] ----------------------------------
2019-01-30 23:57:54.804 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"2768231a-4fa0-4f37-bdbe-8d2d3ff328f3","CreationDate":"2019-01-31T01:57:54.757875Z"}
2019-01-30 23:57:54.805 -02:00 [INF] ----------------------------------
2019-01-30 23:57:55.596 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 063794e2-e65c-49de-afc7-3b1c738da642 to 1 handlers took 817 ms
2019-01-31 03:18:51.889 +00:00 [WRN] No XML encryptor configured. Key "6c7c0b34-c2c3-4265-bdc2-5c7fd2197647" may be persisted to storage in unencrypted form.
2019-01-31 03:18:52.906 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-31 03:18:54.458 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-31 03:18:54.596 +00:00 [INF] Setting number of workers to 1
2019-01-31 03:18:54.637 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-31 03:18:54.654 +00:00 [INF] Bus Rebus 1 started
2019-01-31 03:18:54.804 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-31 03:18:55.092 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-31 03:18:55.132 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-31 03:18:55.179 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-31 03:18:55.180 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-31 03:18:55.180 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-31 03:18:55.180 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-31 03:18:55.180 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-31 03:25:17.325 +00:00 [WRN] No XML encryptor configured. Key "1f7416d1-5e80-4f97-aedd-18dabfd5f155" may be persisted to storage in unencrypted form.
2019-01-31 03:25:18.402 +00:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-31 03:25:20.076 +00:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-31 03:25:20.306 +00:00 [INF] Setting number of workers to 1
2019-01-31 03:25:20.346 +00:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-31 03:25:20.371 +00:00 [INF] Bus Rebus 1 started
2019-01-31 03:25:20.393 +00:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-31 03:25:20.497 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-31 03:25:20.636 +00:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-31 03:25:20.702 +00:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-31 03:25:20.705 +00:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-31 03:25:20.708 +00:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-31 03:25:20.715 +00:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-31 03:25:20.719 +00:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-31 03:26:50.188 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-31 03:26:50.212 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-31 03:26:50.213 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-31 03:26:50.222 +00:00 [DBG] Start discovery request
2019-01-31 03:26:50.385 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-31 03:26:50.388 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-31 03:26:50.401 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-31 03:26:50.423 +00:00 [DBG] Start key discovery request
2019-01-31 03:26:50.588 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-31 03:26:50.594 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-31 03:26:50.595 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-31 03:26:50.605 +00:00 [DBG] Start authorize request
2019-01-31 03:26:50.639 +00:00 [DBG] No user present in authorize request
2019-01-31 03:26:50.650 +00:00 [DBG] Start authorize request protocol validation
2019-01-31 03:26:50.669 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 03:26:50.678 +00:00 [DBG] Checking for PKCE parameters
2019-01-31 03:26:50.684 +00:00 [DBG] No PKCE used.
2019-01-31 03:26:50.734 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-31 03:26:50.751 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8DPnAo6hyWhCmpwNIsKkheykqr3XZVq8mRzFTHOtplFJNJfZCMeVDvySmGRpserXPkt_NhEZpouKPXwMAFmht6utI8LpwASwL41D0ECtRLCZDXekV_CEZMysKEfhMDYnp3sLpnMd9CTegQWpvCqXzSzH9Tspj15D4-fAf7-JCaE6mkfv-pYkPInYbNd8y0xx96valuk4fAXqdbo3N8RmNvs-E0V16TqiVJj8dDSzMqTzG_ivMgmXZZpzrgmzEZR4_75OgGVYlouEWQLsMhttuu-LmxZQ5OCv5D-KYZEGu3LNKu_9AYpvlAxDzHT18kkrHiDKWL_pZJ8NUt87jMPzexU",
  "Nonce": "636845020105190212.Y2ZlODU1MzctM2M5ZC00ZGRlLTk5NGUtODJiNDlmNGI5ZjdkY2E4MjJlMmEtY2MyNS00YjU4LWFkOGQtYzQ3NzY4MWMzNDMw",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636845020105190212.Y2ZlODU1MzctM2M5ZC00ZGRlLTk5NGUtODJiNDlmNGI5ZjdkY2E4MjJlMmEtY2MyNS00YjU4LWFkOGQtYzQ3NzY4MWMzNDMw",
    "state": "CfDJ8DPnAo6hyWhCmpwNIsKkheykqr3XZVq8mRzFTHOtplFJNJfZCMeVDvySmGRpserXPkt_NhEZpouKPXwMAFmht6utI8LpwASwL41D0ECtRLCZDXekV_CEZMysKEfhMDYnp3sLpnMd9CTegQWpvCqXzSzH9Tspj15D4-fAf7-JCaE6mkfv-pYkPInYbNd8y0xx96valuk4fAXqdbo3N8RmNvs-E0V16TqiVJj8dDSzMqTzG_ivMgmXZZpzrgmzEZR4_75OgGVYlouEWQLsMhttuu-LmxZQ5OCv5D-KYZEGu3LNKu_9AYpvlAxDzHT18kkrHiDKWL_pZJ8NUt87jMPzexU",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-31 03:26:50.774 +00:00 [INF] Showing login: User is not authenticated
2019-01-31 03:26:51.103 +00:00 [DBG] Start authorize request protocol validation
2019-01-31 03:26:51.103 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 03:26:51.104 +00:00 [DBG] Checking for PKCE parameters
2019-01-31 03:26:51.104 +00:00 [DBG] No PKCE used.
2019-01-31 03:26:51.105 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-31 03:26:51.111 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 03:26:53.878 +00:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-01-31 03:26:54.321 +00:00 [DBG] Augmenting SignInContext
2019-01-31 03:26:54.327 +00:00 [DBG] Adding idp claim with value: local
2019-01-31 03:26:54.328 +00:00 [DBG] Adding amr claim with value: pwd
2019-01-31 03:26:54.330 +00:00 [DBG] Adding auth_time claim with value: 1548905214
2019-01-31 03:26:54.347 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-31 03:26:54.373 +00:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLK75FNV8IMC:00000002",
  "TimeStamp": "2019-01-31T03:26:54Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-31 03:26:54.399 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-31 03:26:54.401 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-31 03:26:54.401 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-31 03:26:54.410 +00:00 [DBG] Start authorize callback request
2019-01-31 03:26:54.419 +00:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-31 03:26:54.419 +00:00 [DBG] Start authorize request protocol validation
2019-01-31 03:26:54.419 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 03:26:54.420 +00:00 [DBG] Checking for PKCE parameters
2019-01-31 03:26:54.420 +00:00 [DBG] No PKCE used.
2019-01-31 03:26:54.421 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-31 03:26:54.421 +00:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8DPnAo6hyWhCmpwNIsKkheykqr3XZVq8mRzFTHOtplFJNJfZCMeVDvySmGRpserXPkt_NhEZpouKPXwMAFmht6utI8LpwASwL41D0ECtRLCZDXekV_CEZMysKEfhMDYnp3sLpnMd9CTegQWpvCqXzSzH9Tspj15D4-fAf7-JCaE6mkfv-pYkPInYbNd8y0xx96valuk4fAXqdbo3N8RmNvs-E0V16TqiVJj8dDSzMqTzG_ivMgmXZZpzrgmzEZR4_75OgGVYlouEWQLsMhttuu-LmxZQ5OCv5D-KYZEGu3LNKu_9AYpvlAxDzHT18kkrHiDKWL_pZJ8NUt87jMPzexU",
  "Nonce": "636845020105190212.Y2ZlODU1MzctM2M5ZC00ZGRlLTk5NGUtODJiNDlmNGI5ZjdkY2E4MjJlMmEtY2MyNS00YjU4LWFkOGQtYzQ3NzY4MWMzNDMw",
  "SessionId": "6fef450a66e8b6e417b86fc7021c0c46",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636845020105190212.Y2ZlODU1MzctM2M5ZC00ZGRlLTk5NGUtODJiNDlmNGI5ZjdkY2E4MjJlMmEtY2MyNS00YjU4LWFkOGQtYzQ3NzY4MWMzNDMw",
    "state": "CfDJ8DPnAo6hyWhCmpwNIsKkheykqr3XZVq8mRzFTHOtplFJNJfZCMeVDvySmGRpserXPkt_NhEZpouKPXwMAFmht6utI8LpwASwL41D0ECtRLCZDXekV_CEZMysKEfhMDYnp3sLpnMd9CTegQWpvCqXzSzH9Tspj15D4-fAf7-JCaE6mkfv-pYkPInYbNd8y0xx96valuk4fAXqdbo3N8RmNvs-E0V16TqiVJj8dDSzMqTzG_ivMgmXZZpzrgmzEZR4_75OgGVYlouEWQLsMhttuu-LmxZQ5OCv5D-KYZEGu3LNKu_9AYpvlAxDzHT18kkrHiDKWL_pZJ8NUt87jMPzexU",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-31 03:26:54.442 +00:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-31 03:26:54.457 +00:00 [DBG] Creating Hybrid Flow response.
2019-01-31 03:26:54.491 +00:00 [DBG] Creating Implicit Flow response.
2019-01-31 03:26:54.504 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-31 03:26:54.619 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****bnPA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****4c95"
    }
  ],
  "ActivityId": "0HLK75FNV8IMC:00000003",
  "TimeStamp": "2019-01-31T03:26:54Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-31 03:26:54.626 +00:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8DPnAo6hyWhCmpwNIsKkheykqr3XZVq8mRzFTHOtplFJNJfZCMeVDvySmGRpserXPkt_NhEZpouKPXwMAFmht6utI8LpwASwL41D0ECtRLCZDXekV_CEZMysKEfhMDYnp3sLpnMd9CTegQWpvCqXzSzH9Tspj15D4-fAf7-JCaE6mkfv-pYkPInYbNd8y0xx96valuk4fAXqdbo3N8RmNvs-E0V16TqiVJj8dDSzMqTzG_ivMgmXZZpzrgmzEZR4_75OgGVYlouEWQLsMhttuu-LmxZQ5OCv5D-KYZEGu3LNKu_9AYpvlAxDzHT18kkrHiDKWL_pZJ8NUt87jMPzexU",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-31 03:26:54.658 +00:00 [DBG] Augmenting SignInContext
2019-01-31 03:26:54.659 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-31 03:26:55.082 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-31 03:26:55.089 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-31 03:26:55.092 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-31 03:26:55.108 +00:00 [DBG] Start token request.
2019-01-31 03:26:55.121 +00:00 [DBG] Start client validation
2019-01-31 03:26:55.132 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-31 03:26:55.141 +00:00 [DBG] Start parsing for secret in post body
2019-01-31 03:26:55.147 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-31 03:26:55.147 +00:00 [DBG] Secret id found: MVC
2019-01-31 03:26:55.148 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 03:26:55.166 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-31 03:26:55.166 +00:00 [DBG] Client validation success
2019-01-31 03:26:55.174 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK75FNV8IMA:00000003",
  "TimeStamp": "2019-01-31T03:26:55Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-31 03:26:55.190 +00:00 [DBG] Start token request validation
2019-01-31 03:26:55.205 +00:00 [DBG] Start validation of authorization code token request
2019-01-31 03:26:55.233 +00:00 [DBG] Validation of authorization code token request success
2019-01-31 03:26:55.246 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "49eeb039fffb1ab17f7d37d146d4399586bdf3c52a5c541ff44624eb6d134c95",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "49eeb039fffb1ab17f7d37d146d4399586bdf3c52a5c541ff44624eb6d134c95",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-31 03:26:55.272 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 03:26:55.287 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-31 03:26:55.288 +00:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-31 03:26:55.308 +00:00 [DBG] Creating refresh token
2019-01-31 03:26:55.308 +00:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-31 03:26:55.328 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 03:26:55.328 +00:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-31 03:26:55.348 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****B8nQ"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****27bb"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****grlg"
    }
  ],
  "ActivityId": "0HLK75FNV8IMA:00000003",
  "TimeStamp": "2019-01-31T03:26:55Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-31 03:26:55.351 +00:00 [DBG] Token request success.
2019-01-31 03:26:55.394 +00:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-31 03:26:55.400 +00:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-31 03:26:55.401 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-31 03:26:55.419 +00:00 [DBG] Start userinfo request
2019-01-31 03:26:55.426 +00:00 [DBG] Bearer token found in header
2019-01-31 03:26:55.503 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 03:26:55.508 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 03:26:55.509 +00:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-31 03:26:55.517 +00:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548905215,
    "exp": 1548908815,
    "iss": "http://10.0.75.1:5105",
    "aud": [
      "http://10.0.75.1:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548905214,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Galvão",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-31 03:26:55.536 +00:00 [DBG] Creating userinfo response
2019-01-31 03:26:55.546 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-31 03:26:55.550 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-31 03:26:55.556 +00:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-31 03:26:55.556 +00:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-31 03:26:55.579 +00:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-31 03:26:55.579 +00:00 [DBG] End userinfo request
2019-01-31 03:26:56.195 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-31 03:26:56.196 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-31 03:26:56.196 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-31 03:26:56.196 +00:00 [DBG] Start token request.
2019-01-31 03:26:56.196 +00:00 [DBG] Start client validation
2019-01-31 03:26:56.197 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-31 03:26:56.197 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-31 03:26:56.197 +00:00 [DBG] Secret id found: MVC
2019-01-31 03:26:56.197 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 03:26:56.197 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-31 03:26:56.197 +00:00 [DBG] Client validation success
2019-01-31 03:26:56.198 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK75FNV8IMD:00000001",
  "TimeStamp": "2019-01-31T03:26:56Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-31 03:26:56.217 +00:00 [DBG] Start token request validation
2019-01-31 03:26:56.230 +00:00 [DBG] Start client credentials token request validation
2019-01-31 03:26:56.251 +00:00 [DBG] MVC credentials token request validation success
2019-01-31 03:26:56.253 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-31 03:26:56.273 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-31 03:26:56.282 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****d72A"
    }
  ],
  "ActivityId": "0HLK75FNV8IMD:00000001",
  "TimeStamp": "2019-01-31T03:26:56Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-31 03:26:56.293 +00:00 [DBG] Token request success.
2019-01-31 03:26:56.789 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-31 03:26:56.794 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-31 03:26:56.794 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-31 03:26:56.794 +00:00 [DBG] Start discovery request
2019-01-31 03:26:56.867 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-31 03:26:56.871 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-31 03:26:56.871 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-31 03:26:56.871 +00:00 [DBG] Start key discovery request
2019-01-31 03:27:07.643 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-31 03:27:07.643 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-31 03:27:07.643 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-31 03:27:07.644 +00:00 [DBG] Start token request.
2019-01-31 03:27:07.644 +00:00 [DBG] Start client validation
2019-01-31 03:27:07.644 +00:00 [DBG] Start parsing Basic Authentication secret
2019-01-31 03:27:07.644 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-31 03:27:07.644 +00:00 [DBG] Secret id found: MVC
2019-01-31 03:27:07.644 +00:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 03:27:07.644 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-31 03:27:07.644 +00:00 [DBG] Client validation success
2019-01-31 03:27:07.644 +00:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK75FNV8IMF:00000001",
  "TimeStamp": "2019-01-31T03:27:07Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-31 03:27:07.653 +00:00 [DBG] Start token request validation
2019-01-31 03:27:07.653 +00:00 [DBG] Start client credentials token request validation
2019-01-31 03:27:07.653 +00:00 [DBG] MVC credentials token request validation success
2019-01-31 03:27:07.654 +00:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-31 03:27:07.654 +00:00 [DBG] Getting claims for access token for client: MVC
2019-01-31 03:27:07.659 +00:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****b94w"
    }
  ],
  "ActivityId": "0HLK75FNV8IMF:00000001",
  "TimeStamp": "2019-01-31T03:27:07Z",
  "ProcessId": 19,
  "LocalIpAddress": "172.18.0.7:80",
  "RemoteIpAddress": "172.18.0.1"
}
2019-01-31 03:27:07.664 +00:00 [DBG] Token request success.
2019-01-31 03:27:08.457 +00:00 [WRN] Unhandled exception [1,"9dc8aa41-45cc-44ee-bdfb-a8feb5eadfb0"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 9dc8aa41-45cc-44ee-bdfb-a8feb5eadfb0 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-01-31 03:27:08.529 +00:00 [INF] Message received:
2019-01-31 03:27:08.529 +00:00 [INF] ----------------------------------
2019-01-31 03:27:08.542 +00:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"cd94de71-0f19-42ea-99d4-91a769d5ef11","CreationDate":"2019-01-31T03:27:08.49392Z"}
2019-01-31 03:27:08.542 +00:00 [INF] ----------------------------------
2019-01-31 03:27:09.482 +00:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 4c49ac91-1f92-4cf4-960c-b8a1e38b6a16 to 1 handlers took 965 ms
2019-01-31 01:30:38.007 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-01-31 01:30:39.104 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-01-31 01:30:39.171 -02:00 [INF] Setting number of workers to 1
2019-01-31 01:30:39.187 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-01-31 01:30:39.191 -02:00 [INF] Bus Rebus 1 started
2019-01-31 01:30:39.212 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-01-31 01:30:39.280 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-01-31 01:30:39.307 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-01-31 01:30:39.325 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-01-31 01:30:39.325 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-01-31 01:30:39.325 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-01-31 01:30:39.325 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-01-31 01:30:39.326 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-01-31 01:31:11.989 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-31 01:31:12.002 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-31 01:31:12.002 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-31 01:31:12.008 -02:00 [DBG] Start discovery request
2019-01-31 01:31:12.131 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-31 01:31:12.133 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-31 01:31:12.133 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-31 01:31:12.143 -02:00 [DBG] Start key discovery request
2019-01-31 01:31:12.568 -02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-31 01:31:12.573 -02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-31 01:31:12.573 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-31 01:31:12.579 -02:00 [DBG] Start authorize request
2019-01-31 01:31:12.593 -02:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-31 01:31:12.600 -02:00 [DBG] Start authorize request protocol validation
2019-01-31 01:31:12.617 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 01:31:12.625 -02:00 [DBG] Checking for PKCE parameters
2019-01-31 01:31:12.627 -02:00 [DBG] No PKCE used.
2019-01-31 01:31:12.674 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-31 01:31:12.690 -02:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8L1NgttdDVBJok3bZPXg4zOonsjXe5wUIY74SnNl0lvvF6QHcYOY6qEjg3PC0brexWWO6WvEZ7WqKKMuGkfdxqL0fQLAbDak1J_4Wk_GXSU0x3LZK65oqOMGlgZlaKUzwjfnGXwZHYo50pkZf1n_4Fd6fcLNarLfQPgMWpkiupIM76X_6QuqSVU-BDjkPiqf1exxAjOQvS3ZJ_L2y-U1w3K5x62WCqEkct_ofuyF6wmPx6lvKA1K7-HwFzOpRIYFsic5gWELC6eOKTcvywvMk1dul_tqlDFiSQwaLJbvRPIhf3wXzEXV79qKlQ677u6cz-UZb6SFn54DpUtguk6riCc",
  "Nonce": "636845022722182092.NWEwOWU0Y2ItZmJkNS00ODM0LWJlYWYtNTVjYmE5MDZjZWQ2MDk0ODg0NmQtZjYwYy00N2ZlLTkyYTAtN2RiNjhkNjJkYzg2",
  "SessionId": "ab5c771d1b04abcb39f3c4382084fb62",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636845022722182092.NWEwOWU0Y2ItZmJkNS00ODM0LWJlYWYtNTVjYmE5MDZjZWQ2MDk0ODg0NmQtZjYwYy00N2ZlLTkyYTAtN2RiNjhkNjJkYzg2",
    "state": "CfDJ8L1NgttdDVBJok3bZPXg4zOonsjXe5wUIY74SnNl0lvvF6QHcYOY6qEjg3PC0brexWWO6WvEZ7WqKKMuGkfdxqL0fQLAbDak1J_4Wk_GXSU0x3LZK65oqOMGlgZlaKUzwjfnGXwZHYo50pkZf1n_4Fd6fcLNarLfQPgMWpkiupIM76X_6QuqSVU-BDjkPiqf1exxAjOQvS3ZJ_L2y-U1w3K5x62WCqEkct_ofuyF6wmPx6lvKA1K7-HwFzOpRIYFsic5gWELC6eOKTcvywvMk1dul_tqlDFiSQwaLJbvRPIhf3wXzEXV79qKlQ677u6cz-UZb6SFn54DpUtguk6riCc",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-01-31 01:31:12.716 -02:00 [DBG] Client is configured to not require consent, no consent is required
2019-01-31 01:31:12.724 -02:00 [DBG] Creating Hybrid Flow response.
2019-01-31 01:31:12.762 -02:00 [DBG] Creating Implicit Flow response.
2019-01-31 01:31:12.777 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-31 01:31:12.878 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****fL5g"
    },
    {
      "TokenType": "code",
      "TokenValue": "****e7e7"
    }
  ],
  "ActivityId": "0HLK75HSHUO0B:00000003",
  "TimeStamp": "2019-01-31T03:31:12Z",
  "ProcessId": 13080,
  "LocalIpAddress": "127.0.0.1:6368",
  "RemoteIpAddress": "::1"
}
2019-01-31 01:31:12.885 -02:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8L1NgttdDVBJok3bZPXg4zOonsjXe5wUIY74SnNl0lvvF6QHcYOY6qEjg3PC0brexWWO6WvEZ7WqKKMuGkfdxqL0fQLAbDak1J_4Wk_GXSU0x3LZK65oqOMGlgZlaKUzwjfnGXwZHYo50pkZf1n_4Fd6fcLNarLfQPgMWpkiupIM76X_6QuqSVU-BDjkPiqf1exxAjOQvS3ZJ_L2y-U1w3K5x62WCqEkct_ofuyF6wmPx6lvKA1K7-HwFzOpRIYFsic5gWELC6eOKTcvywvMk1dul_tqlDFiSQwaLJbvRPIhf3wXzEXV79qKlQ677u6cz-UZb6SFn54DpUtguk6riCc",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-01-31 01:31:13.561 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-31 01:31:13.566 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-31 01:31:13.566 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-31 01:31:13.577 -02:00 [DBG] Start token request.
2019-01-31 01:31:13.586 -02:00 [DBG] Start client validation
2019-01-31 01:31:13.594 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-31 01:31:13.599 -02:00 [DBG] Start parsing for secret in post body
2019-01-31 01:31:13.622 -02:00 [DBG] Parser found secret: PostBodySecretParser
2019-01-31 01:31:13.622 -02:00 [DBG] Secret id found: MVC
2019-01-31 01:31:13.622 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 01:31:13.638 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-31 01:31:13.639 -02:00 [DBG] Client validation success
2019-01-31 01:31:13.645 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK75HSHUO0A:00000003",
  "TimeStamp": "2019-01-31T03:31:13Z",
  "ProcessId": 13080,
  "LocalIpAddress": "127.0.0.1:6368",
  "RemoteIpAddress": "::1"
}
2019-01-31 01:31:13.655 -02:00 [DBG] Start token request validation
2019-01-31 01:31:13.671 -02:00 [DBG] Start validation of authorization code token request
2019-01-31 01:31:13.692 -02:00 [DBG] Validation of authorization code token request success
2019-01-31 01:31:13.698 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "7d8e19afbdca4b7c820e7e52c5d01f4fdb7264ef21545797a9bc62250db6e7e7",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "7d8e19afbdca4b7c820e7e52c5d01f4fdb7264ef21545797a9bc62250db6e7e7",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-01-31 01:31:13.716 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 01:31:13.729 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-31 01:31:13.730 -02:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-01-31 01:31:13.742 -02:00 [DBG] Creating refresh token
2019-01-31 01:31:13.742 -02:00 [DBG] Setting an absolute lifetime: 2592000
2019-01-31 01:31:13.760 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 01:31:13.760 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-01-31 01:31:13.770 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****d-bA"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****48f1"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****SsEg"
    }
  ],
  "ActivityId": "0HLK75HSHUO0A:00000003",
  "TimeStamp": "2019-01-31T03:31:13Z",
  "ProcessId": 13080,
  "LocalIpAddress": "127.0.0.1:6368",
  "RemoteIpAddress": "::1"
}
2019-01-31 01:31:13.773 -02:00 [DBG] Token request success.
2019-01-31 01:31:13.823 -02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-01-31 01:31:13.825 -02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-01-31 01:31:13.826 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-01-31 01:31:13.835 -02:00 [DBG] Start userinfo request
2019-01-31 01:31:13.842 -02:00 [DBG] Bearer token found in header
2019-01-31 01:31:13.947 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 01:31:13.951 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 01:31:13.953 -02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-01-31 01:31:13.958 -02:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1548905473,
    "exp": 1548909073,
    "iss": "http://localhost:5105",
    "aud": [
      "http://localhost:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548813627,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Galvão",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-01-31 01:31:13.971 -02:00 [DBG] Creating userinfo response
2019-01-31 01:31:13.978 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-31 01:31:13.983 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-31 01:31:13.987 -02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-01-31 01:31:13.987 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-01-31 01:31:13.994 -02:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-01-31 01:31:13.994 -02:00 [DBG] End userinfo request
2019-01-31 01:31:14.370 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-31 01:31:14.371 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-31 01:31:14.371 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-31 01:31:14.371 -02:00 [DBG] Start token request.
2019-01-31 01:31:14.372 -02:00 [DBG] Start client validation
2019-01-31 01:31:14.372 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-31 01:31:14.372 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-31 01:31:14.372 -02:00 [DBG] Secret id found: MVC
2019-01-31 01:31:14.372 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 01:31:14.373 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-31 01:31:14.373 -02:00 [DBG] Client validation success
2019-01-31 01:31:14.373 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK75HSHUO0A:00000004",
  "TimeStamp": "2019-01-31T03:31:14Z",
  "ProcessId": 13080,
  "LocalIpAddress": "127.0.0.1:6368",
  "RemoteIpAddress": "::1"
}
2019-01-31 01:31:14.374 -02:00 [DBG] Start token request validation
2019-01-31 01:31:14.383 -02:00 [DBG] Start client credentials token request validation
2019-01-31 01:31:14.392 -02:00 [DBG] MVC credentials token request validation success
2019-01-31 01:31:14.392 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-31 01:31:14.399 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-31 01:31:14.406 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****MjiQ"
    }
  ],
  "ActivityId": "0HLK75HSHUO0A:00000004",
  "TimeStamp": "2019-01-31T03:31:14Z",
  "ProcessId": 13080,
  "LocalIpAddress": "127.0.0.1:6368",
  "RemoteIpAddress": "::1"
}
2019-01-31 01:31:14.406 -02:00 [DBG] Token request success.
2019-01-31 01:31:14.799 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-31 01:31:14.810 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-31 01:31:14.810 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-31 01:31:14.811 -02:00 [DBG] Start discovery request
2019-01-31 01:31:14.905 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-01-31 01:31:14.906 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-01-31 01:31:14.906 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-01-31 01:31:14.906 -02:00 [DBG] Start key discovery request
2019-01-31 01:31:21.266 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-01-31 01:31:21.267 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-01-31 01:31:21.267 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-01-31 01:31:21.267 -02:00 [DBG] Start token request.
2019-01-31 01:31:21.267 -02:00 [DBG] Start client validation
2019-01-31 01:31:21.267 -02:00 [DBG] Start parsing Basic Authentication secret
2019-01-31 01:31:21.268 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-01-31 01:31:21.268 -02:00 [DBG] Secret id found: MVC
2019-01-31 01:31:21.268 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-01-31 01:31:21.268 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-01-31 01:31:21.268 -02:00 [DBG] Client validation success
2019-01-31 01:31:21.268 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK75HSHUO0B:00000006",
  "TimeStamp": "2019-01-31T03:31:21Z",
  "ProcessId": 13080,
  "LocalIpAddress": "127.0.0.1:6368",
  "RemoteIpAddress": "::1"
}
2019-01-31 01:31:21.269 -02:00 [DBG] Start token request validation
2019-01-31 01:31:21.269 -02:00 [DBG] Start client credentials token request validation
2019-01-31 01:31:21.269 -02:00 [DBG] MVC credentials token request validation success
2019-01-31 01:31:21.269 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-01-31 01:31:21.269 -02:00 [DBG] Getting claims for access token for client: MVC
2019-01-31 01:31:21.276 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****K1XQ"
    }
  ],
  "ActivityId": "0HLK75HSHUO0B:00000006",
  "TimeStamp": "2019-01-31T03:31:21Z",
  "ProcessId": 13080,
  "LocalIpAddress": "127.0.0.1:6368",
  "RemoteIpAddress": "::1"
}
2019-01-31 01:31:21.276 -02:00 [DBG] Token request success.
2019-01-31 01:31:22.016 -02:00 [WRN] Unhandled exception [1,"462ff1e4-bc0e-4c6d-b191-401f25c3f04a"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 462ff1e4-bc0e-4c6d-b191-401f25c3f04a and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-01-31 01:31:22.077 -02:00 [INF] Message received:
2019-01-31 01:31:22.077 -02:00 [INF] ----------------------------------
2019-01-31 01:31:22.085 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"1f9d4452-207a-422d-beaf-8be4b5b28cdd","CreationDate":"2019-01-31T03:31:22.0524193Z"}
2019-01-31 01:31:22.086 -02:00 [INF] ----------------------------------
2019-01-31 01:31:22.725 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens cca4d4be-f487-4d7d-808f-18089c64b955 to 1 handlers took 656 ms
2019-02-02 09:58:46.234 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 09:58:48.992 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-02-02 09:58:49.499 -02:00 [INF] Bus Rebus 1 stopped
2019-02-02 09:58:49.610 -02:00 [FTL] Application startup exception
Rebus.Injection.ResolutionException: Could not resolve Rebus.Bus.IBus with decorator depth 0 - registrations: Rebus.Injection.Injectionist+Handler ---> RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.CreateQueue(String address)
   at Rebus.Config.RebusConfigurer.<>c__DisplayClass12_0.<Start>b__26(IResolutionContext c) in C:\projects-rebus\Rebus\Rebus\Config\RebusConfigurer.cs:line 331
   at Rebus.Injection.Injectionist.ResolutionContext.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 199
   --- End of inner exception stack trace ---
   at Rebus.Injection.Injectionist.ResolutionContext.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 248
   at Rebus.Injection.Injectionist.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 57
   at Rebus.Config.RebusConfigurer.Start() in C:\projects-rebus\Rebus\Rebus\Config\RebusConfigurer.cs:line 360
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitSingleton(SingletonCallSite singletonCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Rebus.ServiceProvider.ServiceProviderExtensions.UseRebus(IServiceProvider provider, Action`1 busAction)
   at Microsoft.Extensions.DependencyInjection.ApplicationBuilderExtensions.UseRebus(IApplicationBuilder app, Action`1 busAction)
   at Identity.API.Startup.Configure(IApplicationBuilder app, IHostingEnvironment env) in C:\Users\marce\Documents\GitHub\CasaDoCodigo.CQRS\CasaDoCodigo.Identity\Startup.cs:line 120
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-02 09:58:50.188 -02:00 [WRN] Connection processing ended abnormally.
Microsoft.AspNetCore.Connections.ConnectionAbortedException: The connection was aborted
   at System.IO.Pipelines.PipeCompletion.ThrowLatchedException()
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at System.IO.Pipelines.Pipe.DefaultPipeReader.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2019-02-02 10:03:13.125 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 10:03:15.955 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-02-02 10:03:16.503 -02:00 [INF] Bus Rebus 1 stopped
2019-02-02 10:03:16.637 -02:00 [FTL] Application startup exception
Rebus.Injection.ResolutionException: Could not resolve Rebus.Bus.IBus with decorator depth 0 - registrations: Rebus.Injection.Injectionist+Handler ---> RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.CreateQueue(String address)
   at Rebus.Config.RebusConfigurer.<>c__DisplayClass12_0.<Start>b__26(IResolutionContext c) in C:\projects-rebus\Rebus\Rebus\Config\RebusConfigurer.cs:line 331
   at Rebus.Injection.Injectionist.ResolutionContext.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 199
   --- End of inner exception stack trace ---
   at Rebus.Injection.Injectionist.ResolutionContext.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 248
   at Rebus.Injection.Injectionist.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 57
   at Rebus.Config.RebusConfigurer.Start() in C:\projects-rebus\Rebus\Rebus\Config\RebusConfigurer.cs:line 360
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitSingleton(SingletonCallSite singletonCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Rebus.ServiceProvider.ServiceProviderExtensions.UseRebus(IServiceProvider provider, Action`1 busAction)
   at Microsoft.Extensions.DependencyInjection.ApplicationBuilderExtensions.UseRebus(IApplicationBuilder app, Action`1 busAction)
   at Identity.API.Startup.Configure(IApplicationBuilder app, IHostingEnvironment env) in C:\Users\marce\Documents\GitHub\CasaDoCodigo.CQRS\CasaDoCodigo.Identity\Startup.cs:line 120
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-02 10:03:17.145 -02:00 [WRN] Connection processing ended abnormally.
Microsoft.AspNetCore.Connections.ConnectionAbortedException: The connection was aborted
   at System.IO.Pipelines.PipeCompletion.ThrowLatchedException()
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at System.IO.Pipelines.Pipe.DefaultPipeReader.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2019-02-02 10:07:12.932 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 10:09:25.648 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 10:09:28.225 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-02-02 10:09:28.743 -02:00 [INF] Bus Rebus 1 stopped
2019-02-02 10:09:28.813 -02:00 [FTL] Application startup exception
Rebus.Injection.ResolutionException: Could not resolve Rebus.Bus.IBus with decorator depth 0 - registrations: Rebus.Injection.Injectionist+Handler ---> RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.CreateQueue(String address)
   at Rebus.Config.RebusConfigurer.<>c__DisplayClass12_0.<Start>b__26(IResolutionContext c) in C:\projects-rebus\Rebus\Rebus\Config\RebusConfigurer.cs:line 331
   at Rebus.Injection.Injectionist.ResolutionContext.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 199
   --- End of inner exception stack trace ---
   at Rebus.Injection.Injectionist.ResolutionContext.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 248
   at Rebus.Injection.Injectionist.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 57
   at Rebus.Config.RebusConfigurer.Start() in C:\projects-rebus\Rebus\Rebus\Config\RebusConfigurer.cs:line 360
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitSingleton(SingletonCallSite singletonCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Rebus.ServiceProvider.ServiceProviderExtensions.UseRebus(IServiceProvider provider, Action`1 busAction)
   at Microsoft.Extensions.DependencyInjection.ApplicationBuilderExtensions.UseRebus(IApplicationBuilder app, Action`1 busAction)
   at Identity.API.Startup.Configure(IApplicationBuilder app, IHostingEnvironment env) in C:\Users\marce\Documents\GitHub\CasaDoCodigo.CQRS\CasaDoCodigo.Identity\Startup.cs:line 120
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-02 10:09:29.370 -02:00 [WRN] Connection processing ended abnormally.
Microsoft.AspNetCore.Connections.ConnectionAbortedException: The connection was aborted
   at System.IO.Pipelines.PipeCompletion.ThrowLatchedException()
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at System.IO.Pipelines.Pipe.DefaultPipeReader.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2019-02-02 10:13:41.376 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 10:13:42.511 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 10:13:42.568 -02:00 [INF] Setting number of workers to 1
2019-02-02 10:13:42.607 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 10:13:42.705 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 10:13:42.709 -02:00 [INF] Bus Rebus 1 started
2019-02-02 10:13:42.781 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 10:13:42.805 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 10:13:42.826 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 10:13:42.827 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 10:13:42.827 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 10:13:42.827 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 10:13:42.827 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 10:23:03.697 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 10:23:05.649 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 10:23:05.698 -02:00 [INF] Setting number of workers to 1
2019-02-02 10:23:05.722 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 10:23:05.760 -02:00 [INF] Bus Rebus 1 started
2019-02-02 10:23:05.775 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 10:23:05.893 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 10:23:05.965 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 10:23:05.983 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 10:23:05.983 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 10:23:05.984 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 10:23:05.984 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 10:23:05.984 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 10:38:43.237 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 10:38:44.285 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 10:38:44.332 -02:00 [INF] Setting number of workers to 1
2019-02-02 10:38:44.341 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 10:38:44.357 -02:00 [INF] Bus Rebus 1 started
2019-02-02 10:38:44.368 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 10:38:44.433 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 10:38:44.465 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 10:38:44.486 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 10:38:44.486 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 10:38:44.486 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 10:38:44.486 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 10:38:44.487 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 12:00:58.687 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue CadastroEvent
2019-02-02 12:00:59.864 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 12:00:59.934 -02:00 [INF] Setting number of workers to 1
2019-02-02 12:00:59.948 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 12:00:59.982 -02:00 [INF] Bus Rebus 1 started
2019-02-02 12:01:00.003 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 12:01:00.104 -02:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-02 12:01:00.122 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 12:01:00.166 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 12:01:00.194 -02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-02 12:01:00.194 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-02 12:01:00.195 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-02 12:01:00.195 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-02 12:01:00.195 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-02 12:01:00.195 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-02 12:02:02.914 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue CadastroEvent
2019-02-02 12:02:04.301 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 12:02:04.389 -02:00 [INF] Setting number of workers to 1
2019-02-02 12:02:04.421 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 12:02:04.473 -02:00 [INF] Bus Rebus 1 started
2019-02-02 12:02:04.489 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 12:02:04.613 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 12:02:04.649 -02:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-02 12:02:04.700 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 12:02:04.746 -02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-02 12:02:04.750 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-02 12:02:04.751 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-02 12:02:04.751 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-02 12:02:04.751 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-02 12:02:04.751 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-02 12:02:39.886 -02:00 [DBG] Login Url: /Account/Login
2019-02-02 12:02:39.889 -02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-02 12:02:39.889 -02:00 [DBG] Logout Url: /Account/Logout
2019-02-02 12:02:39.889 -02:00 [DBG] ConsentUrl Url: /consent
2019-02-02 12:02:39.889 -02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-02 12:02:39.890 -02:00 [DBG] Error Url: /home/error
2019-02-02 12:02:39.890 -02:00 [DBG] Error Id Parameter: errorId
2019-02-02 12:02:39.949 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-02 12:02:39.963 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-02 12:02:39.963 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-02 12:02:39.977 -02:00 [DBG] Start discovery request
2019-02-02 12:02:40.178 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-02 12:02:40.180 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-02 12:02:40.180 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-02 12:02:40.189 -02:00 [DBG] Start key discovery request
2019-02-02 12:02:40.715 -02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-02 12:02:40.730 -02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-02 12:02:40.730 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-02 12:02:40.741 -02:00 [DBG] Start authorize request
2019-02-02 12:02:40.769 -02:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-02 12:02:40.783 -02:00 [DBG] Start authorize request protocol validation
2019-02-02 12:02:40.828 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:02:40.841 -02:00 [DBG] Checking for PKCE parameters
2019-02-02 12:02:40.846 -02:00 [DBG] No PKCE used.
2019-02-02 12:02:40.935 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-02 12:02:40.977 -02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"MVC","ClientName":"MVC","RedirectUri":"http://localhost:5100/signin-oidc","AllowedRedirectUris":["http://localhost:5100/signin-oidc"],"SubjectId":"173f964f-1eb9-43cf-91c7-df753717c16c","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access","State":"CfDJ8AKuQyyLPltLkoBKRsSnJBIfiBYCZOtIgLbiCE6Vg3NWTGBPEZDvtzYrHdVpxVL4G35WWmnyDr8Ia0LTvk23bF6x3-0HPXS4ubzXE-MiBr3d_oYh44A8njoo4hqNM_9hNuHOtzViXFgt83mcQzD19xQnSlpTFA9dvjnte_bz7yCDyJzd4PfXfjWz9WLP3YlRSSWQ_TPB92xKpmLw2IPdzlbkvI7Ue0DrbRZu2OCP6sg3J-3PqPoQEeH_or0hK8SdaiONjqnFb1L8tktnyXZKcrlS4qLvjNfvZIn3wXp0i6WbP6cUXVNtxnT0TAynFfiWn3Xco1USBD_b9l0W-RpBqgE","UiLocales":null,"Nonce":"636847129602896990.YzQ1OGFhZDYtZDVjYS00MjI0LWIzNjUtMjg4MmZmOWRmMDZjYzQ4ZTgxNmYtNWFiYi00ODQ1LWFmOTAtOGJiY2ZlNjk4NmY0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ab5c771d1b04abcb39f3c4382084fb62","Raw":{"client_id":"MVC","redirect_uri":"http://localhost:5100/signin-oidc","response_type":"code id_token","scope":"openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access","response_mode":"form_post","nonce":"636847129602896990.YzQ1OGFhZDYtZDVjYS00MjI0LWIzNjUtMjg4MmZmOWRmMDZjYzQ4ZTgxNmYtNWFiYi00ODQ1LWFmOTAtOGJiY2ZlNjk4NmY0","state":"CfDJ8AKuQyyLPltLkoBKRsSnJBIfiBYCZOtIgLbiCE6Vg3NWTGBPEZDvtzYrHdVpxVL4G35WWmnyDr8Ia0LTvk23bF6x3-0HPXS4ubzXE-MiBr3d_oYh44A8njoo4hqNM_9hNuHOtzViXFgt83mcQzD19xQnSlpTFA9dvjnte_bz7yCDyJzd4PfXfjWz9WLP3YlRSSWQ_TPB92xKpmLw2IPdzlbkvI7Ue0DrbRZu2OCP6sg3J-3PqPoQEeH_or0hK8SdaiONjqnFb1L8tktnyXZKcrlS4qLvjNfvZIn3wXp0i6WbP6cUXVNtxnT0TAynFfiWn3Xco1USBD_b9l0W-RpBqgE","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-02 12:02:41.063 -02:00 [DBG] Client is configured to not require consent, no consent is required
2019-02-02 12:02:41.077 -02:00 [DBG] Creating Hybrid Flow response.
2019-02-02 12:02:41.161 -02:00 [DBG] Creating Implicit Flow response.
2019-02-02 12:02:41.183 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-02 12:02:41.366 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":"http://localhost:5100/signin-oidc","Endpoint":"Authorize","SubjectId":"173f964f-1eb9-43cf-91c7-df753717c16c","Scopes":"openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****oZMw","$type":"Token"},{"TokenType":"code","TokenValue":"****76b8","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK92S1TAAR3:00000003","TimeStamp":"2019-02-02T14:02:41.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 12:02:41.408 -02:00 [INF] Authorize endpoint response
{"SubjectId":"173f964f-1eb9-43cf-91c7-df753717c16c","ClientId":"MVC","RedirectUri":"http://localhost:5100/signin-oidc","State":"CfDJ8AKuQyyLPltLkoBKRsSnJBIfiBYCZOtIgLbiCE6Vg3NWTGBPEZDvtzYrHdVpxVL4G35WWmnyDr8Ia0LTvk23bF6x3-0HPXS4ubzXE-MiBr3d_oYh44A8njoo4hqNM_9hNuHOtzViXFgt83mcQzD19xQnSlpTFA9dvjnte_bz7yCDyJzd4PfXfjWz9WLP3YlRSSWQ_TPB92xKpmLw2IPdzlbkvI7Ue0DrbRZu2OCP6sg3J-3PqPoQEeH_or0hK8SdaiONjqnFb1L8tktnyXZKcrlS4qLvjNfvZIn3wXp0i6WbP6cUXVNtxnT0TAynFfiWn3Xco1USBD_b9l0W-RpBqgE","Scope":"openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-02 12:02:41.998 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 12:02:42.012 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 12:02:42.012 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 12:02:42.034 -02:00 [DBG] Start token request.
2019-02-02 12:02:42.050 -02:00 [DBG] Start client validation
2019-02-02 12:02:42.065 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 12:02:42.086 -02:00 [DBG] Start parsing for secret in post body
2019-02-02 12:02:42.131 -02:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-02 12:02:42.131 -02:00 [DBG] Secret id found: MVC
2019-02-02 12:02:42.131 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:02:42.158 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 12:02:42.158 -02:00 [DBG] Client validation success
2019-02-02 12:02:42.159 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK92S1TAAR2:00000003","TimeStamp":"2019-02-02T14:02:42.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 12:02:42.169 -02:00 [DBG] Start token request validation
2019-02-02 12:02:42.193 -02:00 [DBG] Start validation of authorization code token request
2019-02-02 12:02:42.225 -02:00 [DBG] Validation of authorization code token request success
2019-02-02 12:02:42.229 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"3fe5c88ac4d718d6692440b3bf37f90f90a062d0a772f715d7e60be4bdb776b8","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"MVC","client_secret":"***REDACTED***","code":"3fe5c88ac4d718d6692440b3bf37f90f90a062d0a772f715d7e60be4bdb776b8","grant_type":"authorization_code","redirect_uri":"http://localhost:5100/signin-oidc"},"$type":"TokenRequestValidationLog"}
2019-02-02 12:02:42.266 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:02:42.298 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 12:02:42.299 -02:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-02 12:02:42.329 -02:00 [DBG] Creating refresh token
2019-02-02 12:02:42.330 -02:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-02 12:02:42.365 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:02:42.365 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-02 12:02:42.385 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****eTTA","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****004e","$type":"Token"},{"TokenType":"access_token","TokenValue":"****qmZg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK92S1TAAR2:00000003","TimeStamp":"2019-02-02T14:02:42.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 12:02:42.388 -02:00 [DBG] Token request success.
2019-02-02 12:02:42.414 -02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-02 12:02:42.417 -02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-02 12:02:42.417 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-02 12:02:42.429 -02:00 [DBG] Start userinfo request
2019-02-02 12:02:42.437 -02:00 [DBG] Bearer token found in header
2019-02-02 12:02:42.471 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:02:42.477 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:02:42.478 -02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-02 12:02:42.481 -02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1549116162,"exp":1549119762,"iss":"http://localhost:5105","aud":["http://localhost:5105/resources","Basket.API","CasaDoCodigo.API","Ordering.API"],"client_id":"MVC","sub":"173f964f-1eb9-43cf-91c7-df753717c16c","auth_time":1548813627,"idp":"local","name":"Alice Smith","email":"alice@asp.net","phone":"1234-5678","address":"Rua Vergueiro, 456","address_details":"8 andar sala 801","neighborhood":"Vila Galvão","city":"São Paulo","state":"SP","zip_code":"69118","scope":["openid","profile","Basket.API","CasaDoCodigo.API","Ordering.API","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-02 12:02:42.489 -02:00 [DBG] Creating userinfo response
2019-02-02 12:02:42.497 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-02 12:02:42.500 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-02 12:02:42.506 -02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-02-02 12:02:42.506 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-02 12:02:42.518 -02:00 [INF] Profile service returned the following claim types: name email phone address address_details neighborhood city state zip_code
2019-02-02 12:02:42.519 -02:00 [DBG] End userinfo request
2019-02-02 12:02:42.998 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 12:02:42.999 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 12:02:42.999 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 12:02:42.999 -02:00 [DBG] Start token request.
2019-02-02 12:02:43.000 -02:00 [DBG] Start client validation
2019-02-02 12:02:43.000 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 12:02:43.000 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 12:02:43.000 -02:00 [DBG] Secret id found: MVC
2019-02-02 12:02:43.000 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:02:43.000 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 12:02:43.000 -02:00 [DBG] Client validation success
2019-02-02 12:02:43.001 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK92S1TAAR2:00000004","TimeStamp":"2019-02-02T14:02:43.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 12:02:43.003 -02:00 [DBG] Start token request validation
2019-02-02 12:02:43.014 -02:00 [DBG] Start client credentials token request validation
2019-02-02 12:02:43.023 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 12:02:43.023 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 12:02:43.030 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 12:02:43.035 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****qbDw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK92S1TAAR2:00000004","TimeStamp":"2019-02-02T14:02:43.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 12:02:43.035 -02:00 [DBG] Token request success.
2019-02-02 12:02:43.528 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-02 12:02:43.528 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-02 12:02:43.529 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-02 12:02:43.529 -02:00 [DBG] Start discovery request
2019-02-02 12:02:43.709 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-02 12:02:43.710 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-02 12:02:43.710 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-02 12:02:43.710 -02:00 [DBG] Start key discovery request
2019-02-02 12:02:48.210 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 12:02:48.210 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 12:02:48.210 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 12:02:48.210 -02:00 [DBG] Start token request.
2019-02-02 12:02:48.210 -02:00 [DBG] Start client validation
2019-02-02 12:02:48.210 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 12:02:48.210 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 12:02:48.211 -02:00 [DBG] Secret id found: MVC
2019-02-02 12:02:48.211 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:02:48.211 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 12:02:48.211 -02:00 [DBG] Client validation success
2019-02-02 12:02:48.211 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK92S1TAAR3:00000006","TimeStamp":"2019-02-02T14:02:48.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 12:02:48.212 -02:00 [DBG] Start token request validation
2019-02-02 12:02:48.212 -02:00 [DBG] Start client credentials token request validation
2019-02-02 12:02:48.212 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 12:02:48.212 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 12:02:48.212 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 12:02:48.219 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****2_dg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK92S1TAAR3:00000006","TimeStamp":"2019-02-02T14:02:48.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 12:02:48.219 -02:00 [DBG] Token request success.
2019-02-02 12:02:48.939 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 12:02:48.940 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 12:02:48.940 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 12:02:48.940 -02:00 [DBG] Start token request.
2019-02-02 12:02:48.940 -02:00 [DBG] Start client validation
2019-02-02 12:02:48.940 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 12:02:48.940 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 12:02:48.940 -02:00 [DBG] Secret id found: MVC
2019-02-02 12:02:48.941 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:02:48.941 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 12:02:48.941 -02:00 [DBG] Client validation success
2019-02-02 12:02:48.941 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK92S1TAAR2:00000006","TimeStamp":"2019-02-02T14:02:48.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 12:02:48.941 -02:00 [DBG] Start token request validation
2019-02-02 12:02:48.942 -02:00 [DBG] Start client credentials token request validation
2019-02-02 12:02:48.942 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 12:02:48.942 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 12:02:48.942 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 12:02:48.949 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****2_dg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK92S1TAAR2:00000006","TimeStamp":"2019-02-02T14:02:48.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 12:02:48.949 -02:00 [DBG] Token request success.
2019-02-02 12:02:52.742 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 12:02:52.743 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 12:02:52.743 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 12:02:52.743 -02:00 [DBG] Start token request.
2019-02-02 12:02:52.743 -02:00 [DBG] Start client validation
2019-02-02 12:02:52.743 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 12:02:52.744 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 12:02:52.744 -02:00 [DBG] Secret id found: MVC
2019-02-02 12:02:52.744 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:02:52.744 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 12:02:52.744 -02:00 [DBG] Client validation success
2019-02-02 12:02:52.744 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK92S1TAAR3:00000007","TimeStamp":"2019-02-02T14:02:52.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 12:02:52.754 -02:00 [DBG] Start token request validation
2019-02-02 12:02:52.754 -02:00 [DBG] Start client credentials token request validation
2019-02-02 12:02:52.755 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 12:02:52.755 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 12:02:52.755 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 12:02:52.771 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****sZ3g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK92S1TAAR3:00000007","TimeStamp":"2019-02-02T14:02:52.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 12:02:52.771 -02:00 [DBG] Token request success.
2019-02-02 12:02:57.993 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 12:02:57.994 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 12:02:57.994 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 12:02:57.994 -02:00 [DBG] Start token request.
2019-02-02 12:02:57.995 -02:00 [DBG] Start client validation
2019-02-02 12:02:57.995 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 12:02:57.995 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 12:02:57.995 -02:00 [DBG] Secret id found: MVC
2019-02-02 12:02:57.995 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:02:57.995 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 12:02:57.995 -02:00 [DBG] Client validation success
2019-02-02 12:02:57.995 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK92S1TAAR2:00000007","TimeStamp":"2019-02-02T14:02:57.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 12:02:57.999 -02:00 [DBG] Start token request validation
2019-02-02 12:02:58.000 -02:00 [DBG] Start client credentials token request validation
2019-02-02 12:02:58.000 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 12:02:58.000 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 12:02:58.000 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 12:02:58.007 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****irqA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK92S1TAAR2:00000007","TimeStamp":"2019-02-02T14:02:58.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 12:02:58.007 -02:00 [DBG] Token request success.
2019-02-02 12:02:59.082 -02:00 [WRN] Unhandled exception [1,"c13013f9-be29-48f2-8729-13ab47305a0f"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID c13013f9-be29-48f2-8729-13ab47305a0f and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-02 12:02:59.169 -02:00 [ERR] Moving message with ID ["c13013f9-be29-48f2-8729-13ab47305a0f","error"] to error queue System.AggregateException: 1 unhandled exceptions (Message with ID c13013f9-be29-48f2-8729-13ab47305a0f and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)) ---> Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID c13013f9-be29-48f2-8729-13ab47305a0f and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
   --- End of inner exception stack trace ---
---> (Inner Exception #0) Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID c13013f9-be29-48f2-8729-13ab47305a0f and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114<---

2019-02-02 12:03:08.427 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 12:03:08.428 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 12:03:08.428 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 12:03:08.428 -02:00 [DBG] Start token request.
2019-02-02 12:03:08.428 -02:00 [DBG] Start client validation
2019-02-02 12:03:08.428 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 12:03:08.428 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 12:03:08.428 -02:00 [DBG] Secret id found: MVC
2019-02-02 12:03:08.429 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:03:08.429 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 12:03:08.429 -02:00 [DBG] Client validation success
2019-02-02 12:03:08.429 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK92S1TAAR3:00000008","TimeStamp":"2019-02-02T14:03:08.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 12:03:08.431 -02:00 [DBG] Start token request validation
2019-02-02 12:03:08.431 -02:00 [DBG] Start client credentials token request validation
2019-02-02 12:03:08.431 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 12:03:08.431 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 12:03:08.432 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 12:03:08.437 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****q7tw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK92S1TAAR3:00000008","TimeStamp":"2019-02-02T14:03:08.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 12:03:08.437 -02:00 [DBG] Token request success.
2019-02-02 12:03:11.411 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 12:03:11.411 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 12:03:11.411 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 12:03:11.412 -02:00 [DBG] Start token request.
2019-02-02 12:03:11.412 -02:00 [DBG] Start client validation
2019-02-02 12:03:11.412 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 12:03:11.412 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 12:03:11.412 -02:00 [DBG] Secret id found: MVC
2019-02-02 12:03:11.412 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:03:11.412 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 12:03:11.412 -02:00 [DBG] Client validation success
2019-02-02 12:03:11.413 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK92S1TAAR2:00000008","TimeStamp":"2019-02-02T14:03:11.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 12:03:11.414 -02:00 [DBG] Start token request validation
2019-02-02 12:03:11.414 -02:00 [DBG] Start client credentials token request validation
2019-02-02 12:03:11.414 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 12:03:11.415 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 12:03:11.415 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 12:03:11.423 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****deaQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK92S1TAAR2:00000008","TimeStamp":"2019-02-02T14:03:11.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 12:03:11.423 -02:00 [DBG] Token request success.
2019-02-02 12:03:11.553 -02:00 [WRN] Unhandled exception [1,"a2f31b79-45cf-4863-bce4-c75d959862c6"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID a2f31b79-45cf-4863-bce4-c75d959862c6 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-02 12:03:11.577 -02:00 [ERR] Moving message with ID ["a2f31b79-45cf-4863-bce4-c75d959862c6","error"] to error queue System.AggregateException: 1 unhandled exceptions (Message with ID a2f31b79-45cf-4863-bce4-c75d959862c6 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)) ---> Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID a2f31b79-45cf-4863-bce4-c75d959862c6 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
   --- End of inner exception stack trace ---
---> (Inner Exception #0) Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID a2f31b79-45cf-4863-bce4-c75d959862c6 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114<---

2019-02-02 12:04:45.131 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 12:04:45.134 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 12:04:45.134 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 12:04:45.134 -02:00 [DBG] Start token request.
2019-02-02 12:04:45.134 -02:00 [DBG] Start client validation
2019-02-02 12:04:45.135 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 12:04:45.135 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 12:04:45.135 -02:00 [DBG] Secret id found: MVC
2019-02-02 12:04:45.135 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:04:45.135 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 12:04:45.135 -02:00 [DBG] Client validation success
2019-02-02 12:04:45.136 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK92S1TAAR4:00000001","TimeStamp":"2019-02-02T14:04:45.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 12:04:45.139 -02:00 [DBG] Start token request validation
2019-02-02 12:04:45.139 -02:00 [DBG] Start client credentials token request validation
2019-02-02 12:04:45.140 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 12:04:45.140 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 12:04:45.140 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 12:04:45.146 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****PZig","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK92S1TAAR4:00000001","TimeStamp":"2019-02-02T14:04:45.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 12:04:45.146 -02:00 [DBG] Token request success.
2019-02-02 12:04:48.125 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 12:04:48.127 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 12:04:48.127 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 12:04:48.127 -02:00 [DBG] Start token request.
2019-02-02 12:04:48.127 -02:00 [DBG] Start client validation
2019-02-02 12:04:48.127 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 12:04:48.127 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 12:04:48.127 -02:00 [DBG] Secret id found: MVC
2019-02-02 12:04:48.128 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:04:48.128 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 12:04:48.128 -02:00 [DBG] Client validation success
2019-02-02 12:04:48.128 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK92S1TAAR4:00000002","TimeStamp":"2019-02-02T14:04:48.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 12:04:48.134 -02:00 [DBG] Start token request validation
2019-02-02 12:04:48.134 -02:00 [DBG] Start client credentials token request validation
2019-02-02 12:04:48.135 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 12:04:48.135 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 12:04:48.136 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 12:04:48.142 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****ahpA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK92S1TAAR4:00000002","TimeStamp":"2019-02-02T14:04:48.0000000Z","ProcessId":13440,"LocalIpAddress":"127.0.0.1:8670","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 12:04:48.142 -02:00 [DBG] Token request success.
2019-02-02 12:04:48.214 -02:00 [WRN] Unhandled exception [1,"fedf39bd-f61c-4136-981e-b67bbb4d81c5"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID fedf39bd-f61c-4136-981e-b67bbb4d81c5 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-02 12:04:48.234 -02:00 [ERR] Moving message with ID ["fedf39bd-f61c-4136-981e-b67bbb4d81c5","error"] to error queue System.AggregateException: 1 unhandled exceptions (Message with ID fedf39bd-f61c-4136-981e-b67bbb4d81c5 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)) ---> Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID fedf39bd-f61c-4136-981e-b67bbb4d81c5 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
   --- End of inner exception stack trace ---
---> (Inner Exception #0) Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID fedf39bd-f61c-4136-981e-b67bbb4d81c5 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114<---

2019-02-02 12:21:00.269 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue CadastroEvent
2019-02-02 12:22:27.865 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-02-02 12:22:29.598 -02:00 [INF] Bus Rebus 1 stopped
2019-02-02 12:22:34.541 -02:00 [FTL] Application startup exception
Rebus.Injection.ResolutionException: Could not resolve Rebus.Bus.IBus with decorator depth 0 - registrations: Rebus.Injection.Injectionist+Handler ---> RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> System.AggregateException: One or more errors occurred. (Connection failed) ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.TimeoutException: The operation has timed out.
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingAddressFamily(AmqpTcpEndpoint endpoint, Func`2 socketFactory, Int32 timeout, AddressFamily family)
   at RabbitMQ.Client.Impl.SocketFrameHandler..ctor(AmqpTcpEndpoint endpoint, Func`2 socketFactory, Int32 connectionTimeout, Int32 readTimeout, Int32 writeTimeout)
   at RabbitMQ.Client.ConnectionFactory.CreateFrameHandler(AmqpTcpEndpoint endpoint)
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.Internals.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.CreateQueue(String address)
   at Rebus.Config.RebusConfigurer.<>c__DisplayClass12_0.<Start>b__26(IResolutionContext c) in C:\projects-rebus\Rebus\Rebus\Config\RebusConfigurer.cs:line 332
   at Rebus.Injection.Injectionist.ResolutionContext.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 199
   --- End of inner exception stack trace ---
   at Rebus.Injection.Injectionist.ResolutionContext.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 248
   at Rebus.Injection.Injectionist.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 57
   at Rebus.Config.RebusConfigurer.Start() in C:\projects-rebus\Rebus\Rebus\Config\RebusConfigurer.cs:line 361
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitSingleton(SingletonCallSite singletonCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Rebus.ServiceProvider.ServiceProviderExtensions.UseRebus(IServiceProvider provider, Action`1 busAction)
   at Microsoft.Extensions.DependencyInjection.ApplicationBuilderExtensions.UseRebus(IApplicationBuilder app, Action`1 busAction)
   at Identity.API.Startup.Configure(IApplicationBuilder app, IHostingEnvironment env) in C:\Users\marce\Documents\GitHub\CasaDoCodigo.CQRS\CasaDoCodigo.Identity\Startup.cs:line 120
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Mvc.Internal.MiddlewareFilterBuilderStartupFilter.<>c__DisplayClass0_0.<Configure>g__MiddlewareFilterBuilder|0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-02 12:22:41.237 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue CadastroEvent
2019-02-02 12:22:41.747 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 12:22:41.775 -02:00 [INF] Setting number of workers to 1
2019-02-02 12:22:41.777 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 12:22:41.780 -02:00 [INF] Bus Rebus 1 started
2019-02-02 12:22:41.782 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 12:22:41.812 -02:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-02 12:22:41.831 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 12:22:41.840 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 12:22:41.865 -02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-02 12:22:41.865 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-02 12:22:41.865 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-02 12:22:41.866 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-02 12:22:41.866 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-02 12:22:41.866 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-02 12:23:08.389 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue CadastroEvent
2019-02-02 12:23:09.746 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 12:23:09.820 -02:00 [INF] Setting number of workers to 1
2019-02-02 12:23:09.856 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 12:23:09.949 -02:00 [INF] Bus Rebus 1 started
2019-02-02 12:23:09.974 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 12:23:10.051 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 12:23:10.076 -02:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-02 12:23:10.103 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 12:23:10.129 -02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-02 12:23:10.129 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-02 12:23:10.129 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-02 12:23:10.129 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-02 12:23:10.130 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-02 12:23:10.130 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-02 12:23:36.590 -02:00 [DBG] Login Url: /Account/Login
2019-02-02 12:23:36.594 -02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-02 12:23:36.594 -02:00 [DBG] Logout Url: /Account/Logout
2019-02-02 12:23:36.594 -02:00 [DBG] ConsentUrl Url: /consent
2019-02-02 12:23:36.594 -02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-02 12:23:36.594 -02:00 [DBG] Error Url: /home/error
2019-02-02 12:23:36.594 -02:00 [DBG] Error Id Parameter: errorId
2019-02-02 12:23:36.636 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 12:23:36.663 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 12:23:36.663 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 12:23:36.674 -02:00 [DBG] Start token request.
2019-02-02 12:23:36.683 -02:00 [DBG] Start client validation
2019-02-02 12:23:36.696 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 12:23:36.697 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 12:23:36.697 -02:00 [DBG] Secret id found: MVC
2019-02-02 12:23:36.730 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:23:36.751 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 12:23:36.751 -02:00 [DBG] Client validation success
2019-02-02 12:23:36.780 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK937QRK8T7:00000002","TimeStamp":"2019-02-02T14:23:36.0000000Z","ProcessId":17680,"LocalIpAddress":"127.0.0.1:20862","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 12:23:36.882 -02:00 [DBG] Start token request validation
2019-02-02 12:23:36.894 -02:00 [DBG] Start client credentials token request validation
2019-02-02 12:23:36.946 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 12:23:36.957 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 12:23:37.001 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 12:23:37.198 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****yQ5A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK937QRK8T7:00000002","TimeStamp":"2019-02-02T14:23:37.0000000Z","ProcessId":17680,"LocalIpAddress":"127.0.0.1:20862","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 12:23:37.204 -02:00 [DBG] Token request success.
2019-02-02 12:23:37.738 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-02 12:23:37.739 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-02 12:23:37.740 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-02 12:23:37.748 -02:00 [DBG] Start discovery request
2019-02-02 12:23:37.899 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-02 12:23:37.900 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-02 12:23:37.900 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-02 12:23:37.907 -02:00 [DBG] Start key discovery request
2019-02-02 12:23:54.238 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 12:23:54.239 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 12:23:54.239 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 12:23:54.239 -02:00 [DBG] Start token request.
2019-02-02 12:23:54.240 -02:00 [DBG] Start client validation
2019-02-02 12:23:54.240 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 12:23:54.240 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 12:23:54.240 -02:00 [DBG] Secret id found: MVC
2019-02-02 12:23:54.240 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:23:54.241 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 12:23:54.244 -02:00 [DBG] Client validation success
2019-02-02 12:23:54.244 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK937QRK8T8:00000003","TimeStamp":"2019-02-02T14:23:54.0000000Z","ProcessId":17680,"LocalIpAddress":"127.0.0.1:20862","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 12:23:54.248 -02:00 [DBG] Start token request validation
2019-02-02 12:23:54.248 -02:00 [DBG] Start client credentials token request validation
2019-02-02 12:23:54.249 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 12:23:54.249 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 12:23:54.249 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 12:23:54.255 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****k3WA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK937QRK8T8:00000003","TimeStamp":"2019-02-02T14:23:54.0000000Z","ProcessId":17680,"LocalIpAddress":"127.0.0.1:20862","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 12:23:54.256 -02:00 [DBG] Token request success.
2019-02-02 12:23:55.036 -02:00 [WRN] Unhandled exception [1,"f20b75c6-00b9-4d92-b23e-c1faab386749"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID f20b75c6-00b9-4d92-b23e-c1faab386749 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-02 12:23:55.157 -02:00 [ERR] Moving message with ID ["f20b75c6-00b9-4d92-b23e-c1faab386749","error"] to error queue System.AggregateException: 1 unhandled exceptions (Message with ID f20b75c6-00b9-4d92-b23e-c1faab386749 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)) ---> Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID f20b75c6-00b9-4d92-b23e-c1faab386749 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
   --- End of inner exception stack trace ---
---> (Inner Exception #0) Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID f20b75c6-00b9-4d92-b23e-c1faab386749 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114<---

2019-02-02 12:28:34.947 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue CadastroEvent
2019-02-02 12:28:36.401 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 12:28:36.551 -02:00 [INF] Setting number of workers to 1
2019-02-02 12:28:36.618 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 12:28:36.663 -02:00 [INF] Bus Rebus 1 started
2019-02-02 12:28:36.689 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 12:28:36.736 -02:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-02 12:28:36.805 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 12:28:36.883 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 12:28:36.918 -02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-02 12:28:36.918 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-02 12:28:36.918 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-02 12:28:36.918 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-02 12:28:36.919 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-02 12:28:36.919 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-02 12:42:29.793 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue CadastroEvent
2019-02-02 12:42:30.958 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 12:42:30.989 -02:00 [INF] Setting number of workers to 1
2019-02-02 12:42:31.006 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 12:42:31.017 -02:00 [INF] Bus Rebus 1 started
2019-02-02 12:42:31.024 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 12:42:31.067 -02:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-02 12:42:31.109 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 12:42:31.162 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 12:42:31.259 -02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-02 12:42:31.259 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-02 12:42:31.259 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-02 12:42:31.259 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-02 12:42:31.260 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-02 12:42:31.261 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-02 12:51:33.090 -02:00 [DBG] Login Url: /Account/Login
2019-02-02 12:51:33.093 -02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-02 12:51:33.093 -02:00 [DBG] Logout Url: /Account/Logout
2019-02-02 12:51:33.093 -02:00 [DBG] ConsentUrl Url: /consent
2019-02-02 12:51:33.093 -02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-02 12:51:33.093 -02:00 [DBG] Error Url: /home/error
2019-02-02 12:51:33.093 -02:00 [DBG] Error Id Parameter: errorId
2019-02-02 12:51:33.131 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 12:51:33.163 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 12:51:33.164 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 12:51:33.182 -02:00 [DBG] Start token request.
2019-02-02 12:51:33.200 -02:00 [DBG] Start client validation
2019-02-02 12:51:33.213 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 12:51:33.214 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 12:51:33.214 -02:00 [DBG] Secret id found: MVC
2019-02-02 12:51:33.299 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:51:33.322 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 12:51:33.322 -02:00 [DBG] Client validation success
2019-02-02 12:51:33.350 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK93IKVCTGD:00000001","TimeStamp":"2019-02-02T14:51:33.0000000Z","ProcessId":10736,"LocalIpAddress":"127.0.0.1:6925","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 12:51:33.457 -02:00 [DBG] Start token request validation
2019-02-02 12:51:33.475 -02:00 [DBG] Start client credentials token request validation
2019-02-02 12:51:33.560 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 12:51:33.576 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 12:51:33.627 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 12:51:33.839 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****iBDA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK93IKVCTGD:00000001","TimeStamp":"2019-02-02T14:51:33.0000000Z","ProcessId":10736,"LocalIpAddress":"127.0.0.1:6925","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 12:51:33.846 -02:00 [DBG] Token request success.
2019-02-02 12:51:34.412 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-02 12:51:34.414 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-02 12:51:34.414 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-02 12:51:34.460 -02:00 [DBG] Start discovery request
2019-02-02 12:51:34.708 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-02 12:51:34.710 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-02 12:51:34.711 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-02 12:51:34.719 -02:00 [DBG] Start key discovery request
2019-02-02 12:51:54.817 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 12:51:54.819 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 12:51:54.819 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 12:51:54.819 -02:00 [DBG] Start token request.
2019-02-02 12:51:54.819 -02:00 [DBG] Start client validation
2019-02-02 12:51:54.819 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 12:51:54.820 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 12:51:54.820 -02:00 [DBG] Secret id found: MVC
2019-02-02 12:51:54.820 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 12:51:54.820 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 12:51:54.820 -02:00 [DBG] Client validation success
2019-02-02 12:51:54.820 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK93IKVCTGD:00000004","TimeStamp":"2019-02-02T14:51:54.0000000Z","ProcessId":10736,"LocalIpAddress":"127.0.0.1:6925","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 12:51:54.824 -02:00 [DBG] Start token request validation
2019-02-02 12:51:54.824 -02:00 [DBG] Start client credentials token request validation
2019-02-02 12:51:54.825 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 12:51:54.825 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 12:51:54.825 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 12:51:54.831 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****9NhA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK93IKVCTGD:00000004","TimeStamp":"2019-02-02T14:51:54.0000000Z","ProcessId":10736,"LocalIpAddress":"127.0.0.1:6925","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 12:51:54.831 -02:00 [DBG] Token request success.
2019-02-02 12:51:55.677 -02:00 [WRN] Unhandled exception [1,"daec0ad4-abf6-4158-a6dd-26150c202861"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID daec0ad4-abf6-4158-a6dd-26150c202861 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-02 12:51:55.726 -02:00 [ERR] Moving message with ID ["daec0ad4-abf6-4158-a6dd-26150c202861","error"] to error queue System.AggregateException: 1 unhandled exceptions (Message with ID daec0ad4-abf6-4158-a6dd-26150c202861 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)) ---> Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID daec0ad4-abf6-4158-a6dd-26150c202861 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
   --- End of inner exception stack trace ---
---> (Inner Exception #0) Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID daec0ad4-abf6-4158-a6dd-26150c202861 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114<---

2019-02-02 14:15:27.653 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue CadastroEvent
2019-02-02 14:15:28.570 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 14:15:28.613 -02:00 [INF] Setting number of workers to 1
2019-02-02 14:15:28.621 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 14:15:28.635 -02:00 [INF] Bus Rebus 1 started
2019-02-02 14:15:28.644 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 14:15:28.695 -02:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-02 14:15:28.733 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 14:15:28.756 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 14:15:28.794 -02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-02 14:15:28.794 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-02 14:15:28.794 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-02 14:15:28.794 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-02 14:15:28.794 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-02 14:15:28.794 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-02 14:16:01.837 -02:00 [DBG] Login Url: /Account/Login
2019-02-02 14:16:01.840 -02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-02 14:16:01.840 -02:00 [DBG] Logout Url: /Account/Logout
2019-02-02 14:16:01.840 -02:00 [DBG] ConsentUrl Url: /consent
2019-02-02 14:16:01.840 -02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-02 14:16:01.840 -02:00 [DBG] Error Url: /home/error
2019-02-02 14:16:01.840 -02:00 [DBG] Error Id Parameter: errorId
2019-02-02 14:16:01.876 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 14:16:01.898 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 14:16:01.899 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 14:16:01.911 -02:00 [DBG] Start token request.
2019-02-02 14:16:01.923 -02:00 [DBG] Start client validation
2019-02-02 14:16:01.933 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 14:16:01.934 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 14:16:01.935 -02:00 [DBG] Secret id found: MVC
2019-02-02 14:16:01.955 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 14:16:01.968 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 14:16:01.968 -02:00 [DBG] Client validation success
2019-02-02 14:16:01.990 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK956J3VML7:00000002","TimeStamp":"2019-02-02T16:16:01.0000000Z","ProcessId":13492,"LocalIpAddress":"127.0.0.1:27698","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 14:16:02.054 -02:00 [DBG] Start token request validation
2019-02-02 14:16:02.065 -02:00 [DBG] Start client credentials token request validation
2019-02-02 14:16:02.108 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 14:16:02.127 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 14:16:02.195 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 14:16:02.380 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****5_UQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK956J3VML7:00000002","TimeStamp":"2019-02-02T16:16:02.0000000Z","ProcessId":13492,"LocalIpAddress":"127.0.0.1:27698","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 14:16:02.386 -02:00 [DBG] Token request success.
2019-02-02 14:16:02.831 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-02 14:16:02.834 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-02 14:16:02.834 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-02 14:16:02.845 -02:00 [DBG] Start discovery request
2019-02-02 14:16:03.042 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-02 14:16:03.043 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-02 14:16:03.043 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-02 14:16:03.050 -02:00 [DBG] Start key discovery request
2019-02-02 14:16:57.405 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 14:16:57.412 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 14:16:57.412 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 14:16:57.412 -02:00 [DBG] Start token request.
2019-02-02 14:16:57.413 -02:00 [DBG] Start client validation
2019-02-02 14:16:57.413 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 14:16:57.413 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 14:16:57.413 -02:00 [DBG] Secret id found: MVC
2019-02-02 14:16:57.413 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 14:16:57.413 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 14:16:57.413 -02:00 [DBG] Client validation success
2019-02-02 14:16:57.414 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK956J3VML6:00000003","TimeStamp":"2019-02-02T16:16:57.0000000Z","ProcessId":13492,"LocalIpAddress":"127.0.0.1:27698","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 14:16:57.415 -02:00 [DBG] Start token request validation
2019-02-02 14:16:57.415 -02:00 [DBG] Start client credentials token request validation
2019-02-02 14:16:57.415 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 14:16:57.416 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 14:16:57.416 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 14:16:57.422 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****qfXA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK956J3VML6:00000003","TimeStamp":"2019-02-02T16:16:57.0000000Z","ProcessId":13492,"LocalIpAddress":"127.0.0.1:27698","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 14:16:57.422 -02:00 [DBG] Token request success.
2019-02-02 14:16:58.307 -02:00 [WRN] Unhandled exception [1,"9844c8d8-0adb-488e-a7f4-f61ef549319d"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 9844c8d8-0adb-488e-a7f4-f61ef549319d and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-02 14:16:58.376 -02:00 [ERR] Moving message with ID ["9844c8d8-0adb-488e-a7f4-f61ef549319d","error"] to error queue System.AggregateException: 1 unhandled exceptions (Message with ID 9844c8d8-0adb-488e-a7f4-f61ef549319d and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)) ---> Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 9844c8d8-0adb-488e-a7f4-f61ef549319d and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
   --- End of inner exception stack trace ---
---> (Inner Exception #0) Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 9844c8d8-0adb-488e-a7f4-f61ef549319d and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114<---

2019-02-02 17:12:46.838 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue CadastroEvent
2019-02-02 17:12:49.801 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 17:12:49.883 -02:00 [INF] Setting number of workers to 1
2019-02-02 17:12:49.936 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 17:12:50.048 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 17:12:50.049 -02:00 [INF] Bus Rebus 1 started
2019-02-02 17:12:50.156 -02:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-02 17:12:50.285 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 17:12:50.439 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 17:12:50.468 -02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-02 17:12:50.469 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-02 17:12:50.469 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-02 17:12:50.469 -02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-02 17:12:50.469 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-02 17:12:50.469 -02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-02 17:13:57.877 -02:00 [DBG] Login Url: /Account/Login
2019-02-02 17:13:57.879 -02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-02 17:13:57.879 -02:00 [DBG] Logout Url: /Account/Logout
2019-02-02 17:13:57.879 -02:00 [DBG] ConsentUrl Url: /consent
2019-02-02 17:13:57.879 -02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-02 17:13:57.880 -02:00 [DBG] Error Url: /home/error
2019-02-02 17:13:57.880 -02:00 [DBG] Error Id Parameter: errorId
2019-02-02 17:13:57.927 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:13:57.962 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:13:57.962 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:13:57.979 -02:00 [DBG] Start token request.
2019-02-02 17:13:57.992 -02:00 [DBG] Start client validation
2019-02-02 17:13:58.001 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:13:58.002 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:13:58.003 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:13:58.030 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:13:58.049 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:13:58.049 -02:00 [DBG] Client validation success
2019-02-02 17:13:58.076 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK989MTR0VR:00000001","TimeStamp":"2019-02-02T19:13:58.0000000Z","ProcessId":7448,"LocalIpAddress":"127.0.0.1:12949","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 17:13:58.164 -02:00 [DBG] Start token request validation
2019-02-02 17:13:58.188 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:13:58.248 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:13:58.262 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 17:13:58.323 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:13:58.482 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****wQvg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK989MTR0VR:00000001","TimeStamp":"2019-02-02T19:13:58.0000000Z","ProcessId":7448,"LocalIpAddress":"127.0.0.1:12949","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 17:13:58.487 -02:00 [DBG] Token request success.
2019-02-02 17:13:59.141 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-02 17:13:59.143 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-02 17:13:59.143 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-02 17:13:59.153 -02:00 [DBG] Start discovery request
2019-02-02 17:13:59.475 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-02 17:13:59.479 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-02 17:13:59.479 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-02 17:13:59.489 -02:00 [DBG] Start key discovery request
2019-02-02 17:14:29.641 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:14:29.642 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:14:29.643 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:14:29.643 -02:00 [DBG] Start token request.
2019-02-02 17:14:29.643 -02:00 [DBG] Start client validation
2019-02-02 17:14:29.647 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:14:29.655 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:14:29.655 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:14:29.655 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:14:29.656 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:14:29.656 -02:00 [DBG] Client validation success
2019-02-02 17:14:29.656 -02:00 [INF] {"ClientId":"MVC","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLK989MTR0VR:00000004","TimeStamp":"2019-02-02T19:14:29.0000000Z","ProcessId":7448,"LocalIpAddress":"127.0.0.1:12949","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-02 17:14:29.657 -02:00 [DBG] Start token request validation
2019-02-02 17:14:29.657 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:14:29.657 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:14:29.658 -02:00 [INF] Token request validation success
{"ClientId":"MVC","ClientName":"MVC","GrantType":"client_credentials","Scopes":"Basket.API","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"Basket.API"},"$type":"TokenRequestValidationLog"}
2019-02-02 17:14:29.658 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:14:29.664 -02:00 [INF] {"ClientId":"MVC","ClientName":"MVC","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"Basket.API","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****cG5A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLK989MTR0VR:00000004","TimeStamp":"2019-02-02T19:14:29.0000000Z","ProcessId":7448,"LocalIpAddress":"127.0.0.1:12949","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-02 17:14:29.664 -02:00 [DBG] Token request success.
2019-02-02 17:14:30.897 -02:00 [WRN] Unhandled exception [1,"2ed97a02-8f44-461e-96db-308134c5d6ad"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 2ed97a02-8f44-461e-96db-308134c5d6ad and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-02 17:14:30.975 -02:00 [ERR] Moving message with ID ["2ed97a02-8f44-461e-96db-308134c5d6ad","error"] to error queue System.AggregateException: 1 unhandled exceptions (Message with ID 2ed97a02-8f44-461e-96db-308134c5d6ad and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)) ---> Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 2ed97a02-8f44-461e-96db-308134c5d6ad and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
   --- End of inner exception stack trace ---
---> (Inner Exception #0) Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 2ed97a02-8f44-461e-96db-308134c5d6ad and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114<---

2019-02-02 17:23:38.287 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 17:23:39.721 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 17:23:39.801 -02:00 [INF] Setting number of workers to 1
2019-02-02 17:23:39.826 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 17:23:39.870 -02:00 [INF] Bus Rebus 1 started
2019-02-02 17:23:39.883 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 17:23:39.971 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 17:23:40.158 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 17:23:40.178 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 17:23:40.179 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 17:23:40.179 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 17:23:40.179 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 17:23:40.179 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 17:24:14.453 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:24:14.504 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:24:14.505 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:24:14.522 -02:00 [DBG] Start token request.
2019-02-02 17:24:14.535 -02:00 [DBG] Start client validation
2019-02-02 17:24:14.549 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:24:14.549 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:24:14.550 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:24:14.567 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:24:14.589 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:24:14.589 -02:00 [DBG] Client validation success
2019-02-02 17:24:14.617 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK98FO6N25L:00000002",
  "TimeStamp": "2019-02-02T19:24:14Z",
  "ProcessId": 16172,
  "LocalIpAddress": "127.0.0.1:23261",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:24:14.677 -02:00 [DBG] Start token request validation
2019-02-02 17:24:14.687 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:24:14.739 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:24:14.755 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:24:14.798 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:24:14.997 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****posQ"
    }
  ],
  "ActivityId": "0HLK98FO6N25L:00000002",
  "TimeStamp": "2019-02-02T19:24:14Z",
  "ProcessId": 16172,
  "LocalIpAddress": "127.0.0.1:23261",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:24:15.000 -02:00 [DBG] Token request success.
2019-02-02 17:24:15.784 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-02 17:24:15.786 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-02 17:24:15.787 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-02 17:24:15.799 -02:00 [DBG] Start discovery request
2019-02-02 17:24:15.962 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-02 17:24:15.963 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-02 17:24:15.963 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-02 17:24:21.963 -02:00 [DBG] Start key discovery request
2019-02-02 17:24:28.723 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:24:28.737 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:24:28.737 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:24:28.737 -02:00 [DBG] Start token request.
2019-02-02 17:24:28.737 -02:00 [DBG] Start client validation
2019-02-02 17:24:28.737 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:24:28.737 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:24:28.738 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:24:28.738 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:24:28.738 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:24:28.738 -02:00 [DBG] Client validation success
2019-02-02 17:24:28.738 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK98FO6N25M:00000003",
  "TimeStamp": "2019-02-02T19:24:28Z",
  "ProcessId": 16172,
  "LocalIpAddress": "127.0.0.1:23261",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:24:28.739 -02:00 [DBG] Start token request validation
2019-02-02 17:24:28.739 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:24:28.740 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:24:28.740 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:24:28.740 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:24:28.747 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****DTrQ"
    }
  ],
  "ActivityId": "0HLK98FO6N25M:00000003",
  "TimeStamp": "2019-02-02T19:24:28Z",
  "ProcessId": 16172,
  "LocalIpAddress": "127.0.0.1:23261",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:24:28.747 -02:00 [DBG] Token request success.
2019-02-02 17:24:29.551 -02:00 [WRN] Unhandled exception [1,"aff6fe2a-0e58-4b6d-8672-6cc5d0dec2b0"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID aff6fe2a-0e58-4b6d-8672-6cc5d0dec2b0 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-02 17:30:15.619 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 17:30:16.911 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 17:30:16.991 -02:00 [INF] Setting number of workers to 1
2019-02-02 17:30:17.024 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 17:30:17.043 -02:00 [INF] Bus Rebus 1 started
2019-02-02 17:30:17.062 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 17:30:17.132 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 17:30:17.154 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 17:30:17.172 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 17:30:17.173 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 17:30:17.173 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 17:30:17.173 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 17:30:17.173 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 17:33:26.673 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:33:26.714 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:33:26.714 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:33:26.737 -02:00 [DBG] Start token request.
2019-02-02 17:33:26.748 -02:00 [DBG] Start client validation
2019-02-02 17:33:26.762 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:33:26.763 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:33:26.763 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:33:26.779 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:33:26.806 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:33:26.806 -02:00 [DBG] Client validation success
2019-02-02 17:33:26.840 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK98JEHTGLM:00000001",
  "TimeStamp": "2019-02-02T19:33:26Z",
  "ProcessId": 12948,
  "LocalIpAddress": "127.0.0.1:14792",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:33:26.881 -02:00 [DBG] Start token request validation
2019-02-02 17:33:26.892 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:33:26.957 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:33:26.975 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:33:27.024 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:33:27.181 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****P19w"
    }
  ],
  "ActivityId": "0HLK98JEHTGLM:00000001",
  "TimeStamp": "2019-02-02T19:33:27Z",
  "ProcessId": 12948,
  "LocalIpAddress": "127.0.0.1:14792",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:33:27.183 -02:00 [DBG] Token request success.
2019-02-02 17:33:27.888 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-02 17:33:27.890 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-02 17:33:27.890 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-02 17:33:27.902 -02:00 [DBG] Start discovery request
2019-02-02 17:33:28.112 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-02 17:33:28.113 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-02 17:33:28.113 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-02 17:33:29.685 -02:00 [DBG] Start key discovery request
2019-02-02 17:34:10.356 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:34:10.372 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:34:10.373 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:34:10.373 -02:00 [DBG] Start token request.
2019-02-02 17:34:10.373 -02:00 [DBG] Start client validation
2019-02-02 17:34:10.373 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:34:10.373 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:34:10.374 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:34:10.374 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:34:10.374 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:34:10.374 -02:00 [DBG] Client validation success
2019-02-02 17:34:10.374 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK98JEHTGLM:00000004",
  "TimeStamp": "2019-02-02T19:34:10Z",
  "ProcessId": 12948,
  "LocalIpAddress": "127.0.0.1:14792",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:34:10.377 -02:00 [DBG] Start token request validation
2019-02-02 17:34:10.377 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:34:10.377 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:34:10.377 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:34:10.378 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:34:10.382 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****j8Kw"
    }
  ],
  "ActivityId": "0HLK98JEHTGLM:00000004",
  "TimeStamp": "2019-02-02T19:34:10Z",
  "ProcessId": 12948,
  "LocalIpAddress": "127.0.0.1:14792",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:34:10.382 -02:00 [DBG] Token request success.
2019-02-02 17:34:11.508 -02:00 [WRN] Unhandled exception [1,"76205b62-081c-40ce-aba8-4ee65ad6e3de"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 76205b62-081c-40ce-aba8-4ee65ad6e3de and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-02 17:35:25.755 -02:00 [INF] Message received:
2019-02-02 17:35:25.755 -02:00 [INF] ----------------------------------
2019-02-02 17:35:25.760 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"a3d393f2-c9e0-4cce-8eae-fd161de8268d","CreationDate":"2019-02-02T19:35:25.7198978Z"}
2019-02-02 17:35:25.760 -02:00 [INF] ----------------------------------
2019-02-02 17:35:26.434 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens b754e956-ca69-4598-9025-b9a41c8994e1 to 1 handlers took 683 ms
2019-02-02 17:35:51.363 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:35:51.363 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:35:51.363 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:35:51.363 -02:00 [DBG] Start token request.
2019-02-02 17:35:51.363 -02:00 [DBG] Start client validation
2019-02-02 17:35:51.364 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:35:51.364 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:35:51.364 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:35:51.364 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:35:51.364 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:35:51.364 -02:00 [DBG] Client validation success
2019-02-02 17:35:51.365 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK98JEHTGLN:00000001",
  "TimeStamp": "2019-02-02T19:35:51Z",
  "ProcessId": 12948,
  "LocalIpAddress": "127.0.0.1:14792",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:35:51.365 -02:00 [DBG] Start token request validation
2019-02-02 17:35:51.365 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:36:59.335 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:37:06.279 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:37:13.724 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:37:13.724 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:37:13.724 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:37:13.724 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:37:13.724 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:37:13.724 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:37:13.724 -02:00 [DBG] Start token request.
2019-02-02 17:37:13.724 -02:00 [DBG] Start token request.
2019-02-02 17:37:13.725 -02:00 [DBG] Start client validation
2019-02-02 17:37:13.725 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:37:13.725 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:37:13.725 -02:00 [DBG] Start client validation
2019-02-02 17:37:13.725 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:37:13.725 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:37:13.725 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:37:13.725 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:37:13.725 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:37:13.725 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:37:13.725 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:37:13.725 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:37:13.725 -02:00 [DBG] Client validation success
2019-02-02 17:37:13.725 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:37:13.725 -02:00 [DBG] Client validation success
2019-02-02 17:37:13.725 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK98JEHTGLP:00000001",
  "TimeStamp": "2019-02-02T19:37:13Z",
  "ProcessId": 12948,
  "LocalIpAddress": "127.0.0.1:14792",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:37:13.725 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK98JEHTGLO:00000001",
  "TimeStamp": "2019-02-02T19:37:13Z",
  "ProcessId": 12948,
  "LocalIpAddress": "127.0.0.1:14792",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:37:13.726 -02:00 [DBG] Start token request validation
2019-02-02 17:37:13.726 -02:00 [DBG] Start token request validation
2019-02-02 17:37:13.733 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****WkEQ"
    }
  ],
  "ActivityId": "0HLK98JEHTGLN:00000001",
  "TimeStamp": "2019-02-02T19:37:13Z",
  "ProcessId": 12948,
  "LocalIpAddress": "127.0.0.1:14792",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:40:51.909 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 17:40:53.014 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 17:40:53.072 -02:00 [INF] Setting number of workers to 1
2019-02-02 17:40:53.084 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 17:40:53.127 -02:00 [INF] Bus Rebus 1 started
2019-02-02 17:40:53.144 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 17:40:53.222 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 17:40:53.282 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 17:40:53.319 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 17:40:53.319 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 17:40:53.319 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 17:40:53.319 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 17:40:53.319 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 17:41:48.135 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:41:48.177 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:41:48.177 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:41:48.188 -02:00 [DBG] Start token request.
2019-02-02 17:41:48.198 -02:00 [DBG] Start client validation
2019-02-02 17:41:48.206 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:41:48.207 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:41:48.207 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:41:48.215 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:41:48.229 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:41:48.230 -02:00 [DBG] Client validation success
2019-02-02 17:41:48.247 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK98PC4SCPR:00000002",
  "TimeStamp": "2019-02-02T19:41:48Z",
  "ProcessId": 16344,
  "LocalIpAddress": "127.0.0.1:8438",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:41:48.286 -02:00 [DBG] Start token request validation
2019-02-02 17:41:48.308 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:41:48.395 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:41:48.417 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:41:48.461 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:41:48.618 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****MnIg"
    }
  ],
  "ActivityId": "0HLK98PC4SCPR:00000002",
  "TimeStamp": "2019-02-02T19:41:48Z",
  "ProcessId": 16344,
  "LocalIpAddress": "127.0.0.1:8438",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:41:48.621 -02:00 [DBG] Token request success.
2019-02-02 17:41:49.337 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-02 17:41:49.342 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-02 17:41:49.342 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-02 17:41:49.350 -02:00 [DBG] Start discovery request
2019-02-02 17:41:49.649 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-02 17:41:49.650 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-02 17:41:49.650 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-02 17:41:51.135 -02:00 [DBG] Start key discovery request
2019-02-02 17:42:26.360 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:42:26.369 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:42:26.369 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:42:26.369 -02:00 [DBG] Start token request.
2019-02-02 17:42:26.370 -02:00 [DBG] Start client validation
2019-02-02 17:42:26.370 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:42:26.370 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:42:26.370 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:42:26.370 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:42:26.370 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:42:26.371 -02:00 [DBG] Client validation success
2019-02-02 17:42:26.371 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK98PC4SCPS:00000003",
  "TimeStamp": "2019-02-02T19:42:26Z",
  "ProcessId": 16344,
  "LocalIpAddress": "127.0.0.1:8438",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:42:26.373 -02:00 [DBG] Start token request validation
2019-02-02 17:42:26.373 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:42:26.373 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:42:26.374 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:42:26.374 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:42:26.380 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****qGoQ"
    }
  ],
  "ActivityId": "0HLK98PC4SCPS:00000003",
  "TimeStamp": "2019-02-02T19:42:26Z",
  "ProcessId": 16344,
  "LocalIpAddress": "127.0.0.1:8438",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:42:26.380 -02:00 [DBG] Token request success.
2019-02-02 17:42:27.280 -02:00 [WRN] Unhandled exception [1,"1f98d1e5-265b-4f88-8e2b-f8ca5ca15c9a"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 1f98d1e5-265b-4f88-8e2b-f8ca5ca15c9a and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-02 17:43:06.080 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:43:47.239 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:43:47.239 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:43:47.239 -02:00 [DBG] Start token request.
2019-02-02 17:43:47.239 -02:00 [DBG] Start client validation
2019-02-02 17:43:47.239 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:43:47.239 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:43:47.239 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:43:47.239 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:43:47.240 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:43:47.240 -02:00 [DBG] Client validation success
2019-02-02 17:43:47.240 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK98PC4SCPS:00000004",
  "TimeStamp": "2019-02-02T19:43:47Z",
  "ProcessId": 16344,
  "LocalIpAddress": "127.0.0.1:8438",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:43:47.243 -02:00 [DBG] Start token request validation
2019-02-02 17:43:47.244 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:43:47.244 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:43:47.244 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:43:47.244 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:43:47.249 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****iPfg"
    }
  ],
  "ActivityId": "0HLK98PC4SCPS:00000004",
  "TimeStamp": "2019-02-02T19:43:47Z",
  "ProcessId": 16344,
  "LocalIpAddress": "127.0.0.1:8438",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:43:47.270 -02:00 [INF] Message received:
2019-02-02 17:43:49.873 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:55:48.123 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 17:55:49.292 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 17:55:49.338 -02:00 [INF] Setting number of workers to 1
2019-02-02 17:55:49.354 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 17:55:49.375 -02:00 [INF] Bus Rebus 1 started
2019-02-02 17:55:49.410 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 17:55:49.481 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 17:55:49.548 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 17:55:49.573 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 17:55:49.574 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 17:55:49.574 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 17:55:49.575 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 17:55:49.575 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 17:55:49.832 -02:00 [INF] Message received:
2019-02-02 17:55:49.832 -02:00 [INF] ----------------------------------
2019-02-02 17:55:49.851 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"e7c7db2f-2759-4de9-be48-37b99e17b686","CreationDate":"2019-02-02T19:55:49.689811Z"}
2019-02-02 17:55:49.851 -02:00 [INF] ----------------------------------
2019-02-02 17:55:50.933 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 1087d2dc-6318-47dc-8b8f-51988da41e0a to 1 handlers took 1109 ms
2019-02-02 17:57:32.640 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 17:57:33.493 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 17:57:33.545 -02:00 [INF] Setting number of workers to 1
2019-02-02 17:57:33.571 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 17:57:33.595 -02:00 [INF] Bus Rebus 1 started
2019-02-02 17:57:33.600 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 17:57:33.701 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 17:57:33.719 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 17:57:33.735 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 17:57:33.735 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 17:57:33.735 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 17:57:33.735 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 17:57:33.736 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 17:58:00.004 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-02 17:58:00.045 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-02 17:58:00.046 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-02 17:58:00.053 -02:00 [DBG] Start discovery request
2019-02-02 17:58:00.193 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-02 17:58:00.195 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-02 17:58:00.195 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-02 17:58:00.202 -02:00 [DBG] Start key discovery request
2019-02-02 17:58:00.614 -02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-02 17:58:00.623 -02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-02 17:58:00.623 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-02 17:58:00.629 -02:00 [DBG] Start authorize request
2019-02-02 17:58:00.647 -02:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-02 17:58:00.657 -02:00 [DBG] Start authorize request protocol validation
2019-02-02 17:58:00.686 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:58:00.710 -02:00 [DBG] Checking for PKCE parameters
2019-02-02 17:58:00.713 -02:00 [DBG] No PKCE used.
2019-02-02 17:58:00.791 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-02 17:58:00.815 -02:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBI8thUoJ41mdxQUkiVR6Xwdk9nUzAOpK9yNmFitHg8XtcFnpB2631F3bjAdaJKxV25FDHiiyEdkebTWJLuQq6F1KzRTNnY0TF2ILsl-kmXtpgcWQXjXoxgz_L_p50fz7uJHKHcor1TLBqv5owaRw6Nzi-fq6c9yrqS-FA86tRtkd_UV9kmHuGUzMrwrbHRrsE33-mDJHNTHnyBqJZtfU390jw2_q6S2J0mcYRJ6aPeKiT5hJGRmMPCvFOmz7ARcL-WfFHJAQ3_b2kOAv-yEdZ2NQEIcaKH9KGqZ7CanoM9v3_FC1vLQrG-bZZg50TbaRcA",
  "Nonce": "636847342802999274.ZTk0ODE1YTItYzIxZi00NWFlLTk1M2ItZDA3M2U5OThmZDJlZGRiODRhMGQtY2Q1MS00YmE2LWE0YjQtZDU4Njc5OGI4ZTk5",
  "SessionId": "ab5c771d1b04abcb39f3c4382084fb62",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636847342802999274.ZTk0ODE1YTItYzIxZi00NWFlLTk1M2ItZDA3M2U5OThmZDJlZGRiODRhMGQtY2Q1MS00YmE2LWE0YjQtZDU4Njc5OGI4ZTk5",
    "state": "CfDJ8AKuQyyLPltLkoBKRsSnJBI8thUoJ41mdxQUkiVR6Xwdk9nUzAOpK9yNmFitHg8XtcFnpB2631F3bjAdaJKxV25FDHiiyEdkebTWJLuQq6F1KzRTNnY0TF2ILsl-kmXtpgcWQXjXoxgz_L_p50fz7uJHKHcor1TLBqv5owaRw6Nzi-fq6c9yrqS-FA86tRtkd_UV9kmHuGUzMrwrbHRrsE33-mDJHNTHnyBqJZtfU390jw2_q6S2J0mcYRJ6aPeKiT5hJGRmMPCvFOmz7ARcL-WfFHJAQ3_b2kOAv-yEdZ2NQEIcaKH9KGqZ7CanoM9v3_FC1vLQrG-bZZg50TbaRcA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-02-02 17:58:00.851 -02:00 [DBG] Client is configured to not require consent, no consent is required
2019-02-02 17:58:00.859 -02:00 [DBG] Creating Hybrid Flow response.
2019-02-02 17:58:00.933 -02:00 [DBG] Creating Implicit Flow response.
2019-02-02 17:58:00.958 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-02 17:58:01.098 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****HP8w"
    },
    {
      "TokenType": "code",
      "TokenValue": "****4b4b"
    }
  ],
  "ActivityId": "0HLK992M7EC2G:00000003",
  "TimeStamp": "2019-02-02T19:58:01Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:58:01.105 -02:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBI8thUoJ41mdxQUkiVR6Xwdk9nUzAOpK9yNmFitHg8XtcFnpB2631F3bjAdaJKxV25FDHiiyEdkebTWJLuQq6F1KzRTNnY0TF2ILsl-kmXtpgcWQXjXoxgz_L_p50fz7uJHKHcor1TLBqv5owaRw6Nzi-fq6c9yrqS-FA86tRtkd_UV9kmHuGUzMrwrbHRrsE33-mDJHNTHnyBqJZtfU390jw2_q6S2J0mcYRJ6aPeKiT5hJGRmMPCvFOmz7ARcL-WfFHJAQ3_b2kOAv-yEdZ2NQEIcaKH9KGqZ7CanoM9v3_FC1vLQrG-bZZg50TbaRcA",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-02-02 17:58:01.643 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:58:01.648 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:58:01.648 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:58:01.659 -02:00 [DBG] Start token request.
2019-02-02 17:58:01.667 -02:00 [DBG] Start client validation
2019-02-02 17:58:01.675 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:58:01.682 -02:00 [DBG] Start parsing for secret in post body
2019-02-02 17:58:01.706 -02:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-02 17:58:01.706 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:58:01.706 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:58:01.723 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:58:01.723 -02:00 [DBG] Client validation success
2019-02-02 17:58:01.730 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK992M7EC2F:00000003",
  "TimeStamp": "2019-02-02T19:58:01Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:58:01.740 -02:00 [DBG] Start token request validation
2019-02-02 17:58:01.759 -02:00 [DBG] Start validation of authorization code token request
2019-02-02 17:58:01.800 -02:00 [DBG] Validation of authorization code token request success
2019-02-02 17:58:01.809 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "8348c83949cae7b6f6ff7574483cd9db581f8eab3c45aa7c33f27600abf84b4b",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "8348c83949cae7b6f6ff7574483cd9db581f8eab3c45aa7c33f27600abf84b4b",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-02-02 17:58:01.845 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:58:01.867 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:58:01.867 -02:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-02 17:58:01.882 -02:00 [DBG] Creating refresh token
2019-02-02 17:58:01.882 -02:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-02 17:58:01.900 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:58:01.901 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-02 17:58:01.911 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****hO5A"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****65b5"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****FUzQ"
    }
  ],
  "ActivityId": "0HLK992M7EC2F:00000003",
  "TimeStamp": "2019-02-02T19:58:01Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:58:01.914 -02:00 [DBG] Token request success.
2019-02-02 17:58:01.958 -02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-02 17:58:01.960 -02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-02 17:58:01.960 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-02 17:58:01.970 -02:00 [DBG] Start userinfo request
2019-02-02 17:58:01.975 -02:00 [DBG] Bearer token found in header
2019-02-02 17:58:02.067 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:58:02.075 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:58:02.077 -02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-02 17:58:02.084 -02:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1549137481,
    "exp": 1549141081,
    "iss": "http://localhost:5105",
    "aud": [
      "http://localhost:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548813627,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Galvão",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-02-02 17:58:02.096 -02:00 [DBG] Creating userinfo response
2019-02-02 17:58:02.106 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-02 17:58:02.111 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-02 17:58:02.117 -02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-02-02 17:58:02.117 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-02 17:58:02.126 -02:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-02-02 17:58:02.128 -02:00 [DBG] End userinfo request
2019-02-02 17:58:02.533 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:58:02.534 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:58:02.534 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:58:02.534 -02:00 [DBG] Start token request.
2019-02-02 17:58:02.535 -02:00 [DBG] Start client validation
2019-02-02 17:58:02.535 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:58:02.535 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:58:02.536 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:58:02.536 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:58:02.537 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:58:02.537 -02:00 [DBG] Client validation success
2019-02-02 17:58:02.537 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK992M7EC2F:00000004",
  "TimeStamp": "2019-02-02T19:58:02Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:58:02.539 -02:00 [DBG] Start token request validation
2019-02-02 17:58:02.547 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:58:02.555 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:58:02.556 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:58:02.562 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:58:02.567 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****PirQ"
    }
  ],
  "ActivityId": "0HLK992M7EC2F:00000004",
  "TimeStamp": "2019-02-02T19:58:02Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:58:02.567 -02:00 [DBG] Token request success.
2019-02-02 17:58:02.966 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-02 17:58:02.966 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-02 17:58:02.967 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-02 17:58:02.967 -02:00 [DBG] Start discovery request
2019-02-02 17:58:03.101 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-02 17:58:03.101 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-02 17:58:03.102 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-02 17:58:03.102 -02:00 [DBG] Start key discovery request
2019-02-02 17:58:46.416 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:58:46.417 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:58:46.417 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:58:46.417 -02:00 [DBG] Start token request.
2019-02-02 17:58:46.417 -02:00 [DBG] Start client validation
2019-02-02 17:58:46.417 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:58:46.417 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:58:46.417 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:58:46.418 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:58:46.418 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:58:46.418 -02:00 [DBG] Client validation success
2019-02-02 17:58:46.418 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK992M7EC2G:00000006",
  "TimeStamp": "2019-02-02T19:58:46Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:58:46.418 -02:00 [DBG] Start token request validation
2019-02-02 17:58:46.419 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:58:46.419 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:58:46.419 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:58:46.419 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:58:46.426 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Sqlg"
    }
  ],
  "ActivityId": "0HLK992M7EC2G:00000006",
  "TimeStamp": "2019-02-02T19:58:46Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:58:46.426 -02:00 [DBG] Token request success.
2019-02-02 17:58:47.138 -02:00 [WRN] Unhandled exception [1,"3f62b7d3-cb8a-4efe-bff7-9aebf68028b7"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 3f62b7d3-cb8a-4efe-bff7-9aebf68028b7 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-02 17:58:47.210 -02:00 [INF] Message received:
2019-02-02 17:58:47.210 -02:00 [INF] ----------------------------------
2019-02-02 17:58:47.217 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"36be71ca-add7-4844-92d4-03175d77a1bf","CreationDate":"2019-02-02T19:58:47.1732196Z"}
2019-02-02 17:58:47.217 -02:00 [INF] ----------------------------------
2019-02-02 17:58:47.990 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens b01ab60a-5a64-4020-984f-6c30a220d48f to 1 handlers took 798 ms
2019-02-02 17:58:55.967 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:58:55.968 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:58:55.968 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:58:55.968 -02:00 [DBG] Start token request.
2019-02-02 17:58:55.968 -02:00 [DBG] Start client validation
2019-02-02 17:58:55.968 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:58:55.968 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:58:55.968 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:58:55.968 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:58:55.968 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:58:55.968 -02:00 [DBG] Client validation success
2019-02-02 17:58:55.969 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK992M7EC2F:00000006",
  "TimeStamp": "2019-02-02T19:58:55Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:58:55.970 -02:00 [DBG] Start token request validation
2019-02-02 17:58:55.970 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:58:55.970 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:58:55.970 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:58:55.970 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:58:55.975 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****omTw"
    }
  ],
  "ActivityId": "0HLK992M7EC2F:00000006",
  "TimeStamp": "2019-02-02T19:58:55Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:58:55.975 -02:00 [DBG] Token request success.
2019-02-02 17:58:58.846 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:58:58.848 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:58:58.848 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:58:58.848 -02:00 [DBG] Start token request.
2019-02-02 17:58:58.848 -02:00 [DBG] Start client validation
2019-02-02 17:58:58.848 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:58:58.848 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:58:58.849 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:58:58.849 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:58:58.849 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:58:58.849 -02:00 [DBG] Client validation success
2019-02-02 17:58:58.849 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK992M7EC2G:00000007",
  "TimeStamp": "2019-02-02T19:58:58Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:58:58.849 -02:00 [DBG] Start token request validation
2019-02-02 17:58:58.850 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:58:58.850 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:58:58.850 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:58:58.850 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:58:58.856 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****RPxw"
    }
  ],
  "ActivityId": "0HLK992M7EC2G:00000007",
  "TimeStamp": "2019-02-02T19:58:58Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:58:58.857 -02:00 [DBG] Token request success.
2019-02-02 17:58:58.920 -02:00 [WRN] Unhandled exception [1,"c7452099-6953-468e-8933-be74d3d337e8"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID c7452099-6953-468e-8933-be74d3d337e8 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-02 17:58:58.949 -02:00 [ERR] Moving message with ID ["c7452099-6953-468e-8933-be74d3d337e8","error"] to error queue System.AggregateException: 1 unhandled exceptions (Message with ID c7452099-6953-468e-8933-be74d3d337e8 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)) ---> Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID c7452099-6953-468e-8933-be74d3d337e8 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
   --- End of inner exception stack trace ---
---> (Inner Exception #0) Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID c7452099-6953-468e-8933-be74d3d337e8 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114<---

2019-02-02 17:58:59.027 -02:00 [INF] Message received:
2019-02-02 17:58:59.027 -02:00 [INF] ----------------------------------
2019-02-02 17:58:59.027 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"d5425be4-7c88-416c-abe3-f93461eb0a70","CreationDate":"2019-02-02T19:58:59.026965Z"}
2019-02-02 17:58:59.027 -02:00 [INF] ----------------------------------
2019-02-02 17:58:59.470 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 16f64e8f-fdc4-4409-859d-e22412d7d6b1 to 1 handlers took 442 ms
2019-02-02 17:59:16.764 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:59:16.764 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:59:16.765 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:59:16.765 -02:00 [DBG] Start token request.
2019-02-02 17:59:16.765 -02:00 [DBG] Start client validation
2019-02-02 17:59:16.765 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:59:16.765 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:59:16.765 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:59:16.765 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:59:16.765 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:59:16.765 -02:00 [DBG] Client validation success
2019-02-02 17:59:16.766 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK992M7EC2F:00000007",
  "TimeStamp": "2019-02-02T19:59:16Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:59:16.767 -02:00 [DBG] Start token request validation
2019-02-02 17:59:16.767 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:59:16.767 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:59:16.767 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:59:16.768 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:59:16.774 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****bxrw"
    }
  ],
  "ActivityId": "0HLK992M7EC2F:00000007",
  "TimeStamp": "2019-02-02T19:59:16Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:59:16.774 -02:00 [DBG] Token request success.
2019-02-02 17:59:22.789 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:59:22.790 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:59:22.791 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:59:22.791 -02:00 [DBG] Start token request.
2019-02-02 17:59:22.791 -02:00 [DBG] Start client validation
2019-02-02 17:59:22.791 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:59:22.791 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:59:22.791 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:59:22.791 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:59:22.792 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:59:22.792 -02:00 [DBG] Client validation success
2019-02-02 17:59:22.792 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK992M7EC2G:00000008",
  "TimeStamp": "2019-02-02T19:59:22Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:59:22.793 -02:00 [DBG] Start token request validation
2019-02-02 17:59:22.794 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:59:22.794 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:59:22.794 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:59:22.794 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:59:22.801 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****RBqw"
    }
  ],
  "ActivityId": "0HLK992M7EC2G:00000008",
  "TimeStamp": "2019-02-02T19:59:22Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:59:22.801 -02:00 [DBG] Token request success.
2019-02-02 17:59:22.885 -02:00 [INF] Message received:
2019-02-02 17:59:22.885 -02:00 [INF] ----------------------------------
2019-02-02 17:59:22.885 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"2354d688-7cd8-4083-95b6-c381f482c593","CreationDate":"2019-02-02T19:59:22.8851373Z"}
2019-02-02 17:59:22.885 -02:00 [INF] ----------------------------------
2019-02-02 17:59:23.257 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 44a92f02-3793-45ac-89db-60af2ac0fce2 to 1 handlers took 372 ms
2019-02-02 17:59:30.196 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:59:30.196 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:59:30.197 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:59:30.197 -02:00 [DBG] Start token request.
2019-02-02 17:59:30.197 -02:00 [DBG] Start client validation
2019-02-02 17:59:30.197 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:59:30.197 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:59:30.197 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:59:30.197 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:59:30.198 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:59:30.198 -02:00 [DBG] Client validation success
2019-02-02 17:59:30.198 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK992M7EC2F:00000008",
  "TimeStamp": "2019-02-02T19:59:30Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:59:30.200 -02:00 [DBG] Start token request validation
2019-02-02 17:59:30.200 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:59:30.201 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:59:30.201 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:59:30.201 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:59:30.206 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****eYWQ"
    }
  ],
  "ActivityId": "0HLK992M7EC2F:00000008",
  "TimeStamp": "2019-02-02T19:59:30Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:59:30.206 -02:00 [DBG] Token request success.
2019-02-02 17:59:33.658 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:59:33.660 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:59:33.661 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:59:33.661 -02:00 [DBG] Start token request.
2019-02-02 17:59:33.661 -02:00 [DBG] Start client validation
2019-02-02 17:59:33.661 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:59:33.661 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:59:33.661 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:59:33.661 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:59:33.662 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:59:33.662 -02:00 [DBG] Client validation success
2019-02-02 17:59:33.662 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK992M7EC2G:00000009",
  "TimeStamp": "2019-02-02T19:59:33Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:59:33.662 -02:00 [DBG] Start token request validation
2019-02-02 17:59:33.662 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:59:33.663 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:59:33.663 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:59:33.663 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:59:33.669 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****qMOQ"
    }
  ],
  "ActivityId": "0HLK992M7EC2G:00000009",
  "TimeStamp": "2019-02-02T19:59:33Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:59:33.669 -02:00 [DBG] Token request success.
2019-02-02 17:59:33.766 -02:00 [INF] Message received:
2019-02-02 17:59:33.766 -02:00 [INF] ----------------------------------
2019-02-02 17:59:33.766 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"625a832f-c0be-4296-9033-46304ed05048","CreationDate":"2019-02-02T19:59:33.7664037Z"}
2019-02-02 17:59:33.766 -02:00 [INF] ----------------------------------
2019-02-02 17:59:34.011 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 1abbc7d9-ffa1-4644-99a1-83eb31a2a305 to 1 handlers took 244 ms
2019-02-02 17:59:41.878 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 17:59:41.880 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 17:59:41.880 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 17:59:41.880 -02:00 [DBG] Start token request.
2019-02-02 17:59:41.880 -02:00 [DBG] Start client validation
2019-02-02 17:59:41.881 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 17:59:41.881 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 17:59:41.881 -02:00 [DBG] Secret id found: MVC
2019-02-02 17:59:41.881 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 17:59:41.881 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 17:59:41.881 -02:00 [DBG] Client validation success
2019-02-02 17:59:41.881 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK992M7EC2F:00000009",
  "TimeStamp": "2019-02-02T19:59:41Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:59:41.893 -02:00 [DBG] Start token request validation
2019-02-02 17:59:41.893 -02:00 [DBG] Start client credentials token request validation
2019-02-02 17:59:41.893 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 17:59:41.893 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 17:59:41.893 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 17:59:41.900 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****mgAg"
    }
  ],
  "ActivityId": "0HLK992M7EC2F:00000009",
  "TimeStamp": "2019-02-02T19:59:41Z",
  "ProcessId": 12456,
  "LocalIpAddress": "127.0.0.1:26097",
  "RemoteIpAddress": "::1"
}
2019-02-02 17:59:41.900 -02:00 [DBG] Token request success.
2019-02-02 18:48:03.822 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 18:48:04.755 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 18:48:04.954 -02:00 [INF] Setting number of workers to 1
2019-02-02 18:48:04.986 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 18:48:05.018 -02:00 [INF] Bus Rebus 1 started
2019-02-02 18:48:05.090 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 18:48:05.171 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 18:48:05.207 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 18:48:05.267 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 18:48:05.267 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 18:48:05.267 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 18:48:05.267 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 18:48:05.267 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 18:49:04.887 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 18:49:04.938 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 18:49:04.938 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 18:49:04.953 -02:00 [DBG] Start token request.
2019-02-02 18:49:04.964 -02:00 [DBG] Start client validation
2019-02-02 18:49:04.974 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 18:49:04.975 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 18:49:04.975 -02:00 [DBG] Secret id found: MVC
2019-02-02 18:49:04.989 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 18:49:05.006 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 18:49:05.006 -02:00 [DBG] Client validation success
2019-02-02 18:49:05.035 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK99UTP52CC:00000002",
  "TimeStamp": "2019-02-02T20:49:05Z",
  "ProcessId": 14468,
  "LocalIpAddress": "127.0.0.1:17275",
  "RemoteIpAddress": "::1"
}
2019-02-02 18:49:05.096 -02:00 [DBG] Start token request validation
2019-02-02 18:49:05.116 -02:00 [DBG] Start client credentials token request validation
2019-02-02 18:49:05.190 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 18:49:05.208 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 18:49:05.250 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 18:49:05.622 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****2MNw"
    }
  ],
  "ActivityId": "0HLK99UTP52CC:00000002",
  "TimeStamp": "2019-02-02T20:49:05Z",
  "ProcessId": 14468,
  "LocalIpAddress": "127.0.0.1:17275",
  "RemoteIpAddress": "::1"
}
2019-02-02 18:49:05.625 -02:00 [DBG] Token request success.
2019-02-02 18:49:06.126 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-02 18:49:06.128 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-02 18:49:06.128 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-02 18:49:06.138 -02:00 [DBG] Start discovery request
2019-02-02 18:49:06.276 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-02 18:49:06.277 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-02 18:49:06.278 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-02 18:49:06.286 -02:00 [DBG] Start key discovery request
2019-02-02 18:49:12.742 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 18:49:12.744 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 18:49:12.744 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 18:49:12.744 -02:00 [DBG] Start token request.
2019-02-02 18:49:12.744 -02:00 [DBG] Start client validation
2019-02-02 18:49:12.744 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 18:49:12.744 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 18:49:12.745 -02:00 [DBG] Secret id found: MVC
2019-02-02 18:49:12.745 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 18:49:12.745 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 18:49:12.745 -02:00 [DBG] Client validation success
2019-02-02 18:49:12.745 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK99UTP52CD:00000003",
  "TimeStamp": "2019-02-02T20:49:12Z",
  "ProcessId": 14468,
  "LocalIpAddress": "127.0.0.1:17275",
  "RemoteIpAddress": "::1"
}
2019-02-02 18:49:12.746 -02:00 [DBG] Start token request validation
2019-02-02 18:49:12.747 -02:00 [DBG] Start client credentials token request validation
2019-02-02 18:49:12.747 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 18:49:12.747 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 18:49:12.747 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 18:49:12.753 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****N-Mw"
    }
  ],
  "ActivityId": "0HLK99UTP52CD:00000003",
  "TimeStamp": "2019-02-02T20:49:12Z",
  "ProcessId": 14468,
  "LocalIpAddress": "127.0.0.1:17275",
  "RemoteIpAddress": "::1"
}
2019-02-02 18:49:12.754 -02:00 [DBG] Token request success.
2019-02-02 18:49:13.656 -02:00 [WRN] Unhandled exception [1,"0e41ebde-576b-46cb-80ce-becac654e04f"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 0e41ebde-576b-46cb-80ce-becac654e04f and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-02 18:49:13.738 -02:00 [INF] Message received:
2019-02-02 18:49:13.739 -02:00 [INF] ----------------------------------
2019-02-02 18:49:13.750 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"e382810d-10a5-4cdf-8f27-be2732954e29","CreationDate":"2019-02-02T20:49:13.6913862Z"}
2019-02-02 18:49:13.750 -02:00 [INF] ----------------------------------
2019-02-02 18:49:14.890 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 10b16a5a-51fc-40ca-8ace-f33b7e364a9f to 1 handlers took 1175 ms
2019-02-02 18:54:13.245 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 18:54:14.423 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 18:54:14.509 -02:00 [INF] Setting number of workers to 1
2019-02-02 18:54:14.519 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 18:54:14.524 -02:00 [INF] Bus Rebus 1 started
2019-02-02 18:54:14.569 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 18:54:14.636 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 18:54:14.645 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 18:54:14.682 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 18:54:14.682 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 18:54:14.682 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 18:54:14.682 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 18:54:14.682 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 18:55:08.502 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 18:55:08.543 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 18:55:08.544 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 18:55:08.559 -02:00 [DBG] Start token request.
2019-02-02 18:55:08.577 -02:00 [DBG] Start client validation
2019-02-02 18:55:08.590 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 18:55:08.591 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 18:55:08.591 -02:00 [DBG] Secret id found: MVC
2019-02-02 18:55:08.606 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 18:55:08.622 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 18:55:08.622 -02:00 [DBG] Client validation success
2019-02-02 18:55:08.645 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK9A2BR8O59:00000002",
  "TimeStamp": "2019-02-02T20:55:08Z",
  "ProcessId": 1572,
  "LocalIpAddress": "127.0.0.1:26482",
  "RemoteIpAddress": "::1"
}
2019-02-02 18:55:08.692 -02:00 [DBG] Start token request validation
2019-02-02 18:55:08.708 -02:00 [DBG] Start client credentials token request validation
2019-02-02 18:55:08.768 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 18:55:08.781 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 18:55:08.822 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 18:55:08.909 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****8KSA"
    }
  ],
  "ActivityId": "0HLK9A2BR8O59:00000002",
  "TimeStamp": "2019-02-02T20:55:08Z",
  "ProcessId": 1572,
  "LocalIpAddress": "127.0.0.1:26482",
  "RemoteIpAddress": "::1"
}
2019-02-02 18:55:08.912 -02:00 [DBG] Token request success.
2019-02-02 18:55:09.277 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-02 18:55:09.278 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-02 18:55:09.278 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-02 18:55:09.287 -02:00 [DBG] Start discovery request
2019-02-02 18:55:09.432 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-02 18:55:09.435 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-02 18:55:09.435 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-02 18:55:09.441 -02:00 [DBG] Start key discovery request
2019-02-02 18:55:16.486 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 18:55:16.488 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 18:55:16.488 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 18:55:16.488 -02:00 [DBG] Start token request.
2019-02-02 18:55:16.488 -02:00 [DBG] Start client validation
2019-02-02 18:55:16.488 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 18:55:16.488 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 18:55:16.488 -02:00 [DBG] Secret id found: MVC
2019-02-02 18:55:16.489 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 18:55:16.489 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 18:55:16.489 -02:00 [DBG] Client validation success
2019-02-02 18:55:16.489 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK9A2BR8O58:00000003",
  "TimeStamp": "2019-02-02T20:55:16Z",
  "ProcessId": 1572,
  "LocalIpAddress": "127.0.0.1:26482",
  "RemoteIpAddress": "::1"
}
2019-02-02 18:55:16.490 -02:00 [DBG] Start token request validation
2019-02-02 18:55:16.490 -02:00 [DBG] Start client credentials token request validation
2019-02-02 18:55:16.491 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 18:55:16.491 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 18:55:16.491 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 18:55:16.497 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****X91g"
    }
  ],
  "ActivityId": "0HLK9A2BR8O58:00000003",
  "TimeStamp": "2019-02-02T20:55:16Z",
  "ProcessId": 1572,
  "LocalIpAddress": "127.0.0.1:26482",
  "RemoteIpAddress": "::1"
}
2019-02-02 18:55:16.497 -02:00 [DBG] Token request success.
2019-02-02 18:55:17.288 -02:00 [WRN] Unhandled exception [1,"90556ee3-d7db-43aa-9b5f-51726fbd7eab"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 90556ee3-d7db-43aa-9b5f-51726fbd7eab and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-02 18:55:17.368 -02:00 [INF] Message received:
2019-02-02 18:55:17.368 -02:00 [INF] ----------------------------------
2019-02-02 18:55:17.376 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"c21675d3-d61e-4382-ab5b-36d0d37f108c","CreationDate":"2019-02-02T20:55:17.3356886Z"}
2019-02-02 18:55:17.376 -02:00 [INF] ----------------------------------
2019-02-02 18:55:18.312 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 84ef70eb-0ff2-41c9-9446-a443942a94d7 to 1 handlers took 958 ms
2019-02-02 19:33:17.499 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 19:33:18.880 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 19:33:18.941 -02:00 [INF] Setting number of workers to 1
2019-02-02 19:33:19.001 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 19:33:19.046 -02:00 [INF] Bus Rebus 1 started
2019-02-02 19:33:19.059 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 19:33:19.194 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 19:33:19.400 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 19:33:19.423 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 19:33:19.423 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 19:33:19.424 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 19:33:19.424 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 19:33:19.425 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 19:34:31.873 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 19:34:31.899 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 19:34:31.900 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 19:34:31.919 -02:00 [DBG] Start token request.
2019-02-02 19:34:31.931 -02:00 [DBG] Start client validation
2019-02-02 19:34:31.941 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 19:34:31.942 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 19:34:31.942 -02:00 [DBG] Secret id found: MVC
2019-02-02 19:34:31.954 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 19:34:31.972 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 19:34:31.972 -02:00 [DBG] Client validation success
2019-02-02 19:34:32.002 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK9AO6L6FV7:00000001",
  "TimeStamp": "2019-02-02T21:34:31Z",
  "ProcessId": 1664,
  "LocalIpAddress": "127.0.0.1:5734",
  "RemoteIpAddress": "::1"
}
2019-02-02 19:34:32.068 -02:00 [DBG] Start token request validation
2019-02-02 19:34:32.106 -02:00 [DBG] Start client credentials token request validation
2019-02-02 19:34:32.192 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 19:34:32.207 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 19:34:32.241 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 19:34:32.456 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****3iFQ"
    }
  ],
  "ActivityId": "0HLK9AO6L6FV7:00000001",
  "TimeStamp": "2019-02-02T21:34:32Z",
  "ProcessId": 1664,
  "LocalIpAddress": "127.0.0.1:5734",
  "RemoteIpAddress": "::1"
}
2019-02-02 19:34:32.462 -02:00 [DBG] Token request success.
2019-02-02 19:34:33.020 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-02 19:34:33.023 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-02 19:34:33.023 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-02 19:34:33.035 -02:00 [DBG] Start discovery request
2019-02-02 19:34:33.189 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-02 19:34:33.192 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-02 19:34:33.192 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-02 19:34:33.201 -02:00 [DBG] Start key discovery request
2019-02-02 19:34:39.597 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-02 19:34:39.599 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-02 19:34:39.599 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-02 19:34:39.599 -02:00 [DBG] Start token request.
2019-02-02 19:34:39.599 -02:00 [DBG] Start client validation
2019-02-02 19:34:39.599 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-02 19:34:39.599 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-02 19:34:39.600 -02:00 [DBG] Secret id found: MVC
2019-02-02 19:34:39.600 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-02 19:34:39.600 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-02 19:34:39.600 -02:00 [DBG] Client validation success
2019-02-02 19:34:39.600 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK9AO6L6FV7:00000004",
  "TimeStamp": "2019-02-02T21:34:39Z",
  "ProcessId": 1664,
  "LocalIpAddress": "127.0.0.1:5734",
  "RemoteIpAddress": "::1"
}
2019-02-02 19:34:39.601 -02:00 [DBG] Start token request validation
2019-02-02 19:34:39.601 -02:00 [DBG] Start client credentials token request validation
2019-02-02 19:34:39.602 -02:00 [DBG] MVC credentials token request validation success
2019-02-02 19:34:39.602 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-02 19:34:39.602 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-02 19:34:39.608 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****PnqA"
    }
  ],
  "ActivityId": "0HLK9AO6L6FV7:00000004",
  "TimeStamp": "2019-02-02T21:34:39Z",
  "ProcessId": 1664,
  "LocalIpAddress": "127.0.0.1:5734",
  "RemoteIpAddress": "::1"
}
2019-02-02 19:34:39.609 -02:00 [DBG] Token request success.
2019-02-02 19:34:40.544 -02:00 [WRN] Unhandled exception [1,"a7c5c30f-50d8-4b4b-82fa-3454222a5400"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID a7c5c30f-50d8-4b4b-82fa-3454222a5400 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-02 19:34:40.609 -02:00 [INF] Message received:
2019-02-02 19:34:40.610 -02:00 [INF] ----------------------------------
2019-02-02 19:34:40.619 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"cc38439a-de50-4ac8-aa37-55e287d1d31f","CreationDate":"2019-02-02T21:34:40.5831743Z"}
2019-02-02 19:34:40.620 -02:00 [INF] ----------------------------------
2019-02-02 19:34:41.733 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 694a3282-b304-4758-8819-bfd3da85cf4c to 1 handlers took 1132 ms
2019-02-02 22:26:06.873 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 22:26:07.148 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 22:26:07.169 -02:00 [INF] Setting number of workers to 1
2019-02-02 22:26:07.172 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 22:26:07.175 -02:00 [INF] Bus Rebus 1 started
2019-02-02 22:26:07.176 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 22:26:07.209 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 22:26:07.216 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 22:26:07.226 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 22:26:07.226 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 22:26:07.227 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 22:26:07.227 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 22:26:07.227 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 23:20:26.981 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 23:20:28.371 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 23:20:28.523 -02:00 [INF] Setting number of workers to 1
2019-02-02 23:20:28.537 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 23:20:28.563 -02:00 [INF] Bus Rebus 1 started
2019-02-02 23:20:28.586 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 23:20:28.714 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 23:20:28.919 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 23:20:28.958 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 23:20:28.959 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 23:20:28.959 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 23:20:28.959 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 23:20:28.959 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 23:22:07.752 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 23:22:10.260 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 23:22:10.503 -02:00 [INF] Setting number of workers to 1
2019-02-02 23:22:10.573 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 23:22:10.728 -02:00 [INF] Bus Rebus 1 started
2019-02-02 23:22:10.784 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 23:22:10.893 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 23:22:11.068 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 23:22:11.119 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 23:22:11.119 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 23:22:11.119 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 23:22:11.119 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 23:22:11.119 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 23:31:19.944 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 23:31:21.134 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 23:31:21.199 -02:00 [INF] Setting number of workers to 1
2019-02-02 23:31:21.259 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 23:31:21.306 -02:00 [INF] Bus Rebus 1 started
2019-02-02 23:31:21.323 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 23:31:21.414 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-02 23:31:21.474 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 23:31:21.511 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 23:31:21.511 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 23:31:21.512 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 23:31:21.512 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 23:31:21.513 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 23:51:07.082 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-02 23:51:09.350 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-02 23:51:09.574 -02:00 [INF] Setting number of workers to 1
2019-02-02 23:51:09.631 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-02 23:51:09.670 -02:00 [INF] Bus Rebus 1 started
2019-02-02 23:51:09.681 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-02 23:51:09.846 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-02 23:51:09.876 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-02 23:51:09.876 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-02 23:51:09.876 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-02 23:51:09.877 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-02 23:51:09.877 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-02 23:51:09.903 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 00:00:27.723 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 00:00:29.244 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 00:00:29.314 -02:00 [INF] Setting number of workers to 1
2019-02-03 00:00:29.347 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 00:00:29.444 -02:00 [INF] Bus Rebus 1 started
2019-02-03 00:00:29.493 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 00:00:29.619 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 00:00:29.922 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 00:00:29.961 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 00:00:29.961 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 00:00:29.961 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 00:00:29.962 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 00:00:29.962 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 00:00:31.786 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 00:02:34.260 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 00:02:35.718 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 00:02:35.841 -02:00 [INF] Setting number of workers to 1
2019-02-03 00:02:35.878 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 00:02:35.955 -02:00 [INF] Bus Rebus 1 started
2019-02-03 00:02:36.044 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 00:02:36.185 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 00:02:36.405 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 00:02:36.433 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 00:02:36.433 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 00:02:36.433 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 00:02:36.434 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 00:02:36.434 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 00:02:37.909 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 00:07:29.747 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 00:07:31.493 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 00:07:31.595 -02:00 [INF] Setting number of workers to 1
2019-02-03 00:07:31.705 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 00:07:31.821 -02:00 [INF] Bus Rebus 1 started
2019-02-03 00:07:31.856 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 00:07:31.980 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 00:07:32.100 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 00:07:32.130 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 00:07:32.131 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 00:07:32.132 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 00:07:32.132 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 00:07:32.132 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 00:07:33.695 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 00:15:30.075 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 00:15:31.800 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 00:15:32.064 -02:00 [INF] Setting number of workers to 1
2019-02-03 00:15:32.204 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 00:15:32.284 -02:00 [INF] Bus Rebus 1 started
2019-02-03 00:15:32.321 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 00:15:32.417 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 00:15:32.714 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 00:15:32.754 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 00:15:32.755 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 00:15:32.755 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 00:15:32.755 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 00:15:32.755 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 00:15:34.051 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 00:21:05.838 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 00:21:07.766 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 00:21:07.799 -02:00 [INF] Setting number of workers to 1
2019-02-03 00:21:07.808 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 00:21:07.825 -02:00 [INF] Bus Rebus 1 started
2019-02-03 00:21:07.832 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 00:21:07.909 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 00:21:07.916 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 00:21:07.966 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 00:21:07.966 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 00:21:07.966 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 00:21:07.966 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 00:21:07.966 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 00:21:08.348 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 00:24:46.893 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 00:24:48.954 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 00:24:49.051 -02:00 [INF] Setting number of workers to 1
2019-02-03 00:24:49.067 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 00:24:49.090 -02:00 [INF] Bus Rebus 1 started
2019-02-03 00:24:49.105 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 00:24:49.230 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 00:24:49.352 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 00:24:49.393 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 00:24:49.393 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 00:24:49.393 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 00:24:49.394 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 00:24:49.394 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 00:24:50.111 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 00:29:12.210 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 00:29:13.690 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 00:29:13.783 -02:00 [INF] Setting number of workers to 1
2019-02-03 00:29:13.815 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 00:29:13.855 -02:00 [INF] Bus Rebus 1 started
2019-02-03 00:29:13.871 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 00:29:13.960 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 00:29:14.019 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 00:29:14.436 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 00:29:14.436 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 00:29:14.436 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 00:29:14.436 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 00:29:14.437 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 00:29:15.062 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 00:33:09.678 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 00:33:11.597 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 00:33:11.898 -02:00 [INF] Setting number of workers to 1
2019-02-03 00:33:12.250 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 00:33:12.747 -02:00 [INF] Bus Rebus 1 started
2019-02-03 00:33:13.012 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 00:33:13.193 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 00:33:13.546 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 00:33:13.620 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 00:33:13.620 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 00:33:13.620 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 00:33:13.620 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 00:33:13.621 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 00:33:14.736 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 00:35:30.094 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 00:35:31.666 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 00:35:31.955 -02:00 [INF] Setting number of workers to 1
2019-02-03 00:35:32.046 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 00:35:32.170 -02:00 [INF] Bus Rebus 1 started
2019-02-03 00:35:32.176 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 00:35:32.406 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 00:35:32.513 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 00:35:32.543 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 00:35:32.543 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 00:35:32.543 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 00:35:32.543 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 00:35:32.543 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 00:35:33.745 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 00:38:11.517 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 00:38:14.049 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 00:38:14.385 -02:00 [INF] Setting number of workers to 1
2019-02-03 00:38:14.431 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 00:38:14.515 -02:00 [INF] Bus Rebus 1 started
2019-02-03 00:38:14.522 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 00:38:14.753 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 00:38:14.849 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 00:38:14.888 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 00:38:14.888 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 00:38:14.888 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 00:38:14.889 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 00:38:14.889 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 00:38:15.790 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 00:39:49.531 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 00:39:50.839 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 00:39:51.133 -02:00 [INF] Setting number of workers to 1
2019-02-03 00:39:51.172 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 00:39:51.243 -02:00 [INF] Bus Rebus 1 started
2019-02-03 00:39:51.262 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 00:39:51.315 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 00:39:51.395 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 00:39:51.433 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 00:39:51.436 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 00:39:51.436 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 00:39:51.437 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 00:39:51.437 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 00:39:52.133 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 00:42:32.651 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 00:42:34.744 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 00:42:35.020 -02:00 [INF] Setting number of workers to 1
2019-02-03 00:42:35.106 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 00:42:35.149 -02:00 [INF] Bus Rebus 1 started
2019-02-03 00:42:35.212 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 00:42:35.310 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 00:42:35.484 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 00:42:35.526 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 00:42:35.526 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 00:42:35.526 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 00:42:35.526 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 00:42:35.527 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 00:42:36.518 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 00:47:25.562 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 00:47:26.595 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 00:47:26.740 -02:00 [INF] Setting number of workers to 1
2019-02-03 00:47:26.831 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 00:47:26.954 -02:00 [INF] Bus Rebus 1 started
2019-02-03 00:47:27.064 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 00:47:27.173 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 00:47:27.247 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 00:47:27.291 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 00:47:27.291 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 00:47:27.291 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 00:47:27.291 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 00:47:27.291 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 00:47:28.855 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 00:53:30.876 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 00:53:31.680 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 00:53:31.728 -02:00 [INF] Setting number of workers to 1
2019-02-03 00:53:31.740 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 00:53:31.752 -02:00 [INF] Bus Rebus 1 started
2019-02-03 00:53:31.758 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 00:53:31.861 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 00:53:31.898 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 00:53:31.920 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 00:53:31.923 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 00:53:31.923 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 00:53:31.923 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 00:53:31.923 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 00:53:32.366 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 11:05:38.575 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 11:05:41.073 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 11:05:41.286 -02:00 [INF] Setting number of workers to 1
2019-02-03 11:05:41.360 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 11:05:41.549 -02:00 [INF] Bus Rebus 1 started
2019-02-03 11:05:41.683 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 11:05:41.881 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 11:05:41.944 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 11:05:41.980 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 11:05:41.981 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 11:05:41.981 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 11:05:41.981 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 11:05:41.981 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 11:05:42.843 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 11:16:07.446 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 11:16:09.080 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 11:16:09.147 -02:00 [INF] Setting number of workers to 1
2019-02-03 11:16:09.211 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 11:16:09.333 -02:00 [INF] Bus Rebus 1 started
2019-02-03 11:16:09.444 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 11:16:09.649 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 11:16:09.778 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 11:16:09.826 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 11:16:09.826 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 11:16:09.826 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 11:16:09.827 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 11:16:09.827 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 11:16:10.682 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 11:35:26.519 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 11:35:29.945 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 11:35:30.017 -02:00 [INF] Setting number of workers to 1
2019-02-03 11:35:30.092 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 11:35:30.136 -02:00 [INF] Bus Rebus 1 started
2019-02-03 11:35:30.168 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 11:35:30.269 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 11:35:30.354 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 11:35:30.383 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 11:35:30.384 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 11:35:30.384 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 11:35:30.384 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 11:35:30.384 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 11:35:31.248 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 11:40:46.078 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 11:40:47.643 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 11:40:47.857 -02:00 [INF] Setting number of workers to 1
2019-02-03 11:40:47.899 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 11:40:47.993 -02:00 [INF] Bus Rebus 1 started
2019-02-03 11:40:48.056 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 11:40:48.139 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 11:40:48.308 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 11:40:48.337 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 11:40:48.340 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 11:40:48.341 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 11:40:48.341 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 11:40:48.341 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 11:40:49.763 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 11:44:57.567 -02:00 [WRN] An error occurred when attempting to receive the next message: Rebus.Exceptions.RebusApplicationException: Queue throw EndOfStreamException(meaning it was canceled by rabbitmq) ---> System.IO.EndOfStreamException: SharedQueue closed
   at RabbitMQ.Util.SharedQueue`1.EnsureIsOpen()
   at RabbitMQ.Util.SharedQueue`1.Dequeue(Int32 millisecondsTimeout, T& result)
   at Rebus.RabbitMq.RabbitMqTransport.Receive(ITransactionContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Rebus.RabbitMq.RabbitMqTransport.Receive(ITransactionContext context, CancellationToken cancellationToken)
   at Rebus.Workers.ThreadPoolBased.ThreadPoolWorker.ReceiveTransportMessage(CancellationToken token, ITransactionContext context) in C:\projects-rebus\Rebus\Rebus\Workers\ThreadPoolBased\ThreadPoolWorker.cs:line 136
2019-02-03 11:44:57.734 -02:00 [INF] Existing connection found to be CLOSED
2019-02-03 11:44:59.412 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 11:45:38.019 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 11:45:38.751 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 11:45:38.810 -02:00 [INF] Setting number of workers to 1
2019-02-03 11:45:38.827 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 11:45:38.881 -02:00 [INF] Bus Rebus 1 started
2019-02-03 11:45:38.884 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 11:45:39.038 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 11:45:39.103 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 11:45:39.135 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 11:45:39.135 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 11:45:39.135 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 11:45:39.135 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 11:45:39.136 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 11:45:39.796 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 11:49:22.794 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 11:49:24.337 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 11:49:24.389 -02:00 [INF] Setting number of workers to 1
2019-02-03 11:49:24.436 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 11:49:24.635 -02:00 [INF] Bus Rebus 1 started
2019-02-03 11:49:24.814 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 11:49:24.927 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 11:49:25.118 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 11:49:25.166 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 11:49:25.167 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 11:49:25.167 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 11:49:25.167 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 11:49:25.167 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 11:49:27.475 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 11:50:17.599 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 11:50:18.149 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 11:50:18.200 -02:00 [INF] Setting number of workers to 1
2019-02-03 11:50:18.203 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 11:50:18.216 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 11:50:18.224 -02:00 [INF] Bus Rebus 1 started
2019-02-03 11:50:18.261 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 11:50:18.292 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 11:50:18.312 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 11:50:18.312 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 11:50:18.312 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 11:50:18.312 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 11:50:18.312 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 11:50:18.522 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 11:51:14.689 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 11:51:15.822 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 11:51:15.877 -02:00 [INF] Setting number of workers to 1
2019-02-03 11:51:15.894 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 11:51:15.936 -02:00 [INF] Bus Rebus 1 started
2019-02-03 11:51:15.966 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 11:51:16.044 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 11:51:16.106 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 11:51:16.133 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 11:51:16.136 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 11:51:16.136 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 11:51:16.136 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 11:51:16.136 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 11:51:17.742 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 11:51:18.968 -02:00 [ERR] Connection id "0HLK9RQM33SHS", Request id "0HLK9RQM33SHS:00000001": An unhandled exception was thrown by the application.
System.OverflowException: Arithmetic operation resulted in an overflow.
   at System.IO.StreamWriter.Write(String value)
   at Microsoft.AspNetCore.Hosting.Views.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-02-03 11:51:18.985 -02:00 [ERR] Connection id "0HLK9RQM33SHR", Request id "0HLK9RQM33SHR:00000001": An unhandled exception was thrown by the application.
System.OverflowException: Arithmetic operation resulted in an overflow.
   at System.IO.StreamWriter.Write(String value)
   at Microsoft.AspNetCore.Hosting.Views.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-02-03 12:00:23.218 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 12:00:25.483 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-02-03 12:00:25.991 -02:00 [INF] Bus Rebus 1 stopped
2019-02-03 12:00:26.046 -02:00 [FTL] Application startup exception
Rebus.Injection.ResolutionException: Could not resolve Rebus.Bus.IBus with decorator depth 0 - registrations: Rebus.Injection.Injectionist+Handler ---> RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.CreateQueue(String address)
   at Rebus.Config.RebusConfigurer.<>c__DisplayClass12_0.<Start>b__26(IResolutionContext c) in C:\projects-rebus\Rebus\Rebus\Config\RebusConfigurer.cs:line 331
   at Rebus.Injection.Injectionist.ResolutionContext.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 199
   --- End of inner exception stack trace ---
   at Rebus.Injection.Injectionist.ResolutionContext.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 248
   at Rebus.Injection.Injectionist.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 57
   at Rebus.Config.RebusConfigurer.Start() in C:\projects-rebus\Rebus\Rebus\Config\RebusConfigurer.cs:line 360
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitSingleton(SingletonCallSite singletonCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Rebus.ServiceProvider.ServiceProviderExtensions.UseRebus(IServiceProvider provider, Action`1 busAction)
   at Microsoft.Extensions.DependencyInjection.ApplicationBuilderExtensions.UseRebus(IApplicationBuilder app, Action`1 busAction)
   at Identity.API.Startup.Configure(IApplicationBuilder app, IHostingEnvironment env) in C:\Users\marce\Documents\GitHub\CasaDoCodigo.CQRS\CasaDoCodigo.Identity\Startup.cs:line 120
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Mvc.Internal.MiddlewareFilterBuilderStartupFilter.<>c__DisplayClass0_0.<Configure>g__MiddlewareFilterBuilder|0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 12:09:28.347 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 12:09:30.675 -02:00 [WRN] Could not establish connection: None of the specified endpoints were reachable
2019-02-03 12:09:31.190 -02:00 [INF] Bus Rebus 1 stopped
2019-02-03 12:09:31.280 -02:00 [FTL] Application startup exception
Rebus.Injection.ResolutionException: Could not resolve Rebus.Bus.IBus with decorator depth 0 - registrations: Rebus.Injection.Injectionist+Handler ---> RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente 127.0.0.1:5672
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.Sockets.Socket.<>c.<ConnectAsync>b__272_0(IAsyncResult iar)
--- End of stack trace from previous location where exception was thrown ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, Int32 millisecondsTimeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, Int32 timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Rebus.RabbitMq.ConnectionManager.GetConnection()
   at Rebus.RabbitMq.RabbitMqTransport.CreateQueue(String address)
   at Rebus.Config.RebusConfigurer.<>c__DisplayClass12_0.<Start>b__26(IResolutionContext c) in C:\projects-rebus\Rebus\Rebus\Config\RebusConfigurer.cs:line 331
   at Rebus.Injection.Injectionist.ResolutionContext.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 199
   --- End of inner exception stack trace ---
   at Rebus.Injection.Injectionist.ResolutionContext.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 248
   at Rebus.Injection.Injectionist.Get[TService]() in C:\projects-rebus\Rebus\Rebus\Injection\Injectionist.cs:line 57
   at Rebus.Config.RebusConfigurer.Start() in C:\projects-rebus\Rebus\Rebus\Config\RebusConfigurer.cs:line 360
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitSingleton(SingletonCallSite singletonCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Rebus.ServiceProvider.ServiceProviderExtensions.UseRebus(IServiceProvider provider, Action`1 busAction)
   at Microsoft.Extensions.DependencyInjection.ApplicationBuilderExtensions.UseRebus(IApplicationBuilder app, Action`1 busAction)
   at Identity.API.Startup.Configure(IApplicationBuilder app, IHostingEnvironment env) in C:\Users\marce\Documents\GitHub\CasaDoCodigo.CQRS\CasaDoCodigo.Identity\Startup.cs:line 120
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Mvc.Internal.MiddlewareFilterBuilderStartupFilter.<>c__DisplayClass0_0.<Configure>g__MiddlewareFilterBuilder|0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 12:10:39.418 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 12:11:37.509 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 12:33:09.467 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 12:33:10.325 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 12:33:10.391 -02:00 [INF] Setting number of workers to 1
2019-02-03 12:33:10.440 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 12:33:10.546 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 12:33:10.560 -02:00 [INF] Bus Rebus 1 started
2019-02-03 12:33:10.609 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 12:33:10.679 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 12:33:10.708 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 12:33:10.708 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 12:33:10.708 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 12:33:10.708 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 12:33:10.708 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 12:33:11.467 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 12:39:04.323 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 12:39:05.619 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 12:39:05.738 -02:00 [INF] Setting number of workers to 1
2019-02-03 12:39:05.804 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 12:39:05.872 -02:00 [INF] Bus Rebus 1 started
2019-02-03 12:39:05.885 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 12:39:06.014 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 12:39:06.215 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 12:39:06.236 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 12:39:06.236 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 12:39:06.237 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 12:39:06.237 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 12:39:06.237 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 12:39:07.104 -02:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.HealthChecks.IHealthCheckService' while attempting to activate 'Microsoft.AspNetCore.HealthChecks.HealthCheckMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.Internal.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-03 12:40:34.471 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 12:40:35.492 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 12:40:35.558 -02:00 [INF] Setting number of workers to 1
2019-02-03 12:40:35.582 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 12:40:35.618 -02:00 [INF] Bus Rebus 1 started
2019-02-03 12:40:35.649 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 12:40:35.703 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 12:40:35.733 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 12:40:35.733 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 12:40:35.738 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 12:40:35.738 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 12:40:35.739 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 12:40:35.755 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 12:41:17.264 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-03 12:41:17.278 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-03 12:41:17.278 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-03 12:41:17.288 -02:00 [DBG] Start discovery request
2019-02-03 12:41:17.454 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-03 12:41:17.455 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-03 12:41:17.456 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-03 12:41:17.462 -02:00 [DBG] Start key discovery request
2019-02-03 12:41:17.829 -02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-03 12:41:17.838 -02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-03 12:41:17.839 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-03 12:41:17.844 -02:00 [DBG] Start authorize request
2019-02-03 12:41:17.861 -02:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-03 12:41:17.871 -02:00 [DBG] Start authorize request protocol validation
2019-02-03 12:41:17.898 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:41:17.908 -02:00 [DBG] Checking for PKCE parameters
2019-02-03 12:41:17.910 -02:00 [DBG] No PKCE used.
2019-02-03 12:41:17.976 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-03 12:41:18.002 -02:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBL8W0f0mvLdhEUr81c8o_AMBSe_ATjdlPu2tuKvYViqSPS2RNdJ6yTN7sHTF1ojKs0vRpso87eThsipxBLVoRuSoLGzknkqwQjTBAqdUYNNkQX6ruOcO-ag2ZC9_10nO50DdpLEmDzpUJFgGL55kda5rhTUJlFQr005OgLCcjt1wEZOFAWSlHse9yr8d7buo58EQ_lRZKjrb922cb0mHP9nwme26gSaSZ4Q8MlnUob-5mfF4xAOun7sQ4yK7jJFsChMPAOIf9EPrT-h7uDBuoTGKUpSClQQPFOtjQ-8mI6sw-xuJgktJOVnGW4QKs7_0vQ",
  "Nonce": "636848016775594633.NzQyYTFlMTEtZmU0OS00ZTk5LTkyZjEtMjQ5MmUyZDNmOGI5MDlhODdiMmYtMDQzOS00NzdmLWI5Y2YtNTEyMjc3MDMwM2Y1",
  "SessionId": "ab5c771d1b04abcb39f3c4382084fb62",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636848016775594633.NzQyYTFlMTEtZmU0OS00ZTk5LTkyZjEtMjQ5MmUyZDNmOGI5MDlhODdiMmYtMDQzOS00NzdmLWI5Y2YtNTEyMjc3MDMwM2Y1",
    "state": "CfDJ8AKuQyyLPltLkoBKRsSnJBL8W0f0mvLdhEUr81c8o_AMBSe_ATjdlPu2tuKvYViqSPS2RNdJ6yTN7sHTF1ojKs0vRpso87eThsipxBLVoRuSoLGzknkqwQjTBAqdUYNNkQX6ruOcO-ag2ZC9_10nO50DdpLEmDzpUJFgGL55kda5rhTUJlFQr005OgLCcjt1wEZOFAWSlHse9yr8d7buo58EQ_lRZKjrb922cb0mHP9nwme26gSaSZ4Q8MlnUob-5mfF4xAOun7sQ4yK7jJFsChMPAOIf9EPrT-h7uDBuoTGKUpSClQQPFOtjQ-8mI6sw-xuJgktJOVnGW4QKs7_0vQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-02-03 12:41:18.032 -02:00 [DBG] Client is configured to not require consent, no consent is required
2019-02-03 12:41:18.044 -02:00 [DBG] Creating Hybrid Flow response.
2019-02-03 12:41:18.104 -02:00 [DBG] Creating Implicit Flow response.
2019-02-03 12:41:18.127 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-03 12:41:18.376 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****EU3w"
    },
    {
      "TokenType": "code",
      "TokenValue": "****7ad6"
    }
  ],
  "ActivityId": "0HLK9SM7N08HE:00000008",
  "TimeStamp": "2019-02-03T14:41:18Z",
  "ProcessId": 9512,
  "LocalIpAddress": "127.0.0.1:33141",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:41:18.386 -02:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBL8W0f0mvLdhEUr81c8o_AMBSe_ATjdlPu2tuKvYViqSPS2RNdJ6yTN7sHTF1ojKs0vRpso87eThsipxBLVoRuSoLGzknkqwQjTBAqdUYNNkQX6ruOcO-ag2ZC9_10nO50DdpLEmDzpUJFgGL55kda5rhTUJlFQr005OgLCcjt1wEZOFAWSlHse9yr8d7buo58EQ_lRZKjrb922cb0mHP9nwme26gSaSZ4Q8MlnUob-5mfF4xAOun7sQ4yK7jJFsChMPAOIf9EPrT-h7uDBuoTGKUpSClQQPFOtjQ-8mI6sw-xuJgktJOVnGW4QKs7_0vQ",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-02-03 12:41:20.732 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-03 12:41:20.742 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-03 12:41:20.742 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-03 12:41:20.760 -02:00 [DBG] Start token request.
2019-02-03 12:41:20.781 -02:00 [DBG] Start client validation
2019-02-03 12:41:20.796 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-03 12:41:20.805 -02:00 [DBG] Start parsing for secret in post body
2019-02-03 12:41:20.862 -02:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-03 12:41:20.862 -02:00 [DBG] Secret id found: MVC
2019-02-03 12:41:20.862 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:41:20.883 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-03 12:41:20.883 -02:00 [DBG] Client validation success
2019-02-03 12:41:20.889 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK9SM7N08HE:00000009",
  "TimeStamp": "2019-02-03T14:41:20Z",
  "ProcessId": 9512,
  "LocalIpAddress": "127.0.0.1:33141",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:41:20.900 -02:00 [DBG] Start token request validation
2019-02-03 12:41:20.923 -02:00 [DBG] Start validation of authorization code token request
2019-02-03 12:41:20.958 -02:00 [DBG] Validation of authorization code token request success
2019-02-03 12:41:20.966 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "02be9677104131dc7e009bedb8ab9495357212ffb48e25559cce16132c4c7ad6",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "02be9677104131dc7e009bedb8ab9495357212ffb48e25559cce16132c4c7ad6",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-02-03 12:41:20.989 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:41:21.009 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-03 12:41:21.010 -02:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-03 12:41:21.029 -02:00 [DBG] Creating refresh token
2019-02-03 12:41:21.029 -02:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-03 12:41:21.053 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:41:21.054 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-03 12:41:21.069 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****OYPA"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****3fc4"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****jFug"
    }
  ],
  "ActivityId": "0HLK9SM7N08HE:00000009",
  "TimeStamp": "2019-02-03T14:41:21Z",
  "ProcessId": 9512,
  "LocalIpAddress": "127.0.0.1:33141",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:41:21.072 -02:00 [DBG] Token request success.
2019-02-03 12:41:21.145 -02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-03 12:41:21.147 -02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-03 12:41:21.147 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-03 12:41:21.161 -02:00 [DBG] Start userinfo request
2019-02-03 12:41:21.168 -02:00 [DBG] Bearer token found in header
2019-02-03 12:41:21.226 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:41:21.234 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:41:21.235 -02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-03 12:41:21.241 -02:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1549204881,
    "exp": 1549208481,
    "iss": "http://localhost:5105",
    "aud": [
      "http://localhost:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548813627,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Galvão",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-02-03 12:41:21.254 -02:00 [DBG] Creating userinfo response
2019-02-03 12:41:21.264 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-03 12:41:21.275 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-03 12:41:21.284 -02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-02-03 12:41:21.285 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-03 12:41:21.300 -02:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-02-03 12:41:21.300 -02:00 [DBG] End userinfo request
2019-02-03 12:41:21.814 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-03 12:41:21.814 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-03 12:41:21.814 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-03 12:41:21.815 -02:00 [DBG] Start token request.
2019-02-03 12:41:21.815 -02:00 [DBG] Start client validation
2019-02-03 12:41:21.815 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-03 12:41:21.815 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-03 12:41:21.815 -02:00 [DBG] Secret id found: MVC
2019-02-03 12:41:21.815 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:41:21.816 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-03 12:41:21.816 -02:00 [DBG] Client validation success
2019-02-03 12:41:21.816 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK9SM7N08HE:0000000B",
  "TimeStamp": "2019-02-03T14:41:21Z",
  "ProcessId": 9512,
  "LocalIpAddress": "127.0.0.1:33141",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:41:21.819 -02:00 [DBG] Start token request validation
2019-02-03 12:41:21.827 -02:00 [DBG] Start client credentials token request validation
2019-02-03 12:41:21.836 -02:00 [DBG] MVC credentials token request validation success
2019-02-03 12:41:21.836 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-03 12:41:21.841 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-03 12:41:21.847 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****ROpg"
    }
  ],
  "ActivityId": "0HLK9SM7N08HE:0000000B",
  "TimeStamp": "2019-02-03T14:41:21Z",
  "ProcessId": 9512,
  "LocalIpAddress": "127.0.0.1:33141",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:41:21.847 -02:00 [DBG] Token request success.
2019-02-03 12:42:12.169 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 12:42:12.707 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 12:42:12.742 -02:00 [INF] Setting number of workers to 1
2019-02-03 12:42:12.744 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 12:42:12.769 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 12:42:12.779 -02:00 [INF] Bus Rebus 1 started
2019-02-03 12:42:12.865 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 12:42:12.869 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 12:42:12.908 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 12:42:12.908 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 12:42:12.908 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 12:42:12.909 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 12:42:12.909 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 12:44:15.777 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 12:44:16.834 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 12:44:16.910 -02:00 [INF] Setting number of workers to 1
2019-02-03 12:44:16.956 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 12:44:17.002 -02:00 [INF] Bus Rebus 1 started
2019-02-03 12:44:17.019 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 12:44:17.210 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 12:44:17.251 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 12:44:17.323 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 12:44:17.323 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 12:44:17.323 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 12:44:17.323 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 12:44:17.324 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 12:44:45.733 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-03 12:44:45.749 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-03 12:44:45.750 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-03 12:44:45.757 -02:00 [DBG] Start discovery request
2019-02-03 12:44:45.946 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-03 12:44:45.948 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-03 12:44:45.948 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-03 12:44:45.956 -02:00 [DBG] Start key discovery request
2019-02-03 12:44:46.127 -02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-03 12:44:46.137 -02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-03 12:44:46.138 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-03 12:44:46.149 -02:00 [DBG] Start authorize request
2019-02-03 12:44:46.177 -02:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-03 12:44:46.189 -02:00 [DBG] Start authorize request protocol validation
2019-02-03 12:44:46.216 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:44:46.227 -02:00 [DBG] Checking for PKCE parameters
2019-02-03 12:44:46.231 -02:00 [DBG] No PKCE used.
2019-02-03 12:44:46.305 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-03 12:44:46.330 -02:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBIXHi72qugQ-ughw-kMagFwCQApEwlxKXn64qScikHkGo8UG9qDgfdz__hYvYfJtGHeQATyUQuv3nJT-HNuz-eKgSFLiS-asJxEH2vDZbJn9ph3Asf94Ow_FExWRfD4-5CU_G5bA7wZJ-SmmZmVbtsx2jre0YzbuATfjJ5bssOLn1YIeljJbNdI8_UbH13cWaaEoNWnhNEnFZm6yeFqJpVZtY78wqZL1OIWroQfY0AFMvbOyNS1Dx1tPkmUvVy8bmQfZQGQ2yvlwtqWBucXiVjUWfjAGfAaK4WvTHciPLYXq-jXLuBl37jtyVVqt-TzphE",
  "Nonce": "636848018860648339.ZDBmMzk3MzItODcwNC00MzBlLWIxMDktMzBlNjlkODkzMDIzNDcwOWQ4MjMtZDc2Yi00MjFiLTkyYTgtM2Q4YTdkY2E5Mjk2",
  "SessionId": "ab5c771d1b04abcb39f3c4382084fb62",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636848018860648339.ZDBmMzk3MzItODcwNC00MzBlLWIxMDktMzBlNjlkODkzMDIzNDcwOWQ4MjMtZDc2Yi00MjFiLTkyYTgtM2Q4YTdkY2E5Mjk2",
    "state": "CfDJ8AKuQyyLPltLkoBKRsSnJBIXHi72qugQ-ughw-kMagFwCQApEwlxKXn64qScikHkGo8UG9qDgfdz__hYvYfJtGHeQATyUQuv3nJT-HNuz-eKgSFLiS-asJxEH2vDZbJn9ph3Asf94Ow_FExWRfD4-5CU_G5bA7wZJ-SmmZmVbtsx2jre0YzbuATfjJ5bssOLn1YIeljJbNdI8_UbH13cWaaEoNWnhNEnFZm6yeFqJpVZtY78wqZL1OIWroQfY0AFMvbOyNS1Dx1tPkmUvVy8bmQfZQGQ2yvlwtqWBucXiVjUWfjAGfAaK4WvTHciPLYXq-jXLuBl37jtyVVqt-TzphE",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-02-03 12:44:46.373 -02:00 [DBG] Client is configured to not require consent, no consent is required
2019-02-03 12:44:46.386 -02:00 [DBG] Creating Hybrid Flow response.
2019-02-03 12:44:46.448 -02:00 [DBG] Creating Implicit Flow response.
2019-02-03 12:44:46.477 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-03 12:44:46.803 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****gxGw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****e0a3"
    }
  ],
  "ActivityId": "0HLK9SO9PSSOT:00000007",
  "TimeStamp": "2019-02-03T14:44:46Z",
  "ProcessId": 11888,
  "LocalIpAddress": "127.0.0.1:27917",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:44:46.811 -02:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBIXHi72qugQ-ughw-kMagFwCQApEwlxKXn64qScikHkGo8UG9qDgfdz__hYvYfJtGHeQATyUQuv3nJT-HNuz-eKgSFLiS-asJxEH2vDZbJn9ph3Asf94Ow_FExWRfD4-5CU_G5bA7wZJ-SmmZmVbtsx2jre0YzbuATfjJ5bssOLn1YIeljJbNdI8_UbH13cWaaEoNWnhNEnFZm6yeFqJpVZtY78wqZL1OIWroQfY0AFMvbOyNS1Dx1tPkmUvVy8bmQfZQGQ2yvlwtqWBucXiVjUWfjAGfAaK4WvTHciPLYXq-jXLuBl37jtyVVqt-TzphE",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-02-03 12:44:47.586 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-03 12:44:47.592 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-03 12:44:47.592 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-03 12:44:47.608 -02:00 [DBG] Start token request.
2019-02-03 12:44:47.621 -02:00 [DBG] Start client validation
2019-02-03 12:44:47.631 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-03 12:44:47.638 -02:00 [DBG] Start parsing for secret in post body
2019-02-03 12:44:47.673 -02:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-03 12:44:47.674 -02:00 [DBG] Secret id found: MVC
2019-02-03 12:44:47.674 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:44:47.693 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-03 12:44:47.693 -02:00 [DBG] Client validation success
2019-02-03 12:44:47.703 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK9SO9PSSOT:00000008",
  "TimeStamp": "2019-02-03T14:44:47Z",
  "ProcessId": 11888,
  "LocalIpAddress": "127.0.0.1:27917",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:44:47.716 -02:00 [DBG] Start token request validation
2019-02-03 12:44:47.744 -02:00 [DBG] Start validation of authorization code token request
2019-02-03 12:44:47.785 -02:00 [DBG] Validation of authorization code token request success
2019-02-03 12:44:47.794 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "067dc7a06304cfb2a5b8ca7adb554422dea8b0a6e1dfa750f005d18b1b82e0a3",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "067dc7a06304cfb2a5b8ca7adb554422dea8b0a6e1dfa750f005d18b1b82e0a3",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-02-03 12:44:47.823 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:44:47.847 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-03 12:44:47.848 -02:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-03 12:44:47.869 -02:00 [DBG] Creating refresh token
2019-02-03 12:44:47.869 -02:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-03 12:44:47.895 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:44:47.895 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-03 12:44:47.911 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****t_rw"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****3d7c"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****dfqA"
    }
  ],
  "ActivityId": "0HLK9SO9PSSOT:00000008",
  "TimeStamp": "2019-02-03T14:44:47Z",
  "ProcessId": 11888,
  "LocalIpAddress": "127.0.0.1:27917",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:44:47.913 -02:00 [DBG] Token request success.
2019-02-03 12:44:48.002 -02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-03 12:44:48.005 -02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-03 12:44:48.005 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-03 12:44:48.025 -02:00 [DBG] Start userinfo request
2019-02-03 12:44:48.033 -02:00 [DBG] Bearer token found in header
2019-02-03 12:44:48.088 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:44:48.095 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:44:48.097 -02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-03 12:44:48.104 -02:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1549205087,
    "exp": 1549208687,
    "iss": "http://localhost:5105",
    "aud": [
      "http://localhost:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548813627,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Galvão",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-02-03 12:44:48.120 -02:00 [DBG] Creating userinfo response
2019-02-03 12:44:48.127 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-03 12:44:48.133 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-03 12:44:48.140 -02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-02-03 12:44:48.140 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-03 12:44:48.148 -02:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-02-03 12:44:48.148 -02:00 [DBG] End userinfo request
2019-02-03 12:44:48.683 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-03 12:44:48.685 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-03 12:44:48.685 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-03 12:44:48.685 -02:00 [DBG] Start token request.
2019-02-03 12:44:48.685 -02:00 [DBG] Start client validation
2019-02-03 12:44:48.685 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-03 12:44:48.686 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-03 12:44:48.686 -02:00 [DBG] Secret id found: MVC
2019-02-03 12:44:48.686 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:44:48.686 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-03 12:44:48.687 -02:00 [DBG] Client validation success
2019-02-03 12:44:48.687 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK9SO9PSSOT:0000000A",
  "TimeStamp": "2019-02-03T14:44:48Z",
  "ProcessId": 11888,
  "LocalIpAddress": "127.0.0.1:27917",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:44:48.688 -02:00 [DBG] Start token request validation
2019-02-03 12:44:48.698 -02:00 [DBG] Start client credentials token request validation
2019-02-03 12:44:48.706 -02:00 [DBG] MVC credentials token request validation success
2019-02-03 12:44:48.706 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-03 12:44:48.711 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-03 12:44:48.719 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****tIxQ"
    }
  ],
  "ActivityId": "0HLK9SO9PSSOT:0000000A",
  "TimeStamp": "2019-02-03T14:44:48Z",
  "ProcessId": 11888,
  "LocalIpAddress": "127.0.0.1:27917",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:44:48.719 -02:00 [DBG] Token request success.
2019-02-03 12:47:06.555 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 12:47:07.868 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 12:47:07.944 -02:00 [INF] Setting number of workers to 1
2019-02-03 12:47:07.960 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 12:47:08.117 -02:00 [INF] Bus Rebus 1 started
2019-02-03 12:47:08.199 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 12:47:08.357 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 12:47:08.433 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 12:47:08.457 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 12:47:08.457 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 12:47:08.457 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 12:47:08.458 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 12:47:08.458 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 12:47:33.497 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-03 12:47:33.536 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-03 12:47:33.538 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-03 12:47:33.556 -02:00 [DBG] Start token request.
2019-02-03 12:47:33.575 -02:00 [DBG] Start client validation
2019-02-03 12:47:33.587 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-03 12:47:33.588 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-03 12:47:33.588 -02:00 [DBG] Secret id found: MVC
2019-02-03 12:47:33.603 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:47:33.623 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-03 12:47:33.623 -02:00 [DBG] Client validation success
2019-02-03 12:47:33.667 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK9SPSTC8JU:00000004",
  "TimeStamp": "2019-02-03T14:47:33Z",
  "ProcessId": 4444,
  "LocalIpAddress": "127.0.0.1:31773",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:47:33.719 -02:00 [DBG] Start token request validation
2019-02-03 12:47:33.737 -02:00 [DBG] Start client credentials token request validation
2019-02-03 12:47:33.819 -02:00 [DBG] MVC credentials token request validation success
2019-02-03 12:47:33.837 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-03 12:47:33.895 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-03 12:47:34.051 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****QlVQ"
    }
  ],
  "ActivityId": "0HLK9SPSTC8JU:00000004",
  "TimeStamp": "2019-02-03T14:47:34Z",
  "ProcessId": 4444,
  "LocalIpAddress": "127.0.0.1:31773",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:47:34.055 -02:00 [DBG] Token request success.
2019-02-03 12:47:34.633 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-03 12:47:34.636 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-03 12:47:34.636 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-03 12:47:34.653 -02:00 [DBG] Start discovery request
2019-02-03 12:47:34.922 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-03 12:47:34.924 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-03 12:47:34.924 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-03 12:47:34.932 -02:00 [DBG] Start key discovery request
2019-02-03 12:47:54.952 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-03 12:47:54.954 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-03 12:47:54.954 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-03 12:47:54.954 -02:00 [DBG] Start token request.
2019-02-03 12:47:54.954 -02:00 [DBG] Start client validation
2019-02-03 12:47:54.955 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-03 12:47:54.955 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-03 12:47:54.955 -02:00 [DBG] Secret id found: MVC
2019-02-03 12:47:54.955 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:47:54.955 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-03 12:47:54.955 -02:00 [DBG] Client validation success
2019-02-03 12:47:54.956 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK9SPSTC8JU:00000009",
  "TimeStamp": "2019-02-03T14:47:54Z",
  "ProcessId": 4444,
  "LocalIpAddress": "127.0.0.1:31773",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:47:54.957 -02:00 [DBG] Start token request validation
2019-02-03 12:47:54.957 -02:00 [DBG] Start client credentials token request validation
2019-02-03 12:47:54.958 -02:00 [DBG] MVC credentials token request validation success
2019-02-03 12:47:54.958 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-03 12:47:54.958 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-03 12:47:54.964 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****PK2Q"
    }
  ],
  "ActivityId": "0HLK9SPSTC8JU:00000009",
  "TimeStamp": "2019-02-03T14:47:54Z",
  "ProcessId": 4444,
  "LocalIpAddress": "127.0.0.1:31773",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:47:54.964 -02:00 [DBG] Token request success.
2019-02-03 12:47:55.759 -02:00 [WRN] Unhandled exception [1,"2fe802e3-14ad-4117-bd33-7bdd2ac82a36"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 2fe802e3-14ad-4117-bd33-7bdd2ac82a36 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-03 12:47:55.817 -02:00 [INF] Message received:
2019-02-03 12:47:55.817 -02:00 [INF] ----------------------------------
2019-02-03 12:47:55.827 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"4da8d5ac-2e38-496c-9614-25a3e6c9217a","CreationDate":"2019-02-03T14:47:55.7955471Z"}
2019-02-03 12:47:55.827 -02:00 [INF] ----------------------------------
2019-02-03 12:47:56.644 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 86e6c78a-5a97-4820-800a-f7d3979e86c6 to 1 handlers took 834 ms
2019-02-03 12:50:43.183 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 12:50:45.309 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 12:50:45.449 -02:00 [INF] Setting number of workers to 1
2019-02-03 12:50:45.480 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 12:50:45.673 -02:00 [INF] Bus Rebus 1 started
2019-02-03 12:50:45.716 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 12:50:45.786 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 12:50:45.856 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 12:50:45.889 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 12:50:45.890 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 12:50:45.890 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 12:50:45.890 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 12:50:45.891 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 12:51:29.033 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-03 12:51:29.050 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-03 12:51:29.051 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-03 12:51:29.062 -02:00 [DBG] Start token request.
2019-02-03 12:51:29.076 -02:00 [DBG] Start client validation
2019-02-03 12:51:29.083 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-03 12:51:29.084 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-03 12:51:29.084 -02:00 [DBG] Secret id found: MVC
2019-02-03 12:51:29.095 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:51:29.109 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-03 12:51:29.111 -02:00 [DBG] Client validation success
2019-02-03 12:51:29.139 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK9SRTJNQNN:00000006",
  "TimeStamp": "2019-02-03T14:51:29Z",
  "ProcessId": 15260,
  "LocalIpAddress": "127.0.0.1:31195",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:51:29.188 -02:00 [DBG] Start token request validation
2019-02-03 12:51:29.202 -02:00 [DBG] Start client credentials token request validation
2019-02-03 12:51:29.249 -02:00 [DBG] MVC credentials token request validation success
2019-02-03 12:51:29.262 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-03 12:51:29.294 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-03 12:51:29.399 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****egtg"
    }
  ],
  "ActivityId": "0HLK9SRTJNQNN:00000006",
  "TimeStamp": "2019-02-03T14:51:29Z",
  "ProcessId": 15260,
  "LocalIpAddress": "127.0.0.1:31195",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:51:29.402 -02:00 [DBG] Token request success.
2019-02-03 12:51:29.810 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-03 12:51:29.813 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-03 12:51:29.813 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-03 12:51:29.821 -02:00 [DBG] Start discovery request
2019-02-03 12:51:29.967 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-03 12:51:29.968 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-03 12:51:29.968 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-03 12:51:29.975 -02:00 [DBG] Start key discovery request
2019-02-03 12:51:47.204 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-03 12:51:47.205 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-03 12:51:47.205 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-03 12:51:47.205 -02:00 [DBG] Start token request.
2019-02-03 12:51:47.205 -02:00 [DBG] Start client validation
2019-02-03 12:51:47.206 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-03 12:51:47.206 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-03 12:51:47.206 -02:00 [DBG] Secret id found: MVC
2019-02-03 12:51:47.206 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-03 12:51:47.206 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-03 12:51:47.206 -02:00 [DBG] Client validation success
2019-02-03 12:51:47.207 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLK9SRTJNQNN:0000000A",
  "TimeStamp": "2019-02-03T14:51:47Z",
  "ProcessId": 15260,
  "LocalIpAddress": "127.0.0.1:31195",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:51:47.208 -02:00 [DBG] Start token request validation
2019-02-03 12:51:47.208 -02:00 [DBG] Start client credentials token request validation
2019-02-03 12:51:47.208 -02:00 [DBG] MVC credentials token request validation success
2019-02-03 12:51:47.208 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-03 12:51:47.209 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-03 12:51:47.215 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****odnw"
    }
  ],
  "ActivityId": "0HLK9SRTJNQNN:0000000A",
  "TimeStamp": "2019-02-03T14:51:47Z",
  "ProcessId": 15260,
  "LocalIpAddress": "127.0.0.1:31195",
  "RemoteIpAddress": "::1"
}
2019-02-03 12:51:47.215 -02:00 [DBG] Token request success.
2019-02-03 12:51:47.843 -02:00 [WRN] Unhandled exception [1,"1c79f3a3-63ee-421c-9bc7-46ec14268ac3"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 1c79f3a3-63ee-421c-9bc7-46ec14268ac3 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-03 12:51:47.925 -02:00 [INF] Message received:
2019-02-03 12:51:47.926 -02:00 [INF] ----------------------------------
2019-02-03 12:51:47.934 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"fbcb4aff-5495-4a3e-8e95-7bc93bd0c2d0","CreationDate":"2019-02-03T14:51:47.8800798Z"}
2019-02-03 12:51:47.934 -02:00 [INF] ----------------------------------
2019-02-03 12:51:48.816 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 3e25c091-231e-482f-b429-a205e7a496a5 to 1 handlers took 909 ms
2019-02-03 22:59:08.147 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 22:59:09.726 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 22:59:09.789 -02:00 [INF] Setting number of workers to 1
2019-02-03 22:59:09.816 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 22:59:09.883 -02:00 [INF] Bus Rebus 1 started
2019-02-03 22:59:09.900 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 22:59:10.033 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 22:59:10.076 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 22:59:10.099 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 22:59:10.100 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 22:59:10.100 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 22:59:10.100 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 22:59:10.100 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-03 23:29:32.005 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-03 23:29:33.592 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-03 23:29:33.679 -02:00 [INF] Setting number of workers to 1
2019-02-03 23:29:33.693 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-03 23:29:33.737 -02:00 [INF] Bus Rebus 1 started
2019-02-03 23:29:33.765 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-03 23:29:33.931 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-03 23:29:34.023 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-03 23:29:34.044 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-03 23:29:34.045 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-03 23:29:34.045 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-03 23:29:34.045 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-03 23:29:34.045 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-04 00:50:05.246 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-04 00:50:06.771 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-04 00:50:06.830 -02:00 [INF] Setting number of workers to 1
2019-02-04 00:50:06.858 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-04 00:50:06.946 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-04 00:50:06.968 -02:00 [INF] Bus Rebus 1 started
2019-02-04 00:50:07.059 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-04 00:50:07.268 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-04 00:50:07.343 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-04 00:50:07.343 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-04 00:50:07.343 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-04 00:50:07.343 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-04 00:50:07.343 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-04 01:02:18.901 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-04 01:02:20.436 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-04 01:02:20.544 -02:00 [INF] Setting number of workers to 1
2019-02-04 01:02:20.625 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-04 01:02:20.710 -02:00 [INF] Bus Rebus 1 started
2019-02-04 01:02:20.733 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-04 01:02:20.947 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-04 01:02:21.023 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-04 01:02:21.052 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-04 01:02:21.052 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-04 01:02:21.052 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-04 01:02:21.052 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-04 01:02:21.052 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-04 01:04:37.633 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-04 01:04:38.891 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-04 01:04:39.015 -02:00 [INF] Setting number of workers to 1
2019-02-04 01:04:39.044 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-04 01:04:39.081 -02:00 [INF] Bus Rebus 1 started
2019-02-04 01:04:39.098 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-04 01:04:39.238 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-04 01:04:39.355 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-04 01:04:39.389 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-04 01:04:39.389 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-04 01:04:39.389 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-04 01:04:39.390 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-04 01:04:39.390 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-05 00:59:31.777 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-05 00:59:33.376 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-05 00:59:33.486 -02:00 [INF] Setting number of workers to 1
2019-02-05 00:59:33.526 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-05 00:59:33.743 -02:00 [INF] Bus Rebus 1 started
2019-02-05 00:59:33.842 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-05 00:59:33.944 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-05 00:59:34.046 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-05 00:59:34.074 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-05 00:59:34.074 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-05 00:59:34.074 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-05 00:59:34.074 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-05 00:59:34.075 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-05 22:34:59.316 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-05 22:35:00.963 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-05 22:35:01.035 -02:00 [INF] Setting number of workers to 1
2019-02-05 22:35:01.084 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-05 22:35:01.241 -02:00 [INF] Bus Rebus 1 started
2019-02-05 22:35:01.320 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-05 22:35:01.427 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-05 22:35:01.593 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-05 22:35:01.616 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-05 22:35:01.616 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-05 22:35:01.616 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-05 22:35:01.616 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-05 22:35:01.616 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-05 22:35:51.297 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-05 22:35:51.318 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-05 22:35:51.319 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-05 22:35:51.330 -02:00 [DBG] Start discovery request
2019-02-05 22:35:51.562 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-05 22:35:51.564 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-05 22:35:51.564 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-05 22:35:51.583 -02:00 [DBG] Start key discovery request
2019-02-05 22:35:52.660 -02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-05 22:35:52.671 -02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-05 22:35:52.671 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-05 22:35:52.679 -02:00 [DBG] Start authorize request
2019-02-05 22:35:52.723 -02:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-05 22:35:52.737 -02:00 [DBG] Start authorize request protocol validation
2019-02-05 22:35:52.775 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-05 22:35:52.792 -02:00 [DBG] Checking for PKCE parameters
2019-02-05 22:35:52.799 -02:00 [DBG] No PKCE used.
2019-02-05 22:35:52.951 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-05 22:35:52.985 -02:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBLiKo6yjBCvrDtubTT7HGHLlLZjcgCJi57Z6xTDWVmZOcuH5If4ZjkwQOvcahFcTz47Vwenx2uF9hLD-UrfL4ON_rSE993Z4nYigCm-d-K3Qq2wZ-DzPmiOySmfHnLIS_XwJkc7-s3MOww78jIiccp6mj3BpBq7UymvcefcN_n4n1YmPfC_Zy0z3sQ9WDx2OilaAZQ-myXmTJTXV8lAYpI7UbTv7f80YQPXZowgbj3UCfVcZ69Gz3PbiyRGFBUuvmBKBD11LxZuWRQkjribweZnzCA678f3Yb4q4oHubVwv0N-eTOcV0_9MK0KUHOpxaz8",
  "Nonce": "636850101520189967.MjNhMzA2YzktNzg1Mi00NTAwLTg0ZjItOWM5YWM3NTlmNzhjYThiMjY3YjctOTFkMS00MmIzLTg5ZTEtYzYzNjA0ZDVjZjZh",
  "SessionId": "ab5c771d1b04abcb39f3c4382084fb62",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636850101520189967.MjNhMzA2YzktNzg1Mi00NTAwLTg0ZjItOWM5YWM3NTlmNzhjYThiMjY3YjctOTFkMS00MmIzLTg5ZTEtYzYzNjA0ZDVjZjZh",
    "state": "CfDJ8AKuQyyLPltLkoBKRsSnJBLiKo6yjBCvrDtubTT7HGHLlLZjcgCJi57Z6xTDWVmZOcuH5If4ZjkwQOvcahFcTz47Vwenx2uF9hLD-UrfL4ON_rSE993Z4nYigCm-d-K3Qq2wZ-DzPmiOySmfHnLIS_XwJkc7-s3MOww78jIiccp6mj3BpBq7UymvcefcN_n4n1YmPfC_Zy0z3sQ9WDx2OilaAZQ-myXmTJTXV8lAYpI7UbTv7f80YQPXZowgbj3UCfVcZ69Gz3PbiyRGFBUuvmBKBD11LxZuWRQkjribweZnzCA678f3Yb4q4oHubVwv0N-eTOcV0_9MK0KUHOpxaz8",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-02-05 22:35:53.042 -02:00 [DBG] Client is configured to not require consent, no consent is required
2019-02-05 22:35:53.062 -02:00 [DBG] Creating Hybrid Flow response.
2019-02-05 22:35:53.146 -02:00 [DBG] Creating Implicit Flow response.
2019-02-05 22:35:53.184 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-05 22:35:53.620 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****7FSA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****94af"
    }
  ],
  "ActivityId": "0HLKBPBNHIPVV:00000007",
  "TimeStamp": "2019-02-06T00:35:53Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:35:53.629 -02:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBLiKo6yjBCvrDtubTT7HGHLlLZjcgCJi57Z6xTDWVmZOcuH5If4ZjkwQOvcahFcTz47Vwenx2uF9hLD-UrfL4ON_rSE993Z4nYigCm-d-K3Qq2wZ-DzPmiOySmfHnLIS_XwJkc7-s3MOww78jIiccp6mj3BpBq7UymvcefcN_n4n1YmPfC_Zy0z3sQ9WDx2OilaAZQ-myXmTJTXV8lAYpI7UbTv7f80YQPXZowgbj3UCfVcZ69Gz3PbiyRGFBUuvmBKBD11LxZuWRQkjribweZnzCA678f3Yb4q4oHubVwv0N-eTOcV0_9MK0KUHOpxaz8",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-02-05 22:35:54.708 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-05 22:35:54.721 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-05 22:35:54.721 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-05 22:35:54.748 -02:00 [DBG] Start token request.
2019-02-05 22:35:54.768 -02:00 [DBG] Start client validation
2019-02-05 22:35:54.784 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-05 22:35:54.794 -02:00 [DBG] Start parsing for secret in post body
2019-02-05 22:35:54.839 -02:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-05 22:35:54.839 -02:00 [DBG] Secret id found: MVC
2019-02-05 22:35:54.839 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-05 22:35:54.856 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-05 22:35:54.856 -02:00 [DBG] Client validation success
2019-02-05 22:35:54.862 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKBPBNHIQ00:00000002",
  "TimeStamp": "2019-02-06T00:35:54Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:35:54.877 -02:00 [DBG] Start token request validation
2019-02-05 22:35:54.894 -02:00 [DBG] Start validation of authorization code token request
2019-02-05 22:35:54.926 -02:00 [DBG] Validation of authorization code token request success
2019-02-05 22:35:54.939 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "a1042b005d004d6dae49733a2122aa32f70bb092a0ff02454d29ee26e94394af",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "a1042b005d004d6dae49733a2122aa32f70bb092a0ff02454d29ee26e94394af",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-02-05 22:35:54.965 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-05 22:35:54.989 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-05 22:35:54.990 -02:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-05 22:35:55.014 -02:00 [DBG] Creating refresh token
2019-02-05 22:35:55.014 -02:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-05 22:35:55.049 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-05 22:35:55.050 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-05 22:35:55.082 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****b5nA"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****6670"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****g5Bg"
    }
  ],
  "ActivityId": "0HLKBPBNHIQ00:00000002",
  "TimeStamp": "2019-02-06T00:35:55Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:35:55.107 -02:00 [DBG] Token request success.
2019-02-05 22:35:55.211 -02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-05 22:35:55.217 -02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-05 22:35:55.217 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-05 22:35:55.238 -02:00 [DBG] Start userinfo request
2019-02-05 22:35:55.251 -02:00 [DBG] Bearer token found in header
2019-02-05 22:35:55.400 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-05 22:35:55.409 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-05 22:35:55.411 -02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-05 22:35:55.420 -02:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1549413354,
    "exp": 1549416954,
    "iss": "http://localhost:5105",
    "aud": [
      "http://localhost:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1548813627,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Galvão",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-02-05 22:35:55.441 -02:00 [DBG] Creating userinfo response
2019-02-05 22:35:55.454 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-05 22:35:55.464 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-05 22:35:55.480 -02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-02-05 22:35:55.481 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-05 22:35:55.498 -02:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-02-05 22:35:55.499 -02:00 [DBG] End userinfo request
2019-02-05 22:35:56.343 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-05 22:35:56.345 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-05 22:35:56.345 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-05 22:35:56.346 -02:00 [DBG] Start token request.
2019-02-05 22:35:56.347 -02:00 [DBG] Start client validation
2019-02-05 22:35:56.348 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-05 22:35:56.349 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-05 22:35:56.349 -02:00 [DBG] Secret id found: MVC
2019-02-05 22:35:56.349 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-05 22:35:56.349 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-05 22:35:56.349 -02:00 [DBG] Client validation success
2019-02-05 22:35:56.350 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKBPBNHIQ00:00000003",
  "TimeStamp": "2019-02-06T00:35:56Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:35:56.354 -02:00 [DBG] Start token request validation
2019-02-05 22:35:56.363 -02:00 [DBG] Start client credentials token request validation
2019-02-05 22:35:56.375 -02:00 [DBG] MVC credentials token request validation success
2019-02-05 22:35:56.375 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-05 22:35:56.383 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-05 22:35:56.389 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****LDtA"
    }
  ],
  "ActivityId": "0HLKBPBNHIQ00:00000003",
  "TimeStamp": "2019-02-06T00:35:56Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:35:56.389 -02:00 [DBG] Token request success.
2019-02-05 22:35:56.822 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-05 22:35:56.823 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-05 22:35:56.823 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-05 22:35:56.823 -02:00 [DBG] Start discovery request
2019-02-05 22:35:57.004 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-05 22:35:57.004 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-05 22:35:57.005 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-05 22:35:57.005 -02:00 [DBG] Start key discovery request
2019-02-05 22:37:06.629 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-05 22:37:06.629 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-05 22:37:06.630 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-05 22:37:06.630 -02:00 [DBG] Start token request.
2019-02-05 22:37:06.630 -02:00 [DBG] Start client validation
2019-02-05 22:37:06.630 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-05 22:37:06.630 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-05 22:37:06.630 -02:00 [DBG] Secret id found: MVC
2019-02-05 22:37:06.630 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-05 22:37:06.630 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-05 22:37:06.631 -02:00 [DBG] Client validation success
2019-02-05 22:37:06.632 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKBPBNHIQ00:00000008",
  "TimeStamp": "2019-02-06T00:37:06Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:37:06.634 -02:00 [DBG] Start token request validation
2019-02-05 22:37:06.634 -02:00 [DBG] Start client credentials token request validation
2019-02-05 22:37:06.635 -02:00 [DBG] MVC credentials token request validation success
2019-02-05 22:37:06.635 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-05 22:37:06.635 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-05 22:37:06.642 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****EVXA"
    }
  ],
  "ActivityId": "0HLKBPBNHIQ00:00000008",
  "TimeStamp": "2019-02-06T00:37:06Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:37:06.642 -02:00 [DBG] Token request success.
2019-02-05 22:37:08.095 -02:00 [WRN] Unhandled exception [1,"9e5c60fc-3df0-4311-aae9-799310666801"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 9e5c60fc-3df0-4311-aae9-799310666801 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-05 22:37:08.180 -02:00 [INF] Message received:
2019-02-05 22:37:08.181 -02:00 [INF] ----------------------------------
2019-02-05 22:37:08.190 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"4557005e-c82f-421e-bcb8-4da07c982b3d","CreationDate":"2019-02-06T00:37:08.1421644Z"}
2019-02-05 22:37:08.190 -02:00 [INF] ----------------------------------
2019-02-05 22:37:09.241 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 1eddc525-0987-4831-a659-9daf40932b4a to 1 handlers took 1080 ms
2019-02-05 22:37:22.466 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-05 22:37:22.466 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-05 22:37:22.467 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-05 22:37:22.467 -02:00 [DBG] Start token request.
2019-02-05 22:37:22.467 -02:00 [DBG] Start client validation
2019-02-05 22:37:22.467 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-05 22:37:22.467 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-05 22:37:22.467 -02:00 [DBG] Secret id found: MVC
2019-02-05 22:37:22.467 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-05 22:37:22.467 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-05 22:37:22.467 -02:00 [DBG] Client validation success
2019-02-05 22:37:22.467 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKBPBNHIQ00:00000009",
  "TimeStamp": "2019-02-06T00:37:22Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:37:22.468 -02:00 [DBG] Start token request validation
2019-02-05 22:37:22.468 -02:00 [DBG] Start client credentials token request validation
2019-02-05 22:37:22.468 -02:00 [DBG] MVC credentials token request validation success
2019-02-05 22:37:22.469 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-05 22:37:22.469 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-05 22:37:22.475 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****_vow"
    }
  ],
  "ActivityId": "0HLKBPBNHIQ00:00000009",
  "TimeStamp": "2019-02-06T00:37:22Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:37:22.475 -02:00 [DBG] Token request success.
2019-02-05 22:37:25.636 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-05 22:37:25.638 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-05 22:37:25.638 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-05 22:37:25.638 -02:00 [DBG] Start token request.
2019-02-05 22:37:25.638 -02:00 [DBG] Start client validation
2019-02-05 22:37:25.638 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-05 22:37:25.638 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-05 22:37:25.638 -02:00 [DBG] Secret id found: MVC
2019-02-05 22:37:25.638 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-05 22:37:25.638 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-05 22:37:25.639 -02:00 [DBG] Client validation success
2019-02-05 22:37:25.639 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKBPBNHIPVV:0000000F",
  "TimeStamp": "2019-02-06T00:37:25Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:37:25.652 -02:00 [DBG] Start token request validation
2019-02-05 22:37:25.652 -02:00 [DBG] Start client credentials token request validation
2019-02-05 22:37:25.652 -02:00 [DBG] MVC credentials token request validation success
2019-02-05 22:37:25.653 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-05 22:37:25.653 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-05 22:37:25.659 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****IgNw"
    }
  ],
  "ActivityId": "0HLKBPBNHIPVV:0000000F",
  "TimeStamp": "2019-02-06T00:37:25Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:37:25.659 -02:00 [DBG] Token request success.
2019-02-05 22:37:26.055 -02:00 [WRN] Unhandled exception [1,"e27f7d5a-a8a9-4f51-a48b-eeeffc085719"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID e27f7d5a-a8a9-4f51-a48b-eeeffc085719 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-05 22:37:26.085 -02:00 [INF] Message received:
2019-02-05 22:37:26.085 -02:00 [INF] ----------------------------------
2019-02-05 22:37:26.085 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"73af6979-daad-4340-b2d0-9f6ceeecca17","CreationDate":"2019-02-06T00:37:26.0849058Z"}
2019-02-05 22:37:26.085 -02:00 [INF] ----------------------------------
2019-02-05 22:37:26.770 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 97e10da7-e68b-43a9-bce4-0f7fb555978a to 1 handlers took 685 ms
2019-02-05 22:37:30.663 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-05 22:37:30.664 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-05 22:37:30.664 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-05 22:37:30.664 -02:00 [DBG] Start token request.
2019-02-05 22:37:30.664 -02:00 [DBG] Start client validation
2019-02-05 22:37:30.664 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-05 22:37:30.665 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-05 22:37:30.665 -02:00 [DBG] Secret id found: MVC
2019-02-05 22:37:30.665 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-05 22:37:30.665 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-05 22:37:30.665 -02:00 [DBG] Client validation success
2019-02-05 22:37:30.665 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKBPBNHIPVV:00000010",
  "TimeStamp": "2019-02-06T00:37:30Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:37:30.693 -02:00 [DBG] Start token request validation
2019-02-05 22:37:30.694 -02:00 [DBG] Start client credentials token request validation
2019-02-05 22:37:30.694 -02:00 [DBG] MVC credentials token request validation success
2019-02-05 22:37:30.694 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-05 22:37:30.694 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-05 22:37:30.702 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****GJBA"
    }
  ],
  "ActivityId": "0HLKBPBNHIPVV:00000010",
  "TimeStamp": "2019-02-06T00:37:30Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:37:30.702 -02:00 [DBG] Token request success.
2019-02-05 22:37:33.515 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-05 22:37:33.515 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-05 22:37:33.515 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-05 22:37:33.515 -02:00 [DBG] Start token request.
2019-02-05 22:37:33.516 -02:00 [DBG] Start client validation
2019-02-05 22:37:33.516 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-05 22:37:33.516 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-05 22:37:33.516 -02:00 [DBG] Secret id found: MVC
2019-02-05 22:37:33.516 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-05 22:37:33.516 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-05 22:37:33.516 -02:00 [DBG] Client validation success
2019-02-05 22:37:33.516 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKBPBNHIQ00:0000000B",
  "TimeStamp": "2019-02-06T00:37:33Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:37:33.517 -02:00 [DBG] Start token request validation
2019-02-05 22:37:33.517 -02:00 [DBG] Start client credentials token request validation
2019-02-05 22:37:33.517 -02:00 [DBG] MVC credentials token request validation success
2019-02-05 22:37:33.517 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-05 22:37:33.517 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-05 22:37:33.525 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****74KA"
    }
  ],
  "ActivityId": "0HLKBPBNHIQ00:0000000B",
  "TimeStamp": "2019-02-06T00:37:33Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:37:33.525 -02:00 [DBG] Token request success.
2019-02-05 22:37:33.683 -02:00 [INF] Message received:
2019-02-05 22:37:33.683 -02:00 [INF] ----------------------------------
2019-02-05 22:37:33.683 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"430c2113-2860-47aa-a9d9-8fce49d36ec5","CreationDate":"2019-02-06T00:37:33.6828223Z"}
2019-02-05 22:37:33.683 -02:00 [INF] ----------------------------------
2019-02-05 22:37:34.103 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 151e7f13-4d2d-4313-9db3-9c4b8bc4f4a7 to 1 handlers took 420 ms
2019-02-05 22:37:43.448 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-05 22:37:43.453 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-05 22:37:43.453 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-05 22:37:43.453 -02:00 [DBG] Start token request.
2019-02-05 22:37:43.453 -02:00 [DBG] Start client validation
2019-02-05 22:37:43.453 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-05 22:37:43.454 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-05 22:37:43.454 -02:00 [DBG] Secret id found: MVC
2019-02-05 22:37:43.454 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-05 22:37:43.454 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-05 22:37:43.454 -02:00 [DBG] Client validation success
2019-02-05 22:37:43.454 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKBPBNHIQ00:0000000C",
  "TimeStamp": "2019-02-06T00:37:43Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:37:43.456 -02:00 [DBG] Start token request validation
2019-02-05 22:37:43.456 -02:00 [DBG] Start client credentials token request validation
2019-02-05 22:37:43.456 -02:00 [DBG] MVC credentials token request validation success
2019-02-05 22:37:43.456 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-05 22:37:43.456 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-05 22:37:43.464 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****-qfw"
    }
  ],
  "ActivityId": "0HLKBPBNHIQ00:0000000C",
  "TimeStamp": "2019-02-06T00:37:43Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:37:43.464 -02:00 [DBG] Token request success.
2019-02-05 22:37:46.502 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-05 22:37:46.502 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-05 22:37:46.502 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-05 22:37:46.503 -02:00 [DBG] Start token request.
2019-02-05 22:37:46.503 -02:00 [DBG] Start client validation
2019-02-05 22:37:46.503 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-05 22:37:46.503 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-05 22:37:46.503 -02:00 [DBG] Secret id found: MVC
2019-02-05 22:37:46.503 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-05 22:37:46.503 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-05 22:37:46.503 -02:00 [DBG] Client validation success
2019-02-05 22:37:46.503 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKBPBNHIPVV:00000012",
  "TimeStamp": "2019-02-06T00:37:46Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:37:46.504 -02:00 [DBG] Start token request validation
2019-02-05 22:37:46.504 -02:00 [DBG] Start client credentials token request validation
2019-02-05 22:37:46.504 -02:00 [DBG] MVC credentials token request validation success
2019-02-05 22:37:46.505 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-05 22:37:46.505 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-05 22:37:46.510 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****gQfg"
    }
  ],
  "ActivityId": "0HLKBPBNHIPVV:00000012",
  "TimeStamp": "2019-02-06T00:37:46Z",
  "ProcessId": 20640,
  "LocalIpAddress": "127.0.0.1:9767",
  "RemoteIpAddress": "::1"
}
2019-02-05 22:37:46.511 -02:00 [DBG] Token request success.
2019-02-05 22:37:46.656 -02:00 [INF] Message received:
2019-02-05 22:37:46.656 -02:00 [INF] ----------------------------------
2019-02-05 22:37:46.656 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"90556f63-42c2-4d06-9064-941689c974f9","CreationDate":"2019-02-06T00:37:46.6564052Z"}
2019-02-05 22:37:46.656 -02:00 [INF] ----------------------------------
2019-02-05 22:37:47.004 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens a3f89f7f-c31c-4f8a-b532-0c59986f6b4b to 1 handlers took 347 ms
2019-02-09 10:49:21.311 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-09 10:49:23.773 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-09 10:49:23.868 -02:00 [INF] Setting number of workers to 1
2019-02-09 10:49:23.923 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-09 10:49:23.988 -02:00 [INF] Bus Rebus 1 started
2019-02-09 10:49:24.057 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-09 10:49:24.301 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-09 10:49:24.442 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-09 10:49:24.467 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-09 10:49:24.467 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-09 10:49:24.467 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-09 10:49:24.467 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-09 10:49:24.467 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-09 11:12:27.261 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-09 11:12:27.330 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-09 11:12:27.332 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-09 11:12:27.363 -02:00 [DBG] Start token request.
2019-02-09 11:12:27.386 -02:00 [DBG] Start client validation
2019-02-09 11:12:27.403 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-09 11:12:27.404 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-09 11:12:27.404 -02:00 [DBG] Secret id found: MVC
2019-02-09 11:12:27.427 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-09 11:12:27.474 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-09 11:12:27.475 -02:00 [DBG] Client validation success
2019-02-09 11:12:27.548 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKEHK2V58HH:0000007E",
  "TimeStamp": "2019-02-09T13:12:27Z",
  "ProcessId": 4892,
  "LocalIpAddress": "127.0.0.1:32297",
  "RemoteIpAddress": "::1"
}
2019-02-09 11:12:27.641 -02:00 [DBG] Start token request validation
2019-02-09 11:12:27.669 -02:00 [DBG] Start client credentials token request validation
2019-02-09 11:12:27.773 -02:00 [DBG] MVC credentials token request validation success
2019-02-09 11:12:27.803 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-09 11:12:27.886 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-09 11:12:28.256 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****8UQQ"
    }
  ],
  "ActivityId": "0HLKEHK2V58HH:0000007E",
  "TimeStamp": "2019-02-09T13:12:28Z",
  "ProcessId": 4892,
  "LocalIpAddress": "127.0.0.1:32297",
  "RemoteIpAddress": "::1"
}
2019-02-09 11:12:28.260 -02:00 [DBG] Token request success.
2019-02-09 11:12:28.956 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-09 11:12:28.961 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-09 11:12:28.961 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-09 11:12:28.969 -02:00 [DBG] Start discovery request
2019-02-09 11:12:29.140 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-09 11:12:29.141 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-09 11:12:29.142 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-09 11:12:29.152 -02:00 [DBG] Start key discovery request
2019-02-09 11:12:38.297 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-09 11:12:38.299 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-09 11:12:38.299 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-09 11:12:38.299 -02:00 [DBG] Start token request.
2019-02-09 11:12:38.300 -02:00 [DBG] Start client validation
2019-02-09 11:12:38.301 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-09 11:12:38.301 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-09 11:12:38.301 -02:00 [DBG] Secret id found: MVC
2019-02-09 11:12:38.302 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-09 11:12:38.302 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-09 11:12:38.302 -02:00 [DBG] Client validation success
2019-02-09 11:12:38.302 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKEHK2V58HH:00000082",
  "TimeStamp": "2019-02-09T13:12:38Z",
  "ProcessId": 4892,
  "LocalIpAddress": "127.0.0.1:32297",
  "RemoteIpAddress": "::1"
}
2019-02-09 11:12:38.305 -02:00 [DBG] Start token request validation
2019-02-09 11:12:38.305 -02:00 [DBG] Start client credentials token request validation
2019-02-09 11:12:38.305 -02:00 [DBG] MVC credentials token request validation success
2019-02-09 11:12:38.306 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-09 11:12:38.306 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-09 11:12:38.312 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****fn0w"
    }
  ],
  "ActivityId": "0HLKEHK2V58HH:00000082",
  "TimeStamp": "2019-02-09T13:12:38Z",
  "ProcessId": 4892,
  "LocalIpAddress": "127.0.0.1:32297",
  "RemoteIpAddress": "::1"
}
2019-02-09 11:12:38.313 -02:00 [DBG] Token request success.
2019-02-09 11:12:39.503 -02:00 [WRN] Unhandled exception [1,"a5e894b8-affc-4994-b965-06881702271e"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID a5e894b8-affc-4994-b965-06881702271e and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-09 11:12:39.624 -02:00 [INF] Message received:
2019-02-09 11:12:39.625 -02:00 [INF] ----------------------------------
2019-02-09 11:12:39.636 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"32719abb-25e6-4590-b660-9960e7dcee22","CreationDate":"2019-02-09T13:12:39.569181Z"}
2019-02-09 11:12:39.636 -02:00 [INF] ----------------------------------
2019-02-09 11:12:41.152 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 18e3712f-ea22-42c3-aa6b-15a642fa77c1 to 1 handlers took 1557 ms
2019-02-09 19:12:08.379 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-09 19:13:21.223 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-09 19:14:14.785 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-09 19:14:16.441 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-09 19:14:16.559 -02:00 [INF] Setting number of workers to 1
2019-02-09 19:14:16.603 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-09 19:14:16.746 -02:00 [INF] Bus Rebus 1 started
2019-02-09 19:14:16.818 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-09 19:14:16.932 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-09 19:14:17.151 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-09 19:14:17.186 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-09 19:14:17.186 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-09 19:14:17.186 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-09 19:14:17.186 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-09 19:14:17.186 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-09 21:13:14.838 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-09 21:13:15.923 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-09 21:13:16.003 -02:00 [INF] Setting number of workers to 1
2019-02-09 21:13:16.024 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-09 21:13:16.048 -02:00 [INF] Bus Rebus 1 started
2019-02-09 21:13:16.059 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-09 21:13:16.167 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-09 21:13:16.217 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-09 21:13:16.245 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-09 21:13:16.245 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-09 21:13:16.245 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-09 21:13:16.245 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-09 21:13:16.245 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-09 21:23:41.624 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-09 21:23:43.158 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-09 21:23:43.281 -02:00 [INF] Setting number of workers to 1
2019-02-09 21:23:43.397 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-09 21:23:43.528 -02:00 [INF] Bus Rebus 1 started
2019-02-09 21:23:43.667 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-09 21:23:43.839 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-09 21:23:44.033 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-09 21:23:44.065 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-09 21:23:44.066 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-09 21:23:44.066 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-09 21:23:44.066 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-09 21:23:44.066 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-11 22:02:17.054 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-11 22:02:18.059 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-11 22:02:18.145 -02:00 [INF] Setting number of workers to 1
2019-02-11 22:02:18.165 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-11 22:02:18.237 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-11 22:02:18.258 -02:00 [INF] Bus Rebus 1 started
2019-02-11 22:02:18.501 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-11 22:02:18.595 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-11 22:02:18.617 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-11 22:02:18.618 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-11 22:02:18.618 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-11 22:02:18.619 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-11 22:02:18.619 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-11 22:49:15.487 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-11 22:49:19.150 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-11 22:49:19.438 -02:00 [INF] Setting number of workers to 1
2019-02-11 22:49:19.623 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-11 22:49:19.909 -02:00 [INF] Bus Rebus 1 started
2019-02-11 22:49:20.053 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-11 22:49:20.255 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-11 22:49:20.650 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-11 22:49:20.690 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-11 22:49:20.691 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-11 22:49:20.692 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-11 22:49:20.692 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-11 22:49:20.692 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-11 22:54:19.708 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-11 22:54:21.249 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-11 22:54:21.300 -02:00 [INF] Setting number of workers to 1
2019-02-11 22:54:21.330 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-11 22:54:21.397 -02:00 [INF] Bus Rebus 1 started
2019-02-11 22:54:21.439 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-11 22:54:21.564 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-11 22:54:21.649 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-11 22:54:21.716 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-11 22:54:21.717 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-11 22:54:21.717 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-11 22:54:21.717 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-11 22:54:21.717 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-12 23:22:32.220 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-12 23:22:33.378 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-12 23:22:33.540 -02:00 [INF] Setting number of workers to 1
2019-02-12 23:22:33.639 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-12 23:22:33.755 -02:00 [INF] Bus Rebus 1 started
2019-02-12 23:22:33.829 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-12 23:22:33.922 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-12 23:22:33.994 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-12 23:22:34.023 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-12 23:22:34.023 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-12 23:22:34.024 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-12 23:22:34.025 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-12 23:22:34.025 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-12 23:36:57.300 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-12 23:36:58.726 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-12 23:36:58.904 -02:00 [INF] Setting number of workers to 1
2019-02-12 23:36:58.988 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-12 23:36:59.078 -02:00 [INF] Bus Rebus 1 started
2019-02-12 23:36:59.223 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-12 23:36:59.302 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-12 23:36:59.381 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-12 23:36:59.413 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-12 23:36:59.413 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-12 23:36:59.413 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-12 23:36:59.414 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-12 23:36:59.414 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-12 23:47:39.915 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-12 23:47:43.190 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-12 23:47:43.594 -02:00 [INF] Setting number of workers to 1
2019-02-12 23:47:43.615 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-12 23:47:43.661 -02:00 [INF] Bus Rebus 1 started
2019-02-12 23:47:43.667 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-12 23:47:43.720 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-12 23:47:44.231 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-12 23:47:44.282 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-12 23:47:44.283 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-12 23:47:44.283 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-12 23:47:44.283 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-12 23:47:44.283 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 00:17:30.472 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 00:21:31.690 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 00:22:41.820 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 00:22:43.434 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 00:22:43.508 -02:00 [INF] Setting number of workers to 1
2019-02-16 00:22:43.608 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 00:22:43.742 -02:00 [INF] Bus Rebus 1 started
2019-02-16 00:22:43.772 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 00:22:43.875 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 00:22:43.902 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 00:22:43.946 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 00:22:43.946 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 00:22:43.946 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 00:22:43.946 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 00:22:43.946 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 00:54:29.403 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 00:54:30.784 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 00:54:30.832 -02:00 [INF] Setting number of workers to 1
2019-02-16 00:54:30.859 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 00:54:30.920 -02:00 [INF] Bus Rebus 1 started
2019-02-16 00:54:30.952 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 00:54:31.166 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 00:54:31.245 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 00:54:31.277 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 00:54:31.277 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 00:54:31.278 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 00:54:31.278 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 00:54:31.278 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 00:57:52.223 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 00:57:54.326 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 00:57:54.485 -02:00 [INF] Setting number of workers to 1
2019-02-16 00:57:54.546 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 00:57:54.900 -02:00 [INF] Bus Rebus 1 started
2019-02-16 00:57:54.994 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 00:57:55.173 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 00:57:55.442 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 00:57:55.476 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 00:57:55.476 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 00:57:55.476 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 00:57:55.476 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 00:57:55.476 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 10:57:22.428 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 10:57:23.037 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 10:57:23.078 -02:00 [INF] Setting number of workers to 1
2019-02-16 10:57:23.096 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 10:57:23.113 -02:00 [INF] Bus Rebus 1 started
2019-02-16 10:57:23.121 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 10:57:23.227 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 10:57:23.266 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 10:57:23.291 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 10:57:23.291 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 10:57:23.291 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 10:57:23.292 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 10:57:23.292 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 11:03:13.918 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 11:03:14.940 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 11:03:15.006 -02:00 [INF] Setting number of workers to 1
2019-02-16 11:03:15.021 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 11:03:15.049 -02:00 [INF] Bus Rebus 1 started
2019-02-16 11:03:15.061 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 11:03:15.211 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 11:03:15.395 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 11:03:15.422 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 11:03:15.423 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 11:03:15.423 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 11:03:15.423 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 11:03:15.424 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 11:31:09.961 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-16 11:31:09.978 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-16 11:31:09.979 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-16 11:31:09.985 -02:00 [DBG] Start discovery request
2019-02-16 11:31:10.139 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-16 11:31:10.142 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-16 11:31:10.143 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-16 11:31:10.156 -02:00 [DBG] Start key discovery request
2019-02-16 11:31:10.334 -02:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-16 11:31:10.334 -02:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-16 11:31:10.334 -02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-16 11:31:10.351 -02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-16 11:31:10.351 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-16 11:31:10.360 -02:00 [DBG] Start authorize request
2019-02-16 11:31:10.373 -02:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-16 11:31:10.385 -02:00 [DBG] No user present in authorize request
2019-02-16 11:31:10.395 -02:00 [DBG] Start authorize request protocol validation
2019-02-16 11:31:10.425 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 11:31:10.433 -02:00 [DBG] Checking for PKCE parameters
2019-02-16 11:31:10.436 -02:00 [DBG] No PKCE used.
2019-02-16 11:31:10.507 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-16 11:31:10.527 -02:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBKbMR7rLVL4UdP5iT0bgrcFxgTnqYDFGJqn25Bxz9ubaroawc9bCP8rTmFe2uaSKIwpIpa973QVqouF_OdZHWYFTxlFBTrD_J_1TRPfN1iN575s9NsyudQHkvLtcnO6n-rBWo9lm0gEyYFZ2t9CXes_OxlmxrgO1jLj8gezwO2VCEZ4GRcNJXQZ8Nj3hSiugu1EqKYvVLEWRkL7uH5u1BXY3pfRiBq22DZzu9cKiI8GQNEv892W7dcqj6NwNK0iLGFjhMrqarkFXDOwbA-8N3nC1qtYmjA94pgM8fQFov6ytllG2SzUP8oTgAHyiwnkZnU",
  "Nonce": "636859206702427097.OGQ4MDM4OGQtNTQ1Ny00MjRkLTk1NGQtMTE2Y2M4NWRjYWUxZjY2NzExNzgtOTVmYi00YzlmLWI1NzktZDdhMWM0YzYxOWEw",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636859206702427097.OGQ4MDM4OGQtNTQ1Ny00MjRkLTk1NGQtMTE2Y2M4NWRjYWUxZjY2NzExNzgtOTVmYi00YzlmLWI1NzktZDdhMWM0YzYxOWEw",
    "state": "CfDJ8AKuQyyLPltLkoBKRsSnJBKbMR7rLVL4UdP5iT0bgrcFxgTnqYDFGJqn25Bxz9ubaroawc9bCP8rTmFe2uaSKIwpIpa973QVqouF_OdZHWYFTxlFBTrD_J_1TRPfN1iN575s9NsyudQHkvLtcnO6n-rBWo9lm0gEyYFZ2t9CXes_OxlmxrgO1jLj8gezwO2VCEZ4GRcNJXQZ8Nj3hSiugu1EqKYvVLEWRkL7uH5u1BXY3pfRiBq22DZzu9cKiI8GQNEv892W7dcqj6NwNK0iLGFjhMrqarkFXDOwbA-8N3nC1qtYmjA94pgM8fQFov6ytllG2SzUP8oTgAHyiwnkZnU",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-02-16 11:31:10.544 -02:00 [INF] Showing login: User is not authenticated
2019-02-16 11:31:10.561 -02:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-16 11:31:10.562 -02:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-16 11:31:10.945 -02:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-16 11:31:10.945 -02:00 [DBG] Start authorize request protocol validation
2019-02-16 11:31:10.945 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 11:31:10.946 -02:00 [DBG] Checking for PKCE parameters
2019-02-16 11:31:10.946 -02:00 [DBG] No PKCE used.
2019-02-16 11:31:10.946 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-16 11:31:10.952 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 11:31:14.510 -02:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-16 11:31:14.512 -02:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-16 11:31:14.512 -02:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-16 11:31:15.009 -02:00 [DBG] Augmenting SignInContext
2019-02-16 11:31:15.017 -02:00 [DBG] Adding idp claim with value: local
2019-02-16 11:31:15.017 -02:00 [DBG] Adding amr claim with value: pwd
2019-02-16 11:31:15.018 -02:00 [DBG] Adding auth_time claim with value: 1550323875
2019-02-16 11:31:15.024 -02:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-16 11:31:15.043 -02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-16 11:31:15.067 -02:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLKK1SEURH4R:00000002",
  "TimeStamp": "2019-02-16T13:31:15Z",
  "ProcessId": 19272,
  "LocalIpAddress": "127.0.0.1:21365",
  "RemoteIpAddress": "::1"
}
2019-02-16 11:31:15.095 -02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-16 11:31:15.097 -02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-16 11:31:15.097 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-16 11:31:15.108 -02:00 [DBG] Start authorize callback request
2019-02-16 11:31:15.114 -02:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-16 11:31:15.114 -02:00 [DBG] Start authorize request protocol validation
2019-02-16 11:31:15.114 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 11:31:15.115 -02:00 [DBG] Checking for PKCE parameters
2019-02-16 11:31:15.115 -02:00 [DBG] No PKCE used.
2019-02-16 11:31:15.115 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-16 11:31:15.116 -02:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBKbMR7rLVL4UdP5iT0bgrcFxgTnqYDFGJqn25Bxz9ubaroawc9bCP8rTmFe2uaSKIwpIpa973QVqouF_OdZHWYFTxlFBTrD_J_1TRPfN1iN575s9NsyudQHkvLtcnO6n-rBWo9lm0gEyYFZ2t9CXes_OxlmxrgO1jLj8gezwO2VCEZ4GRcNJXQZ8Nj3hSiugu1EqKYvVLEWRkL7uH5u1BXY3pfRiBq22DZzu9cKiI8GQNEv892W7dcqj6NwNK0iLGFjhMrqarkFXDOwbA-8N3nC1qtYmjA94pgM8fQFov6ytllG2SzUP8oTgAHyiwnkZnU",
  "Nonce": "636859206702427097.OGQ4MDM4OGQtNTQ1Ny00MjRkLTk1NGQtMTE2Y2M4NWRjYWUxZjY2NzExNzgtOTVmYi00YzlmLWI1NzktZDdhMWM0YzYxOWEw",
  "SessionId": "3dad3bf84009fcf2d0d70d2a17760dad",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636859206702427097.OGQ4MDM4OGQtNTQ1Ny00MjRkLTk1NGQtMTE2Y2M4NWRjYWUxZjY2NzExNzgtOTVmYi00YzlmLWI1NzktZDdhMWM0YzYxOWEw",
    "state": "CfDJ8AKuQyyLPltLkoBKRsSnJBKbMR7rLVL4UdP5iT0bgrcFxgTnqYDFGJqn25Bxz9ubaroawc9bCP8rTmFe2uaSKIwpIpa973QVqouF_OdZHWYFTxlFBTrD_J_1TRPfN1iN575s9NsyudQHkvLtcnO6n-rBWo9lm0gEyYFZ2t9CXes_OxlmxrgO1jLj8gezwO2VCEZ4GRcNJXQZ8Nj3hSiugu1EqKYvVLEWRkL7uH5u1BXY3pfRiBq22DZzu9cKiI8GQNEv892W7dcqj6NwNK0iLGFjhMrqarkFXDOwbA-8N3nC1qtYmjA94pgM8fQFov6ytllG2SzUP8oTgAHyiwnkZnU",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-02-16 11:31:15.140 -02:00 [DBG] Client is configured to not require consent, no consent is required
2019-02-16 11:31:15.151 -02:00 [DBG] Creating Hybrid Flow response.
2019-02-16 11:31:15.212 -02:00 [DBG] Creating Implicit Flow response.
2019-02-16 11:31:15.230 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-16 11:31:15.475 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****DQ2Q"
    },
    {
      "TokenType": "code",
      "TokenValue": "****cb52"
    }
  ],
  "ActivityId": "0HLKK1SEURH4S:00000002",
  "TimeStamp": "2019-02-16T13:31:15Z",
  "ProcessId": 19272,
  "LocalIpAddress": "127.0.0.1:21365",
  "RemoteIpAddress": "::1"
}
2019-02-16 11:31:15.486 -02:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBKbMR7rLVL4UdP5iT0bgrcFxgTnqYDFGJqn25Bxz9ubaroawc9bCP8rTmFe2uaSKIwpIpa973QVqouF_OdZHWYFTxlFBTrD_J_1TRPfN1iN575s9NsyudQHkvLtcnO6n-rBWo9lm0gEyYFZ2t9CXes_OxlmxrgO1jLj8gezwO2VCEZ4GRcNJXQZ8Nj3hSiugu1EqKYvVLEWRkL7uH5u1BXY3pfRiBq22DZzu9cKiI8GQNEv892W7dcqj6NwNK0iLGFjhMrqarkFXDOwbA-8N3nC1qtYmjA94pgM8fQFov6ytllG2SzUP8oTgAHyiwnkZnU",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-02-16 11:31:15.536 -02:00 [DBG] Augmenting SignInContext
2019-02-16 11:31:15.539 -02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-16 11:31:16.093 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-16 11:31:16.104 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-16 11:31:16.105 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-16 11:31:16.123 -02:00 [DBG] Start token request.
2019-02-16 11:31:16.133 -02:00 [DBG] Start client validation
2019-02-16 11:31:16.145 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-16 11:31:16.153 -02:00 [DBG] Start parsing for secret in post body
2019-02-16 11:31:16.154 -02:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-16 11:31:16.154 -02:00 [DBG] Secret id found: MVC
2019-02-16 11:31:16.154 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 11:31:16.176 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-16 11:31:16.176 -02:00 [DBG] Client validation success
2019-02-16 11:31:16.185 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKK1SEURH4Q:00000002",
  "TimeStamp": "2019-02-16T13:31:16Z",
  "ProcessId": 19272,
  "LocalIpAddress": "127.0.0.1:21365",
  "RemoteIpAddress": "::1"
}
2019-02-16 11:31:16.196 -02:00 [DBG] Start token request validation
2019-02-16 11:31:16.216 -02:00 [DBG] Start validation of authorization code token request
2019-02-16 11:31:16.243 -02:00 [DBG] Validation of authorization code token request success
2019-02-16 11:31:16.249 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "d0819048a131573fd0f0de73975f45110965f468adf624a8023151463713cb52",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "d0819048a131573fd0f0de73975f45110965f468adf624a8023151463713cb52",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-02-16 11:31:16.277 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 11:31:16.303 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-16 11:31:16.304 -02:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-16 11:31:16.327 -02:00 [DBG] Creating refresh token
2019-02-16 11:31:16.327 -02:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-16 11:31:16.357 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 11:31:16.358 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-16 11:31:16.376 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****y-Zg"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****a700"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****qhXw"
    }
  ],
  "ActivityId": "0HLKK1SEURH4Q:00000002",
  "TimeStamp": "2019-02-16T13:31:16Z",
  "ProcessId": 19272,
  "LocalIpAddress": "127.0.0.1:21365",
  "RemoteIpAddress": "::1"
}
2019-02-16 11:31:16.379 -02:00 [DBG] Token request success.
2019-02-16 11:31:16.449 -02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-16 11:31:16.452 -02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-16 11:31:16.452 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-16 11:31:16.467 -02:00 [DBG] Start userinfo request
2019-02-16 11:31:16.476 -02:00 [DBG] Bearer token found in header
2019-02-16 11:31:16.525 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 11:31:16.530 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 11:31:16.532 -02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-16 11:31:16.538 -02:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1550323876,
    "exp": 1550327476,
    "iss": "http://localhost:5105",
    "aud": [
      "http://localhost:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1550323875,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Galvão",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-02-16 11:31:16.551 -02:00 [DBG] Creating userinfo response
2019-02-16 11:31:16.558 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-16 11:31:16.564 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-16 11:31:16.571 -02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-02-16 11:31:16.572 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-16 11:31:16.581 -02:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-02-16 11:31:16.582 -02:00 [DBG] End userinfo request
2019-02-16 11:31:17.227 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-16 11:31:17.229 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-16 11:31:17.229 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-16 11:31:17.230 -02:00 [DBG] Start token request.
2019-02-16 11:31:17.230 -02:00 [DBG] Start client validation
2019-02-16 11:31:17.231 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-16 11:31:17.232 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-16 11:31:17.232 -02:00 [DBG] Secret id found: MVC
2019-02-16 11:31:17.232 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 11:31:17.232 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-16 11:31:17.232 -02:00 [DBG] Client validation success
2019-02-16 11:31:17.232 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKK1SEURH4T:00000003",
  "TimeStamp": "2019-02-16T13:31:17Z",
  "ProcessId": 19272,
  "LocalIpAddress": "127.0.0.1:21365",
  "RemoteIpAddress": "::1"
}
2019-02-16 11:31:17.235 -02:00 [DBG] Start token request validation
2019-02-16 11:31:17.248 -02:00 [DBG] Start client credentials token request validation
2019-02-16 11:31:17.260 -02:00 [DBG] MVC credentials token request validation success
2019-02-16 11:31:17.261 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-16 11:31:17.269 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-16 11:31:17.274 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****4deg"
    }
  ],
  "ActivityId": "0HLKK1SEURH4T:00000003",
  "TimeStamp": "2019-02-16T13:31:17Z",
  "ProcessId": 19272,
  "LocalIpAddress": "127.0.0.1:21365",
  "RemoteIpAddress": "::1"
}
2019-02-16 11:31:17.275 -02:00 [DBG] Token request success.
2019-02-16 11:59:45.206 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 11:59:46.069 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 11:59:46.147 -02:00 [INF] Setting number of workers to 1
2019-02-16 11:59:46.167 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 11:59:46.225 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 11:59:46.228 -02:00 [INF] Bus Rebus 1 started
2019-02-16 11:59:46.308 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 11:59:46.347 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 11:59:46.368 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 11:59:46.368 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 11:59:46.369 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 11:59:46.369 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 11:59:46.369 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 12:00:36.961 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 12:00:37.489 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 12:00:37.508 -02:00 [INF] Setting number of workers to 1
2019-02-16 12:00:37.512 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 12:00:37.514 -02:00 [INF] Bus Rebus 1 started
2019-02-16 12:00:37.525 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 12:00:37.566 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 12:00:37.580 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 12:00:37.593 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 12:00:37.593 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 12:00:37.593 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 12:00:37.593 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 12:00:37.593 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 14:38:23.371 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 14:38:24.670 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 14:38:24.717 -02:00 [INF] Setting number of workers to 1
2019-02-16 14:38:24.734 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 14:38:24.798 -02:00 [INF] Bus Rebus 1 started
2019-02-16 14:38:24.852 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 14:38:25.003 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 14:38:25.120 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 14:38:25.151 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 14:38:25.151 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 14:38:25.151 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 14:38:25.151 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 14:38:25.152 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 15:07:06.710 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 15:07:07.767 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 15:07:07.811 -02:00 [INF] Setting number of workers to 1
2019-02-16 15:07:07.846 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 15:07:07.872 -02:00 [INF] Bus Rebus 1 started
2019-02-16 15:07:07.888 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 15:07:07.981 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 15:07:08.032 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 15:07:08.072 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 15:07:08.072 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 15:07:08.073 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 15:07:08.073 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 15:07:08.073 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 15:11:12.110 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 15:11:12.732 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 15:11:12.796 -02:00 [INF] Setting number of workers to 1
2019-02-16 15:11:12.813 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 15:11:12.827 -02:00 [INF] Bus Rebus 1 started
2019-02-16 15:11:12.832 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 15:11:12.952 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 15:11:12.983 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 15:11:13.006 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 15:11:13.007 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 15:11:13.007 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 15:11:13.008 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 15:11:13.008 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 15:13:32.322 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-16 15:13:32.364 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-16 15:13:32.365 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-16 15:13:32.381 -02:00 [DBG] Start token request.
2019-02-16 15:13:32.395 -02:00 [DBG] Start client validation
2019-02-16 15:13:32.404 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-16 15:13:32.405 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-16 15:13:32.405 -02:00 [DBG] Secret id found: MVC
2019-02-16 15:13:32.422 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 15:13:32.443 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-16 15:13:32.443 -02:00 [DBG] Client validation success
2019-02-16 15:13:32.473 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKK670MEI3O:0000000B",
  "TimeStamp": "2019-02-16T17:13:32Z",
  "ProcessId": 19640,
  "LocalIpAddress": "127.0.0.1:17157",
  "RemoteIpAddress": "::1"
}
2019-02-16 15:13:32.536 -02:00 [DBG] Start token request validation
2019-02-16 15:13:32.553 -02:00 [DBG] Start client credentials token request validation
2019-02-16 15:13:32.615 -02:00 [DBG] MVC credentials token request validation success
2019-02-16 15:13:32.631 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-16 15:13:32.681 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-16 15:13:32.819 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****-LyA"
    }
  ],
  "ActivityId": "0HLKK670MEI3O:0000000B",
  "TimeStamp": "2019-02-16T17:13:32Z",
  "ProcessId": 19640,
  "LocalIpAddress": "127.0.0.1:17157",
  "RemoteIpAddress": "::1"
}
2019-02-16 15:13:32.824 -02:00 [DBG] Token request success.
2019-02-16 15:14:12.059 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-16 15:14:12.062 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-16 15:14:12.062 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-16 15:14:12.072 -02:00 [DBG] Start discovery request
2019-02-16 15:14:12.392 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-16 15:14:12.394 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-16 15:14:12.394 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-16 15:14:12.403 -02:00 [DBG] Start key discovery request
2019-02-16 15:14:46.361 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-16 15:14:46.363 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-16 15:14:46.363 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-16 15:14:46.363 -02:00 [DBG] Start token request.
2019-02-16 15:14:46.365 -02:00 [DBG] Start client validation
2019-02-16 15:14:46.365 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-16 15:14:46.365 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-16 15:14:46.365 -02:00 [DBG] Secret id found: MVC
2019-02-16 15:14:46.366 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 15:14:46.366 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-16 15:14:46.366 -02:00 [DBG] Client validation success
2019-02-16 15:14:46.366 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKK670MEI3O:00000014",
  "TimeStamp": "2019-02-16T17:14:46Z",
  "ProcessId": 19640,
  "LocalIpAddress": "127.0.0.1:17157",
  "RemoteIpAddress": "::1"
}
2019-02-16 15:14:46.379 -02:00 [DBG] Start token request validation
2019-02-16 15:14:46.379 -02:00 [DBG] Start client credentials token request validation
2019-02-16 15:14:46.379 -02:00 [DBG] MVC credentials token request validation success
2019-02-16 15:14:46.379 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-16 15:14:46.379 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-16 15:14:46.385 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Ub5A"
    }
  ],
  "ActivityId": "0HLKK670MEI3O:00000014",
  "TimeStamp": "2019-02-16T17:14:46Z",
  "ProcessId": 19640,
  "LocalIpAddress": "127.0.0.1:17157",
  "RemoteIpAddress": "::1"
}
2019-02-16 15:14:46.385 -02:00 [DBG] Token request success.
2019-02-16 15:14:49.951 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-16 15:14:49.952 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-16 15:14:49.952 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-16 15:14:49.952 -02:00 [DBG] Start token request.
2019-02-16 15:14:49.952 -02:00 [DBG] Start client validation
2019-02-16 15:14:49.952 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-16 15:14:49.952 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-16 15:14:49.953 -02:00 [DBG] Secret id found: MVC
2019-02-16 15:14:49.953 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 15:14:49.953 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-16 15:14:49.953 -02:00 [DBG] Client validation success
2019-02-16 15:14:49.953 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKK670MEI3O:00000015",
  "TimeStamp": "2019-02-16T17:14:49Z",
  "ProcessId": 19640,
  "LocalIpAddress": "127.0.0.1:17157",
  "RemoteIpAddress": "::1"
}
2019-02-16 15:14:49.954 -02:00 [DBG] Start token request validation
2019-02-16 15:14:49.954 -02:00 [DBG] Start client credentials token request validation
2019-02-16 15:14:49.954 -02:00 [DBG] MVC credentials token request validation success
2019-02-16 15:14:49.954 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-16 15:14:49.954 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-16 15:14:49.960 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****0Zbg"
    }
  ],
  "ActivityId": "0HLKK670MEI3O:00000015",
  "TimeStamp": "2019-02-16T17:14:49Z",
  "ProcessId": 19640,
  "LocalIpAddress": "127.0.0.1:17157",
  "RemoteIpAddress": "::1"
}
2019-02-16 15:14:49.960 -02:00 [DBG] Token request success.
2019-02-16 15:14:52.523 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-16 15:14:52.524 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-16 15:14:52.524 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-16 15:14:52.524 -02:00 [DBG] Start token request.
2019-02-16 15:14:52.524 -02:00 [DBG] Start client validation
2019-02-16 15:14:52.524 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-16 15:14:52.524 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-16 15:14:52.524 -02:00 [DBG] Secret id found: MVC
2019-02-16 15:14:52.524 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 15:14:52.524 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-16 15:14:52.524 -02:00 [DBG] Client validation success
2019-02-16 15:14:52.524 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKK670MEI3O:00000016",
  "TimeStamp": "2019-02-16T17:14:52Z",
  "ProcessId": 19640,
  "LocalIpAddress": "127.0.0.1:17157",
  "RemoteIpAddress": "::1"
}
2019-02-16 15:14:52.525 -02:00 [DBG] Start token request validation
2019-02-16 15:14:52.525 -02:00 [DBG] Start client credentials token request validation
2019-02-16 15:14:52.525 -02:00 [DBG] MVC credentials token request validation success
2019-02-16 15:14:52.525 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-16 15:14:52.525 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-16 15:14:52.531 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****ISuQ"
    }
  ],
  "ActivityId": "0HLKK670MEI3O:00000016",
  "TimeStamp": "2019-02-16T17:14:52Z",
  "ProcessId": 19640,
  "LocalIpAddress": "127.0.0.1:17157",
  "RemoteIpAddress": "::1"
}
2019-02-16 15:14:52.531 -02:00 [DBG] Token request success.
2019-02-16 15:14:53.066 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-16 15:14:53.066 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-16 15:14:53.066 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-16 15:14:53.067 -02:00 [DBG] Start token request.
2019-02-16 15:14:53.067 -02:00 [DBG] Start client validation
2019-02-16 15:14:53.067 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-16 15:14:53.067 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-16 15:14:53.067 -02:00 [DBG] Secret id found: MVC
2019-02-16 15:14:53.067 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 15:14:53.067 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-16 15:14:53.067 -02:00 [DBG] Client validation success
2019-02-16 15:14:53.068 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKK670MEI3O:00000017",
  "TimeStamp": "2019-02-16T17:14:53Z",
  "ProcessId": 19640,
  "LocalIpAddress": "127.0.0.1:17157",
  "RemoteIpAddress": "::1"
}
2019-02-16 15:14:53.068 -02:00 [DBG] Start token request validation
2019-02-16 15:14:53.068 -02:00 [DBG] Start client credentials token request validation
2019-02-16 15:14:53.068 -02:00 [DBG] MVC credentials token request validation success
2019-02-16 15:14:53.069 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-16 15:14:53.069 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-16 15:14:53.074 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****pdvA"
    }
  ],
  "ActivityId": "0HLKK670MEI3O:00000017",
  "TimeStamp": "2019-02-16T17:14:53Z",
  "ProcessId": 19640,
  "LocalIpAddress": "127.0.0.1:17157",
  "RemoteIpAddress": "::1"
}
2019-02-16 15:14:53.075 -02:00 [DBG] Token request success.
2019-02-16 15:14:57.197 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-16 15:14:57.197 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-16 15:14:57.198 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-16 15:14:57.198 -02:00 [DBG] Start token request.
2019-02-16 15:14:57.198 -02:00 [DBG] Start client validation
2019-02-16 15:14:57.198 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-16 15:14:57.198 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-16 15:14:57.198 -02:00 [DBG] Secret id found: MVC
2019-02-16 15:14:57.198 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 15:14:57.199 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-16 15:14:57.199 -02:00 [DBG] Client validation success
2019-02-16 15:14:57.199 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKK670MEI3O:00000019",
  "TimeStamp": "2019-02-16T17:14:57Z",
  "ProcessId": 19640,
  "LocalIpAddress": "127.0.0.1:17157",
  "RemoteIpAddress": "::1"
}
2019-02-16 15:14:57.201 -02:00 [DBG] Start token request validation
2019-02-16 15:14:57.201 -02:00 [DBG] Start client credentials token request validation
2019-02-16 15:14:57.201 -02:00 [DBG] MVC credentials token request validation success
2019-02-16 15:14:57.201 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-16 15:14:57.202 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-16 15:14:57.208 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****IBYw"
    }
  ],
  "ActivityId": "0HLKK670MEI3O:00000019",
  "TimeStamp": "2019-02-16T17:14:57Z",
  "ProcessId": 19640,
  "LocalIpAddress": "127.0.0.1:17157",
  "RemoteIpAddress": "::1"
}
2019-02-16 15:14:57.208 -02:00 [DBG] Token request success.
2019-02-16 15:14:58.413 -02:00 [WRN] Unhandled exception [1,"adf674d4-87fa-48f9-b4bf-77664165e750"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID adf674d4-87fa-48f9-b4bf-77664165e750 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-16 15:14:58.527 -02:00 [INF] Message received:
2019-02-16 15:14:58.527 -02:00 [INF] ----------------------------------
2019-02-16 15:14:58.535 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"3c60b28f-3fa7-473b-9679-8ba5287a70bb","CreationDate":"2019-02-16T17:14:58.4750299Z"}
2019-02-16 15:14:58.535 -02:00 [INF] ----------------------------------
2019-02-16 15:14:59.906 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens e2e7811e-1248-41a3-8e0c-e21cbbb22d9e to 1 handlers took 1389 ms
2019-02-16 16:15:26.286 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 16:15:27.669 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 16:15:27.804 -02:00 [INF] Setting number of workers to 1
2019-02-16 16:15:27.827 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 16:15:27.929 -02:00 [INF] Bus Rebus 1 started
2019-02-16 16:15:28.009 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 16:15:28.110 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 16:15:35.747 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 16:15:36.399 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 16:15:36.423 -02:00 [INF] Setting number of workers to 1
2019-02-16 16:15:36.425 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 16:15:36.469 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 16:15:36.483 -02:00 [INF] Bus Rebus 1 started
2019-02-16 16:15:36.710 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 16:15:36.777 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 16:15:36.795 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 16:15:36.795 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 16:15:36.795 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 16:15:36.795 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 16:15:36.796 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 16:16:06.647 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 16:16:07.940 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 16:16:08.146 -02:00 [INF] Setting number of workers to 1
2019-02-16 16:16:08.188 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 16:16:08.311 -02:00 [INF] Bus Rebus 1 started
2019-02-16 16:16:08.334 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 16:16:08.524 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 16:16:08.570 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 16:16:08.601 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 16:16:08.601 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 16:16:08.601 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 16:16:08.601 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 16:16:08.601 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 16:21:13.199 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-16 16:21:13.214 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-16 16:21:13.214 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-16 16:21:13.223 -02:00 [DBG] Start discovery request
2019-02-16 16:21:13.399 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-16 16:21:13.412 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-16 16:21:13.412 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-16 16:21:13.424 -02:00 [DBG] Start key discovery request
2019-02-16 16:21:13.649 -02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-16 16:21:13.666 -02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-16 16:21:13.666 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-16 16:21:13.676 -02:00 [DBG] Start authorize request
2019-02-16 16:21:13.696 -02:00 [DBG] No user present in authorize request
2019-02-16 16:21:13.703 -02:00 [DBG] Start authorize request protocol validation
2019-02-16 16:21:13.725 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 16:21:13.736 -02:00 [DBG] Checking for PKCE parameters
2019-02-16 16:21:13.739 -02:00 [DBG] No PKCE used.
2019-02-16 16:21:13.797 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-16 16:21:13.822 -02:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBK8zpwSiuwBvqOAVQ83Lak9cQst-4R-OcJBVt2wdixWSgnjbz7WIPPN28q9QaMN9oalQJpOBaiziSGLpwR9F9pwroi6ofNSPgyeCiX-GcaZWLG-QvNOXWLhNQfANlXIb8MglebsUkbEbhD37gGuZJ3OmHMtNT95Nka_jhhL7qjGHborr3-SugUE8IVGu1YHMDhN6udETjaW-n88Cd0m584wTCml9jJjdfi-8qRrjItns4aaLBBzpKcOwUgDMxBp7gRlU9uIXQIYEGCZk7kd-dqfqDaCkr0tFaTszc2A3GLB-qSGeOyjb9qaVu9h3zyNC3A",
  "Nonce": "636859380735685620.YWE5NzM5ZDUtMTlhMS00OTM4LTg2YTMtZjIxNDNkZjQ4OGJhN2I1MzIyMjYtNGUyZS00ODhjLWI4ZDQtZGZlMjE5YjYyYmFi",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636859380735685620.YWE5NzM5ZDUtMTlhMS00OTM4LTg2YTMtZjIxNDNkZjQ4OGJhN2I1MzIyMjYtNGUyZS00ODhjLWI4ZDQtZGZlMjE5YjYyYmFi",
    "state": "CfDJ8AKuQyyLPltLkoBKRsSnJBK8zpwSiuwBvqOAVQ83Lak9cQst-4R-OcJBVt2wdixWSgnjbz7WIPPN28q9QaMN9oalQJpOBaiziSGLpwR9F9pwroi6ofNSPgyeCiX-GcaZWLG-QvNOXWLhNQfANlXIb8MglebsUkbEbhD37gGuZJ3OmHMtNT95Nka_jhhL7qjGHborr3-SugUE8IVGu1YHMDhN6udETjaW-n88Cd0m584wTCml9jJjdfi-8qRrjItns4aaLBBzpKcOwUgDMxBp7gRlU9uIXQIYEGCZk7kd-dqfqDaCkr0tFaTszc2A3GLB-qSGeOyjb9qaVu9h3zyNC3A",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-02-16 16:21:13.841 -02:00 [INF] Showing login: User is not authenticated
2019-02-16 16:21:14.174 -02:00 [DBG] Start authorize request protocol validation
2019-02-16 16:21:14.175 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 16:21:14.175 -02:00 [DBG] Checking for PKCE parameters
2019-02-16 16:21:14.175 -02:00 [DBG] No PKCE used.
2019-02-16 16:21:14.177 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-16 16:21:14.185 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 16:21:17.600 -02:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-16 16:21:18.059 -02:00 [DBG] Augmenting SignInContext
2019-02-16 16:21:18.064 -02:00 [DBG] Adding idp claim with value: local
2019-02-16 16:21:18.065 -02:00 [DBG] Adding amr claim with value: pwd
2019-02-16 16:21:18.065 -02:00 [DBG] Adding auth_time claim with value: 1550341278
2019-02-16 16:21:18.095 -02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-16 16:21:18.126 -02:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLKK7B9NQB8A:00000002",
  "TimeStamp": "2019-02-16T18:21:18Z",
  "ProcessId": 3464,
  "LocalIpAddress": "127.0.0.1:13382",
  "RemoteIpAddress": "::1"
}
2019-02-16 16:21:18.158 -02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-16 16:21:18.159 -02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-16 16:21:18.159 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-16 16:21:18.169 -02:00 [DBG] Start authorize callback request
2019-02-16 16:21:18.177 -02:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-16 16:21:18.177 -02:00 [DBG] Start authorize request protocol validation
2019-02-16 16:21:18.177 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 16:21:18.177 -02:00 [DBG] Checking for PKCE parameters
2019-02-16 16:21:18.177 -02:00 [DBG] No PKCE used.
2019-02-16 16:21:18.178 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-16 16:21:18.178 -02:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBK8zpwSiuwBvqOAVQ83Lak9cQst-4R-OcJBVt2wdixWSgnjbz7WIPPN28q9QaMN9oalQJpOBaiziSGLpwR9F9pwroi6ofNSPgyeCiX-GcaZWLG-QvNOXWLhNQfANlXIb8MglebsUkbEbhD37gGuZJ3OmHMtNT95Nka_jhhL7qjGHborr3-SugUE8IVGu1YHMDhN6udETjaW-n88Cd0m584wTCml9jJjdfi-8qRrjItns4aaLBBzpKcOwUgDMxBp7gRlU9uIXQIYEGCZk7kd-dqfqDaCkr0tFaTszc2A3GLB-qSGeOyjb9qaVu9h3zyNC3A",
  "Nonce": "636859380735685620.YWE5NzM5ZDUtMTlhMS00OTM4LTg2YTMtZjIxNDNkZjQ4OGJhN2I1MzIyMjYtNGUyZS00ODhjLWI4ZDQtZGZlMjE5YjYyYmFi",
  "SessionId": "b9218f29934cafee4f660301ec8e3539",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636859380735685620.YWE5NzM5ZDUtMTlhMS00OTM4LTg2YTMtZjIxNDNkZjQ4OGJhN2I1MzIyMjYtNGUyZS00ODhjLWI4ZDQtZGZlMjE5YjYyYmFi",
    "state": "CfDJ8AKuQyyLPltLkoBKRsSnJBK8zpwSiuwBvqOAVQ83Lak9cQst-4R-OcJBVt2wdixWSgnjbz7WIPPN28q9QaMN9oalQJpOBaiziSGLpwR9F9pwroi6ofNSPgyeCiX-GcaZWLG-QvNOXWLhNQfANlXIb8MglebsUkbEbhD37gGuZJ3OmHMtNT95Nka_jhhL7qjGHborr3-SugUE8IVGu1YHMDhN6udETjaW-n88Cd0m584wTCml9jJjdfi-8qRrjItns4aaLBBzpKcOwUgDMxBp7gRlU9uIXQIYEGCZk7kd-dqfqDaCkr0tFaTszc2A3GLB-qSGeOyjb9qaVu9h3zyNC3A",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-02-16 16:21:18.490 -02:00 [DBG] Client is configured to not require consent, no consent is required
2019-02-16 16:21:18.502 -02:00 [DBG] Creating Hybrid Flow response.
2019-02-16 16:21:18.580 -02:00 [DBG] Creating Implicit Flow response.
2019-02-16 16:21:18.610 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-16 16:21:18.914 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****0rMg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****a6ab"
    }
  ],
  "ActivityId": "0HLKK7B9NQB8B:00000002",
  "TimeStamp": "2019-02-16T18:21:18Z",
  "ProcessId": 3464,
  "LocalIpAddress": "127.0.0.1:13382",
  "RemoteIpAddress": "::1"
}
2019-02-16 16:21:18.928 -02:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBK8zpwSiuwBvqOAVQ83Lak9cQst-4R-OcJBVt2wdixWSgnjbz7WIPPN28q9QaMN9oalQJpOBaiziSGLpwR9F9pwroi6ofNSPgyeCiX-GcaZWLG-QvNOXWLhNQfANlXIb8MglebsUkbEbhD37gGuZJ3OmHMtNT95Nka_jhhL7qjGHborr3-SugUE8IVGu1YHMDhN6udETjaW-n88Cd0m584wTCml9jJjdfi-8qRrjItns4aaLBBzpKcOwUgDMxBp7gRlU9uIXQIYEGCZk7kd-dqfqDaCkr0tFaTszc2A3GLB-qSGeOyjb9qaVu9h3zyNC3A",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-02-16 16:21:18.963 -02:00 [DBG] Augmenting SignInContext
2019-02-16 16:21:18.963 -02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-16 16:21:19.406 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-16 16:21:19.414 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-16 16:21:19.414 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-16 16:21:19.430 -02:00 [DBG] Start token request.
2019-02-16 16:21:19.437 -02:00 [DBG] Start client validation
2019-02-16 16:21:19.446 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-16 16:21:19.451 -02:00 [DBG] Start parsing for secret in post body
2019-02-16 16:21:19.452 -02:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-16 16:21:19.452 -02:00 [DBG] Secret id found: MVC
2019-02-16 16:21:19.452 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 16:21:19.469 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-16 16:21:19.469 -02:00 [DBG] Client validation success
2019-02-16 16:21:19.477 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKK7B9NQB89:00000002",
  "TimeStamp": "2019-02-16T18:21:19Z",
  "ProcessId": 3464,
  "LocalIpAddress": "127.0.0.1:13382",
  "RemoteIpAddress": "::1"
}
2019-02-16 16:21:19.487 -02:00 [DBG] Start token request validation
2019-02-16 16:21:19.509 -02:00 [DBG] Start validation of authorization code token request
2019-02-16 16:21:19.551 -02:00 [DBG] Validation of authorization code token request success
2019-02-16 16:21:19.561 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "479cb5084a9e9a88c201c672d874eca96060e32d6de0a367eb929b5e43aca6ab",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "479cb5084a9e9a88c201c672d874eca96060e32d6de0a367eb929b5e43aca6ab",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-02-16 16:21:19.593 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 16:21:19.611 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-16 16:21:19.612 -02:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-16 16:21:19.631 -02:00 [DBG] Creating refresh token
2019-02-16 16:21:19.631 -02:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-16 16:21:19.647 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 16:21:19.647 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-16 16:21:19.659 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****eAaQ"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****cc9a"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****8PMw"
    }
  ],
  "ActivityId": "0HLKK7B9NQB89:00000002",
  "TimeStamp": "2019-02-16T18:21:19Z",
  "ProcessId": 3464,
  "LocalIpAddress": "127.0.0.1:13382",
  "RemoteIpAddress": "::1"
}
2019-02-16 16:21:19.662 -02:00 [DBG] Token request success.
2019-02-16 16:21:19.715 -02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-16 16:21:19.720 -02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-16 16:21:19.720 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-16 16:21:19.731 -02:00 [DBG] Start userinfo request
2019-02-16 16:21:19.737 -02:00 [DBG] Bearer token found in header
2019-02-16 16:21:19.772 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 16:21:19.777 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 16:21:19.778 -02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-16 16:21:19.784 -02:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1550341279,
    "exp": 1550344879,
    "iss": "http://localhost:5105",
    "aud": [
      "http://localhost:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1550341278,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Galvão",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-02-16 16:21:19.799 -02:00 [DBG] Creating userinfo response
2019-02-16 16:21:19.813 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-16 16:21:19.820 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-16 16:21:19.828 -02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-02-16 16:21:19.828 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-16 16:21:19.841 -02:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-02-16 16:21:19.841 -02:00 [DBG] End userinfo request
2019-02-16 16:21:20.338 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-16 16:21:20.340 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-16 16:21:20.341 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-16 16:21:20.341 -02:00 [DBG] Start token request.
2019-02-16 16:21:20.341 -02:00 [DBG] Start client validation
2019-02-16 16:21:20.342 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-16 16:21:20.343 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-16 16:21:20.343 -02:00 [DBG] Secret id found: MVC
2019-02-16 16:21:20.344 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 16:21:20.344 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-16 16:21:20.344 -02:00 [DBG] Client validation success
2019-02-16 16:21:20.344 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKK7B9NQB88:00000003",
  "TimeStamp": "2019-02-16T18:21:20Z",
  "ProcessId": 3464,
  "LocalIpAddress": "127.0.0.1:13382",
  "RemoteIpAddress": "::1"
}
2019-02-16 16:21:20.345 -02:00 [DBG] Start token request validation
2019-02-16 16:21:20.353 -02:00 [DBG] Start client credentials token request validation
2019-02-16 16:21:20.362 -02:00 [DBG] MVC credentials token request validation success
2019-02-16 16:21:20.362 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-16 16:21:20.368 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-16 16:21:20.375 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****rlSg"
    }
  ],
  "ActivityId": "0HLKK7B9NQB88:00000003",
  "TimeStamp": "2019-02-16T18:21:20Z",
  "ProcessId": 3464,
  "LocalIpAddress": "127.0.0.1:13382",
  "RemoteIpAddress": "::1"
}
2019-02-16 16:21:20.375 -02:00 [DBG] Token request success.
2019-02-16 16:21:20.765 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-16 16:21:20.765 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-16 16:21:20.766 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-16 16:21:20.766 -02:00 [DBG] Start discovery request
2019-02-16 16:21:21.003 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-16 16:21:21.004 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-16 16:21:21.004 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-16 16:21:21.004 -02:00 [DBG] Start key discovery request
2019-02-16 16:37:25.352 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-16 16:37:25.353 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-16 16:37:25.353 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-16 16:37:25.353 -02:00 [DBG] Start token request.
2019-02-16 16:37:25.353 -02:00 [DBG] Start client validation
2019-02-16 16:37:25.353 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-16 16:37:25.353 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-16 16:37:25.353 -02:00 [DBG] Secret id found: MVC
2019-02-16 16:37:25.353 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 16:37:25.354 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-16 16:37:25.354 -02:00 [DBG] Client validation success
2019-02-16 16:37:25.354 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKK7B9NQB89:00000015",
  "TimeStamp": "2019-02-16T18:37:25Z",
  "ProcessId": 3464,
  "LocalIpAddress": "127.0.0.1:13382",
  "RemoteIpAddress": "::1"
}
2019-02-16 16:37:25.354 -02:00 [DBG] Start token request validation
2019-02-16 16:37:25.354 -02:00 [DBG] Start client credentials token request validation
2019-02-16 16:37:25.355 -02:00 [DBG] MVC credentials token request validation success
2019-02-16 16:37:25.355 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-16 16:37:25.355 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-16 16:37:25.361 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****teLw"
    }
  ],
  "ActivityId": "0HLKK7B9NQB89:00000015",
  "TimeStamp": "2019-02-16T18:37:25Z",
  "ProcessId": 3464,
  "LocalIpAddress": "127.0.0.1:13382",
  "RemoteIpAddress": "::1"
}
2019-02-16 16:37:25.361 -02:00 [DBG] Token request success.
2019-02-16 16:37:29.704 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-16 16:37:29.704 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-16 16:37:29.705 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-16 16:37:29.705 -02:00 [DBG] Start token request.
2019-02-16 16:37:29.705 -02:00 [DBG] Start client validation
2019-02-16 16:37:29.705 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-16 16:37:29.706 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-16 16:37:29.706 -02:00 [DBG] Secret id found: MVC
2019-02-16 16:37:29.706 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 16:37:29.706 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-16 16:37:29.706 -02:00 [DBG] Client validation success
2019-02-16 16:37:29.706 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKK7B9NQB88:00000016",
  "TimeStamp": "2019-02-16T18:37:29Z",
  "ProcessId": 3464,
  "LocalIpAddress": "127.0.0.1:13382",
  "RemoteIpAddress": "::1"
}
2019-02-16 16:37:29.742 -02:00 [DBG] Start token request validation
2019-02-16 16:37:29.742 -02:00 [DBG] Start client credentials token request validation
2019-02-16 16:37:29.742 -02:00 [DBG] MVC credentials token request validation success
2019-02-16 16:37:29.742 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-16 16:37:29.743 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-16 16:37:29.748 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****4veg"
    }
  ],
  "ActivityId": "0HLKK7B9NQB88:00000016",
  "TimeStamp": "2019-02-16T18:37:29Z",
  "ProcessId": 3464,
  "LocalIpAddress": "127.0.0.1:13382",
  "RemoteIpAddress": "::1"
}
2019-02-16 16:37:29.748 -02:00 [DBG] Token request success.
2019-02-16 16:37:30.574 -02:00 [WRN] Unhandled exception [1,"24eddf4d-e05e-414e-9104-a83e1377da32"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID 24eddf4d-e05e-414e-9104-a83e1377da32 and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-16 16:37:30.629 -02:00 [INF] Message received:
2019-02-16 16:37:30.631 -02:00 [INF] ----------------------------------
2019-02-16 16:37:30.646 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"0f8ffa72-e0e5-4e3b-b953-e1e009b33989","CreationDate":"2019-02-16T18:37:30.606605Z"}
2019-02-16 16:37:30.647 -02:00 [INF] ----------------------------------
2019-02-16 16:37:31.275 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 7bae76ab-9ce1-4080-8cfb-9f973929c8f0 to 1 handlers took 653 ms
2019-02-16 17:03:02.083 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 17:03:02.940 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 17:03:02.992 -02:00 [INF] Setting number of workers to 1
2019-02-16 17:03:02.995 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 17:03:03.058 -02:00 [INF] Bus Rebus 1 started
2019-02-16 17:03:03.059 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 17:03:03.144 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 17:03:03.151 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 17:03:03.208 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 17:03:03.208 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 17:03:03.208 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 17:03:03.208 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 17:03:03.209 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 17:03:36.857 -02:00 [INF] Setting number of workers to 0
2019-02-16 17:03:36.860 -02:00 [DBG] Removing worker Rebus 1 worker 1
2019-02-16 17:03:37.202 -02:00 [DBG] Worker Rebus 1 worker 1 stopped
2019-02-16 17:03:37.207 -02:00 [INF] Stopping periodic task CleanupTrackedErrors
2019-02-16 17:03:37.211 -02:00 [INF] Disposing RabbitMQ connection
2019-02-16 17:03:37.238 -02:00 [INF] Bus Rebus 1 stopped
2019-02-16 17:04:01.711 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 17:04:02.323 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 17:04:02.361 -02:00 [INF] Setting number of workers to 1
2019-02-16 17:04:02.370 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 17:04:02.394 -02:00 [INF] Bus Rebus 1 started
2019-02-16 17:04:02.408 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 17:04:02.462 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 17:04:02.529 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 17:04:02.554 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 17:04:02.555 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 17:04:02.555 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 17:04:02.555 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 17:04:02.555 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 17:13:25.310 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 17:13:27.726 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 17:13:27.929 -02:00 [INF] Setting number of workers to 1
2019-02-16 17:13:28.042 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 17:13:28.175 -02:00 [INF] Bus Rebus 1 started
2019-02-16 17:13:28.286 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 17:13:28.464 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 17:13:28.671 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 17:13:28.717 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 17:13:28.722 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 17:13:28.726 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 17:13:28.727 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 17:13:28.728 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 17:15:17.684 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-16 17:15:17.701 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-16 17:15:17.702 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-16 17:15:17.712 -02:00 [DBG] Start discovery request
2019-02-16 17:15:17.892 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-16 17:15:17.895 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-16 17:15:17.895 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-16 17:15:17.912 -02:00 [DBG] Start key discovery request
2019-02-16 17:15:18.064 -02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-16 17:15:18.077 -02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-16 17:15:18.078 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-16 17:15:18.085 -02:00 [DBG] Start authorize request
2019-02-16 17:15:18.106 -02:00 [DBG] No user present in authorize request
2019-02-16 17:15:18.115 -02:00 [DBG] Start authorize request protocol validation
2019-02-16 17:15:18.134 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 17:15:18.145 -02:00 [DBG] Checking for PKCE parameters
2019-02-16 17:15:18.148 -02:00 [DBG] No PKCE used.
2019-02-16 17:15:18.224 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-16 17:15:18.263 -02:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBIIDYAFauIv1JHf4Yw4wpijatnQTGSi2A9awf_5zssQenfcfoilVBbLMhfcGfeRhQ0F4szu1U9Udt122iSFbPfmoIFeyyrWv-dBBQhclLa9r5F4PbcjlxbG5GxGx1Gm39H6U6Mo0rH0tqtqUj2836I9nGPhyfHT-7yedm96rNiX19WvW4PA13T32z-acAPpNxpyCKcjOj_s55Kz5_mFLK1Ihy4RSqf82PsJQ0jlOSd8ptYHvAHFrOCSO75V5qcH-XWZL-0xw3WaRkPwDCL6n3og-LbMJBOIj-zZxOEi1W5rh7pO_2Y1ajISHF5cIPEt4dA",
  "Nonce": "636859413180175833.ZTc3NDRlN2MtODA2ZC00NjJlLTk0ODktMmJlZjMyNGExYjZjZjIzYjlmOWYtYzVkZC00ZTUwLWFhNTAtODhlYWI3YTk0OWY1",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636859413180175833.ZTc3NDRlN2MtODA2ZC00NjJlLTk0ODktMmJlZjMyNGExYjZjZjIzYjlmOWYtYzVkZC00ZTUwLWFhNTAtODhlYWI3YTk0OWY1",
    "state": "CfDJ8AKuQyyLPltLkoBKRsSnJBIIDYAFauIv1JHf4Yw4wpijatnQTGSi2A9awf_5zssQenfcfoilVBbLMhfcGfeRhQ0F4szu1U9Udt122iSFbPfmoIFeyyrWv-dBBQhclLa9r5F4PbcjlxbG5GxGx1Gm39H6U6Mo0rH0tqtqUj2836I9nGPhyfHT-7yedm96rNiX19WvW4PA13T32z-acAPpNxpyCKcjOj_s55Kz5_mFLK1Ihy4RSqf82PsJQ0jlOSd8ptYHvAHFrOCSO75V5qcH-XWZL-0xw3WaRkPwDCL6n3og-LbMJBOIj-zZxOEi1W5rh7pO_2Y1ajISHF5cIPEt4dA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-02-16 17:15:18.284 -02:00 [INF] Showing login: User is not authenticated
2019-02-16 17:15:18.819 -02:00 [DBG] Start authorize request protocol validation
2019-02-16 17:15:18.820 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 17:15:18.820 -02:00 [DBG] Checking for PKCE parameters
2019-02-16 17:15:18.820 -02:00 [DBG] No PKCE used.
2019-02-16 17:15:18.820 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-16 17:15:18.827 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 17:15:22.651 -02:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-16 17:15:23.040 -02:00 [DBG] Augmenting SignInContext
2019-02-16 17:15:23.046 -02:00 [DBG] Adding idp claim with value: local
2019-02-16 17:15:23.046 -02:00 [DBG] Adding amr claim with value: pwd
2019-02-16 17:15:23.048 -02:00 [DBG] Adding auth_time claim with value: 1550344523
2019-02-16 17:15:23.071 -02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-16 17:15:23.093 -02:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLKK8BB7JEQO:00000002",
  "TimeStamp": "2019-02-16T19:15:23Z",
  "ProcessId": 4636,
  "LocalIpAddress": "127.0.0.1:38405",
  "RemoteIpAddress": "::1"
}
2019-02-16 17:15:23.122 -02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-16 17:15:23.123 -02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-16 17:15:23.124 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-16 17:15:23.134 -02:00 [DBG] Start authorize callback request
2019-02-16 17:15:23.145 -02:00 [DBG] User in authorize request: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-16 17:15:23.145 -02:00 [DBG] Start authorize request protocol validation
2019-02-16 17:15:23.145 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 17:15:23.146 -02:00 [DBG] Checking for PKCE parameters
2019-02-16 17:15:23.146 -02:00 [DBG] No PKCE used.
2019-02-16 17:15:23.146 -02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-16 17:15:23.146 -02:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5100/signin-oidc"
  ],
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBIIDYAFauIv1JHf4Yw4wpijatnQTGSi2A9awf_5zssQenfcfoilVBbLMhfcGfeRhQ0F4szu1U9Udt122iSFbPfmoIFeyyrWv-dBBQhclLa9r5F4PbcjlxbG5GxGx1Gm39H6U6Mo0rH0tqtqUj2836I9nGPhyfHT-7yedm96rNiX19WvW4PA13T32z-acAPpNxpyCKcjOj_s55Kz5_mFLK1Ihy4RSqf82PsJQ0jlOSd8ptYHvAHFrOCSO75V5qcH-XWZL-0xw3WaRkPwDCL6n3og-LbMJBOIj-zZxOEi1W5rh7pO_2Y1ajISHF5cIPEt4dA",
  "Nonce": "636859413180175833.ZTc3NDRlN2MtODA2ZC00NjJlLTk0ODktMmJlZjMyNGExYjZjZjIzYjlmOWYtYzVkZC00ZTUwLWFhNTAtODhlYWI3YTk0OWY1",
  "SessionId": "94cf086393ed724f58ca1f102f4f4c0c",
  "Raw": {
    "client_id": "MVC",
    "redirect_uri": "http://localhost:5100/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
    "response_mode": "form_post",
    "nonce": "636859413180175833.ZTc3NDRlN2MtODA2ZC00NjJlLTk0ODktMmJlZjMyNGExYjZjZjIzYjlmOWYtYzVkZC00ZTUwLWFhNTAtODhlYWI3YTk0OWY1",
    "state": "CfDJ8AKuQyyLPltLkoBKRsSnJBIIDYAFauIv1JHf4Yw4wpijatnQTGSi2A9awf_5zssQenfcfoilVBbLMhfcGfeRhQ0F4szu1U9Udt122iSFbPfmoIFeyyrWv-dBBQhclLa9r5F4PbcjlxbG5GxGx1Gm39H6U6Mo0rH0tqtqUj2836I9nGPhyfHT-7yedm96rNiX19WvW4PA13T32z-acAPpNxpyCKcjOj_s55Kz5_mFLK1Ihy4RSqf82PsJQ0jlOSd8ptYHvAHFrOCSO75V5qcH-XWZL-0xw3WaRkPwDCL6n3og-LbMJBOIj-zZxOEi1W5rh7pO_2Y1ajISHF5cIPEt4dA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2019-02-16 17:15:23.174 -02:00 [DBG] Client is configured to not require consent, no consent is required
2019-02-16 17:15:23.185 -02:00 [DBG] Creating Hybrid Flow response.
2019-02-16 17:15:23.257 -02:00 [DBG] Creating Implicit Flow response.
2019-02-16 17:15:23.282 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-16 17:15:23.484 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****kHKg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****b8b3"
    }
  ],
  "ActivityId": "0HLKK8BB7JEQN:0000000D",
  "TimeStamp": "2019-02-16T19:15:23Z",
  "ProcessId": 4636,
  "LocalIpAddress": "127.0.0.1:38405",
  "RemoteIpAddress": "::1"
}
2019-02-16 17:15:23.498 -02:00 [INF] Authorize endpoint response
{
  "SubjectId": "173f964f-1eb9-43cf-91c7-df753717c16c",
  "ClientId": "MVC",
  "RedirectUri": "http://localhost:5100/signin-oidc",
  "State": "CfDJ8AKuQyyLPltLkoBKRsSnJBIIDYAFauIv1JHf4Yw4wpijatnQTGSi2A9awf_5zssQenfcfoilVBbLMhfcGfeRhQ0F4szu1U9Udt122iSFbPfmoIFeyyrWv-dBBQhclLa9r5F4PbcjlxbG5GxGx1Gm39H6U6Mo0rH0tqtqUj2836I9nGPhyfHT-7yedm96rNiX19WvW4PA13T32z-acAPpNxpyCKcjOj_s55Kz5_mFLK1Ihy4RSqf82PsJQ0jlOSd8ptYHvAHFrOCSO75V5qcH-XWZL-0xw3WaRkPwDCL6n3og-LbMJBOIj-zZxOEi1W5rh7pO_2Y1ajISHF5cIPEt4dA",
  "Scope": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access"
}
2019-02-16 17:15:23.557 -02:00 [DBG] Augmenting SignInContext
2019-02-16 17:15:23.559 -02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-16 17:15:24.171 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-16 17:15:24.179 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-16 17:15:24.179 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-16 17:15:24.195 -02:00 [DBG] Start token request.
2019-02-16 17:15:24.208 -02:00 [DBG] Start client validation
2019-02-16 17:15:24.220 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-16 17:15:24.231 -02:00 [DBG] Start parsing for secret in post body
2019-02-16 17:15:24.233 -02:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-16 17:15:24.233 -02:00 [DBG] Secret id found: MVC
2019-02-16 17:15:24.233 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 17:15:24.260 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-16 17:15:24.260 -02:00 [DBG] Client validation success
2019-02-16 17:15:24.268 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKK8BB7JEQO:00000003",
  "TimeStamp": "2019-02-16T19:15:24Z",
  "ProcessId": 4636,
  "LocalIpAddress": "127.0.0.1:38405",
  "RemoteIpAddress": "::1"
}
2019-02-16 17:15:24.287 -02:00 [DBG] Start token request validation
2019-02-16 17:15:24.309 -02:00 [DBG] Start validation of authorization code token request
2019-02-16 17:15:24.348 -02:00 [DBG] Validation of authorization code token request success
2019-02-16 17:15:24.359 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "authorization_code",
  "AuthorizationCode": "224dbab1b6c3167ec1f9c265cda4640ae252ff57aa3d36ea7f2f20ff46fab8b3",
  "Raw": {
    "client_id": "MVC",
    "client_secret": "***REDACTED***",
    "code": "224dbab1b6c3167ec1f9c265cda4640ae252ff57aa3d36ea7f2f20ff46fab8b3",
    "grant_type": "authorization_code",
    "redirect_uri": "http://localhost:5100/signin-oidc"
  }
}
2019-02-16 17:15:24.386 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 17:15:24.402 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-16 17:15:24.405 -02:00 [DBG] Getting claims for access token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c
2019-02-16 17:15:24.424 -02:00 [DBG] Creating refresh token
2019-02-16 17:15:24.424 -02:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-16 17:15:24.448 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 17:15:24.448 -02:00 [DBG] Getting claims for identity token for subject: 173f964f-1eb9-43cf-91c7-df753717c16c and client: MVC
2019-02-16 17:15:24.464 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "openid profile Basket.API Ordering.API CasaDoCodigo.API offline_access",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****EHeg"
    },
    {
      "TokenType": "refresh_token",
      "TokenValue": "****5b7e"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****AdGA"
    }
  ],
  "ActivityId": "0HLKK8BB7JEQO:00000003",
  "TimeStamp": "2019-02-16T19:15:24Z",
  "ProcessId": 4636,
  "LocalIpAddress": "127.0.0.1:38405",
  "RemoteIpAddress": "::1"
}
2019-02-16 17:15:24.466 -02:00 [DBG] Token request success.
2019-02-16 17:15:24.523 -02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-16 17:15:24.525 -02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-16 17:15:24.525 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-16 17:15:24.540 -02:00 [DBG] Start userinfo request
2019-02-16 17:15:24.548 -02:00 [DBG] Bearer token found in header
2019-02-16 17:15:24.599 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 17:15:24.607 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 17:15:24.608 -02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-16 17:15:24.615 -02:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1550344524,
    "exp": 1550348124,
    "iss": "http://localhost:5105",
    "aud": [
      "http://localhost:5105/resources",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API"
    ],
    "client_id": "MVC",
    "sub": "173f964f-1eb9-43cf-91c7-df753717c16c",
    "auth_time": 1550344523,
    "idp": "local",
    "name": "Alice Smith",
    "email": "alice@asp.net",
    "phone": "1234-5678",
    "address": "Rua Vergueiro, 456",
    "address_details": "8 andar sala 801",
    "neighborhood": "Vila Galvão",
    "city": "São Paulo",
    "state": "SP",
    "zip_code": "69118",
    "scope": [
      "openid",
      "profile",
      "Basket.API",
      "CasaDoCodigo.API",
      "Ordering.API",
      "offline_access"
    ],
    "amr": "pwd"
  }
}
2019-02-16 17:15:24.630 -02:00 [DBG] Creating userinfo response
2019-02-16 17:15:24.639 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-16 17:15:24.646 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-16 17:15:24.655 -02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-02-16 17:15:24.655 -02:00 [DBG] Scopes in access token: openid profile Basket.API CasaDoCodigo.API Ordering.API offline_access
2019-02-16 17:15:24.662 -02:00 [INF] Profile service returned to the following claim types: name email phone address address_details neighborhood city state zip_code
2019-02-16 17:15:24.663 -02:00 [DBG] End userinfo request
2019-02-16 17:15:25.210 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-16 17:15:25.211 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-16 17:15:25.212 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-16 17:15:25.212 -02:00 [DBG] Start token request.
2019-02-16 17:15:25.212 -02:00 [DBG] Start client validation
2019-02-16 17:15:25.212 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-16 17:15:25.213 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-16 17:15:25.213 -02:00 [DBG] Secret id found: MVC
2019-02-16 17:15:25.213 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 17:15:25.213 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-16 17:15:25.213 -02:00 [DBG] Client validation success
2019-02-16 17:15:25.213 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKK8BB7JEQO:00000004",
  "TimeStamp": "2019-02-16T19:15:25Z",
  "ProcessId": 4636,
  "LocalIpAddress": "127.0.0.1:38405",
  "RemoteIpAddress": "::1"
}
2019-02-16 17:15:25.214 -02:00 [DBG] Start token request validation
2019-02-16 17:15:25.224 -02:00 [DBG] Start client credentials token request validation
2019-02-16 17:15:25.231 -02:00 [DBG] MVC credentials token request validation success
2019-02-16 17:15:25.232 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-16 17:15:25.241 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-16 17:15:25.247 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****XpNA"
    }
  ],
  "ActivityId": "0HLKK8BB7JEQO:00000004",
  "TimeStamp": "2019-02-16T19:15:25Z",
  "ProcessId": 4636,
  "LocalIpAddress": "127.0.0.1:38405",
  "RemoteIpAddress": "::1"
}
2019-02-16 17:15:25.247 -02:00 [DBG] Token request success.
2019-02-16 17:15:25.571 -02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-16 17:15:25.571 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-16 17:15:25.572 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-16 17:15:25.572 -02:00 [DBG] Start discovery request
2019-02-16 17:15:25.726 -02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-16 17:15:25.727 -02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-16 17:15:25.727 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-16 17:15:25.727 -02:00 [DBG] Start key discovery request
2019-02-16 17:15:38.402 -02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-16 17:15:38.403 -02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-16 17:15:38.403 -02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-16 17:15:38.403 -02:00 [DBG] Start token request.
2019-02-16 17:15:38.403 -02:00 [DBG] Start client validation
2019-02-16 17:15:38.403 -02:00 [DBG] Start parsing Basic Authentication secret
2019-02-16 17:15:38.404 -02:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-16 17:15:38.404 -02:00 [DBG] Secret id found: MVC
2019-02-16 17:15:38.404 -02:00 [DBG] client configuration validation for client MVC succeeded.
2019-02-16 17:15:38.404 -02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-16 17:15:38.404 -02:00 [DBG] Client validation success
2019-02-16 17:15:38.404 -02:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "MVC",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLKK8BB7JEQO:00000006",
  "TimeStamp": "2019-02-16T19:15:38Z",
  "ProcessId": 4636,
  "LocalIpAddress": "127.0.0.1:38405",
  "RemoteIpAddress": "::1"
}
2019-02-16 17:15:38.406 -02:00 [DBG] Start token request validation
2019-02-16 17:15:38.406 -02:00 [DBG] Start client credentials token request validation
2019-02-16 17:15:38.407 -02:00 [DBG] MVC credentials token request validation success
2019-02-16 17:15:38.407 -02:00 [INF] Token request validation success
{
  "ClientId": "MVC",
  "ClientName": "MVC",
  "GrantType": "client_credentials",
  "Scopes": "Basket.API",
  "Raw": {
    "grant_type": "client_credentials",
    "scope": "Basket.API"
  }
}
2019-02-16 17:15:38.407 -02:00 [DBG] Getting claims for access token for client: MVC
2019-02-16 17:15:38.415 -02:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "MVC",
  "ClientName": "MVC",
  "Endpoint": "Token",
  "Scopes": "Basket.API",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Lf0g"
    }
  ],
  "ActivityId": "0HLKK8BB7JEQO:00000006",
  "TimeStamp": "2019-02-16T19:15:38Z",
  "ProcessId": 4636,
  "LocalIpAddress": "127.0.0.1:38405",
  "RemoteIpAddress": "::1"
}
2019-02-16 17:15:38.416 -02:00 [DBG] Token request success.
2019-02-16 17:15:39.453 -02:00 [WRN] Unhandled exception [1,"ec46c70d-18b5-41a2-9a74-545afb3d616f"] (FINAL) while handling message with ID Rebus.Exceptions.MessageCouldNotBeDispatchedToAnyHandlersException: Message with ID ec46c70d-18b5-41a2-9a74-545afb3d616f and type CasaDoCodigo.Mensagens.Events.CheckoutEvent, CasaDoCodigo.Mensagens could not be dispatched to any handlers (and will not be retried under the default fail-fast settings)
   at Rebus.Pipeline.Receive.DispatchIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DispatchIncomingMessageStep.cs:line 64
   at Rebus.Sagas.LoadSagaDataStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Sagas\LoadSagaDataStep.cs:line 66
   at Rebus.Pipeline.Receive.ActivateHandlersStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\ActivateHandlersStep.cs:line 47
   at Rebus.Pipeline.Receive.HandleRoutingSlipsStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleRoutingSlipsStep.cs:line 42
   at Rebus.Pipeline.Receive.DeserializeIncomingMessageStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\DeserializeIncomingMessageStep.cs:line 34
   at Rebus.Pipeline.Receive.HandleDeferredMessagesStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Pipeline\Receive\HandleDeferredMessagesStep.cs:line 121
   at Rebus.Retry.FailFast.FailFastStep.Process(IncomingStepContext context, Func`1 next) in C:\projects-rebus\Rebus\Rebus\Retry\FailFast\FailFastStep.cs:line 41
   at Rebus.Retry.Simple.SimpleRetryStrategyStep.DispatchWithTrackerIdentifier(Func`1 next, String identifierToTrackMessageBy, ITransactionContext transactionContext, String messageId, String secondLevelMessageId) in C:\projects-rebus\Rebus\Rebus\Retry\Simple\SimpleRetryStrategyStep.cs:line 114
2019-02-16 17:15:39.551 -02:00 [INF] Message received:
2019-02-16 17:15:39.552 -02:00 [INF] ----------------------------------
2019-02-16 17:15:39.558 -02:00 [INF] {"UsuarioId":"173f964f-1eb9-43cf-91c7-df753717c16c","Nome":"Alice Smith","Email":"alice@asp.net","Telefone":"1234-5678","Endereco":"Rua Vergueiro, 456","Complemento":"8 andar sala 801","Bairro":"Vila Galvão","Municipio":"São Paulo","UF":"SP","CEP":"69118","Id":"802cd179-6559-4b90-92fa-092f6423dcc4","CreationDate":"2019-02-16T19:15:39.51299Z"}
2019-02-16 17:15:39.558 -02:00 [INF] ----------------------------------
2019-02-16 17:15:40.414 -02:00 [DBG] Dispatching CasaDoCodigo.Mensagens.IntegrationEvents.Events.CadastroEvent, CasaDoCodigo.Mensagens 30703d08-791d-48d7-aa45-01ac2296730f to 1 handlers took 878 ms
2019-02-16 17:25:13.731 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 17:25:14.954 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 17:25:15.132 -02:00 [INF] Setting number of workers to 1
2019-02-16 17:25:15.193 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 17:25:15.249 -02:00 [INF] Bus Rebus 1 started
2019-02-16 17:25:15.266 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 17:25:15.359 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 17:25:15.509 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 17:25:15.563 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 17:25:15.565 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 17:25:15.566 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 17:25:15.566 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 17:25:15.566 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 17:27:27.071 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 17:27:28.191 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 17:27:28.253 -02:00 [INF] Setting number of workers to 1
2019-02-16 17:27:28.295 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 17:27:28.379 -02:00 [INF] Bus Rebus 1 started
2019-02-16 17:27:28.407 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 17:27:28.514 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 17:27:28.591 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 17:27:28.619 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 17:27:28.619 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 17:27:28.620 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 17:27:28.620 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 17:27:28.620 -02:00 [DBG] Using Identity.Application as default scheme for forbid
2019-02-16 17:32:06.089 -02:00 [INF] Initializing RabbitMQ connection manager for transport with input queue 'CadastroEvent'
2019-02-16 17:32:07.237 -02:00 [INF] Starting periodic task CleanupTrackedErrors with interval "00:00:10"
2019-02-16 17:32:07.310 -02:00 [INF] Setting number of workers to 1
2019-02-16 17:32:07.334 -02:00 [DBG] Adding worker Rebus 1 worker 1
2019-02-16 17:32:07.450 -02:00 [DBG] Starting (threadpool-based) worker Rebus 1 worker 1
2019-02-16 17:32:07.487 -02:00 [INF] Bus Rebus 1 started
2019-02-16 17:32:07.581 -02:00 [INF] Successfully initialized consumer for CadastroEvent
2019-02-16 17:32:07.695 -02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-16 17:32:07.730 -02:00 [DBG] Using Identity.Application as default scheme for authentication
2019-02-16 17:32:07.733 -02:00 [DBG] Using Identity.External as default scheme for sign-in
2019-02-16 17:32:07.734 -02:00 [DBG] Using Identity.External as default scheme for sign-out
2019-02-16 17:32:07.734 -02:00 [DBG] Using Identity.Application as default scheme for challenge
2019-02-16 17:32:07.734 -02:00 [DBG] Using Identity.Application as default scheme for forbid
